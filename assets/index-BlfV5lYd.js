const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DyPH1kx_.js","assets/if-defined-DALyQYMS.js","assets/index-Cq8KWKb4.js","assets/index-BcXgFzKO.js","assets/ref-D2yBwAob.js","assets/index-CPMxaprA.js","assets/index-BH_LKbX0.js","assets/index-DhDyPtyQ.js","assets/index-kKSHmIVL.js","assets/index-x4lET6h-.js","assets/index-D-6KofqW.js","assets/index-Cw0QSeRU.js","assets/email-CIBJ7BTN.js","assets/index-CNIRVokZ.js","assets/socials-nh0N4bX2.js","assets/index-D4uLcu_m.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BFGQUwdw.js","assets/index-BrUkfNVC.js","assets/index-_uGbepV3.js","assets/index-DXh9koq1.js","assets/swaps-B45oZT5C.js","assets/index-D2GVuYjD.js","assets/index-RTW1AHW9.js","assets/index-Bx_yN3q5.js","assets/send-DR5r27tx.js","assets/index-YXzCji8X.js","assets/index-BDtOb_74.js","assets/receive-Ca5XtzY6.js","assets/index-RoIw5WaU.js","assets/onramp-BHXbsMcD.js","assets/index-BvILyGDk.js","assets/index-DCEgvyZB.js","assets/index-zMcrvkJH.js","assets/transactions-CuOxufzx.js","assets/index--jViDc42.js","assets/index-BGwxjGso.js","assets/index-B0O6M6RZ.js","assets/index-C9wYo0Md.js","assets/index-dS_ej_b1.js","assets/w3m-modal-DIOP8Xa-.js"])))=>i.map(i=>d[i]);
var _k=t=>{throw TypeError(t)};var C1=(t,e,n)=>e.has(t)||_k("Cannot "+n);var F=(t,e,n)=>(C1(t,e,"read from private field"),n?n.call(t):e.get(t)),We=(t,e,n)=>e.has(t)?_k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),be=(t,e,n,r)=>(C1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),bt=(t,e,n)=>(C1(t,e,"access private method"),n);var X0=(t,e,n,r)=>({set _(s){be(t,e,s,n)},get _(){return F(t,e,r)}});function pq(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function x6(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var N6={exports:{}},AE={},T6={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw=Symbol.for("react.element"),mq=Symbol.for("react.portal"),gq=Symbol.for("react.fragment"),yq=Symbol.for("react.strict_mode"),wq=Symbol.for("react.profiler"),bq=Symbol.for("react.provider"),vq=Symbol.for("react.context"),_q=Symbol.for("react.forward_ref"),Eq=Symbol.for("react.suspense"),Cq=Symbol.for("react.memo"),Sq=Symbol.for("react.lazy"),Ek=Symbol.iterator;function Aq(t){return t===null||typeof t!="object"?null:(t=Ek&&t[Ek]||t["@@iterator"],typeof t=="function"?t:null)}var R6={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P6=Object.assign,O6={};function Yp(t,e,n){this.props=t,this.context=e,this.refs=O6,this.updater=n||R6}Yp.prototype.isReactComponent={};Yp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k6(){}k6.prototype=Yp.prototype;function ZT(t,e,n){this.props=t,this.context=e,this.refs=O6,this.updater=n||R6}var XT=ZT.prototype=new k6;XT.constructor=ZT;P6(XT,Yp.prototype);XT.isPureReactComponent=!0;var Ck=Array.isArray,D6=Object.prototype.hasOwnProperty,JT={current:null},$6={key:!0,ref:!0,__self:!0,__source:!0};function M6(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)D6.call(e,r)&&!$6.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Hw,type:t,key:i,ref:o,props:s,_owner:JT.current}}function Iq(t,e){return{$$typeof:Hw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eR(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hw}function xq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sk=/\/+/g;function S1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xq(""+t.key):e.toString(36)}function cv(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hw:case mq:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+S1(o,0):r,Ck(s)?(n="",t!=null&&(n=t.replace(Sk,"$&/")+"/"),cv(s,e,n,"",function(l){return l})):s!=null&&(eR(s)&&(s=Iq(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Sk,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ck(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+S1(i,a);o+=cv(i,e,n,c,s)}else if(c=Aq(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+S1(i,a++),o+=cv(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function J0(t,e,n){if(t==null)return t;var r=[],s=0;return cv(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Nq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cs={current:null},lv={transition:null},Tq={ReactCurrentDispatcher:Cs,ReactCurrentBatchConfig:lv,ReactCurrentOwner:JT};function L6(){throw Error("act(...) is not supported in production builds of React.")}xt.Children={map:J0,forEach:function(t,e,n){J0(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return J0(t,function(){e++}),e},toArray:function(t){return J0(t,function(e){return e})||[]},only:function(t){if(!eR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xt.Component=Yp;xt.Fragment=gq;xt.Profiler=wq;xt.PureComponent=ZT;xt.StrictMode=yq;xt.Suspense=Eq;xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tq;xt.act=L6;xt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=P6({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=JT.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)D6.call(e,c)&&!$6.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Hw,type:t.type,key:s,ref:i,props:r,_owner:o}};xt.createContext=function(t){return t={$$typeof:vq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bq,_context:t},t.Consumer=t};xt.createElement=M6;xt.createFactory=function(t){var e=M6.bind(null,t);return e.type=t,e};xt.createRef=function(){return{current:null}};xt.forwardRef=function(t){return{$$typeof:_q,render:t}};xt.isValidElement=eR;xt.lazy=function(t){return{$$typeof:Sq,_payload:{_status:-1,_result:t},_init:Nq}};xt.memo=function(t,e){return{$$typeof:Cq,type:t,compare:e===void 0?null:e}};xt.startTransition=function(t){var e=lv.transition;lv.transition={};try{t()}finally{lv.transition=e}};xt.unstable_act=L6;xt.useCallback=function(t,e){return Cs.current.useCallback(t,e)};xt.useContext=function(t){return Cs.current.useContext(t)};xt.useDebugValue=function(){};xt.useDeferredValue=function(t){return Cs.current.useDeferredValue(t)};xt.useEffect=function(t,e){return Cs.current.useEffect(t,e)};xt.useId=function(){return Cs.current.useId()};xt.useImperativeHandle=function(t,e,n){return Cs.current.useImperativeHandle(t,e,n)};xt.useInsertionEffect=function(t,e){return Cs.current.useInsertionEffect(t,e)};xt.useLayoutEffect=function(t,e){return Cs.current.useLayoutEffect(t,e)};xt.useMemo=function(t,e){return Cs.current.useMemo(t,e)};xt.useReducer=function(t,e,n){return Cs.current.useReducer(t,e,n)};xt.useRef=function(t){return Cs.current.useRef(t)};xt.useState=function(t){return Cs.current.useState(t)};xt.useSyncExternalStore=function(t,e,n){return Cs.current.useSyncExternalStore(t,e,n)};xt.useTransition=function(){return Cs.current.useTransition()};xt.version="18.3.1";T6.exports=xt;var O=T6.exports;const Ci=hh(O),Rq=pq({__proto__:null,default:Ci},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pq=O,Oq=Symbol.for("react.element"),kq=Symbol.for("react.fragment"),Dq=Object.prototype.hasOwnProperty,$q=Pq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mq={key:!0,ref:!0,__self:!0,__source:!0};function U6(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Dq.call(e,r)&&!Mq.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Oq,type:t,key:i,ref:o,props:s,_owner:$q.current}}AE.Fragment=kq;AE.jsx=U6;AE.jsxs=U6;N6.exports=AE;var g=N6.exports,Ak={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe=function(t,e){if(!t)throw Qp(e)},Qp=function(t){return new Error("Firebase Database ("+j6.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(B6(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Uq;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Uq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F6=function(t){const e=B6(t);return tR.encodeByteArray(e,!0)},Vv=function(t){return F6(t).replace(/\./g,"")},uI=function(t){try{return tR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jq(t){return W6(void 0,t)}function W6(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Bq(n)||(t[n]=W6(t[n],e[n]));return t}function Bq(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=()=>Fq().__FIREBASE_DEFAULTS__,zq=()=>{if(typeof process>"u"||typeof Ak>"u")return;const t=Ak.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uI(t[1]);return e&&JSON.parse(e)},z6=()=>{try{return Wq()||zq()||Hq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qq=t=>{var e,n;return(n=(e=z6())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vq=t=>{const e=qq(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},H6=()=>{var t;return(t=z6())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gq(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vv(JSON.stringify(n)),Vv(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kq())}function Yq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Qq(){return j6.NODE_ADMIN===!0}function Zq(){try{return typeof indexedDB=="object"}catch{return!1}}function Xq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq="FirebaseError";class qw extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Jq,Object.setPrototypeOf(this,qw.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,V6.prototype.create)}}class V6{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?eV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new qw(s,a,r)}}function eV(t,e){return t.replace(tV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t){return JSON.parse(t)}function ur(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=uy(uI(i[0])||""),n=uy(uI(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},nV=function(t){const e=G6(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},rV=function(t){const e=G6(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hp(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ik(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gv(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function dI(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xk(i)&&xk(o)){if(!dI(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function nR(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,fe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xE=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){return t&&t._delegate?t._delegate:t}class dy{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lV(e))try{this.getOrInitializeService({instanceIdentifier:Gu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gu){return this.instances.has(e)}getOptions(e=Gu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gu){return this.component?this.component.multipleInstances?e:Gu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cV(t){return t===Gu?void 0:t}function lV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wn||(wn={}));const dV={debug:wn.DEBUG,verbose:wn.VERBOSE,info:wn.INFO,warn:wn.WARN,error:wn.ERROR,silent:wn.SILENT},hV=wn.INFO,fV={[wn.DEBUG]:"log",[wn.VERBOSE]:"log",[wn.INFO]:"info",[wn.WARN]:"warn",[wn.ERROR]:"error"},pV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=fV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class K6{constructor(e){this.name=e,this._logLevel=hV,this._logHandler=pV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wn.DEBUG,...e),this._logHandler(this,wn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wn.VERBOSE,...e),this._logHandler(this,wn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wn.INFO,...e),this._logHandler(this,wn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wn.WARN,...e),this._logHandler(this,wn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wn.ERROR,...e),this._logHandler(this,wn.ERROR,...e)}}const mV=(t,e)=>e.some(n=>t instanceof n);let Nk,Tk;function gV(){return Nk||(Nk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yV(){return Tk||(Tk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y6=new WeakMap,hI=new WeakMap,Q6=new WeakMap,A1=new WeakMap,rR=new WeakMap;function wV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Kl(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Y6.set(n,t)}).catch(()=>{}),rR.set(e,t),e}function bV(t){if(hI.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hI.set(t,e)}let fI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vV(t){fI=t(fI)}function _V(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(I1(this),e,...n);return Q6.set(r,e.sort?e.sort():[e]),Kl(r)}:yV().includes(t)?function(...e){return t.apply(I1(this),e),Kl(Y6.get(this))}:function(...e){return Kl(t.apply(I1(this),e))}}function EV(t){return typeof t=="function"?_V(t):(t instanceof IDBTransaction&&bV(t),mV(t,gV())?new Proxy(t,fI):t)}function Kl(t){if(t instanceof IDBRequest)return wV(t);if(A1.has(t))return A1.get(t);const e=EV(t);return e!==t&&(A1.set(t,e),rR.set(e,t)),e}const I1=t=>rR.get(t);function CV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Kl(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Kl(o.result),c.oldVersion,c.newVersion,Kl(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const SV=["get","getKey","getAll","getAllKeys","count"],AV=["put","add","delete","clear"],x1=new Map;function Rk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(x1.get(e))return x1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||SV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return x1.set(e,i),i}vV(t=>({...t,get:(e,n,r)=>Rk(e,n)||t.get(e,n,r),has:(e,n)=>!!Rk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pI="@firebase/app",Pk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new K6("@firebase/app"),NV="@firebase/app-compat",TV="@firebase/analytics-compat",RV="@firebase/analytics",PV="@firebase/app-check-compat",OV="@firebase/app-check",kV="@firebase/auth",DV="@firebase/auth-compat",$V="@firebase/database",MV="@firebase/data-connect",LV="@firebase/database-compat",UV="@firebase/functions",jV="@firebase/functions-compat",BV="@firebase/installations",FV="@firebase/installations-compat",WV="@firebase/messaging",zV="@firebase/messaging-compat",HV="@firebase/performance",qV="@firebase/performance-compat",VV="@firebase/remote-config",GV="@firebase/remote-config-compat",KV="@firebase/storage",YV="@firebase/storage-compat",QV="@firebase/firestore",ZV="@firebase/vertexai-preview",XV="@firebase/firestore-compat",JV="firebase",eG="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="[DEFAULT]",tG={[pI]:"fire-core",[NV]:"fire-core-compat",[RV]:"fire-analytics",[TV]:"fire-analytics-compat",[OV]:"fire-app-check",[PV]:"fire-app-check-compat",[kV]:"fire-auth",[DV]:"fire-auth-compat",[$V]:"fire-rtdb",[MV]:"fire-data-connect",[LV]:"fire-rtdb-compat",[UV]:"fire-fn",[jV]:"fire-fn-compat",[BV]:"fire-iid",[FV]:"fire-iid-compat",[WV]:"fire-fcm",[zV]:"fire-fcm-compat",[HV]:"fire-perf",[qV]:"fire-perf-compat",[VV]:"fire-rc",[GV]:"fire-rc-compat",[KV]:"fire-gcs",[YV]:"fire-gcs-compat",[QV]:"fire-fst",[XV]:"fire-fst-compat",[ZV]:"fire-vertex","fire-js":"fire-js",[JV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map,nG=new Map,gI=new Map;function Ok(t,e){try{t.container.addComponent(e)}catch(n){Dc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kv(t){const e=t.name;if(gI.has(e))return Dc.debug(`There were multiple attempts to register component ${e}.`),!1;gI.set(e,t);for(const n of hy.values())Ok(n,t);for(const n of nG.values())Ok(n,t);return!0}function rG(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yl=new V6("app","Firebase",sG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG=eG;function Z6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mI,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Yl.create("bad-app-name",{appName:String(s)});if(n||(n=H6()),!n)throw Yl.create("no-options");const i=hy.get(s);if(i){if(dI(n,i.options)&&dI(r,i.config))return i;throw Yl.create("duplicate-app",{appName:s})}const o=new uV(s);for(const c of gI.values())o.addComponent(c);const a=new iG(n,r,o);return hy.set(s,a),a}function X6(t=mI){const e=hy.get(t);if(!e&&t===mI&&H6())return Z6();if(!e)throw Yl.create("no-app",{appName:t});return e}function aG(){return Array.from(hy.values())}function Lf(t,e,n){var r;let s=(r=tG[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dc.warn(a.join(" "));return}Kv(new dy(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cG="firebase-heartbeat-database",lG=1,fy="firebase-heartbeat-store";let N1=null;function J6(){return N1||(N1=CV(cG,lG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fy)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yl.create("idb-open",{originalErrorMessage:t.message})})),N1}async function uG(t){try{const n=(await J6()).transaction(fy),r=await n.objectStore(fy).get(eU(t));return await n.done,r}catch(e){if(e instanceof qw)Dc.warn(e.message);else{const n=Yl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dc.warn(n.message)}}}async function kk(t,e){try{const r=(await J6()).transaction(fy,"readwrite");await r.objectStore(fy).put(e,eU(t)),await r.done}catch(n){if(n instanceof qw)Dc.warn(n.message);else{const r=Yl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dc.warn(r.message)}}}function eU(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG=1024,hG=30*24*60*60*1e3;class fG{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mG(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Dk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=hG}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dk(),{heartbeatsToSend:r,unsentEntries:s}=pG(this._heartbeatsCache.heartbeats),i=Vv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Dc.warn(n),""}}}function Dk(){return new Date().toISOString().substring(0,10)}function pG(t,e=dG){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$k(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$k(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zq()?Xq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uG(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return kk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $k(t){return Vv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(t){Kv(new dy("platform-logger",e=>new IV(e),"PRIVATE")),Kv(new dy("heartbeat",e=>new fG(e),"PRIVATE")),Lf(pI,Pk,t),Lf(pI,Pk,"esm2017"),Lf("fire-js","")}gG("");var yG="firebase",wG="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lf(yG,wG,"app");var Mk={};const Lk="@firebase/database",Uk="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tU="";function bG(t){tU=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ur(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:uy(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Hc(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new vG(e)}}catch{}return new _G},ad=nU("localStorage"),EG=nU("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new K6("@firebase/database"),CG=function(){let t=1;return function(){return t++}}(),rU=function(t){const e=oV(t),n=new iV;n.update(e);const r=n.digest();return tR.encodeByteArray(r)},Vw=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Vw.apply(null,r):typeof r=="object"?e+=ur(r):e+=r,e+=" "}return e};let Og=null,jk=!0;const SG=function(t,e){fe(!0,"Can't turn on custom loggers persistently."),Uf.logLevel=wn.VERBOSE,Og=Uf.log.bind(Uf)},ns=function(...t){if(jk===!0&&(jk=!1,Og===null&&EG.get("logging_enabled")===!0&&SG()),Og){const e=Vw.apply(null,t);Og(e)}},Gw=function(t){return function(...e){ns(t,...e)}},yI=function(...t){const e="FIREBASE INTERNAL ERROR: "+Vw(...t);Uf.error(e)},$c=function(...t){const e=`FIREBASE FATAL ERROR: ${Vw(...t)}`;throw Uf.error(e),new Error(e)},Zs=function(...t){const e="FIREBASE WARNING: "+Vw(...t);Uf.warn(e)},AG=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},sU=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},IG=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},fp="[MIN_NAME]",jd="[MAX_NAME]",Xp=function(t,e){if(t===e)return 0;if(t===fp||e===jd)return-1;if(e===fp||t===jd)return 1;{const n=Bk(t),r=Bk(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},xG=function(t,e){return t===e?0:t<e?-1:1},Tm=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ur(e))},sR=function(t){if(typeof t!="object"||t===null)return ur(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ur(e[r]),n+=":",n+=sR(t[e[r]]);return n+="}",n},iU=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function ri(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const oU=function(t){fe(!sU(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},NG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},TG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function RG(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const PG=new RegExp("^-?(0*)\\d{1,10}$"),OG=-2147483648,kG=2147483647,Bk=function(t){if(PG.test(t)){const e=Number(t);if(e>=OG&&e<=kG)return e}return null},Jp=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Zs("Exception was thrown by user callback.",n),e},Math.floor(0))}},DG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kg=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $G{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ns("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zs(e)}}class uv{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}uv.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="5",aU="v",cU="s",lU="r",uU="f",dU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hU="ls",fU="p",wI="ac",pU="websocket",mU="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ad.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ad.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function LG(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function yU(t,e,n){fe(typeof e=="string","typeof type must == string"),fe(typeof n=="object","typeof params must == object");let r;if(e===pU)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===mU)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);LG(t)&&(n.ns=t.namespace);const s=[];return ri(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(){this.counters_={}}incrementCounter(e,n=1){Hc(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return jq(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={},R1={};function oR(t){const e=t.toString();return T1[e]||(T1[e]=new UG),T1[e]}function jG(t,e){const n=t.toString();return R1[n]||(R1[n]=e()),R1[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Jp(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="start",FG="close",WG="pLPCommand",zG="pRTLPCB",wU="id",bU="pw",vU="ser",HG="cb",qG="seg",VG="ts",GG="d",KG="dframe",_U=1870,EU=30,YG=_U-EU,QG=25e3,ZG=3e4;class bf{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gw(e),this.stats_=oR(n),this.urlFn=c=>(this.appCheckToken&&(c[wI]=this.appCheckToken),yU(n,mU,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new BG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ZG)),IG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new aR((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Fk)this.id=a,this.password=c;else if(o===FG)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Fk]="t",r[vU]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[HG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[aU]=iR,this.transportSessionId&&(r[cU]=this.transportSessionId),this.lastSessionId&&(r[hU]=this.lastSessionId),this.applicationId&&(r[fU]=this.applicationId),this.appCheckToken&&(r[wI]=this.appCheckToken),typeof location<"u"&&location.hostname&&dU.test(location.hostname)&&(r[lU]=uU);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bf.forceAllow_=!0}static forceDisallow(){bf.forceDisallow_=!0}static isAvailable(){return bf.forceAllow_?!0:!bf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!NG()&&!TG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ur(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=F6(n),s=iU(r,YG);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[KG]="t",r[wU]=e,r[bU]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ur(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class aR{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=CG(),window[WG+this.uniqueCallbackIdentifier]=e,window[zG+this.uniqueCallbackIdentifier]=n,this.myIFrame=aR.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ns("frame writing exception"),a.stack&&ns(a.stack),ns(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ns("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wU]=this.myID,e[bU]=this.myPW,e[vU]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+EU+r.length<=_U;){const o=this.pendingSegs.shift();r=r+"&"+qG+s+"="+o.seg+"&"+VG+s+"="+o.ts+"&"+GG+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(QG)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ns("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XG=16384,JG=45e3;let Yv=null;typeof MozWebSocket<"u"?Yv=MozWebSocket:typeof WebSocket<"u"&&(Yv=WebSocket);class Mo{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gw(this.connId),this.stats_=oR(n),this.connURL=Mo.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[aU]=iR,typeof location<"u"&&location.hostname&&dU.test(location.hostname)&&(o[lU]=uU),n&&(o[cU]=n),r&&(o[hU]=r),s&&(o[wI]=s),i&&(o[fU]=i),yU(e,pU,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ad.set("previous_websocket_failure",!0);try{let r;Qq(),this.mySock=new Yv(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Mo.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Yv!==null&&!Mo.forceDisallow_}static previouslyFailed(){return ad.isInMemoryStorage||ad.get("previous_websocket_failure")===!0}markConnectionHealthy(){ad.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=uy(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(fe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ur(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=iU(n,XG);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(JG))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Mo.responsesRequiredToBeHealthy=2;Mo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[bf,Mo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Mo&&Mo.isAvailable();let r=n&&!Mo.previouslyFailed();if(e.webSocketOnly&&(n||Zs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Mo];else{const s=this.transports_=[];for(const i of py.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);py.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}py.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK=6e4,tK=5e3,nK=10*1024,rK=100*1024,P1="t",Wk="d",sK="s",zk="r",iK="e",Hk="o",qk="a",Vk="n",Gk="p",oK="h";class aK{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gw("c:"+this.id+":"),this.transportManager_=new py(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=kg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>nK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(P1 in e){const n=e[P1];n===qk?this.upgradeIfSecondaryHealthy_():n===zk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Hk&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Tm("t",e),r=Tm("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gk,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qk,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Vk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Tm("t",e),r=Tm("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Tm(P1,e);if(Wk in e){const r=e[Wk];if(n===oK){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Vk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===sK?this.onConnectionShutdown_(r):n===zk?this.onReset_(r):n===iK?yI("Server Error: "+r):n===Hk?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yI("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),iR!==r&&Zs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),kg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(eK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(tK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gk,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ad.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SU=class{constructor(e){this.allowedEvents_=e,this.listeners_={},fe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){fe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends SU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!q6()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qv}getInitialEvent(e){return fe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=32,Yk=768;class hn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ft(){return new hn("")}function St(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function yu(t){return t.pieces_.length-t.pieceNum_}function vn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new hn(t.pieces_,e)}function AU(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function cK(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function IU(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xU(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new hn(e,0)}function dr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof hn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new hn(n,0)}function It(t){return t.pieceNum_>=t.pieces_.length}function ys(t,e){const n=St(t),r=St(e);if(n===null)return e;if(n===r)return ys(vn(t),vn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function cR(t,e){if(yu(t)!==yu(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function jo(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(yu(t)>yu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class lK{constructor(e,n){this.errorPrefix_=n,this.parts_=IU(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xE(this.parts_[r]);NU(this)}}function uK(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=xE(e),NU(t)}function dK(t){const e=t.parts_.pop();t.byteLength_-=xE(e),t.parts_.length>0&&(t.byteLength_-=1)}function NU(t){if(t.byteLength_>Yk)throw new Error(t.errorPrefix_+"has a key path longer than "+Yk+" bytes ("+t.byteLength_+").");if(t.parts_.length>Kk)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Kk+") or object contains a cycle "+Ku(t))}function Ku(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR extends SU{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new lR}getInitialEvent(e){return fe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm=1e3,hK=60*5*1e3,Qk=30*1e3,fK=1.3,pK=3e4,mK="server_kill",Zk=3;class Ic extends CU{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Ic.nextPersistentConnectionId_++,this.log_=Gw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rm,this.maxReconnectDelay_=hK,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lR.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Qv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ur(i)),fe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new IE,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),fe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),fe(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Ic.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Hc(e,"w")){const r=hp(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Zs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||rV(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qk)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=nV(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),fe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ur(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):yI("Unrecognized action received from server: "+ur(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){fe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rm,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Rm,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>pK&&(this.reconnectDelay_=Rm),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*fK)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ic.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){fe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?ns("getToken() completed but was canceled"):(ns("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new aK(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Zs(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(mK)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Zs(d),c())}}}interrupt(e){ns("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ns("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ik(this.interruptReasons_)&&(this.reconnectDelay_=Rm,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>sR(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new hn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ns("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Zk&&(this.reconnectDelay_=Qk,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ns("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Zk&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+tU.replace(/\./g,"-")]=1,q6()?e["framework.cordova"]=1:Yq()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Qv.getInstance().currentlyOnline();return Ik(this.interruptReasons_)&&e}}Ic.nextPersistentConnectionId_=0;Ic.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new At(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new At(fp,e),s=new At(fp,n);return this.compare(r,s)!==0}minPost(){return At.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eb;class TU extends NE{static get __EMPTY_NODE(){return eb}static set __EMPTY_NODE(e){eb=e}compare(e,n){return Xp(e.name,n.name)}isDefinedOn(e){throw Qp("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return At.MIN}maxPost(){return new At(jd,eb)}makePost(e,n){return fe(typeof e=="string","KeyIndex indexValue must always be a string."),new At(e,eb)}toString(){return".key"}}const jf=new TU;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class _r{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??_r.RED,this.left=s??Ks.EMPTY_NODE,this.right=i??Ks.EMPTY_NODE}copy(e,n,r,s,i){return new _r(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ks.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ks.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,_r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,_r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}_r.RED=!0;_r.BLACK=!1;class gK{copy(e,n,r,s,i){return this}insert(e,n,r){return new _r(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ks{constructor(e,n=Ks.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ks(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,_r.BLACK,null,null))}remove(e){return new Ks(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_r.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tb(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tb(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tb(this.root_,null,this.comparator_,!0,e)}}Ks.EMPTY_NODE=new gK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(t,e){return Xp(t.name,e.name)}function uR(t,e){return Xp(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bI;function wK(t){bI=t}const RU=function(t){return typeof t=="number"?"number:"+oU(t):"string:"+t},PU=function(t){if(t.isLeafNode()){const e=t.val();fe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Hc(e,".sv"),"Priority must be a string or number.")}else fe(t===bI||t.isEmpty(),"priority of unexpected type.");fe(t===bI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xk;class vr{constructor(e,n=vr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,fe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),PU(this.priorityNode_)}static set __childrenNodeConstructor(e){Xk=e}static get __childrenNodeConstructor(){return Xk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new vr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:vr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return It(e)?this:St(e)===".priority"?this.priorityNode_:vr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:vr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=St(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(fe(r!==".priority"||yu(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,vr.__childrenNodeConstructor.EMPTY_NODE.updateChild(vn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+RU(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=oU(this.value_):e+=this.value_,this.lazyHash_=rU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===vr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof vr.__childrenNodeConstructor?-1:(fe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=vr.VALUE_TYPE_ORDER.indexOf(n),i=vr.VALUE_TYPE_ORDER.indexOf(r);return fe(s>=0,"Unknown leaf type: "+n),fe(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}vr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OU,kU;function bK(t){OU=t}function vK(t){kU=t}class _K extends NE{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Xp(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return At.MIN}maxPost(){return new At(jd,new vr("[PRIORITY-POST]",kU))}makePost(e,n){const r=OU(e);return new At(n,new vr("[PRIORITY-POST]",r))}toString(){return".priority"}}const Hn=new _K;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK=Math.log(2);class CK{constructor(e){const n=i=>parseInt(Math.log(i)/EK,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Zv=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new _r(h,d.node,_r.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),m=s(f+1,l);return d=t[f],h=n?n(d):d,new _r(h,d.node,_r.BLACK,p,m)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,m){const w=d-p,y=d;d-=p;const b=s(w+1,y),_=t[w],E=n?n(_):_;f(new _r(E,_.node,m,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const m=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));m?h(w,_r.BLACK):(h(w,_r.BLACK),h(w,_r.RED))}return u},o=new CK(t.length),a=i(o);return new Ks(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O1;const Mh={};class _c{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return fe(Mh&&Hn,"ChildrenNode.ts has not been loaded"),O1=O1||new _c({".priority":Mh},{".priority":Hn}),O1}get(e){const n=hp(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ks?n:null}hasIndex(e){return Hc(this.indexSet_,e.toString())}addIndex(e,n){fe(e!==jf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(At.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=Zv(r,e.getCompare()):a=Mh;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new _c(u,l)}addToIndexes(e,n){const r=Gv(this.indexes_,(s,i)=>{const o=hp(this.indexSet_,i);if(fe(o,"Missing index implementation for "+i),s===Mh)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(At.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Zv(a,o.getCompare())}else return Mh;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new At(e.name,a))),c.insert(e,e.node)}});return new _c(r,this.indexSet_)}removeFromIndexes(e,n){const r=Gv(this.indexes_,s=>{if(s===Mh)return s;{const i=n.get(e.name);return i?s.remove(new At(e.name,i)):s}});return new _c(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pm;class tt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&PU(this.priorityNode_),this.children_.isEmpty()&&fe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pm||(Pm=new tt(new Ks(uR),null,_c.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pm}updatePriority(e){return this.children_.isEmpty()?this:new tt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Pm:n}}getChild(e){const n=St(e);return n===null?this:this.getImmediateChild(n).getChild(vn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(fe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new At(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Pm:this.priorityNode_;return new tt(s,o,i)}}updateChild(e,n){const r=St(e);if(r===null)return n;{fe(St(e)!==".priority"||yu(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(vn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Hn,(o,a)=>{n[o]=a.val(e),r++,i&&tt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+RU(this.getPriority().val())+":"),this.forEachChild(Hn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":rU(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new At(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new At(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new At(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,At.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,At.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Kw?-1:0}withIndex(e){if(e===jf||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new tt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===jf||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Hn),s=n.getIterator(Hn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===jf?null:this.indexMap_.get(e.toString())}}tt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class SK extends tt{constructor(){super(new Ks(uR),tt.EMPTY_NODE,_c.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}}const Kw=new SK;Object.defineProperties(At,{MIN:{value:new At(fp,tt.EMPTY_NODE)},MAX:{value:new At(jd,Kw)}});TU.__EMPTY_NODE=tt.EMPTY_NODE;vr.__childrenNodeConstructor=tt;wK(Kw);vK(Kw);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=!0;function Cr(t,e=null){if(t===null)return tt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),fe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new vr(n,Cr(e))}if(!(t instanceof Array)&&AK){const n=[];let r=!1;if(ri(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Cr(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new At(o,c)))}}),n.length===0)return tt.EMPTY_NODE;const i=Zv(n,yK,o=>o.name,uR);if(r){const o=Zv(n,Hn.getCompare());return new tt(i,Cr(e),new _c({".priority":o},{".priority":Hn}))}else return new tt(i,Cr(e),_c.Default)}else{let n=tt.EMPTY_NODE;return ri(t,(r,s)=>{if(Hc(t,r)&&r.substring(0,1)!=="."){const i=Cr(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Cr(e))}}bK(Cr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IK extends NE{constructor(e){super(),this.indexPath_=e,fe(!It(e)&&St(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Xp(e.name,n.name):i}makePost(e,n){const r=Cr(e),s=tt.EMPTY_NODE.updateChild(this.indexPath_,r);return new At(n,s)}maxPost(){const e=tt.EMPTY_NODE.updateChild(this.indexPath_,Kw);return new At(jd,e)}toString(){return IU(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK extends NE{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Xp(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return At.MIN}maxPost(){return At.MAX}makePost(e,n){const r=Cr(e);return new At(n,r)}toString(){return".value"}}const NK=new xK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(t){return{type:"value",snapshotNode:t}}function pp(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function my(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gy(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function TK(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){fe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(my(n,a)):fe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(pp(n,r)):o.trackChildChange(gy(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Hn,(s,i)=>{n.hasChild(s)||r.trackChildChange(my(s,i))}),n.isLeafNode()||n.forEachChild(Hn,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(gy(s,i,o))}else r.trackChildChange(pp(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?tt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.indexedFilter_=new dR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=yy.getStartPost_(e),this.endPost_=yy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new At(n,r))||(r=tt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=tt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(tt.EMPTY_NODE);const i=this;return n.forEachChild(Hn,(o,a)=>{i.matches(new At(o,a))||(s=s.updateImmediateChild(o,tt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new yy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new At(n,r))||(r=tt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=tt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=tt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(tt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,tt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;fe(a.numChildren()===this.limit_,"");const c=new At(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(gy(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(my(n,d));const m=a.updateImmediateChild(n,tt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(pp(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(my(l.name,l.node)),i.trackChildChange(pp(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,tt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return fe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return fe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fp}hasEnd(){return this.endSet_}getIndexEndValue(){return fe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return fe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return fe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hn}copy(){const e=new hR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function PK(t){return t.loadsAllData()?new dR(t.getIndex()):t.hasLimit()?new RK(t):new yy(t)}function Jk(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Hn?n="$priority":t.index_===NK?n="$value":t.index_===jf?n="$key":(fe(t.index_ instanceof IK,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ur(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ur(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ur(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ur(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ur(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function e2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Hn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv extends CU{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Gw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(fe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Xv.getListenId_(e,r),a={};this.listens_[o]=a;const c=Jk(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),hp(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=Xv.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Jk(e._queryParams),r=e._path.toString(),s=new IE;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sV(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=uy(a.responseText)}catch{Zs("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Zs("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OK{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return{value:null,children:new Map}}function $U(t,e,n){if(It(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=St(e);t.children.has(r)||t.children.set(r,Jv());const s=t.children.get(r);e=vn(e),$U(s,e,n)}}function vI(t,e,n){t.value!==null?n(e,t.value):kK(t,(r,s)=>{const i=new hn(e.toString()+"/"+r);vI(s,i,n)})}function kK(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ri(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=10*1e3,$K=30*1e3,MK=5*60*1e3;class LK{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new DK(e);const r=t2+($K-t2)*Math.random();kg(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;ri(e,(s,i)=>{i>0&&Hc(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),kg(this.reportStats_.bind(this),Math.floor(Math.random()*2*MK))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bo||(Bo={}));function MU(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Bo.ACK_USER_WRITE,this.source=MU()}operationForChild(e){if(It(this.path)){if(this.affectedTree.value!=null)return fe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new hn(e));return new e_(Ft(),n,this.revert)}}else return fe(St(this.path)===e,"operationForChild called for unrelated child."),new e_(vn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.source=e,this.path=n,this.type=Bo.LISTEN_COMPLETE}operationForChild(e){return It(this.path)?new wy(this.source,Ft()):new wy(this.source,vn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Bo.OVERWRITE}operationForChild(e){return It(this.path)?new Bd(this.source,Ft(),this.snap.getImmediateChild(e)):new Bd(this.source,vn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Bo.MERGE}operationForChild(e){if(It(this.path)){const n=this.children.subtree(new hn(e));return n.isEmpty()?null:n.value?new Bd(this.source,Ft(),n.value):new by(this.source,Ft(),n)}else return fe(St(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new by(this.source,vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(It(e))return this.isFullyInitialized()&&!this.filtered_;const n=St(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jK(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(TK(o.childName,o.snapshotNode))}),Om(t,s,"child_removed",e,r,n),Om(t,s,"child_added",e,r,n),Om(t,s,"child_moved",i,r,n),Om(t,s,"child_changed",e,r,n),Om(t,s,"value",e,r,n),s}function Om(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>FK(t,a,c)),o.forEach(a=>{const c=BK(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function BK(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function FK(t,e,n){if(e.childName==null||n.childName==null)throw Qp("Should only compare child_ events.");const r=new At(e.childName,e.snapshotNode),s=new At(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e){return{eventCache:t,serverCache:e}}function Dg(t,e,n,r){return TE(new wu(e,n,r),t.serverCache)}function LU(t,e,n,r){return TE(t.eventCache,new wu(e,n,r))}function t_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Fd(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k1;const WK=()=>(k1||(k1=new Ks(xG)),k1);class An{constructor(e,n=WK()){this.value=e,this.children=n}static fromObject(e){let n=new An(null);return ri(e,(r,s)=>{n=n.set(new hn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ft(),value:this.value};if(It(e))return null;{const r=St(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(vn(e),n);return i!=null?{path:dr(new hn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(It(e))return this;{const n=St(e),r=this.children.get(n);return r!==null?r.subtree(vn(e)):new An(null)}}set(e,n){if(It(e))return new An(n,this.children);{const r=St(e),i=(this.children.get(r)||new An(null)).set(vn(e),n),o=this.children.insert(r,i);return new An(this.value,o)}}remove(e){if(It(e))return this.children.isEmpty()?new An(null):new An(null,this.children);{const n=St(e),r=this.children.get(n);if(r){const s=r.remove(vn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new An(null):new An(this.value,i)}else return this}}get(e){if(It(e))return this.value;{const n=St(e),r=this.children.get(n);return r?r.get(vn(e)):null}}setTree(e,n){if(It(e))return n;{const r=St(e),i=(this.children.get(r)||new An(null)).setTree(vn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new An(this.value,o)}}fold(e){return this.fold_(Ft(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(dr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ft(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(It(e))return null;{const i=St(e),o=this.children.get(i);return o?o.findOnPath_(vn(e),dr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ft(),n)}foreachOnPath_(e,n,r){if(It(e))return this;{this.value&&r(n,this.value);const s=St(e),i=this.children.get(s);return i?i.foreachOnPath_(vn(e),dr(n,s),r):new An(null)}}foreach(e){this.foreach_(Ft(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(dr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.writeTree_=e}static empty(){return new zo(new An(null))}}function $g(t,e,n){if(It(e))return new zo(new An(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=ys(s,e);return i=i.updateChild(o,n),new zo(t.writeTree_.set(s,i))}else{const s=new An(n),i=t.writeTree_.setTree(e,s);return new zo(i)}}}function n2(t,e,n){let r=t;return ri(n,(s,i)=>{r=$g(r,dr(e,s),i)}),r}function r2(t,e){if(It(e))return zo.empty();{const n=t.writeTree_.setTree(e,new An(null));return new zo(n)}}function _I(t,e){return fh(t,e)!=null}function fh(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(ys(n.path,e)):null}function s2(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Hn,(r,s)=>{e.push(new At(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new At(r,s.value))}),e}function Ql(t,e){if(It(e))return t;{const n=fh(t,e);return n!=null?new zo(new An(n)):new zo(t.writeTree_.subtree(e))}}function EI(t){return t.writeTree_.isEmpty()}function mp(t,e){return UU(Ft(),t.writeTree_,e)}function UU(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(fe(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=UU(dr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(dr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t,e){return WU(e,t)}function zK(t,e,n,r,s){fe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=$g(t.visibleWrites,e,n)),t.lastWriteId=r}function HK(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function qK(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);fe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&VK(a,r.path)?s=!1:jo(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return GK(t),!0;if(r.snap)t.visibleWrites=r2(t.visibleWrites,r.path);else{const a=r.children;ri(a,c=>{t.visibleWrites=r2(t.visibleWrites,dr(r.path,c))})}return!0}else return!1}function VK(t,e){if(t.snap)return jo(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jo(dr(t.path,n),e))return!0;return!1}function GK(t){t.visibleWrites=jU(t.allWrites,KK,Ft()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function KK(t){return t.visible}function jU(t,e,n){let r=zo.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)jo(n,o)?(a=ys(n,o),r=$g(r,a,i.snap)):jo(o,n)&&(a=ys(o,n),r=$g(r,Ft(),i.snap.getChild(a)));else if(i.children){if(jo(n,o))a=ys(n,o),r=n2(r,a,i.children);else if(jo(o,n))if(a=ys(o,n),It(a))r=n2(r,Ft(),i.children);else{const c=hp(i.children,St(a));if(c){const l=c.getChild(vn(a));r=$g(r,Ft(),l)}}}else throw Qp("WriteRecord should have .snap or .children")}}return r}function BU(t,e,n,r,s){if(!r&&!s){const i=fh(t.visibleWrites,e);if(i!=null)return i;{const o=Ql(t.visibleWrites,e);if(EI(o))return n;if(n==null&&!_I(o,Ft()))return null;{const a=n||tt.EMPTY_NODE;return mp(o,a)}}}else{const i=Ql(t.visibleWrites,e);if(!s&&EI(i))return n;if(!s&&n==null&&!_I(i,Ft()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(jo(l.path,e)||jo(e,l.path))},a=jU(t.allWrites,o,e),c=n||tt.EMPTY_NODE;return mp(a,c)}}}function YK(t,e,n){let r=tt.EMPTY_NODE;const s=fh(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Hn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Ql(t.visibleWrites,e);return n.forEachChild(Hn,(o,a)=>{const c=mp(Ql(i,new hn(o)),a);r=r.updateImmediateChild(o,c)}),s2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Ql(t.visibleWrites,e);return s2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function QK(t,e,n,r,s){fe(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=dr(e,n);if(_I(t.visibleWrites,i))return null;{const o=Ql(t.visibleWrites,i);return EI(o)?s.getChild(n):mp(o,s.getChild(n))}}function ZK(t,e,n,r){const s=dr(e,n),i=fh(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Ql(t.visibleWrites,s);return mp(o,r.getNode().getImmediateChild(n))}else return null}function XK(t,e){return fh(t.visibleWrites,e)}function JK(t,e,n,r,s,i,o){let a;const c=Ql(t.visibleWrites,e),l=fh(c,Ft());if(l!=null)a=l;else if(n!=null)a=mp(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function eY(){return{visibleWrites:zo.empty(),allWrites:[],lastWriteId:-1}}function n_(t,e,n,r){return BU(t.writeTree,t.treePath,e,n,r)}function mR(t,e){return YK(t.writeTree,t.treePath,e)}function i2(t,e,n,r){return QK(t.writeTree,t.treePath,e,n,r)}function r_(t,e){return XK(t.writeTree,dr(t.treePath,e))}function tY(t,e,n,r,s,i){return JK(t.writeTree,t.treePath,e,n,r,s,i)}function gR(t,e,n){return ZK(t.writeTree,t.treePath,e,n)}function FU(t,e){return WU(dr(t.treePath,e),t.writeTree)}function WU(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;fe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),fe(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,gy(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,my(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,pp(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,gy(r,e.snapshotNode,s.oldSnap));else throw Qp("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const zU=new rY;class yR{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new wu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gR(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fd(this.viewCache_),i=tY(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sY(t){return{filter:t}}function iY(t,e){fe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),fe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oY(t,e,n,r,s){const i=new nY;let o,a;if(n.type===Bo.OVERWRITE){const l=n;l.source.fromUser?o=CI(t,e,l.path,l.snap,r,s,i):(fe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!It(l.path),o=s_(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Bo.MERGE){const l=n;l.source.fromUser?o=cY(t,e,l.path,l.children,r,s,i):(fe(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=SI(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Bo.ACK_USER_WRITE){const l=n;l.revert?o=dY(t,e,l.path,r,s,i):o=lY(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Bo.LISTEN_COMPLETE)o=uY(t,e,n.path,r,i);else throw Qp("Unknown operation type: "+n.type);const c=i.getChanges();return aY(e,o,c),{viewCache:o,changes:c}}function aY(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=t_(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(DU(t_(e)))}}function HU(t,e,n,r,s,i){const o=e.eventCache;if(r_(r,n)!=null)return e;{let a,c;if(It(n))if(fe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Fd(e),u=l instanceof tt?l:tt.EMPTY_NODE,d=mR(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=n_(r,Fd(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=St(n);if(l===".priority"){fe(yu(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=i2(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=vn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=i2(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=gR(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Dg(e,a,o.isFullyInitialized()||It(n),t.filter.filtersNodes())}}function s_(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(It(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=St(n);if(!c.isCompleteForPath(n)&&yu(n)>1)return e;const p=vn(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,zU,null)}const d=LU(e,l,c.isFullyInitialized()||It(n),u.filtersNodes()),h=new yR(s,d,i);return HU(t,d,n,s,h,a)}function CI(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new yR(s,e,i);if(It(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Dg(e,l,!0,t.filter.filtersNodes());else{const d=St(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Dg(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=vn(n),f=a.getNode().getImmediateChild(d);let p;if(It(h))p=r;else{const m=u.getCompleteChild(d);m!=null?AU(h)===".priority"&&m.getChild(xU(h)).isEmpty()?p=m:p=m.updateChild(h,r):p=tt.EMPTY_NODE}if(f.equals(p))c=e;else{const m=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Dg(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function o2(t,e){return t.eventCache.isCompleteForChild(e)}function cY(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=dr(n,c);o2(e,St(u))&&(a=CI(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=dr(n,c);o2(e,St(u))||(a=CI(t,a,u,l,s,i,o))}),a}function a2(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function SI(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;It(n)?l=r:l=new An(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=a2(t,f,h);c=s_(t,c,new hn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),m=a2(t,p,h);c=s_(t,c,new hn(d),m,s,i,o,a)}}),c}function lY(t,e,n,r,s,i,o){if(r_(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(It(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return s_(t,e,n,c.getNode().getChild(n),s,i,a,o);if(It(n)){let l=new An(null);return c.getNode().forEachChild(jf,(u,d)=>{l=l.set(new hn(u),d)}),SI(t,e,n,l,s,i,a,o)}else return e}else{let l=new An(null);return r.foreach((u,d)=>{const h=dr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),SI(t,e,n,l,s,i,a,o)}}function uY(t,e,n,r,s){const i=e.serverCache,o=LU(e,i.getNode(),i.isFullyInitialized()||It(n),i.isFiltered());return HU(t,o,n,r,zU,s)}function dY(t,e,n,r,s,i){let o;if(r_(r,n)!=null)return e;{const a=new yR(r,e,s),c=e.eventCache.getNode();let l;if(It(n)||St(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=n_(r,Fd(e));else{const d=e.serverCache.getNode();fe(d instanceof tt,"serverChildren would be complete if leaf node"),u=mR(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=St(n);let d=gR(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,vn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,tt.EMPTY_NODE,vn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=n_(r,Fd(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||r_(r,Ft())!=null,Dg(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new dR(r.getIndex()),i=PK(r);this.processor_=sY(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(tt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(tt.EMPTY_NODE,a.getNode(),null),u=new wu(c,o.isFullyInitialized(),s.filtersNodes()),d=new wu(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=TE(d,u),this.eventGenerator_=new UK(this.query_)}get query(){return this.query_}}function fY(t){return t.viewCache_.serverCache.getNode()}function pY(t){return t_(t.viewCache_)}function mY(t,e){const n=Fd(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!It(e)&&!n.getImmediateChild(St(e)).isEmpty())?n.getChild(e):null}function c2(t){return t.eventRegistrations_.length===0}function gY(t,e){t.eventRegistrations_.push(e)}function l2(t,e,n){const r=[];if(n){fe(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function u2(t,e,n,r){e.type===Bo.MERGE&&e.source.queryId!==null&&(fe(Fd(t.viewCache_),"We should always have a full cache before handling merges"),fe(t_(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=oY(t.processor_,s,e,n,r);return iY(t.processor_,i.viewCache),fe(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,qU(t,i.changes,i.viewCache.eventCache.getNode(),null)}function yY(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Hn,(i,o)=>{r.push(pp(i,o))}),n.isFullyInitialized()&&r.push(DU(n.getNode())),qU(t,r,n.getNode(),e)}function qU(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return jK(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i_;class VU{constructor(){this.views=new Map}}function wY(t){fe(!i_,"__referenceConstructor has already been defined"),i_=t}function bY(){return fe(i_,"Reference.ts has not been loaded"),i_}function vY(t){return t.views.size===0}function wR(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return fe(i!=null,"SyncTree gave us an op for an invalid query."),u2(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(u2(o,e,n,r));return i}}function GU(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=n_(n,s?r:null),c=!1;a?c=!0:r instanceof tt?(a=mR(n,r),c=!1):(a=tt.EMPTY_NODE,c=!1);const l=TE(new wu(a,c,!1),new wu(r,s,!1));return new hY(e,l)}return o}function _Y(t,e,n,r,s,i){const o=GU(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),gY(o,n),yY(o,n)}function EY(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=bu(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(l2(l,n,r)),c2(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(l2(c,n,r)),c2(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!bu(t)&&i.push(new(bY())(e._repo,e._path)),{removed:i,events:o}}function KU(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Zl(t,e){let n=null;for(const r of t.views.values())n=n||mY(r,e);return n}function YU(t,e){if(e._queryParams.loadsAllData())return PE(t);{const r=e._queryIdentifier;return t.views.get(r)}}function QU(t,e){return YU(t,e)!=null}function bu(t){return PE(t)!=null}function PE(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o_;function CY(t){fe(!o_,"__referenceConstructor has already been defined"),o_=t}function SY(){return fe(o_,"Reference.ts has not been loaded"),o_}let AY=1;class d2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new An(null),this.pendingWriteTree_=eY(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZU(t,e,n,r,s){return zK(t.pendingWriteTree_,e,n,r,s),s?Qw(t,new Bd(MU(),e,n)):[]}function cd(t,e,n=!1){const r=HK(t.pendingWriteTree_,e);if(qK(t.pendingWriteTree_,e)){let i=new An(null);return r.snap!=null?i=i.set(Ft(),!0):ri(r.children,o=>{i=i.set(new hn(o),!0)}),Qw(t,new e_(r.path,i,n))}else return[]}function Yw(t,e,n){return Qw(t,new Bd(fR(),e,n))}function IY(t,e,n){const r=An.fromObject(n);return Qw(t,new by(fR(),e,r))}function xY(t,e){return Qw(t,new wy(fR(),e))}function NY(t,e,n){const r=vR(t,n);if(r){const s=_R(r),i=s.path,o=s.queryId,a=ys(i,e),c=new wy(pR(o),a);return ER(t,i,c)}else return[]}function a_(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||QU(o,e))){const c=EY(o,e,n,r);vY(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>bu(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=PY(h);for(let p=0;p<f.length;++p){const m=f[p],w=m.query,y=t8(t,m);t.listenProvider_.startListening(Mg(w),vy(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Mg(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(OE(h));t.listenProvider_.stopListening(Mg(h),f)}))}OY(t,l)}return a}function XU(t,e,n,r){const s=vR(t,r);if(s!=null){const i=_R(s),o=i.path,a=i.queryId,c=ys(o,e),l=new Bd(pR(a),c,n);return ER(t,o,l)}else return[]}function TY(t,e,n,r){const s=vR(t,r);if(s){const i=_R(s),o=i.path,a=i.queryId,c=ys(o,e),l=An.fromObject(n),u=new by(pR(a),c,l);return ER(t,o,u)}else return[]}function AI(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=ys(h,s);i=i||Zl(f,p),o=o||bu(f)});let a=t.syncPointTree_.get(s);a?(o=o||bu(a),i=i||Zl(a,Ft())):(a=new VU,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=tt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const m=Zl(p,Ft());m&&(i=i.updateImmediateChild(f,m))}));const l=QU(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=OE(e);fe(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=kY();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=RE(t.pendingWriteTree_,s);let d=_Y(a,e,n,u,i,c);if(!l&&!o&&!r){const h=YU(a,e);d=d.concat(DY(t,e,h))}return d}function bR(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=ys(o,e),l=Zl(a,c);if(l)return l});return BU(s,e,i,n,!0)}function RY(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=ys(l,n);r=r||Zl(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Zl(s,Ft()):(s=new VU,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new wu(r,!0,!1):null,a=RE(t.pendingWriteTree_,e._path),c=GU(s,e,a,i?o.getNode():tt.EMPTY_NODE,i);return pY(c)}function Qw(t,e){return JU(e,t.syncPointTree_,null,RE(t.pendingWriteTree_,Ft()))}function JU(t,e,n,r){if(It(t.path))return e8(t,e,n,r);{const s=e.get(Ft());n==null&&s!=null&&(n=Zl(s,Ft()));let i=[];const o=St(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=FU(r,o);i=i.concat(JU(a,c,l,u))}return s&&(i=i.concat(wR(s,t,r,n))),i}}function e8(t,e,n,r){const s=e.get(Ft());n==null&&s!=null&&(n=Zl(s,Ft()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=FU(r,o),u=t.operationForChild(o);u&&(i=i.concat(e8(u,a,c,l)))}),s&&(i=i.concat(wR(s,t,r,n))),i}function t8(t,e){const n=e.query,r=vy(t,n);return{hashFn:()=>(fY(e)||tt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?NY(t,n._path,r):xY(t,n._path);{const i=RG(s,n);return a_(t,n,null,i)}}}}function vy(t,e){const n=OE(e);return t.queryToTagMap.get(n)}function OE(t){return t._path.toString()+"$"+t._queryIdentifier}function vR(t,e){return t.tagToQueryMap.get(e)}function _R(t){const e=t.indexOf("$");return fe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new hn(t.substr(0,e))}}function ER(t,e,n){const r=t.syncPointTree_.get(e);fe(r,"Missing sync point for query tag that we're tracking");const s=RE(t.pendingWriteTree_,e);return wR(r,n,s,null)}function PY(t){return t.fold((e,n,r)=>{if(n&&bu(n))return[PE(n)];{let s=[];return n&&(s=KU(n)),ri(r,(i,o)=>{s=s.concat(o)}),s}})}function Mg(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(SY())(t._repo,t._path):t}function OY(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=OE(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function kY(){return AY++}function DY(t,e,n){const r=e._path,s=vy(t,e),i=t8(t,n),o=t.listenProvider_.startListening(Mg(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)fe(!bu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!It(l)&&u&&bu(u))return[PE(u).query];{let h=[];return u&&(h=h.concat(KU(u).map(f=>f.query))),ri(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Mg(u),vy(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new CR(n)}node(){return this.node_}}class SR{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=dr(this.path_,e);return new SR(this.syncTree_,n)}node(){return bR(this.syncTree_,this.path_)}}const $Y=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},h2=function(t,e,n){if(!t||typeof t!="object")return t;if(fe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return MY(t[".sv"],e,n);if(typeof t[".sv"]=="object")return LY(t[".sv"],e);fe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},MY=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:fe(!1,"Unexpected server value: "+t)}},LY=function(t,e,n){t.hasOwnProperty("increment")||fe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&fe(!1,"Unexpected increment value: "+r);const s=e.node();if(fe(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},UY=function(t,e,n,r){return AR(e,new SR(n,t),r)},n8=function(t,e,n){return AR(t,new CR(e),n)};function AR(t,e,n){const r=t.getPriority().val(),s=h2(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=h2(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new vr(a,Cr(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new vr(s))),o.forEachChild(Hn,(a,c)=>{const l=AR(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function xR(t,e){let n=e instanceof hn?e:new hn(e),r=t,s=St(n);for(;s!==null;){const i=hp(r.node.children,s)||{children:{},childCount:0};r=new IR(s,r,i),n=vn(n),s=St(n)}return r}function em(t){return t.node.value}function r8(t,e){t.node.value=e,II(t)}function s8(t){return t.node.childCount>0}function jY(t){return em(t)===void 0&&!s8(t)}function kE(t,e){ri(t.node.children,(n,r)=>{e(new IR(n,t,r))})}function i8(t,e,n,r){n&&e(t),kE(t,s=>{i8(s,e,!0)})}function BY(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Zw(t){return new hn(t.parent===null?t.name:Zw(t.parent)+"/"+t.name)}function II(t){t.parent!==null&&FY(t.parent,t.name,t)}function FY(t,e,n){const r=jY(n),s=Hc(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,II(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,II(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WY=/[\[\].#$\/\u0000-\u001F\u007F]/,zY=/[\[\].#$\u0000-\u001F\u007F]/,D1=10*1024*1024,o8=function(t){return typeof t=="string"&&t.length!==0&&!WY.test(t)},a8=function(t){return typeof t=="string"&&t.length!==0&&!zY.test(t)},HY=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),a8(t)},qY=function(t,e,n,r){NR(nR(t,"value"),e,n)},NR=function(t,e,n){const r=n instanceof hn?new lK(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ku(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ku(r)+" with contents = "+e.toString());if(sU(e))throw new Error(t+"contains "+e.toString()+" "+Ku(r));if(typeof e=="string"&&e.length>D1/3&&xE(e)>D1)throw new Error(t+"contains a string greater than "+D1+" utf8 bytes "+Ku(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(ri(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!o8(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ku(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);uK(r,o),NR(t,a,r),dK(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ku(r)+" in addition to actual children.")}},c8=function(t,e,n,r){if(!a8(n))throw new Error(nR(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},VY=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),c8(t,e,n)},l8=function(t,e){if(St(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},GY=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!o8(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!HY(n))throw new Error(nR(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function TR(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!cR(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function u8(t,e,n){TR(t,n),d8(t,r=>cR(r,e))}function Ua(t,e,n){TR(t,n),d8(t,r=>jo(r,e)||jo(e,r))}function d8(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(YY(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function YY(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Og&&ns("event: "+n.toString()),Jp(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY="repo_interrupt",ZY=25;class XY{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KY,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jv(),this.transactionQueueTree_=new IR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JY(t,e,n){if(t.stats_=oR(t.repoInfo_),t.forceRestClient_||DG())t.server_=new Xv(t.repoInfo_,(r,s,i,o)=>{f2(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>p2(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ur(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ic(t.repoInfo_,e,(r,s,i,o)=>{f2(t,r,s,i,o)},r=>{p2(t,r)},r=>{tQ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=jG(t.repoInfo_,()=>new LK(t.stats_,t.server_)),t.infoData_=new OK,t.infoSyncTree_=new d2({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Yw(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),PR(t,"connected",!1),t.serverSyncTree_=new d2({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Ua(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function eQ(t){const n=t.infoData_.getNode(new hn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function RR(t){return $Y({timestamp:eQ(t)})}function f2(t,e,n,r,s){t.dataUpdateCount++;const i=new hn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Gv(n,l=>Cr(l));o=TY(t.serverSyncTree_,i,c,s)}else{const c=Cr(n);o=XU(t.serverSyncTree_,i,c,s)}else if(r){const c=Gv(n,l=>Cr(l));o=IY(t.serverSyncTree_,i,c)}else{const c=Cr(n);o=Yw(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=$E(t,i)),Ua(t.eventQueue_,a,o)}function p2(t,e){PR(t,"connected",e),e===!1&&sQ(t)}function tQ(t,e){ri(e,(n,r)=>{PR(t,n,r)})}function PR(t,e,n){const r=new hn("/.info/"+e),s=Cr(n);t.infoData_.updateSnapshot(r,s);const i=Yw(t.infoSyncTree_,r,s);Ua(t.eventQueue_,r,i)}function h8(t){return t.nextWriteId_++}function nQ(t,e,n){const r=RY(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Cr(s).withIndex(e._queryParams.getIndex());AI(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Yw(t.serverSyncTree_,e._path,i);else{const a=vy(t.serverSyncTree_,e);o=XU(t.serverSyncTree_,e._path,i,a)}return Ua(t.eventQueue_,e._path,o),a_(t.serverSyncTree_,e,n,null,!0),i},s=>(DE(t,"get for query "+ur(e)+" failed: "+s),Promise.reject(new Error(s))))}function rQ(t,e,n,r,s){DE(t,"set",{path:e.toString(),value:n,priority:r});const i=RR(t),o=Cr(n,r),a=bR(t.serverSyncTree_,e),c=n8(o,a,i),l=h8(t),u=ZU(t.serverSyncTree_,e,c,l,!0);TR(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Zs("set at "+e+" failed: "+h);const m=cd(t.serverSyncTree_,l,!p);Ua(t.eventQueue_,e,m),cQ(t,s,h,f)});const d=y8(t,e);$E(t,d),Ua(t.eventQueue_,d,[])}function sQ(t){DE(t,"onDisconnectEvents");const e=RR(t),n=Jv();vI(t.onDisconnect_,Ft(),(s,i)=>{const o=UY(s,i,t.serverSyncTree_,e);$U(n,s,o)});let r=[];vI(n,Ft(),(s,i)=>{r=r.concat(Yw(t.serverSyncTree_,s,i));const o=y8(t,s);$E(t,o)}),t.onDisconnect_=Jv(),Ua(t.eventQueue_,Ft(),r)}function iQ(t,e,n){let r;St(e._path)===".info"?r=AI(t.infoSyncTree_,e,n):r=AI(t.serverSyncTree_,e,n),u8(t.eventQueue_,e._path,r)}function oQ(t,e,n){let r;St(e._path)===".info"?r=a_(t.infoSyncTree_,e,n):r=a_(t.serverSyncTree_,e,n),u8(t.eventQueue_,e._path,r)}function aQ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(QY)}function DE(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ns(n,...e)}function cQ(t,e,n,r){e&&Jp(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function f8(t,e,n){return bR(t.serverSyncTree_,e,n)||tt.EMPTY_NODE}function OR(t,e=t.transactionQueueTree_){if(e||ME(t,e),em(e)){const n=m8(t,e);fe(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&lQ(t,Zw(e),n)}else s8(e)&&kE(e,n=>{OR(t,n)})}function lQ(t,e,n){const r=n.map(l=>l.currentWriteId),s=f8(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];fe(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=ys(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{DE(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(cd(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();ME(t,xR(t.transactionQueueTree_,e)),OR(t,t.transactionQueueTree_),Ua(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Jp(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Zs("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}$E(t,e)}},o)}function $E(t,e){const n=p8(t,e),r=Zw(n),s=m8(t,n);return uQ(t,s,r),r}function uQ(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=ys(n,c.path);let u=!1,d;if(fe(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(cd(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=ZY)u=!0,d="maxretry",s=s.concat(cd(t.serverSyncTree_,c.currentWriteId,!0));else{const h=f8(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){NR("transaction failed: Data returned ",f,c.path);let p=Cr(f);typeof f=="object"&&f!=null&&Hc(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=RR(t),b=n8(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=h8(t),o.splice(o.indexOf(w),1),s=s.concat(ZU(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(cd(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(cd(t.serverSyncTree_,c.currentWriteId,!0))}Ua(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}ME(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Jp(r[a]);OR(t,t.transactionQueueTree_)}function p8(t,e){let n,r=t.transactionQueueTree_;for(n=St(e);n!==null&&em(r)===void 0;)r=xR(r,n),e=vn(e),n=St(e);return r}function m8(t,e){const n=[];return g8(t,e,n),n.sort((r,s)=>r.order-s.order),n}function g8(t,e,n){const r=em(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);kE(e,s=>{g8(t,s,n)})}function ME(t,e){const n=em(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,r8(e,n.length>0?n:void 0)}kE(e,r=>{ME(t,r)})}function y8(t,e){const n=Zw(p8(t,e)),r=xR(t.transactionQueueTree_,e);return BY(r,s=>{$1(t,s)}),$1(t,r),i8(r,s=>{$1(t,s)}),n}function $1(t,e){const n=em(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(fe(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(fe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(cd(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?r8(e,void 0):n.length=i+1,Ua(t.eventQueue_,Zw(e),s);for(let o=0;o<r.length;o++)Jp(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function hQ(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zs(`Invalid query segment '${n}' in query '${t}'`)}return e}const m2=function(t,e){const n=fQ(t),r=n.namespace;n.domain==="firebase.com"&&$c(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&$c("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||AG();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new gU(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new hn(n.pathString)}},fQ=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=dQ(t.substring(u,d)));const h=hQ(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ur(this.snapshot.exportVal())}}class mQ{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return fe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return It(this._path)?null:AU(this._path)}get ref(){return new qc(this._repo,this._path)}get _queryIdentifier(){const e=e2(this._queryParams),n=sR(e);return n==="{}"?"default":n}get _queryObject(){return e2(this._queryParams)}isEqual(e){if(e=Zp(e),!(e instanceof kR))return!1;const n=this._repo===e._repo,r=cR(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+cK(this._path)}}class qc extends kR{constructor(e,n){super(e,n,new hR,!1)}get parent(){const e=xU(this._path);return e===null?null:new qc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class _y{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new hn(e),r=xI(this.ref,e);return new _y(this._node.getChild(n),r,Hn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new _y(s,xI(this.ref,r),Hn)))}hasChild(e){const n=new hn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function mi(t,e){return t=Zp(t),t._checkNotDeleted("ref"),e!==void 0?xI(t._root,e):t._root}function xI(t,e){return t=Zp(t),St(t._path)===null?VY("child","path",e):c8("child","path",e),new qc(t._repo,dr(t._path,e))}function b8(t){return l8("remove",t._path),Lg(t,null)}function Lg(t,e){t=Zp(t),l8("set",t._path),qY("set",e,t._path);const n=new IE;return rQ(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function td(t){t=Zp(t);const e=new w8(()=>{}),n=new LE(e);return nQ(t._repo,t,n).then(r=>new _y(r,new qc(t._repo,t._path),t._queryParams.getIndex()))}class LE{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new pQ("value",this,new _y(e.snapshotNode,new qc(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new mQ(this,e,n):null}matches(e){return e instanceof LE?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function gQ(t,e,n,r,s){const i=new w8(n,void 0),o=new LE(i);return iQ(t._repo,t,o),()=>oQ(t._repo,t,o)}function g2(t,e,n,r){return gQ(t,"value",e)}wY(qc);CY(qc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQ="FIREBASE_DATABASE_EMULATOR_HOST",NI={};let wQ=!1;function bQ(t,e,n,r){t.repoInfo_=new gU(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function vQ(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||$c("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ns("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=m2(i,s),a=o.repoInfo,c;typeof process<"u"&&Mk&&(c=Mk[yQ]),c?(i=`http://${c}?ns=${a.namespace}`,o=m2(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new MG(t.name,t.options,e);GY("Invalid Firebase Database URL",o),It(o.path)||$c("Database URL must point to the root of a Firebase Database (not including a child path).");const u=EQ(a,t,l,new $G(t.name,n));return new CQ(u,t)}function _Q(t,e){const n=NI[e];(!n||n[t.key]!==t)&&$c(`Database ${e}(${t.repoInfo_}) has already been deleted.`),aQ(t),delete n[t.key]}function EQ(t,e,n,r){let s=NI[e.name];s||(s={},NI[e.name]=s);let i=s[t.toURLString()];return i&&$c("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new XY(t,wQ,n,r),s[t.toURLString()]=i,i}class CQ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JY(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qc(this._repo,Ft())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_Q(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&$c("Cannot call "+e+" on a deleted database.")}}function SQ(t=X6(),e){const n=rG(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Vq("database");r&&AQ(n,...r)}return n}function AQ(t,e,n,r={}){t=Zp(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&$c("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&$c('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new uv(uv.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Gq(r.mockUserToken,t.app.options.projectId);i=new uv(o)}bQ(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IQ(t){bG(oG),Kv(new dy("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return vQ(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Lf(Lk,Uk,t),Lf(Lk,Uk,"esm2017")}Ic.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ic.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};IQ();const xQ={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},NQ=aG().length?X6():Z6(xQ),c_=SQ(NQ);var TI={},v8={exports:{}},Ri={},_8={exports:{}},E8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,D){var j=R.length;R.push(D);e:for(;0<j;){var z=j-1>>>1,Q=R[z];if(0<s(Q,D))R[z]=D,R[j]=Q,j=z;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var D=R[0],j=R.pop();if(j!==D){R[0]=j;e:for(var z=0,Q=R.length,te=Q>>>1;z<te;){var Z=2*(z+1)-1,X=R[Z],ie=Z+1,Ke=R[ie];if(0>s(X,j))ie<Q&&0>s(Ke,X)?(R[z]=Ke,R[ie]=j,z=ie):(R[z]=X,R[Z]=j,z=Z);else if(ie<Q&&0>s(Ke,j))R[z]=Ke,R[ie]=j,z=ie;else break e}}return D}function s(R,D){var j=R.sortIndex-D.sortIndex;return j!==0?j:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(R){for(var D=n(l);D!==null;){if(D.callback===null)r(l);else if(D.startTime<=R)r(l),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(l)}}function E(R){if(m=!1,_(R),!p)if(n(c)!==null)p=!0,T(C);else{var D=n(l);D!==null&&$(E,D.startTime-R)}}function C(R,D){p=!1,m&&(m=!1,y(x),x=-1),f=!0;var j=h;try{for(_(D),d=n(c);d!==null&&(!(d.expirationTime>D)||R&&!P());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var Q=z(d.expirationTime<=D);D=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(c)&&r(c),_(D)}else r(c);d=n(c)}if(d!==null)var te=!0;else{var Z=n(l);Z!==null&&$(E,Z.startTime-D),te=!1}return te}finally{d=null,h=j,f=!1}}var I=!1,A=null,x=-1,S=5,k=-1;function P(){return!(t.unstable_now()-k<S)}function M(){if(A!==null){var R=t.unstable_now();k=R;var D=!0;try{D=A(!0,R)}finally{D?W():(I=!1,A=null)}}else I=!1}var W;if(typeof b=="function")W=function(){b(M)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,N=U.port2;U.port1.onmessage=M,W=function(){N.postMessage(null)}}else W=function(){w(M,0)};function T(R){A=R,I||(I=!0,W())}function $(R,D){x=w(function(){R(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,T(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var j=h;h=D;try{return R()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var j=h;h=R;try{return D()}finally{h=j}},t.unstable_scheduleCallback=function(R,D,j){var z=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?z+j:z):j=z,R){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=j+Q,R={id:u++,callback:D,priorityLevel:R,startTime:j,expirationTime:Q,sortIndex:-1},j>z?(R.sortIndex=j,e(l,R),n(c)===null&&R===n(l)&&(m?(y(x),x=-1):m=!0,$(E,j-z))):(R.sortIndex=Q,e(c,R),p||f||(p=!0,T(C))),R},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(R){var D=h;return function(){var j=h;h=D;try{return R.apply(this,arguments)}finally{h=j}}}})(E8);_8.exports=E8;var TQ=_8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RQ=O,xi=TQ;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C8=new Set,Ey={};function ph(t,e){gp(t,e),gp(t+"Capture",e)}function gp(t,e){for(Ey[t]=e,t=0;t<e.length;t++)C8.add(e[t])}var Mc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),RI=Object.prototype.hasOwnProperty,PQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y2={},w2={};function OQ(t){return RI.call(w2,t)?!0:RI.call(y2,t)?!1:PQ.test(t)?w2[t]=!0:(y2[t]=!0,!1)}function kQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DQ(t,e,n,r){if(e===null||typeof e>"u"||kQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ss(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hr[t]=new Ss(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hr[e]=new Ss(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hr[t]=new Ss(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hr[t]=new Ss(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hr[t]=new Ss(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hr[t]=new Ss(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hr[t]=new Ss(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hr[t]=new Ss(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hr[t]=new Ss(t,5,!1,t.toLowerCase(),null,!1,!1)});var DR=/[\-:]([a-z])/g;function $R(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(DR,$R);Hr[e]=new Ss(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(DR,$R);Hr[e]=new Ss(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(DR,$R);Hr[e]=new Ss(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hr[t]=new Ss(t,1,!1,t.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new Ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hr[t]=new Ss(t,1,!1,t.toLowerCase(),null,!0,!0)});function MR(t,e,n,r){var s=Hr.hasOwnProperty(e)?Hr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DQ(e,n,s,r)&&(n=null),r||s===null?OQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vc=RQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nb=Symbol.for("react.element"),vf=Symbol.for("react.portal"),_f=Symbol.for("react.fragment"),LR=Symbol.for("react.strict_mode"),PI=Symbol.for("react.profiler"),S8=Symbol.for("react.provider"),A8=Symbol.for("react.context"),UR=Symbol.for("react.forward_ref"),OI=Symbol.for("react.suspense"),kI=Symbol.for("react.suspense_list"),jR=Symbol.for("react.memo"),wl=Symbol.for("react.lazy"),I8=Symbol.for("react.offscreen"),b2=Symbol.iterator;function km(t){return t===null||typeof t!="object"?null:(t=b2&&t[b2]||t["@@iterator"],typeof t=="function"?t:null)}var Ln=Object.assign,M1;function fg(t){if(M1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);M1=e&&e[1]||""}return`
`+M1+t}var L1=!1;function U1(t,e){if(!t||L1)return"";L1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{L1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fg(t):""}function $Q(t){switch(t.tag){case 5:return fg(t.type);case 16:return fg("Lazy");case 13:return fg("Suspense");case 19:return fg("SuspenseList");case 0:case 2:case 15:return t=U1(t.type,!1),t;case 11:return t=U1(t.type.render,!1),t;case 1:return t=U1(t.type,!0),t;default:return""}}function DI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _f:return"Fragment";case vf:return"Portal";case PI:return"Profiler";case LR:return"StrictMode";case OI:return"Suspense";case kI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A8:return(t.displayName||"Context")+".Consumer";case S8:return(t._context.displayName||"Context")+".Provider";case UR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jR:return e=t.displayName||null,e!==null?e:DI(t.type)||"Memo";case wl:e=t._payload,t=t._init;try{return DI(t(e))}catch{}}return null}function MQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return DI(e);case 8:return e===LR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x8(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LQ(t){var e=x8(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rb(t){t._valueTracker||(t._valueTracker=LQ(t))}function N8(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=x8(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function l_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $I(t,e){var n=e.checked;return Ln({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function v2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T8(t,e){e=e.checked,e!=null&&MR(t,"checked",e,!1)}function MI(t,e){T8(t,e);var n=vu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?LI(t,e.type,n):e.hasOwnProperty("defaultValue")&&LI(t,e.type,vu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function LI(t,e,n){(e!=="number"||l_(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pg=Array.isArray;function Bf(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function UI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Ln({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function E2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(pg(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vu(n)}}function R8(t,e){var n=vu(e.value),r=vu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function C2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P8(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P8(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sb,O8=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sb=sb||document.createElement("div"),sb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ug={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UQ=["Webkit","ms","Moz","O"];Object.keys(Ug).forEach(function(t){UQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ug[e]=Ug[t]})});function k8(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ug.hasOwnProperty(t)&&Ug[t]?(""+e).trim():e+"px"}function D8(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=k8(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var jQ=Ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function BI(t,e){if(e){if(jQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function FI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WI=null;function BR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zI=null,Ff=null,Wf=null;function S2(t){if(t=e0(t)){if(typeof zI!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=WE(e),zI(t.stateNode,t.type,e))}}function $8(t){Ff?Wf?Wf.push(t):Wf=[t]:Ff=t}function M8(){if(Ff){var t=Ff,e=Wf;if(Wf=Ff=null,S2(t),e)for(t=0;t<e.length;t++)S2(e[t])}}function L8(t,e){return t(e)}function U8(){}var j1=!1;function j8(t,e,n){if(j1)return t(e,n);j1=!0;try{return L8(t,e,n)}finally{j1=!1,(Ff!==null||Wf!==null)&&(U8(),M8())}}function Sy(t,e){var n=t.stateNode;if(n===null)return null;var r=WE(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var HI=!1;if(Mc)try{var Dm={};Object.defineProperty(Dm,"passive",{get:function(){HI=!0}}),window.addEventListener("test",Dm,Dm),window.removeEventListener("test",Dm,Dm)}catch{HI=!1}function BQ(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var jg=!1,u_=null,d_=!1,qI=null,FQ={onError:function(t){jg=!0,u_=t}};function WQ(t,e,n,r,s,i,o,a,c){jg=!1,u_=null,BQ.apply(FQ,arguments)}function zQ(t,e,n,r,s,i,o,a,c){if(WQ.apply(this,arguments),jg){if(jg){var l=u_;jg=!1,u_=null}else throw Error(ce(198));d_||(d_=!0,qI=l)}}function mh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function B8(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A2(t){if(mh(t)!==t)throw Error(ce(188))}function HQ(t){var e=t.alternate;if(!e){if(e=mh(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return A2(s),t;if(i===r)return A2(s),e;i=i.sibling}throw Error(ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function F8(t){return t=HQ(t),t!==null?W8(t):null}function W8(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W8(t);if(e!==null)return e;t=t.sibling}return null}var z8=xi.unstable_scheduleCallback,I2=xi.unstable_cancelCallback,qQ=xi.unstable_shouldYield,VQ=xi.unstable_requestPaint,Qn=xi.unstable_now,GQ=xi.unstable_getCurrentPriorityLevel,FR=xi.unstable_ImmediatePriority,H8=xi.unstable_UserBlockingPriority,h_=xi.unstable_NormalPriority,KQ=xi.unstable_LowPriority,q8=xi.unstable_IdlePriority,UE=null,Pa=null;function YQ(t){if(Pa&&typeof Pa.onCommitFiberRoot=="function")try{Pa.onCommitFiberRoot(UE,t,void 0,(t.current.flags&128)===128)}catch{}}var Ho=Math.clz32?Math.clz32:XQ,QQ=Math.log,ZQ=Math.LN2;function XQ(t){return t>>>=0,t===0?32:31-(QQ(t)/ZQ|0)|0}var ib=64,ob=4194304;function mg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function f_(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=mg(a):(i&=o,i!==0&&(r=mg(i)))}else o=n&~s,o!==0?r=mg(o):i!==0&&(r=mg(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ho(e),s=1<<n,r|=t[n],e&=~s;return r}function JQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eZ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ho(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=JQ(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function VI(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V8(){var t=ib;return ib<<=1,!(ib&4194240)&&(ib=64),t}function B1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xw(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ho(e),t[e]=n}function tZ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ho(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function WR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ho(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Xt=0;function G8(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K8,zR,Y8,Q8,Z8,GI=!1,ab=[],Xl=null,Jl=null,eu=null,Ay=new Map,Iy=new Map,Sl=[],nZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x2(t,e){switch(t){case"focusin":case"focusout":Xl=null;break;case"dragenter":case"dragleave":Jl=null;break;case"mouseover":case"mouseout":eu=null;break;case"pointerover":case"pointerout":Ay.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iy.delete(e.pointerId)}}function $m(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=e0(e),e!==null&&zR(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function rZ(t,e,n,r,s){switch(e){case"focusin":return Xl=$m(Xl,t,e,n,r,s),!0;case"dragenter":return Jl=$m(Jl,t,e,n,r,s),!0;case"mouseover":return eu=$m(eu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ay.set(i,$m(Ay.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Iy.set(i,$m(Iy.get(i)||null,t,e,n,r,s)),!0}return!1}function X8(t){var e=ld(t.target);if(e!==null){var n=mh(e);if(n!==null){if(e=n.tag,e===13){if(e=B8(n),e!==null){t.blockedOn=e,Z8(t.priority,function(){Y8(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=KI(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);WI=r,n.target.dispatchEvent(r),WI=null}else return e=e0(n),e!==null&&zR(e),t.blockedOn=n,!1;e.shift()}return!0}function N2(t,e,n){dv(t)&&n.delete(e)}function sZ(){GI=!1,Xl!==null&&dv(Xl)&&(Xl=null),Jl!==null&&dv(Jl)&&(Jl=null),eu!==null&&dv(eu)&&(eu=null),Ay.forEach(N2),Iy.forEach(N2)}function Mm(t,e){t.blockedOn===e&&(t.blockedOn=null,GI||(GI=!0,xi.unstable_scheduleCallback(xi.unstable_NormalPriority,sZ)))}function xy(t){function e(s){return Mm(s,t)}if(0<ab.length){Mm(ab[0],t);for(var n=1;n<ab.length;n++){var r=ab[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xl!==null&&Mm(Xl,t),Jl!==null&&Mm(Jl,t),eu!==null&&Mm(eu,t),Ay.forEach(e),Iy.forEach(e),n=0;n<Sl.length;n++)r=Sl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sl.length&&(n=Sl[0],n.blockedOn===null);)X8(n),n.blockedOn===null&&Sl.shift()}var zf=Vc.ReactCurrentBatchConfig,p_=!0;function iZ(t,e,n,r){var s=Xt,i=zf.transition;zf.transition=null;try{Xt=1,HR(t,e,n,r)}finally{Xt=s,zf.transition=i}}function oZ(t,e,n,r){var s=Xt,i=zf.transition;zf.transition=null;try{Xt=4,HR(t,e,n,r)}finally{Xt=s,zf.transition=i}}function HR(t,e,n,r){if(p_){var s=KI(t,e,n,r);if(s===null)Q1(t,e,r,m_,n),x2(t,r);else if(rZ(s,t,e,n,r))r.stopPropagation();else if(x2(t,r),e&4&&-1<nZ.indexOf(t)){for(;s!==null;){var i=e0(s);if(i!==null&&K8(i),i=KI(t,e,n,r),i===null&&Q1(t,e,r,m_,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Q1(t,e,r,null,n)}}var m_=null;function KI(t,e,n,r){if(m_=null,t=BR(r),t=ld(t),t!==null)if(e=mh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=B8(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return m_=t,null}function J8(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GQ()){case FR:return 1;case H8:return 4;case h_:case KQ:return 16;case q8:return 536870912;default:return 16}default:return 16}}var jl=null,qR=null,hv=null;function e4(){if(hv)return hv;var t,e=qR,n=e.length,r,s="value"in jl?jl.value:jl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return hv=s.slice(t,1<r?1-r:void 0)}function fv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cb(){return!0}function T2(){return!1}function Pi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cb:T2,this.isPropagationStopped=T2,this}return Ln(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cb)},persist:function(){},isPersistent:cb}),e}var tm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VR=Pi(tm),Jw=Ln({},tm,{view:0,detail:0}),aZ=Pi(Jw),F1,W1,Lm,jE=Ln({},Jw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lm&&(Lm&&t.type==="mousemove"?(F1=t.screenX-Lm.screenX,W1=t.screenY-Lm.screenY):W1=F1=0,Lm=t),F1)},movementY:function(t){return"movementY"in t?t.movementY:W1}}),R2=Pi(jE),cZ=Ln({},jE,{dataTransfer:0}),lZ=Pi(cZ),uZ=Ln({},Jw,{relatedTarget:0}),z1=Pi(uZ),dZ=Ln({},tm,{animationName:0,elapsedTime:0,pseudoElement:0}),hZ=Pi(dZ),fZ=Ln({},tm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pZ=Pi(fZ),mZ=Ln({},tm,{data:0}),P2=Pi(mZ),gZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wZ[t])?!!e[t]:!1}function GR(){return bZ}var vZ=Ln({},Jw,{key:function(t){if(t.key){var e=gZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GR,charCode:function(t){return t.type==="keypress"?fv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_Z=Pi(vZ),EZ=Ln({},jE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O2=Pi(EZ),CZ=Ln({},Jw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GR}),SZ=Pi(CZ),AZ=Ln({},tm,{propertyName:0,elapsedTime:0,pseudoElement:0}),IZ=Pi(AZ),xZ=Ln({},jE,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),NZ=Pi(xZ),TZ=[9,13,27,32],KR=Mc&&"CompositionEvent"in window,Bg=null;Mc&&"documentMode"in document&&(Bg=document.documentMode);var RZ=Mc&&"TextEvent"in window&&!Bg,t4=Mc&&(!KR||Bg&&8<Bg&&11>=Bg),k2=" ",D2=!1;function n4(t,e){switch(t){case"keyup":return TZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ef=!1;function PZ(t,e){switch(t){case"compositionend":return r4(e);case"keypress":return e.which!==32?null:(D2=!0,k2);case"textInput":return t=e.data,t===k2&&D2?null:t;default:return null}}function OZ(t,e){if(Ef)return t==="compositionend"||!KR&&n4(t,e)?(t=e4(),hv=qR=jl=null,Ef=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return t4&&e.locale!=="ko"?null:e.data;default:return null}}var kZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kZ[t.type]:e==="textarea"}function s4(t,e,n,r){$8(r),e=g_(e,"onChange"),0<e.length&&(n=new VR("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fg=null,Ny=null;function DZ(t){m4(t,0)}function BE(t){var e=Af(t);if(N8(e))return t}function $Z(t,e){if(t==="change")return e}var i4=!1;if(Mc){var H1;if(Mc){var q1="oninput"in document;if(!q1){var M2=document.createElement("div");M2.setAttribute("oninput","return;"),q1=typeof M2.oninput=="function"}H1=q1}else H1=!1;i4=H1&&(!document.documentMode||9<document.documentMode)}function L2(){Fg&&(Fg.detachEvent("onpropertychange",o4),Ny=Fg=null)}function o4(t){if(t.propertyName==="value"&&BE(Ny)){var e=[];s4(e,Ny,t,BR(t)),j8(DZ,e)}}function MZ(t,e,n){t==="focusin"?(L2(),Fg=e,Ny=n,Fg.attachEvent("onpropertychange",o4)):t==="focusout"&&L2()}function LZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return BE(Ny)}function UZ(t,e){if(t==="click")return BE(e)}function jZ(t,e){if(t==="input"||t==="change")return BE(e)}function BZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ko=typeof Object.is=="function"?Object.is:BZ;function Ty(t,e){if(Ko(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!RI.call(e,s)||!Ko(t[s],e[s]))return!1}return!0}function U2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j2(t,e){var n=U2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U2(n)}}function a4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?a4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c4(){for(var t=window,e=l_();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=l_(t.document)}return e}function YR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FZ(t){var e=c4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&a4(n.ownerDocument.documentElement,n)){if(r!==null&&YR(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=j2(n,i);var o=j2(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WZ=Mc&&"documentMode"in document&&11>=document.documentMode,Cf=null,YI=null,Wg=null,QI=!1;function B2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;QI||Cf==null||Cf!==l_(r)||(r=Cf,"selectionStart"in r&&YR(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wg&&Ty(Wg,r)||(Wg=r,r=g_(YI,"onSelect"),0<r.length&&(e=new VR("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cf)))}function lb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sf={animationend:lb("Animation","AnimationEnd"),animationiteration:lb("Animation","AnimationIteration"),animationstart:lb("Animation","AnimationStart"),transitionend:lb("Transition","TransitionEnd")},V1={},l4={};Mc&&(l4=document.createElement("div").style,"AnimationEvent"in window||(delete Sf.animationend.animation,delete Sf.animationiteration.animation,delete Sf.animationstart.animation),"TransitionEvent"in window||delete Sf.transitionend.transition);function FE(t){if(V1[t])return V1[t];if(!Sf[t])return t;var e=Sf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l4)return V1[t]=e[n];return t}var u4=FE("animationend"),d4=FE("animationiteration"),h4=FE("animationstart"),f4=FE("transitionend"),p4=new Map,F2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ru(t,e){p4.set(t,e),ph(e,[t])}for(var G1=0;G1<F2.length;G1++){var K1=F2[G1],zZ=K1.toLowerCase(),HZ=K1[0].toUpperCase()+K1.slice(1);Ru(zZ,"on"+HZ)}Ru(u4,"onAnimationEnd");Ru(d4,"onAnimationIteration");Ru(h4,"onAnimationStart");Ru("dblclick","onDoubleClick");Ru("focusin","onFocus");Ru("focusout","onBlur");Ru(f4,"onTransitionEnd");gp("onMouseEnter",["mouseout","mouseover"]);gp("onMouseLeave",["mouseout","mouseover"]);gp("onPointerEnter",["pointerout","pointerover"]);gp("onPointerLeave",["pointerout","pointerover"]);ph("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ph("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ph("onBeforeInput",["compositionend","keypress","textInput","paste"]);ph("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ph("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ph("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(gg));function W2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zQ(r,e,void 0,t),t.currentTarget=null}function m4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;W2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;W2(s,a,l),i=c}}}if(d_)throw t=qI,d_=!1,qI=null,t}function Cn(t,e){var n=e[tx];n===void 0&&(n=e[tx]=new Set);var r=t+"__bubble";n.has(r)||(g4(e,t,2,!1),n.add(r))}function Y1(t,e,n){var r=0;e&&(r|=4),g4(n,t,r,e)}var ub="_reactListening"+Math.random().toString(36).slice(2);function Ry(t){if(!t[ub]){t[ub]=!0,C8.forEach(function(n){n!=="selectionchange"&&(qZ.has(n)||Y1(n,!1,t),Y1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ub]||(e[ub]=!0,Y1("selectionchange",!1,e))}}function g4(t,e,n,r){switch(J8(e)){case 1:var s=iZ;break;case 4:s=oZ;break;default:s=HR}n=s.bind(null,e,n,t),s=void 0,!HI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Q1(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ld(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}j8(function(){var l=i,u=BR(n),d=[];e:{var h=p4.get(t);if(h!==void 0){var f=VR,p=t;switch(t){case"keypress":if(fv(n)===0)break e;case"keydown":case"keyup":f=_Z;break;case"focusin":p="focus",f=z1;break;case"focusout":p="blur",f=z1;break;case"beforeblur":case"afterblur":f=z1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=R2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=lZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=SZ;break;case u4:case d4:case h4:f=hZ;break;case f4:f=IZ;break;case"scroll":f=aZ;break;case"wheel":f=NZ;break;case"copy":case"cut":case"paste":f=pZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=O2}var m=(e&4)!==0,w=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var b=l,_;b!==null;){_=b;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,y!==null&&(E=Sy(b,y),E!=null&&m.push(Py(b,E,_)))),w)break;b=b.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==WI&&(p=n.relatedTarget||n.fromElement)&&(ld(p)||p[Lc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?ld(p):null,p!==null&&(w=mh(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(m=R2,E="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(m=O2,E="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Af(f),_=p==null?h:Af(p),h=new m(E,b+"leave",f,n,u),h.target=w,h.relatedTarget=_,E=null,ld(u)===l&&(m=new m(y,b+"enter",p,n,u),m.target=_,m.relatedTarget=w,E=m),w=E,f&&p)t:{for(m=f,y=p,b=0,_=m;_;_=Lh(_))b++;for(_=0,E=y;E;E=Lh(E))_++;for(;0<b-_;)m=Lh(m),b--;for(;0<_-b;)y=Lh(y),_--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=Lh(m),y=Lh(y)}m=null}else m=null;f!==null&&z2(d,h,f,m,!1),p!==null&&w!==null&&z2(d,w,p,m,!0)}}e:{if(h=l?Af(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=$Z;else if($2(h))if(i4)C=jZ;else{C=LZ;var I=MZ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=UZ);if(C&&(C=C(t,l))){s4(d,C,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&LI(h,"number",h.value)}switch(I=l?Af(l):window,t){case"focusin":($2(I)||I.contentEditable==="true")&&(Cf=I,YI=l,Wg=null);break;case"focusout":Wg=YI=Cf=null;break;case"mousedown":QI=!0;break;case"contextmenu":case"mouseup":case"dragend":QI=!1,B2(d,n,u);break;case"selectionchange":if(WZ)break;case"keydown":case"keyup":B2(d,n,u)}var A;if(KR)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ef?n4(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(t4&&n.locale!=="ko"&&(Ef||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ef&&(A=e4()):(jl=u,qR="value"in jl?jl.value:jl.textContent,Ef=!0)),I=g_(l,x),0<I.length&&(x=new P2(x,t,null,n,u),d.push({event:x,listeners:I}),A?x.data=A:(A=r4(n),A!==null&&(x.data=A)))),(A=RZ?PZ(t,n):OZ(t,n))&&(l=g_(l,"onBeforeInput"),0<l.length&&(u=new P2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}m4(d,e)})}function Py(t,e,n){return{instance:t,listener:e,currentTarget:n}}function g_(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sy(t,n),i!=null&&r.unshift(Py(t,i,s)),i=Sy(t,e),i!=null&&r.push(Py(t,i,s))),t=t.return}return r}function Lh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function z2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Sy(n,i),c!=null&&o.unshift(Py(n,c,a))):s||(c=Sy(n,i),c!=null&&o.push(Py(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VZ=/\r\n?/g,GZ=/\u0000|\uFFFD/g;function H2(t){return(typeof t=="string"?t:""+t).replace(VZ,`
`).replace(GZ,"")}function db(t,e,n){if(e=H2(e),H2(t)!==e&&n)throw Error(ce(425))}function y_(){}var ZI=null,XI=null;function JI(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ex=typeof setTimeout=="function"?setTimeout:void 0,KZ=typeof clearTimeout=="function"?clearTimeout:void 0,q2=typeof Promise=="function"?Promise:void 0,YZ=typeof queueMicrotask=="function"?queueMicrotask:typeof q2<"u"?function(t){return q2.resolve(null).then(t).catch(QZ)}:ex;function QZ(t){setTimeout(function(){throw t})}function Z1(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xy(e)}function tu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function V2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nm=Math.random().toString(36).slice(2),Ia="__reactFiber$"+nm,Oy="__reactProps$"+nm,Lc="__reactContainer$"+nm,tx="__reactEvents$"+nm,ZZ="__reactListeners$"+nm,XZ="__reactHandles$"+nm;function ld(t){var e=t[Ia];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lc]||n[Ia]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=V2(t);t!==null;){if(n=t[Ia])return n;t=V2(t)}return e}t=n,n=t.parentNode}return null}function e0(t){return t=t[Ia]||t[Lc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Af(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function WE(t){return t[Oy]||null}var nx=[],If=-1;function Pu(t){return{current:t}}function In(t){0>If||(t.current=nx[If],nx[If]=null,If--)}function _n(t,e){If++,nx[If]=t.current,t.current=e}var _u={},ss=Pu(_u),Xs=Pu(!1),Wd=_u;function yp(t,e){var n=t.type.contextTypes;if(!n)return _u;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Js(t){return t=t.childContextTypes,t!=null}function w_(){In(Xs),In(ss)}function G2(t,e,n){if(ss.current!==_u)throw Error(ce(168));_n(ss,e),_n(Xs,n)}function y4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ce(108,MQ(t)||"Unknown",s));return Ln({},n,r)}function b_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_u,Wd=ss.current,_n(ss,t),_n(Xs,Xs.current),!0}function K2(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=y4(t,e,Wd),r.__reactInternalMemoizedMergedChildContext=t,In(Xs),In(ss),_n(ss,t)):In(Xs),_n(Xs,n)}var pc=null,zE=!1,X1=!1;function w4(t){pc===null?pc=[t]:pc.push(t)}function JZ(t){zE=!0,w4(t)}function Ou(){if(!X1&&pc!==null){X1=!0;var t=0,e=Xt;try{var n=pc;for(Xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pc=null,zE=!1}catch(s){throw pc!==null&&(pc=pc.slice(t+1)),z8(FR,Ou),s}finally{Xt=e,X1=!1}}return null}var xf=[],Nf=0,v_=null,__=0,Zi=[],Xi=0,zd=null,Ec=1,Cc="";function Yu(t,e){xf[Nf++]=__,xf[Nf++]=v_,v_=t,__=e}function b4(t,e,n){Zi[Xi++]=Ec,Zi[Xi++]=Cc,Zi[Xi++]=zd,zd=t;var r=Ec;t=Cc;var s=32-Ho(r)-1;r&=~(1<<s),n+=1;var i=32-Ho(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ec=1<<32-Ho(e)+s|n<<s|r,Cc=i+t}else Ec=1<<i|n<<s|r,Cc=t}function QR(t){t.return!==null&&(Yu(t,1),b4(t,1,0))}function ZR(t){for(;t===v_;)v_=xf[--Nf],xf[Nf]=null,__=xf[--Nf],xf[Nf]=null;for(;t===zd;)zd=Zi[--Xi],Zi[Xi]=null,Cc=Zi[--Xi],Zi[Xi]=null,Ec=Zi[--Xi],Zi[Xi]=null}var Si=null,_i=null,Rn=!1,ko=null;function v4(t,e){var n=Ji(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Y2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Si=t,_i=tu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Si=t,_i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zd!==null?{id:Ec,overflow:Cc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ji(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Si=t,_i=null,!0):!1;default:return!1}}function rx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sx(t){if(Rn){var e=_i;if(e){var n=e;if(!Y2(t,e)){if(rx(t))throw Error(ce(418));e=tu(n.nextSibling);var r=Si;e&&Y2(t,e)?v4(r,n):(t.flags=t.flags&-4097|2,Rn=!1,Si=t)}}else{if(rx(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Rn=!1,Si=t}}}function Q2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Si=t}function hb(t){if(t!==Si)return!1;if(!Rn)return Q2(t),Rn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!JI(t.type,t.memoizedProps)),e&&(e=_i)){if(rx(t))throw _4(),Error(ce(418));for(;e;)v4(t,e),e=tu(e.nextSibling)}if(Q2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_i=tu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_i=null}}else _i=Si?tu(t.stateNode.nextSibling):null;return!0}function _4(){for(var t=_i;t;)t=tu(t.nextSibling)}function wp(){_i=Si=null,Rn=!1}function XR(t){ko===null?ko=[t]:ko.push(t)}var eX=Vc.ReactCurrentBatchConfig;function Um(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function fb(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Z2(t){var e=t._init;return e(t._payload)}function E4(t){function e(y,b){if(t){var _=y.deletions;_===null?(y.deletions=[b],y.flags|=16):_.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=iu(y,b),y.index=0,y.sibling=null,y}function i(y,b,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<b?(y.flags|=2,b):_):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,_,E){return b===null||b.tag!==6?(b=iS(_,y.mode,E),b.return=y,b):(b=s(b,_),b.return=y,b)}function c(y,b,_,E){var C=_.type;return C===_f?u(y,b,_.props.children,E,_.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===wl&&Z2(C)===b.type)?(E=s(b,_.props),E.ref=Um(y,b,_),E.return=y,E):(E=vv(_.type,_.key,_.props,null,y.mode,E),E.ref=Um(y,b,_),E.return=y,E)}function l(y,b,_,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=oS(_,y.mode,E),b.return=y,b):(b=s(b,_.children||[]),b.return=y,b)}function u(y,b,_,E,C){return b===null||b.tag!==7?(b=Pd(_,y.mode,E,C),b.return=y,b):(b=s(b,_),b.return=y,b)}function d(y,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=iS(""+b,y.mode,_),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nb:return _=vv(b.type,b.key,b.props,null,y.mode,_),_.ref=Um(y,null,b),_.return=y,_;case vf:return b=oS(b,y.mode,_),b.return=y,b;case wl:var E=b._init;return d(y,E(b._payload),_)}if(pg(b)||km(b))return b=Pd(b,y.mode,_,null),b.return=y,b;fb(y,b)}return null}function h(y,b,_,E){var C=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:a(y,b,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nb:return _.key===C?c(y,b,_,E):null;case vf:return _.key===C?l(y,b,_,E):null;case wl:return C=_._init,h(y,b,C(_._payload),E)}if(pg(_)||km(_))return C!==null?null:u(y,b,_,E,null);fb(y,_)}return null}function f(y,b,_,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(_)||null,a(b,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nb:return y=y.get(E.key===null?_:E.key)||null,c(b,y,E,C);case vf:return y=y.get(E.key===null?_:E.key)||null,l(b,y,E,C);case wl:var I=E._init;return f(y,b,_,I(E._payload),C)}if(pg(E)||km(E))return y=y.get(_)||null,u(b,y,E,C,null);fb(b,E)}return null}function p(y,b,_,E){for(var C=null,I=null,A=b,x=b=0,S=null;A!==null&&x<_.length;x++){A.index>x?(S=A,A=null):S=A.sibling;var k=h(y,A,_[x],E);if(k===null){A===null&&(A=S);break}t&&A&&k.alternate===null&&e(y,A),b=i(k,b,x),I===null?C=k:I.sibling=k,I=k,A=S}if(x===_.length)return n(y,A),Rn&&Yu(y,x),C;if(A===null){for(;x<_.length;x++)A=d(y,_[x],E),A!==null&&(b=i(A,b,x),I===null?C=A:I.sibling=A,I=A);return Rn&&Yu(y,x),C}for(A=r(y,A);x<_.length;x++)S=f(A,y,x,_[x],E),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?x:S.key),b=i(S,b,x),I===null?C=S:I.sibling=S,I=S);return t&&A.forEach(function(P){return e(y,P)}),Rn&&Yu(y,x),C}function m(y,b,_,E){var C=km(_);if(typeof C!="function")throw Error(ce(150));if(_=C.call(_),_==null)throw Error(ce(151));for(var I=C=null,A=b,x=b=0,S=null,k=_.next();A!==null&&!k.done;x++,k=_.next()){A.index>x?(S=A,A=null):S=A.sibling;var P=h(y,A,k.value,E);if(P===null){A===null&&(A=S);break}t&&A&&P.alternate===null&&e(y,A),b=i(P,b,x),I===null?C=P:I.sibling=P,I=P,A=S}if(k.done)return n(y,A),Rn&&Yu(y,x),C;if(A===null){for(;!k.done;x++,k=_.next())k=d(y,k.value,E),k!==null&&(b=i(k,b,x),I===null?C=k:I.sibling=k,I=k);return Rn&&Yu(y,x),C}for(A=r(y,A);!k.done;x++,k=_.next())k=f(A,y,x,k.value,E),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?x:k.key),b=i(k,b,x),I===null?C=k:I.sibling=k,I=k);return t&&A.forEach(function(M){return e(y,M)}),Rn&&Yu(y,x),C}function w(y,b,_,E){if(typeof _=="object"&&_!==null&&_.type===_f&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nb:e:{for(var C=_.key,I=b;I!==null;){if(I.key===C){if(C=_.type,C===_f){if(I.tag===7){n(y,I.sibling),b=s(I,_.props.children),b.return=y,y=b;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===wl&&Z2(C)===I.type){n(y,I.sibling),b=s(I,_.props),b.ref=Um(y,I,_),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}_.type===_f?(b=Pd(_.props.children,y.mode,E,_.key),b.return=y,y=b):(E=vv(_.type,_.key,_.props,null,y.mode,E),E.ref=Um(y,b,_),E.return=y,y=E)}return o(y);case vf:e:{for(I=_.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(y,b.sibling),b=s(b,_.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=oS(_,y.mode,E),b.return=y,y=b}return o(y);case wl:return I=_._init,w(y,b,I(_._payload),E)}if(pg(_))return p(y,b,_,E);if(km(_))return m(y,b,_,E);fb(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,_),b.return=y,y=b):(n(y,b),b=iS(_,y.mode,E),b.return=y,y=b),o(y)):n(y,b)}return w}var bp=E4(!0),C4=E4(!1),E_=Pu(null),C_=null,Tf=null,JR=null;function eP(){JR=Tf=C_=null}function tP(t){var e=E_.current;In(E_),t._currentValue=e}function ix(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hf(t,e){C_=t,JR=Tf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ys=!0),t.firstContext=null)}function ro(t){var e=t._currentValue;if(JR!==t)if(t={context:t,memoizedValue:e,next:null},Tf===null){if(C_===null)throw Error(ce(308));Tf=t,C_.dependencies={lanes:0,firstContext:t}}else Tf=Tf.next=t;return e}var ud=null;function nP(t){ud===null?ud=[t]:ud.push(t)}function S4(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,nP(e)):(n.next=s.next,s.next=n),e.interleaved=n,Uc(t,r)}function Uc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bl=!1;function rP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Dt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Uc(t,n)}return s=r.interleaved,s===null?(e.next=e,nP(r)):(e.next=s.next,s.next=e),r.interleaved=e,Uc(t,n)}function pv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,WR(t,n)}}function X2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function S_(t,e,n,r){var s=t.updateQueue;bl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ln({},d,h);break e;case 2:bl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);qd|=o,t.lanes=o,t.memoizedState=d}}function J2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ce(191,s));s.call(r)}}}var t0={},Oa=Pu(t0),ky=Pu(t0),Dy=Pu(t0);function dd(t){if(t===t0)throw Error(ce(174));return t}function sP(t,e){switch(_n(Dy,e),_n(ky,t),_n(Oa,t0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jI(e,t)}In(Oa),_n(Oa,e)}function vp(){In(Oa),In(ky),In(Dy)}function I4(t){dd(Dy.current);var e=dd(Oa.current),n=jI(e,t.type);e!==n&&(_n(ky,t),_n(Oa,n))}function iP(t){ky.current===t&&(In(Oa),In(ky))}var kn=Pu(0);function A_(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var J1=[];function oP(){for(var t=0;t<J1.length;t++)J1[t]._workInProgressVersionPrimary=null;J1.length=0}var mv=Vc.ReactCurrentDispatcher,eS=Vc.ReactCurrentBatchConfig,Hd=0,Mn=null,ar=null,Er=null,I_=!1,zg=!1,$y=0,tX=0;function Qr(){throw Error(ce(321))}function aP(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ko(t[n],e[n]))return!1;return!0}function cP(t,e,n,r,s,i){if(Hd=i,Mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mv.current=t===null||t.memoizedState===null?iX:oX,t=n(r,s),zg){i=0;do{if(zg=!1,$y=0,25<=i)throw Error(ce(301));i+=1,Er=ar=null,e.updateQueue=null,mv.current=aX,t=n(r,s)}while(zg)}if(mv.current=x_,e=ar!==null&&ar.next!==null,Hd=0,Er=ar=Mn=null,I_=!1,e)throw Error(ce(300));return t}function lP(){var t=$y!==0;return $y=0,t}function pa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Mn.memoizedState=Er=t:Er=Er.next=t,Er}function so(){if(ar===null){var t=Mn.alternate;t=t!==null?t.memoizedState:null}else t=ar.next;var e=Er===null?Mn.memoizedState:Er.next;if(e!==null)Er=e,ar=t;else{if(t===null)throw Error(ce(310));ar=t,t={memoizedState:ar.memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},Er===null?Mn.memoizedState=Er=t:Er=Er.next=t}return Er}function My(t,e){return typeof e=="function"?e(t):e}function tS(t){var e=so(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=ar,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Hd&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Mn.lanes|=u,qd|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Ko(r,e.memoizedState)||(Ys=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Mn.lanes|=i,qd|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nS(t){var e=so(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ko(i,e.memoizedState)||(Ys=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function x4(){}function N4(t,e){var n=Mn,r=so(),s=e(),i=!Ko(r.memoizedState,s);if(i&&(r.memoizedState=s,Ys=!0),r=r.queue,uP(P4.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Er!==null&&Er.memoizedState.tag&1){if(n.flags|=2048,Ly(9,R4.bind(null,n,r,s,e),void 0,null),Tr===null)throw Error(ce(349));Hd&30||T4(n,e,s)}return s}function T4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R4(t,e,n,r){e.value=n,e.getSnapshot=r,O4(e)&&k4(t)}function P4(t,e,n){return n(function(){O4(e)&&k4(t)})}function O4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ko(t,n)}catch{return!0}}function k4(t){var e=Uc(t,1);e!==null&&qo(e,t,1,-1)}function eD(t){var e=pa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:My,lastRenderedState:t},e.queue=t,t=t.dispatch=sX.bind(null,Mn,t),[e.memoizedState,t]}function Ly(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function D4(){return so().memoizedState}function gv(t,e,n,r){var s=pa();Mn.flags|=t,s.memoizedState=Ly(1|e,n,void 0,r===void 0?null:r)}function HE(t,e,n,r){var s=so();r=r===void 0?null:r;var i=void 0;if(ar!==null){var o=ar.memoizedState;if(i=o.destroy,r!==null&&aP(r,o.deps)){s.memoizedState=Ly(e,n,i,r);return}}Mn.flags|=t,s.memoizedState=Ly(1|e,n,i,r)}function tD(t,e){return gv(8390656,8,t,e)}function uP(t,e){return HE(2048,8,t,e)}function $4(t,e){return HE(4,2,t,e)}function M4(t,e){return HE(4,4,t,e)}function L4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function U4(t,e,n){return n=n!=null?n.concat([t]):null,HE(4,4,L4.bind(null,e,t),n)}function dP(){}function j4(t,e){var n=so();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aP(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function B4(t,e){var n=so();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&aP(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function F4(t,e,n){return Hd&21?(Ko(n,e)||(n=V8(),Mn.lanes|=n,qd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ys=!0),t.memoizedState=n)}function nX(t,e){var n=Xt;Xt=n!==0&&4>n?n:4,t(!0);var r=eS.transition;eS.transition={};try{t(!1),e()}finally{Xt=n,eS.transition=r}}function W4(){return so().memoizedState}function rX(t,e,n){var r=su(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},z4(t))H4(e,n);else if(n=S4(t,e,n,r),n!==null){var s=bs();qo(n,t,r,s),q4(n,e,r)}}function sX(t,e,n){var r=su(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(z4(t))H4(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ko(a,o)){var c=e.interleaved;c===null?(s.next=s,nP(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=S4(t,e,s,r),n!==null&&(s=bs(),qo(n,t,r,s),q4(n,e,r))}}function z4(t){var e=t.alternate;return t===Mn||e!==null&&e===Mn}function H4(t,e){zg=I_=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function q4(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,WR(t,n)}}var x_={readContext:ro,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},iX={readContext:ro,useCallback:function(t,e){return pa().memoizedState=[t,e===void 0?null:e],t},useContext:ro,useEffect:tD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gv(4194308,4,L4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gv(4194308,4,t,e)},useInsertionEffect:function(t,e){return gv(4,2,t,e)},useMemo:function(t,e){var n=pa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rX.bind(null,Mn,t),[r.memoizedState,t]},useRef:function(t){var e=pa();return t={current:t},e.memoizedState=t},useState:eD,useDebugValue:dP,useDeferredValue:function(t){return pa().memoizedState=t},useTransition:function(){var t=eD(!1),e=t[0];return t=nX.bind(null,t[1]),pa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Mn,s=pa();if(Rn){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),Tr===null)throw Error(ce(349));Hd&30||T4(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tD(P4.bind(null,r,i,t),[t]),r.flags|=2048,Ly(9,R4.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=pa(),e=Tr.identifierPrefix;if(Rn){var n=Cc,r=Ec;n=(r&~(1<<32-Ho(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$y++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tX++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},oX={readContext:ro,useCallback:j4,useContext:ro,useEffect:uP,useImperativeHandle:U4,useInsertionEffect:$4,useLayoutEffect:M4,useMemo:B4,useReducer:tS,useRef:D4,useState:function(){return tS(My)},useDebugValue:dP,useDeferredValue:function(t){var e=so();return F4(e,ar.memoizedState,t)},useTransition:function(){var t=tS(My)[0],e=so().memoizedState;return[t,e]},useMutableSource:x4,useSyncExternalStore:N4,useId:W4,unstable_isNewReconciler:!1},aX={readContext:ro,useCallback:j4,useContext:ro,useEffect:uP,useImperativeHandle:U4,useInsertionEffect:$4,useLayoutEffect:M4,useMemo:B4,useReducer:nS,useRef:D4,useState:function(){return nS(My)},useDebugValue:dP,useDeferredValue:function(t){var e=so();return ar===null?e.memoizedState=t:F4(e,ar.memoizedState,t)},useTransition:function(){var t=nS(My)[0],e=so().memoizedState;return[t,e]},useMutableSource:x4,useSyncExternalStore:N4,useId:W4,unstable_isNewReconciler:!1};function No(t,e){if(t&&t.defaultProps){e=Ln({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ox(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ln({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qE={isMounted:function(t){return(t=t._reactInternals)?mh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bs(),s=su(t),i=xc(r,s);i.payload=e,n!=null&&(i.callback=n),e=nu(t,i,s),e!==null&&(qo(e,t,s,r),pv(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bs(),s=su(t),i=xc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=nu(t,i,s),e!==null&&(qo(e,t,s,r),pv(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bs(),r=su(t),s=xc(n,r);s.tag=2,e!=null&&(s.callback=e),e=nu(t,s,r),e!==null&&(qo(e,t,r,n),pv(e,t,r))}};function nD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ty(n,r)||!Ty(s,i):!0}function V4(t,e,n){var r=!1,s=_u,i=e.contextType;return typeof i=="object"&&i!==null?i=ro(i):(s=Js(e)?Wd:ss.current,r=e.contextTypes,i=(r=r!=null)?yp(t,s):_u),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qE,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qE.enqueueReplaceState(e,e.state,null)}function ax(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},rP(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ro(i):(i=Js(e)?Wd:ss.current,s.context=yp(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ox(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&qE.enqueueReplaceState(s,s.state,null),S_(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _p(t,e){try{var n="",r=e;do n+=$Q(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cX=typeof WeakMap=="function"?WeakMap:Map;function G4(t,e,n){n=xc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){T_||(T_=!0,wx=r),cx(t,e)},n}function K4(t,e,n){n=xc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){cx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cx(t,e),typeof r!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cX;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=EX.bind(null,t,e,n),e.then(t,t))}function iD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function oD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xc(-1,1),e.tag=2,nu(n,e,1))),n.lanes|=1),t)}var lX=Vc.ReactCurrentOwner,Ys=!1;function fs(t,e,n,r){e.child=t===null?C4(e,null,n,r):bp(e,t.child,n,r)}function aD(t,e,n,r,s){n=n.render;var i=e.ref;return Hf(e,s),r=cP(t,e,n,r,i,s),n=lP(),t!==null&&!Ys?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jc(t,e,s)):(Rn&&n&&QR(e),e.flags|=1,fs(t,e,r,s),e.child)}function cD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!bP(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Y4(t,e,i,r,s)):(t=vv(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ty,n(o,r)&&t.ref===e.ref)return jc(t,e,s)}return e.flags|=1,t=iu(i,r),t.ref=e.ref,t.return=e,e.child=t}function Y4(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ty(i,r)&&t.ref===e.ref)if(Ys=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ys=!0);else return e.lanes=t.lanes,jc(t,e,s)}return lx(t,e,n,r,s)}function Q4(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Pf,gi),gi|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_n(Pf,gi),gi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_n(Pf,gi),gi|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_n(Pf,gi),gi|=r;return fs(t,e,s,n),e.child}function Z4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lx(t,e,n,r,s){var i=Js(n)?Wd:ss.current;return i=yp(e,i),Hf(e,s),n=cP(t,e,n,r,i,s),r=lP(),t!==null&&!Ys?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jc(t,e,s)):(Rn&&r&&QR(e),e.flags|=1,fs(t,e,n,s),e.child)}function lD(t,e,n,r,s){if(Js(n)){var i=!0;b_(e)}else i=!1;if(Hf(e,s),e.stateNode===null)yv(t,e),V4(e,n,r),ax(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=ro(l):(l=Js(n)?Wd:ss.current,l=yp(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&rD(e,o,r,l),bl=!1;var h=e.memoizedState;o.state=h,S_(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Xs.current||bl?(typeof u=="function"&&(ox(e,n,u,r),c=e.memoizedState),(a=bl||nD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,A4(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:No(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ro(c):(c=Js(n)?Wd:ss.current,c=yp(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&rD(e,o,r,c),bl=!1,h=e.memoizedState,o.state=h,S_(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Xs.current||bl?(typeof f=="function"&&(ox(e,n,f,r),p=e.memoizedState),(l=bl||nD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ux(t,e,n,r,i,s)}function ux(t,e,n,r,s,i){Z4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&K2(e,n,!1),jc(t,e,i);r=e.stateNode,lX.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bp(e,t.child,null,i),e.child=bp(e,null,a,i)):fs(t,e,a,i),e.memoizedState=r.state,s&&K2(e,n,!0),e.child}function X4(t){var e=t.stateNode;e.pendingContext?G2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&G2(t,e.context,!1),sP(t,e.containerInfo)}function uD(t,e,n,r,s){return wp(),XR(s),e.flags|=256,fs(t,e,n,r),e.child}var dx={dehydrated:null,treeContext:null,retryLane:0};function hx(t){return{baseLanes:t,cachePool:null,transitions:null}}function J4(t,e,n){var r=e.pendingProps,s=kn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_n(kn,s&1),t===null)return sx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=KE(o,r,0,null),t=Pd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hx(n),e.memoizedState=dx,t):hP(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return uX(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=iu(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=iu(a,i):(i=Pd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?hx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=dx,r}return i=t.child,t=i.sibling,r=iu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hP(t,e){return e=KE({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pb(t,e,n,r){return r!==null&&XR(r),bp(e,t.child,null,n),t=hP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uX(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rS(Error(ce(422))),pb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=KE({mode:"visible",children:r.children},s,0,null),i=Pd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bp(e,t.child,null,o),e.child.memoizedState=hx(o),e.memoizedState=dx,i);if(!(e.mode&1))return pb(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ce(419)),r=rS(i,r,void 0),pb(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ys||a){if(r=Tr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Uc(t,s),qo(r,t,s,-1))}return wP(),r=rS(Error(ce(421))),pb(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CX.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,_i=tu(s.nextSibling),Si=e,Rn=!0,ko=null,t!==null&&(Zi[Xi++]=Ec,Zi[Xi++]=Cc,Zi[Xi++]=zd,Ec=t.id,Cc=t.overflow,zd=e),e=hP(e,r.children),e.flags|=4096,e)}function dD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ix(t.return,e,n)}function sS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ej(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(fs(t,e,r.children,n),r=kn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dD(t,n,e);else if(t.tag===19)dD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_n(kn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&A_(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&A_(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sS(e,!0,n,null,i);break;case"together":sS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=iu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=iu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dX(t,e,n){switch(e.tag){case 3:X4(e),wp();break;case 5:I4(e);break;case 1:Js(e.type)&&b_(e);break;case 4:sP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_n(E_,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_n(kn,kn.current&1),e.flags|=128,null):n&e.child.childLanes?J4(t,e,n):(_n(kn,kn.current&1),t=jc(t,e,n),t!==null?t.sibling:null);_n(kn,kn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ej(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_n(kn,kn.current),r)break;return null;case 22:case 23:return e.lanes=0,Q4(t,e,n)}return jc(t,e,n)}var tj,fx,nj,rj;tj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fx=function(){};nj=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,dd(Oa.current);var i=null;switch(n){case"input":s=$I(t,s),r=$I(t,r),i=[];break;case"select":s=Ln({},s,{value:void 0}),r=Ln({},r,{value:void 0}),i=[];break;case"textarea":s=UI(t,s),r=UI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=y_)}BI(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ey.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ey.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Cn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};rj=function(t,e,n,r){n!==r&&(e.flags|=4)};function jm(t,e){if(!Rn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hX(t,e,n){var r=e.pendingProps;switch(ZR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(e),null;case 1:return Js(e.type)&&w_(),Zr(e),null;case 3:return r=e.stateNode,vp(),In(Xs),In(ss),oP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ko!==null&&(_x(ko),ko=null))),fx(t,e),Zr(e),null;case 5:iP(e);var s=dd(Dy.current);if(n=e.type,t!==null&&e.stateNode!=null)nj(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return Zr(e),null}if(t=dd(Oa.current),hb(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ia]=e,r[Oy]=i,t=(e.mode&1)!==0,n){case"dialog":Cn("cancel",r),Cn("close",r);break;case"iframe":case"object":case"embed":Cn("load",r);break;case"video":case"audio":for(s=0;s<gg.length;s++)Cn(gg[s],r);break;case"source":Cn("error",r);break;case"img":case"image":case"link":Cn("error",r),Cn("load",r);break;case"details":Cn("toggle",r);break;case"input":v2(r,i),Cn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Cn("invalid",r);break;case"textarea":E2(r,i),Cn("invalid",r)}BI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&db(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&db(r.textContent,a,t),s=["children",""+a]):Ey.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Cn("scroll",r)}switch(n){case"input":rb(r),_2(r,i,!0);break;case"textarea":rb(r),C2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=y_)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P8(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ia]=e,t[Oy]=r,tj(t,e,!1,!1),e.stateNode=t;e:{switch(o=FI(n,r),n){case"dialog":Cn("cancel",t),Cn("close",t),s=r;break;case"iframe":case"object":case"embed":Cn("load",t),s=r;break;case"video":case"audio":for(s=0;s<gg.length;s++)Cn(gg[s],t);s=r;break;case"source":Cn("error",t),s=r;break;case"img":case"image":case"link":Cn("error",t),Cn("load",t),s=r;break;case"details":Cn("toggle",t),s=r;break;case"input":v2(t,r),s=$I(t,r),Cn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ln({},r,{value:void 0}),Cn("invalid",t);break;case"textarea":E2(t,r),s=UI(t,r),Cn("invalid",t);break;default:s=r}BI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?D8(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&O8(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Cy(t,c):typeof c=="number"&&Cy(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ey.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Cn("scroll",t):c!=null&&MR(t,i,c,o))}switch(n){case"input":rb(t),_2(t,r,!1);break;case"textarea":rb(t),C2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vu(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Bf(t,!!r.multiple,i,!1):r.defaultValue!=null&&Bf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=y_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zr(e),null;case 6:if(t&&e.stateNode!=null)rj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=dd(Dy.current),dd(Oa.current),hb(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ia]=e,(i=r.nodeValue!==n)&&(t=Si,t!==null))switch(t.tag){case 3:db(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&db(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ia]=e,e.stateNode=r}return Zr(e),null;case 13:if(In(kn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rn&&_i!==null&&e.mode&1&&!(e.flags&128))_4(),wp(),e.flags|=98560,i=!1;else if(i=hb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[Ia]=e}else wp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zr(e),i=!1}else ko!==null&&(_x(ko),ko=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||kn.current&1?hr===0&&(hr=3):wP())),e.updateQueue!==null&&(e.flags|=4),Zr(e),null);case 4:return vp(),fx(t,e),t===null&&Ry(e.stateNode.containerInfo),Zr(e),null;case 10:return tP(e.type._context),Zr(e),null;case 17:return Js(e.type)&&w_(),Zr(e),null;case 19:if(In(kn),i=e.memoizedState,i===null)return Zr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)jm(i,!1);else{if(hr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=A_(t),o!==null){for(e.flags|=128,jm(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _n(kn,kn.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qn()>Ep&&(e.flags|=128,r=!0,jm(i,!1),e.lanes=4194304)}else{if(!r)if(t=A_(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Rn)return Zr(e),null}else 2*Qn()-i.renderingStartTime>Ep&&n!==1073741824&&(e.flags|=128,r=!0,jm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qn(),e.sibling=null,n=kn.current,_n(kn,r?n&1|2:n&1),e):(Zr(e),null);case 22:case 23:return yP(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gi&1073741824&&(Zr(e),e.subtreeFlags&6&&(e.flags|=8192)):Zr(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function fX(t,e){switch(ZR(e),e.tag){case 1:return Js(e.type)&&w_(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vp(),In(Xs),In(ss),oP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return iP(e),null;case 13:if(In(kn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));wp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return In(kn),null;case 4:return vp(),null;case 10:return tP(e.type._context),null;case 22:case 23:return yP(),null;case 24:return null;default:return null}}var mb=!1,rs=!1,pX=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Rf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zn(t,e,r)}else n.current=null}function px(t,e,n){try{n()}catch(r){zn(t,e,r)}}var hD=!1;function mX(t,e){if(ZI=p_,t=c4(),YR(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(XI={focusedElem:t,selectionRange:n},p_=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:No(e.type,m),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(E){zn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return p=hD,hD=!1,p}function Hg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&px(e,n,i)}s=s.next}while(s!==r)}}function VE(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sj(t){var e=t.alternate;e!==null&&(t.alternate=null,sj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ia],delete e[Oy],delete e[tx],delete e[ZZ],delete e[XZ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ij(t){return t.tag===5||t.tag===3||t.tag===4}function fD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ij(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=y_));else if(r!==4&&(t=t.child,t!==null))for(gx(t,e,n),t=t.sibling;t!==null;)gx(t,e,n),t=t.sibling}function yx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yx(t,e,n),t=t.sibling;t!==null;)yx(t,e,n),t=t.sibling}var Ur=null,Oo=!1;function Jc(t,e,n){for(n=n.child;n!==null;)oj(t,e,n),n=n.sibling}function oj(t,e,n){if(Pa&&typeof Pa.onCommitFiberUnmount=="function")try{Pa.onCommitFiberUnmount(UE,n)}catch{}switch(n.tag){case 5:rs||Rf(n,e);case 6:var r=Ur,s=Oo;Ur=null,Jc(t,e,n),Ur=r,Oo=s,Ur!==null&&(Oo?(t=Ur,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ur.removeChild(n.stateNode));break;case 18:Ur!==null&&(Oo?(t=Ur,n=n.stateNode,t.nodeType===8?Z1(t.parentNode,n):t.nodeType===1&&Z1(t,n),xy(t)):Z1(Ur,n.stateNode));break;case 4:r=Ur,s=Oo,Ur=n.stateNode.containerInfo,Oo=!0,Jc(t,e,n),Ur=r,Oo=s;break;case 0:case 11:case 14:case 15:if(!rs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&px(n,e,o),s=s.next}while(s!==r)}Jc(t,e,n);break;case 1:if(!rs&&(Rf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zn(n,e,a)}Jc(t,e,n);break;case 21:Jc(t,e,n);break;case 22:n.mode&1?(rs=(r=rs)||n.memoizedState!==null,Jc(t,e,n),rs=r):Jc(t,e,n);break;default:Jc(t,e,n)}}function pD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pX),e.forEach(function(r){var s=SX.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ur=a.stateNode,Oo=!1;break e;case 3:Ur=a.stateNode.containerInfo,Oo=!0;break e;case 4:Ur=a.stateNode.containerInfo,Oo=!0;break e}a=a.return}if(Ur===null)throw Error(ce(160));oj(i,o,s),Ur=null,Oo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){zn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aj(e,t),e=e.sibling}function aj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bo(e,t),sa(t),r&4){try{Hg(3,t,t.return),VE(3,t)}catch(m){zn(t,t.return,m)}try{Hg(5,t,t.return)}catch(m){zn(t,t.return,m)}}break;case 1:bo(e,t),sa(t),r&512&&n!==null&&Rf(n,n.return);break;case 5:if(bo(e,t),sa(t),r&512&&n!==null&&Rf(n,n.return),t.flags&32){var s=t.stateNode;try{Cy(s,"")}catch(m){zn(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&T8(s,i),FI(a,o);var l=FI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?D8(s,d):u==="dangerouslySetInnerHTML"?O8(s,d):u==="children"?Cy(s,d):MR(s,u,d,l)}switch(a){case"input":MI(s,i);break;case"textarea":R8(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Bf(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Bf(s,!!i.multiple,i.defaultValue,!0):Bf(s,!!i.multiple,i.multiple?[]:"",!1))}s[Oy]=i}catch(m){zn(t,t.return,m)}}break;case 6:if(bo(e,t),sa(t),r&4){if(t.stateNode===null)throw Error(ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){zn(t,t.return,m)}}break;case 3:if(bo(e,t),sa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xy(e.containerInfo)}catch(m){zn(t,t.return,m)}break;case 4:bo(e,t),sa(t);break;case 13:bo(e,t),sa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mP=Qn())),r&4&&pD(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(rs=(l=rs)||u,bo(e,t),rs=l):bo(e,t),sa(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Te=t,u=t.child;u!==null;){for(d=Te=u;Te!==null;){switch(h=Te,f=h.child,h.tag){case 0:case 11:case 14:case 15:Hg(4,h,h.return);break;case 1:Rf(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){zn(r,n,m)}}break;case 5:Rf(h,h.return);break;case 22:if(h.memoizedState!==null){gD(d);continue}}f!==null?(f.return=h,Te=f):gD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=k8("display",o))}catch(m){zn(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){zn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bo(e,t),sa(t),r&4&&pD(t);break;case 21:break;default:bo(e,t),sa(t)}}function sa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ij(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cy(s,""),r.flags&=-33);var i=fD(t);yx(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=fD(t);gx(t,a,o);break;default:throw Error(ce(161))}}catch(c){zn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gX(t,e,n){Te=t,cj(t)}function cj(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var s=Te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||mb;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||rs;a=mb;var l=rs;if(mb=o,(rs=c)&&!l)for(Te=s;Te!==null;)o=Te,c=o.child,o.tag===22&&o.memoizedState!==null?yD(s):c!==null?(c.return=o,Te=c):yD(s);for(;i!==null;)Te=i,cj(i),i=i.sibling;Te=s,mb=a,rs=l}mD(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Te=i):mD(t)}}function mD(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rs||VE(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:No(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&J2(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}J2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&xy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}rs||e.flags&512&&mx(e)}catch(h){zn(e,e.return,h)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function gD(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function yD(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{VE(4,e)}catch(c){zn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){zn(e,s,c)}}var i=e.return;try{mx(e)}catch(c){zn(e,i,c)}break;case 5:var o=e.return;try{mx(e)}catch(c){zn(e,o,c)}}}catch(c){zn(e,e.return,c)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var yX=Math.ceil,N_=Vc.ReactCurrentDispatcher,fP=Vc.ReactCurrentOwner,no=Vc.ReactCurrentBatchConfig,Dt=0,Tr=null,nr=null,Fr=0,gi=0,Pf=Pu(0),hr=0,Uy=null,qd=0,GE=0,pP=0,qg=null,qs=null,mP=0,Ep=1/0,fc=null,T_=!1,wx=null,ru=null,gb=!1,Bl=null,R_=0,Vg=0,bx=null,wv=-1,bv=0;function bs(){return Dt&6?Qn():wv!==-1?wv:wv=Qn()}function su(t){return t.mode&1?Dt&2&&Fr!==0?Fr&-Fr:eX.transition!==null?(bv===0&&(bv=V8()),bv):(t=Xt,t!==0||(t=window.event,t=t===void 0?16:J8(t.type)),t):1}function qo(t,e,n,r){if(50<Vg)throw Vg=0,bx=null,Error(ce(185));Xw(t,n,r),(!(Dt&2)||t!==Tr)&&(t===Tr&&(!(Dt&2)&&(GE|=n),hr===4&&Al(t,Fr)),ei(t,r),n===1&&Dt===0&&!(e.mode&1)&&(Ep=Qn()+500,zE&&Ou()))}function ei(t,e){var n=t.callbackNode;eZ(t,e);var r=f_(t,t===Tr?Fr:0);if(r===0)n!==null&&I2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&I2(n),e===1)t.tag===0?JZ(wD.bind(null,t)):w4(wD.bind(null,t)),YZ(function(){!(Dt&6)&&Ou()}),n=null;else{switch(G8(r)){case 1:n=FR;break;case 4:n=H8;break;case 16:n=h_;break;case 536870912:n=q8;break;default:n=h_}n=gj(n,lj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lj(t,e){if(wv=-1,bv=0,Dt&6)throw Error(ce(327));var n=t.callbackNode;if(qf()&&t.callbackNode!==n)return null;var r=f_(t,t===Tr?Fr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=P_(t,r);else{e=r;var s=Dt;Dt|=2;var i=dj();(Tr!==t||Fr!==e)&&(fc=null,Ep=Qn()+500,Rd(t,e));do try{vX();break}catch(a){uj(t,a)}while(!0);eP(),N_.current=i,Dt=s,nr!==null?e=0:(Tr=null,Fr=0,e=hr)}if(e!==0){if(e===2&&(s=VI(t),s!==0&&(r=s,e=vx(t,s))),e===1)throw n=Uy,Rd(t,0),Al(t,r),ei(t,Qn()),n;if(e===6)Al(t,r);else{if(s=t.current.alternate,!(r&30)&&!wX(s)&&(e=P_(t,r),e===2&&(i=VI(t),i!==0&&(r=i,e=vx(t,i))),e===1))throw n=Uy,Rd(t,0),Al(t,r),ei(t,Qn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Qu(t,qs,fc);break;case 3:if(Al(t,r),(r&130023424)===r&&(e=mP+500-Qn(),10<e)){if(f_(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bs(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ex(Qu.bind(null,t,qs,fc),e);break}Qu(t,qs,fc);break;case 4:if(Al(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ho(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yX(r/1960))-r,10<r){t.timeoutHandle=ex(Qu.bind(null,t,qs,fc),r);break}Qu(t,qs,fc);break;case 5:Qu(t,qs,fc);break;default:throw Error(ce(329))}}}return ei(t,Qn()),t.callbackNode===n?lj.bind(null,t):null}function vx(t,e){var n=qg;return t.current.memoizedState.isDehydrated&&(Rd(t,e).flags|=256),t=P_(t,e),t!==2&&(e=qs,qs=n,e!==null&&_x(e)),t}function _x(t){qs===null?qs=t:qs.push.apply(qs,t)}function wX(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ko(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Al(t,e){for(e&=~pP,e&=~GE,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ho(e),r=1<<n;t[n]=-1,e&=~r}}function wD(t){if(Dt&6)throw Error(ce(327));qf();var e=f_(t,0);if(!(e&1))return ei(t,Qn()),null;var n=P_(t,e);if(t.tag!==0&&n===2){var r=VI(t);r!==0&&(e=r,n=vx(t,r))}if(n===1)throw n=Uy,Rd(t,0),Al(t,e),ei(t,Qn()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qu(t,qs,fc),ei(t,Qn()),null}function gP(t,e){var n=Dt;Dt|=1;try{return t(e)}finally{Dt=n,Dt===0&&(Ep=Qn()+500,zE&&Ou())}}function Vd(t){Bl!==null&&Bl.tag===0&&!(Dt&6)&&qf();var e=Dt;Dt|=1;var n=no.transition,r=Xt;try{if(no.transition=null,Xt=1,t)return t()}finally{Xt=r,no.transition=n,Dt=e,!(Dt&6)&&Ou()}}function yP(){gi=Pf.current,In(Pf)}function Rd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,KZ(n)),nr!==null)for(n=nr.return;n!==null;){var r=n;switch(ZR(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&w_();break;case 3:vp(),In(Xs),In(ss),oP();break;case 5:iP(r);break;case 4:vp();break;case 13:In(kn);break;case 19:In(kn);break;case 10:tP(r.type._context);break;case 22:case 23:yP()}n=n.return}if(Tr=t,nr=t=iu(t.current,null),Fr=gi=e,hr=0,Uy=null,pP=GE=qd=0,qs=qg=null,ud!==null){for(e=0;e<ud.length;e++)if(n=ud[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ud=null}return t}function uj(t,e){do{var n=nr;try{if(eP(),mv.current=x_,I_){for(var r=Mn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}I_=!1}if(Hd=0,Er=ar=Mn=null,zg=!1,$y=0,fP.current=null,n===null||n.return===null){hr=1,Uy=e,nr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Fr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=iD(o);if(f!==null){f.flags&=-257,oD(f,o,a,i,e),f.mode&1&&sD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(c),e.updateQueue=m}else p.add(c);break e}else{if(!(e&1)){sD(i,l,e),wP();break e}c=Error(ce(426))}}else if(Rn&&a.mode&1){var w=iD(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),oD(w,o,a,i,e),XR(_p(c,a));break e}}i=c=_p(c,a),hr!==4&&(hr=2),qg===null?qg=[i]:qg.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=G4(i,c,e);X2(i,y);break e;case 1:a=c;var b=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ru===null||!ru.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=K4(i,a,e);X2(i,E);break e}}i=i.return}while(i!==null)}fj(n)}catch(C){e=C,nr===n&&n!==null&&(nr=n=n.return);continue}break}while(!0)}function dj(){var t=N_.current;return N_.current=x_,t===null?x_:t}function wP(){(hr===0||hr===3||hr===2)&&(hr=4),Tr===null||!(qd&268435455)&&!(GE&268435455)||Al(Tr,Fr)}function P_(t,e){var n=Dt;Dt|=2;var r=dj();(Tr!==t||Fr!==e)&&(fc=null,Rd(t,e));do try{bX();break}catch(s){uj(t,s)}while(!0);if(eP(),Dt=n,N_.current=r,nr!==null)throw Error(ce(261));return Tr=null,Fr=0,hr}function bX(){for(;nr!==null;)hj(nr)}function vX(){for(;nr!==null&&!qQ();)hj(nr)}function hj(t){var e=mj(t.alternate,t,gi);t.memoizedProps=t.pendingProps,e===null?fj(t):nr=e,fP.current=null}function fj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fX(n,e),n!==null){n.flags&=32767,nr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hr=6,nr=null;return}}else if(n=hX(n,e,gi),n!==null){nr=n;return}if(e=e.sibling,e!==null){nr=e;return}nr=e=t}while(e!==null);hr===0&&(hr=5)}function Qu(t,e,n){var r=Xt,s=no.transition;try{no.transition=null,Xt=1,_X(t,e,n,r)}finally{no.transition=s,Xt=r}return null}function _X(t,e,n,r){do qf();while(Bl!==null);if(Dt&6)throw Error(ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(tZ(t,i),t===Tr&&(nr=Tr=null,Fr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gb||(gb=!0,gj(h_,function(){return qf(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=no.transition,no.transition=null;var o=Xt;Xt=1;var a=Dt;Dt|=4,fP.current=null,mX(t,n),aj(n,t),FZ(XI),p_=!!ZI,XI=ZI=null,t.current=n,gX(n),VQ(),Dt=a,Xt=o,no.transition=i}else t.current=n;if(gb&&(gb=!1,Bl=t,R_=s),i=t.pendingLanes,i===0&&(ru=null),YQ(n.stateNode),ei(t,Qn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(T_)throw T_=!1,t=wx,wx=null,t;return R_&1&&t.tag!==0&&qf(),i=t.pendingLanes,i&1?t===bx?Vg++:(Vg=0,bx=t):Vg=0,Ou(),null}function qf(){if(Bl!==null){var t=G8(R_),e=no.transition,n=Xt;try{if(no.transition=null,Xt=16>t?16:t,Bl===null)var r=!1;else{if(t=Bl,Bl=null,R_=0,Dt&6)throw Error(ce(331));var s=Dt;for(Dt|=4,Te=t.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Te=l;Te!==null;){var u=Te;switch(u.tag){case 0:case 11:case 15:Hg(8,u,i)}var d=u.child;if(d!==null)d.return=u,Te=d;else for(;Te!==null;){u=Te;var h=u.sibling,f=u.return;if(sj(u),u===l){Te=null;break}if(h!==null){h.return=f,Te=h;break}Te=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hg(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Te=y;break e}Te=i.return}}var b=t.current;for(Te=b;Te!==null;){o=Te;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Te=_;else e:for(o=b;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:VE(9,a)}}catch(C){zn(a,a.return,C)}if(a===o){Te=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Te=E;break e}Te=a.return}}if(Dt=s,Ou(),Pa&&typeof Pa.onPostCommitFiberRoot=="function")try{Pa.onPostCommitFiberRoot(UE,t)}catch{}r=!0}return r}finally{Xt=n,no.transition=e}}return!1}function bD(t,e,n){e=_p(n,e),e=G4(t,e,1),t=nu(t,e,1),e=bs(),t!==null&&(Xw(t,1,e),ei(t,e))}function zn(t,e,n){if(t.tag===3)bD(t,t,n);else for(;e!==null;){if(e.tag===3){bD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ru===null||!ru.has(r))){t=_p(n,t),t=K4(e,t,1),e=nu(e,t,1),t=bs(),e!==null&&(Xw(e,1,t),ei(e,t));break}}e=e.return}}function EX(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bs(),t.pingedLanes|=t.suspendedLanes&n,Tr===t&&(Fr&n)===n&&(hr===4||hr===3&&(Fr&130023424)===Fr&&500>Qn()-mP?Rd(t,0):pP|=n),ei(t,e)}function pj(t,e){e===0&&(t.mode&1?(e=ob,ob<<=1,!(ob&130023424)&&(ob=4194304)):e=1);var n=bs();t=Uc(t,e),t!==null&&(Xw(t,e,n),ei(t,n))}function CX(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pj(t,n)}function SX(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),pj(t,n)}var mj;mj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xs.current)Ys=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ys=!1,dX(t,e,n);Ys=!!(t.flags&131072)}else Ys=!1,Rn&&e.flags&1048576&&b4(e,__,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yv(t,e),t=e.pendingProps;var s=yp(e,ss.current);Hf(e,n),s=cP(null,e,r,t,s,n);var i=lP();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Js(r)?(i=!0,b_(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rP(e),s.updater=qE,e.stateNode=s,s._reactInternals=e,ax(e,r,t,n),e=ux(null,e,r,!0,i,n)):(e.tag=0,Rn&&i&&QR(e),fs(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yv(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=IX(r),t=No(r,t),s){case 0:e=lx(null,e,r,t,n);break e;case 1:e=lD(null,e,r,t,n);break e;case 11:e=aD(null,e,r,t,n);break e;case 14:e=cD(null,e,r,No(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:No(r,s),lx(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:No(r,s),lD(t,e,r,s,n);case 3:e:{if(X4(e),t===null)throw Error(ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,A4(t,e),S_(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_p(Error(ce(423)),e),e=uD(t,e,r,n,s);break e}else if(r!==s){s=_p(Error(ce(424)),e),e=uD(t,e,r,n,s);break e}else for(_i=tu(e.stateNode.containerInfo.firstChild),Si=e,Rn=!0,ko=null,n=C4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wp(),r===s){e=jc(t,e,n);break e}fs(t,e,r,n)}e=e.child}return e;case 5:return I4(e),t===null&&sx(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,JI(r,s)?o=null:i!==null&&JI(r,i)&&(e.flags|=32),Z4(t,e),fs(t,e,o,n),e.child;case 6:return t===null&&sx(e),null;case 13:return J4(t,e,n);case 4:return sP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bp(e,null,r,n):fs(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:No(r,s),aD(t,e,r,s,n);case 7:return fs(t,e,e.pendingProps,n),e.child;case 8:return fs(t,e,e.pendingProps.children,n),e.child;case 12:return fs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_n(E_,r._currentValue),r._currentValue=o,i!==null)if(Ko(i.value,o)){if(i.children===s.children&&!Xs.current){e=jc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=xc(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ix(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ix(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}fs(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hf(e,n),s=ro(s),r=r(s),e.flags|=1,fs(t,e,r,n),e.child;case 14:return r=e.type,s=No(r,e.pendingProps),s=No(r.type,s),cD(t,e,r,s,n);case 15:return Y4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:No(r,s),yv(t,e),e.tag=1,Js(r)?(t=!0,b_(e)):t=!1,Hf(e,n),V4(e,r,s),ax(e,r,s,n),ux(null,e,r,!0,t,n);case 19:return ej(t,e,n);case 22:return Q4(t,e,n)}throw Error(ce(156,e.tag))};function gj(t,e){return z8(t,e)}function AX(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(t,e,n,r){return new AX(t,e,n,r)}function bP(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IX(t){if(typeof t=="function")return bP(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UR)return 11;if(t===jR)return 14}return 2}function iu(t,e){var n=t.alternate;return n===null?(n=Ji(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vv(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")bP(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _f:return Pd(n.children,s,i,e);case LR:o=8,s|=8;break;case PI:return t=Ji(12,n,e,s|2),t.elementType=PI,t.lanes=i,t;case OI:return t=Ji(13,n,e,s),t.elementType=OI,t.lanes=i,t;case kI:return t=Ji(19,n,e,s),t.elementType=kI,t.lanes=i,t;case I8:return KE(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case S8:o=10;break e;case A8:o=9;break e;case UR:o=11;break e;case jR:o=14;break e;case wl:o=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Ji(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Pd(t,e,n,r){return t=Ji(7,t,r,e),t.lanes=n,t}function KE(t,e,n,r){return t=Ji(22,t,r,e),t.elementType=I8,t.lanes=n,t.stateNode={isHidden:!1},t}function iS(t,e,n){return t=Ji(6,t,null,e),t.lanes=n,t}function oS(t,e,n){return e=Ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xX(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=B1(0),this.expirationTimes=B1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B1(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vP(t,e,n,r,s,i,o,a,c){return t=new xX(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ji(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rP(i),t}function NX(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yj(t){if(!t)return _u;t=t._reactInternals;e:{if(mh(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Js(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(Js(n))return y4(t,n,e)}return e}function wj(t,e,n,r,s,i,o,a,c){return t=vP(n,r,!0,t,s,i,o,a,c),t.context=yj(null),n=t.current,r=bs(),s=su(n),i=xc(r,s),i.callback=e??null,nu(n,i,s),t.current.lanes=s,Xw(t,s,r),ei(t,r),t}function YE(t,e,n,r){var s=e.current,i=bs(),o=su(s);return n=yj(n),e.context===null?e.context=n:e.pendingContext=n,e=xc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nu(s,e,o),t!==null&&(qo(t,s,o,i),pv(t,s,o)),o}function O_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _P(t,e){vD(t,e),(t=t.alternate)&&vD(t,e)}function TX(){return null}var bj=typeof reportError=="function"?reportError:function(t){console.error(t)};function EP(t){this._internalRoot=t}QE.prototype.render=EP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));YE(t,e,null,null)};QE.prototype.unmount=EP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vd(function(){YE(null,t,null,null)}),e[Lc]=null}};function QE(t){this._internalRoot=t}QE.prototype.unstable_scheduleHydration=function(t){if(t){var e=Q8();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sl.length&&e!==0&&e<Sl[n].priority;n++);Sl.splice(n,0,t),n===0&&X8(t)}};function CP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ZE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _D(){}function RX(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=O_(o);i.call(l)}}var o=wj(e,r,t,0,null,!1,!1,"",_D);return t._reactRootContainer=o,t[Lc]=o.current,Ry(t.nodeType===8?t.parentNode:t),Vd(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=O_(c);a.call(l)}}var c=vP(t,0,!1,null,null,!1,!1,"",_D);return t._reactRootContainer=c,t[Lc]=c.current,Ry(t.nodeType===8?t.parentNode:t),Vd(function(){YE(e,c,n,r)}),c}function XE(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=O_(o);a.call(c)}}YE(e,o,t,s)}else o=RX(n,e,t,s,r);return O_(o)}K8=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mg(e.pendingLanes);n!==0&&(WR(e,n|1),ei(e,Qn()),!(Dt&6)&&(Ep=Qn()+500,Ou()))}break;case 13:Vd(function(){var r=Uc(t,1);if(r!==null){var s=bs();qo(r,t,1,s)}}),_P(t,1)}};zR=function(t){if(t.tag===13){var e=Uc(t,134217728);if(e!==null){var n=bs();qo(e,t,134217728,n)}_P(t,134217728)}};Y8=function(t){if(t.tag===13){var e=su(t),n=Uc(t,e);if(n!==null){var r=bs();qo(n,t,e,r)}_P(t,e)}};Q8=function(){return Xt};Z8=function(t,e){var n=Xt;try{return Xt=t,e()}finally{Xt=n}};zI=function(t,e,n){switch(e){case"input":if(MI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=WE(r);if(!s)throw Error(ce(90));N8(r),MI(r,s)}}}break;case"textarea":R8(t,n);break;case"select":e=n.value,e!=null&&Bf(t,!!n.multiple,e,!1)}};L8=gP;U8=Vd;var PX={usingClientEntryPoint:!1,Events:[e0,Af,WE,$8,M8,gP]},Bm={findFiberByHostInstance:ld,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OX={bundleType:Bm.bundleType,version:Bm.version,rendererPackageName:Bm.rendererPackageName,rendererConfig:Bm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=F8(t),t===null?null:t.stateNode},findFiberByHostInstance:Bm.findFiberByHostInstance||TX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yb.isDisabled&&yb.supportsFiber)try{UE=yb.inject(OX),Pa=yb}catch{}}Ri.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PX;Ri.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CP(e))throw Error(ce(200));return NX(t,e,null,n)};Ri.createRoot=function(t,e){if(!CP(t))throw Error(ce(299));var n=!1,r="",s=bj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=vP(t,1,!1,null,null,n,!1,r,s),t[Lc]=e.current,Ry(t.nodeType===8?t.parentNode:t),new EP(e)};Ri.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=F8(e),t=t===null?null:t.stateNode,t};Ri.flushSync=function(t){return Vd(t)};Ri.hydrate=function(t,e,n){if(!ZE(e))throw Error(ce(200));return XE(null,t,e,!0,n)};Ri.hydrateRoot=function(t,e,n){if(!CP(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wj(e,null,t,1,n??null,s,!1,i,o),t[Lc]=e.current,Ry(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new QE(e)};Ri.render=function(t,e,n){if(!ZE(e))throw Error(ce(200));return XE(null,t,e,!1,n)};Ri.unmountComponentAtNode=function(t){if(!ZE(t))throw Error(ce(40));return t._reactRootContainer?(Vd(function(){XE(null,null,t,!1,function(){t._reactRootContainer=null,t[Lc]=null})}),!0):!1};Ri.unstable_batchedUpdates=gP;Ri.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ZE(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return XE(t,e,n,!1,r)};Ri.version="18.3.1-next-f1338f8080-20240426";function vj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vj)}catch(t){console.error(t)}}vj(),v8.exports=Ri;var SP=v8.exports,ED=SP;TI.createRoot=ED.createRoot,TI.hydrateRoot=ED.hydrateRoot;const kX="_verified_lvyh0_1",AP={verified:kX},DX=()=>g.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:AP.verified,children:g.jsx("g",{children:g.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),$X=()=>g.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AP.verified,children:g.jsxs("g",{children:[g.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[g.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),g.jsx("stop",{offset:".539",stopColor:"#cd8105"}),g.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),g.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),g.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),g.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[g.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),g.jsx("stop",{offset:".406",stopColor:"#e2b719"}),g.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),g.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[g.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),g.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),g.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),MX=()=>g.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:AP.verified,children:g.jsx("g",{children:g.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function _j(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=_j(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ou(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=_j(t))&&(r&&(r+=" "),r+=e);return r}const LX="_root_98iqw_1",UX="_article_98iqw_21",CD={root:LX,article:UX},IP=({className:t,children:e})=>g.jsx("div",{className:ou("react-tweet-theme",CD.root,t),children:g.jsx("article",{className:CD.article,children:e})}),Ej=t=>g.jsx("img",{...t}),jX="_header_nqq4j_1",BX="_avatar_nqq4j_11",FX="_avatarOverflow_nqq4j_16",WX="_avatarSquare_nqq4j_23",zX="_avatarShadow_nqq4j_26",HX="_author_nqq4j_37",qX="_authorLink_nqq4j_44",VX="_authorVerified_nqq4j_53",GX="_authorLinkText_nqq4j_56",KX="_authorMeta_nqq4j_63",YX="_authorFollow_nqq4j_66",QX="_username_nqq4j_69",ZX="_follow_nqq4j_74",XX="_separator_nqq4j_82",JX="_brand_nqq4j_86",eJ="_twitterIcon_nqq4j_90",Pr={header:jX,avatar:BX,avatarOverflow:FX,avatarSquare:WX,avatarShadow:zX,author:HX,authorLink:qX,authorVerified:VX,authorLinkText:GX,authorMeta:KX,authorFollow:YX,username:QX,follow:ZX,separator:XX,brand:JX,twitterIcon:eJ},tJ="_verifiedOld_lcna5_1",nJ="_verifiedBlue_lcna5_4",rJ="_verifiedGovernment_lcna5_7",aS={verifiedOld:tJ,verifiedBlue:nJ,verifiedGovernment:rJ},Cj=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=g.jsx(DX,{}),s=aS.verifiedBlue;if(n)switch(t.is_blue_verified||(s=aS.verifiedOld),t.verified_type){case"Government":r=g.jsx(MX,{}),s=aS.verifiedGovernment;break;case"Business":r=g.jsx($X,{}),s=null;break}return n?g.jsx("div",{className:ou(e,s),children:r}):null},sJ=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:Ej,{user:s}=t;return g.jsxs("div",{className:Pr.header,children:[g.jsxs("a",{href:t.url,className:Pr.avatar,target:"_blank",rel:"noopener noreferrer",children:[g.jsx("div",{className:ou(Pr.avatarOverflow,s.profile_image_shape==="Square"&&Pr.avatarSquare),children:g.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),g.jsx("div",{className:Pr.avatarOverflow,children:g.jsx("div",{className:Pr.avatarShadow})})]}),g.jsxs("div",{className:Pr.author,children:[g.jsxs("a",{href:t.url,className:Pr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[g.jsx("div",{className:Pr.authorLinkText,children:g.jsx("span",{title:s.name,children:s.name})}),g.jsx(Cj,{user:s,className:Pr.authorVerified})]}),g.jsxs("div",{className:Pr.authorMeta,children:[g.jsx("a",{href:t.url,className:Pr.username,target:"_blank",rel:"noopener noreferrer",children:g.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),g.jsxs("div",{className:Pr.authorFollow,children:[g.jsx("span",{className:Pr.separator,children:""}),g.jsx("a",{href:s.follow_url,className:Pr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),g.jsx("a",{href:t.url,className:Pr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:g.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Pr.twitterIcon,children:g.jsx("g",{children:g.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},iJ="_root_1ec15_1",oJ={root:iJ},aJ=({tweet:t})=>g.jsxs("a",{href:t.in_reply_to_url,className:oJ.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),cJ="_root_eihfa_1",lJ={root:cJ},uJ=({href:t,children:e})=>g.jsx("a",{href:t,className:lJ.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),dJ="_root_1xq52_1",hJ={root:dJ},fJ=({tweet:t})=>g.jsx("p",{className:hJ.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return g.jsx(uJ,{href:e.href,children:e.text},n);case"media":return;default:return g.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),SD=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,Sj=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,pJ=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,mJ=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,gJ=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,yJ=t=>`https://x.com/hashtag/${t.text}`,wJ=t=>`https://x.com/search?q=%24${t.text}`,bJ=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,Aj=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},vJ=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},_J=t=>{const e=vJ(t);return e.length>1?e[1]:e[0]},Ex=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function AD(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Fm(n,"hashtag",t.entities.hashtags),Fm(n,"mention",t.entities.user_mentions),Fm(n,"url",t.entities.urls),Fm(n,"symbol",t.entities.symbols),t.entities.media&&Fm(n,"media",t.entities.media),EJ(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:yJ(r),text:s});case"mention":return Object.assign(r,{href:Sj(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:wJ(r),text:s});default:return Object.assign(r,{text:s})}})}function Fm(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function EJ(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const CJ=t=>({...t,url:SD(t),user:{...t.user,url:Sj(t),follow_url:gJ(t)},like_url:pJ(t),reply_url:mJ(t),in_reply_to_url:t.in_reply_to_screen_name?bJ(t):void 0,entities:AD(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:SD(t.quoted_tweet),entities:AD(t.quoted_tweet)}:void 0}),SJ="_root_g9tkv_1",AJ="_rounded_g9tkv_6",IJ="_mediaWrapper_g9tkv_10",xJ="_grid2Columns_g9tkv_17",NJ="_grid3_g9tkv_20",TJ="_grid2x2_g9tkv_23",RJ="_mediaContainer_g9tkv_26",PJ="_mediaLink_g9tkv_34",OJ="_skeleton_g9tkv_38",kJ="_image_g9tkv_43",di={root:SJ,rounded:AJ,mediaWrapper:IJ,grid2Columns:xJ,grid3:NJ,grid2x2:TJ,mediaContainer:RJ,mediaLink:PJ,skeleton:OJ,image:kJ},DJ="_anchor_fp31d_1",$J="_videoButton_fp31d_17",MJ="_videoButtonIcon_fp31d_35",LJ="_watchOnTwitter_fp31d_44",UJ="_viewReplies_fp31d_60",Uh={anchor:DJ,videoButton:$J,videoButtonIcon:MJ,watchOnTwitter:LJ,viewReplies:UJ},jJ=({tweet:t,media:e})=>{const[n,r]=O.useState(!0),[s,i]=O.useState(!1),[o,a]=O.useState(!1),c=_J(e);let l=0;return g.jsxs(g.Fragment,{children:[g.jsx("video",{className:di.image,poster:Aj(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:g.jsx("source",{src:c.url,type:c.content_type})}),n&&g.jsx("button",{type:"button",className:Uh.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:g.jsx("svg",{viewBox:"0 0 24 24",className:Uh.videoButtonIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&g.jsx("div",{className:Uh.watchOnTwitter,children:g.jsx("a",{href:t.url,className:Uh.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&g.jsx("a",{href:t.url,className:ou(Uh.anchor,Uh.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},BJ=t=>g.jsx("img",{...t}),ID=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},Ij=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:BJ;return g.jsx("div",{className:ou(di.root,!n&&di.rounded),children:g.jsx("div",{className:ou(di.mediaWrapper,o>1&&di.grid2Columns,o===3&&di.grid3,o>4&&di.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>g.jsx(O.Fragment,{children:l.type==="photo"?g.jsxs("a",{href:t.url,className:ou(di.mediaContainer,di.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[g.jsx("div",{className:di.skeleton,style:ID(l,o)}),g.jsx(c,{src:Aj(l,"small"),alt:l.ext_alt_text||"Image",className:di.image,draggable:!0})]},l.media_url_https):g.jsxs("div",{className:di.mediaContainer,children:[g.jsx("div",{className:di.skeleton,style:ID(l,o)}),g.jsx(jJ,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},FJ={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},WJ=new Intl.DateTimeFormat("en-US",FJ),zJ=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},HJ=t=>{const e=zJ(WJ.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},qJ="_root_i24yn_1",VJ={root:qJ},GJ=({tweet:t})=>{const e=new Date(t.created_at),n=HJ(e);return g.jsx("a",{className:VJ.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:g.jsx("time",{dateTime:e.toISOString(),children:n})})},KJ="_info_19qcj_1",YJ="_infoLink_19qcj_10",QJ="_infoIcon_19qcj_30",cS={info:KJ,infoLink:YJ,infoIcon:QJ},ZJ=({tweet:t})=>g.jsxs("div",{className:cS.info,children:[g.jsx(GJ,{tweet:t}),g.jsx("a",{className:cS.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:g.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:cS.infoIcon,children:g.jsx("g",{children:g.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),XJ="_actions_n2anf_1",JJ="_like_n2anf_13",eee="_reply_n2anf_14",tee="_copy_n2anf_15",nee="_likeIconWrapper_n2anf_27",ree="_likeCount_n2anf_30",see="_replyIconWrapper_n2anf_35",iee="_copyIconWrapper_n2anf_36",oee="_likeIcon_n2anf_27",aee="_replyIcon_n2anf_35",cee="_copyIcon_n2anf_36",lee="_replyText_n2anf_56",uee="_copyText_n2anf_57",Fs={actions:XJ,like:JJ,reply:eee,copy:tee,likeIconWrapper:nee,likeCount:ree,replyIconWrapper:see,copyIconWrapper:iee,likeIcon:oee,replyIcon:aee,copyIcon:cee,replyText:lee,copyText:uee},dee=({tweet:t})=>{const[e,n]=O.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return O.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),g.jsxs("button",{type:"button",className:Fs.copy,"aria-label":"Copy link",onClick:r,children:[g.jsx("div",{className:Fs.copyIconWrapper,children:e?g.jsx("svg",{viewBox:"0 0 24 24",className:Fs.copyIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):g.jsx("svg",{viewBox:"0 0 24 24",className:Fs.copyIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),g.jsx("span",{className:Fs.copyText,children:e?"Copied!":"Copy link"})]})},hee=({tweet:t})=>{const e=Ex(t.favorite_count);return g.jsxs("div",{className:Fs.actions,children:[g.jsxs("a",{className:Fs.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[g.jsx("div",{className:Fs.likeIconWrapper,children:g.jsx("svg",{viewBox:"0 0 24 24",className:Fs.likeIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),g.jsx("span",{className:Fs.likeCount,children:e})]}),g.jsxs("a",{className:Fs.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[g.jsx("div",{className:Fs.replyIconWrapper,children:g.jsx("svg",{viewBox:"0 0 24 24",className:Fs.replyIcon,"aria-hidden":"true",children:g.jsx("g",{children:g.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),g.jsx("span",{className:Fs.replyText,children:"Reply"})]}),g.jsx(dee,{tweet:t})]})},fee="_replies_1cutb_1",pee="_link_1cutb_4",mee="_text_1cutb_23",lS={replies:fee,link:pee,text:mee},gee=({tweet:t})=>g.jsx("div",{className:lS.replies,children:g.jsx("a",{className:lS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:g.jsx("span",{className:lS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Ex(t.conversation_count)} reply`:`Read ${Ex(t.conversation_count)} replies`})})}),yee="_root_q5799_1",wee="_article_q5799_16",xD={root:yee,article:wee},bee=({tweet:t,children:e})=>g.jsx("div",{className:xD.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:g.jsx("article",{className:xD.article,children:e})}),vee="_header_r31i5_1",_ee="_avatar_r31i5_11",Eee="_avatarSquare_r31i5_17",Cee="_author_r31i5_21",See="_authorText_r31i5_26",Aee="_username_r31i5_33",Uu={header:vee,avatar:_ee,avatarSquare:Eee,author:Cee,authorText:See,username:Aee},Iee=({tweet:t})=>{const{user:e}=t;return g.jsxs("div",{className:Uu.header,children:[g.jsx("a",{href:t.url,className:Uu.avatar,target:"_blank",rel:"noopener noreferrer",children:g.jsx("div",{className:ou(Uu.avatarOverflow,e.profile_image_shape==="Square"&&Uu.avatarSquare),children:g.jsx(Ej,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),g.jsxs("div",{className:Uu.author,children:[g.jsx("div",{className:Uu.authorText,children:g.jsx("span",{title:e.name,children:e.name})}),g.jsx(Cj,{user:e}),g.jsx("div",{className:Uu.username,children:g.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},xee="_root_175ot_1",Nee={root:xee},Tee=({tweet:t})=>g.jsx("p",{className:Nee.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>g.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Ree=({tweet:t})=>{var e;return g.jsxs(bee,{tweet:t,children:[g.jsx(Iee,{tweet:t}),g.jsx(Tee,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?g.jsx(Ij,{quoted:!0,tweet:t}):null]})},Pee=({tweet:t,components:e})=>{var n;const r=O.useMemo(()=>CJ(t),[t]);return g.jsxs(IP,{children:[g.jsx(sJ,{tweet:r,components:e}),r.in_reply_to_status_id_str&&g.jsx(aJ,{tweet:r}),g.jsx(fJ,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?g.jsx(Ij,{tweet:r,components:e}):null,r.quoted_tweet&&g.jsx(Ree,{tweet:r.quoted_tweet}),g.jsx(ZJ,{tweet:r}),g.jsx(hee,{tweet:r}),g.jsx(gee,{tweet:r})]})},Oee="_root_16yxa_1",kee={root:Oee},Dee=t=>g.jsx(IP,{children:g.jsxs("div",{className:kee.root,children:[g.jsx("h3",{children:"Tweet not found"}),g.jsx("p",{children:"The embedded tweet could not be found"})]})}),$ee="_skeleton_oi7hr_1",Mee={skeleton:$ee},wb=({style:t})=>g.jsx("span",{className:Mee.skeleton,style:t}),Lee="_root_17qqv_1",Uee={root:Lee},jee=()=>g.jsxs(IP,{className:Uee.root,children:[g.jsx(wb,{style:{height:"3rem",marginBottom:"0.75rem"}}),g.jsx(wb,{style:{height:"6rem",margin:"0.5rem 0"}}),g.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),g.jsx(wb,{style:{height:"2rem"}}),g.jsx(wb,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var xj={exports:{}},Nj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=O;function Bee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fee=typeof Object.is=="function"?Object.is:Bee,Wee=Cp.useState,zee=Cp.useEffect,Hee=Cp.useLayoutEffect,qee=Cp.useDebugValue;function Vee(t,e){var n=e(),r=Wee({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Hee(function(){s.value=n,s.getSnapshot=e,uS(s)&&i({inst:s})},[t,n,e]),zee(function(){return uS(s)&&i({inst:s}),t(function(){uS(s)&&i({inst:s})})},[t]),qee(n),n}function uS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fee(t,n)}catch{return!0}}function Gee(t,e){return e()}var Kee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Gee:Vee;Nj.useSyncExternalStore=Cp.useSyncExternalStore!==void 0?Cp.useSyncExternalStore:Kee;xj.exports=Nj;var Tj=xj.exports;const Rj=0,Pj=1,Oj=2,ND=3;var TD=Object.prototype.hasOwnProperty;function Cx(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Cx(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(TD.call(t,n)&&++r&&!TD.call(e,n)||!(n in e)||!Cx(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const bc=new WeakMap,Fl=()=>{},ms=Fl(),Sx=Object,kt=t=>t===ms,xa=t=>typeof t=="function",Eu=(t,e)=>({...t,...e}),kj=t=>xa(t.then),dS={},bb={},xP="undefined",n0=typeof window!=xP,Ax=typeof document!=xP,Yee=n0&&"Deno"in window,Qee=()=>n0&&typeof window.requestAnimationFrame!=xP,Dj=(t,e)=>{const n=bc.get(t);return[()=>!kt(e)&&t.get(e)||dS,r=>{if(!kt(e)){const s=t.get(e);e in bb||(bb[e]=s),n[5](e,Eu(s,r),s||dS)}},n[6],()=>!kt(e)&&e in bb?bb[e]:!kt(e)&&t.get(e)||dS]};let Ix=!0;const Zee=()=>Ix,[xx,Nx]=n0&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Fl,Fl],Xee=()=>{const t=Ax&&document.visibilityState;return kt(t)||t!=="hidden"},Jee=t=>(Ax&&document.addEventListener("visibilitychange",t),xx("focus",t),()=>{Ax&&document.removeEventListener("visibilitychange",t),Nx("focus",t)}),ete=t=>{const e=()=>{Ix=!0,t()},n=()=>{Ix=!1};return xx("online",e),xx("offline",n),()=>{Nx("online",e),Nx("offline",n)}},tte={isOnline:Zee,isVisible:Xee},nte={initFocus:Jee,initReconnect:ete},RD=!Ci.useId,jy=!n0||Yee,rte=t=>Qee()?window.requestAnimationFrame(t):setTimeout(t,1),hS=jy?O.useEffect:O.useLayoutEffect,fS=typeof navigator<"u"&&navigator.connection,PD=!jy&&fS&&(["slow-2g","2g"].includes(fS.effectiveType)||fS.saveData),vb=new WeakMap,ste=t=>Sx.prototype.toString.call(t),pS=(t,e)=>t===`[object ${e}]`;let ite=0;const Tx=t=>{const e=typeof t,n=ste(t),r=pS(n,"Date"),s=pS(n,"RegExp"),i=pS(n,"Object");let o,a;if(Sx(t)===t&&!r&&!s){if(o=vb.get(t),o)return o;if(o=++ite+"~",vb.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Tx(t[a])+",";vb.set(t,o)}if(i){o="#";const c=Sx.keys(t).sort();for(;!kt(a=c.pop());)kt(t[a])||(o+=a+":"+Tx(t[a])+",");vb.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},NP=t=>{if(xa(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Tx(t):"",[t,e]};let ote=0;const Rx=()=>++ote;async function $j(...t){const[e,n,r,s]=t,i=Eu({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(xa(n)){const h=n,f=[],p=e.keys();for(const m of p)!/^\$(inf|sub)\$/.test(m)&&h(e.get(m)._k)&&f.push(m);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=NP(h);if(!f)return;const[p,m]=Dj(e,f),[w,y,b,_]=bc.get(e),E=()=>{const U=w[f];return(xa(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete _[f],U&&U[0])?U[0](Oj).then(()=>p().data):p().data};if(t.length<3)return E();let C=r,I,A=!1;const x=Rx();y[f]=[x,0];const S=!kt(c),k=p(),P=k.data,M=k._c,W=kt(M)?P:M;if(S&&(c=xa(c)?c(W,P):c,m({data:c,_c:W})),xa(C))try{C=C(W)}catch(U){I=U,A=!0}if(C&&kj(C))if(C=await C.catch(U=>{I=U,A=!0}),x!==y[f][0]){if(A)throw I;return C}else A&&S&&l(I)&&(o=!0,m({data:W,_c:ms}));if(o&&!A)if(xa(o)){const U=o(C,W);m({data:U,error:ms,_c:ms})}else m({data:C,error:ms,_c:ms});if(y[f][1]=Rx(),Promise.resolve(E()).then(()=>{m({_c:ms})}),A){if(u)throw I;return}return C}}const OD=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},ate=(t,e)=>{if(!bc.has(t)){const n=Eu(nte,e),r=Object.create(null),s=$j.bind(ms,t);let i=Fl;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!bc.has(t)&&(bc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!jy)){const u=n.initFocus(setTimeout.bind(ms,OD.bind(ms,r,Rj))),d=n.initReconnect(setTimeout.bind(ms,OD.bind(ms,r,Pj)));i=()=>{u&&u(),d&&d(),bc.delete(t)}}};return l(),[t,s,l,i]}return[t,bc.get(t)[4]]},cte=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!kt(i)&&o>i||setTimeout(r,a,s)},lte=Cx,[Mj,ute]=ate(new Map),dte=Eu({onLoadingSlow:Fl,onSuccess:Fl,onError:Fl,onErrorRetry:cte,onDiscarded:Fl,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:PD?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:PD?5e3:3e3,compare:lte,isPaused:()=>!1,cache:Mj,mutate:ute,fallback:{}},tte),hte=(t,e)=>{const n=Eu(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Eu(s,o))}return n},fte=O.createContext({}),pte="$inf$",Lj=n0&&window.__SWR_DEVTOOLS_USE__,mte=Lj?window.__SWR_DEVTOOLS_USE__:[],gte=()=>{Lj&&(window.__SWR_DEVTOOLS_REACT__=Ci)},yte=t=>xa(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],wte=()=>Eu(dte,O.useContext(fte)),bte=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=NP(e),[,,,a]=bc.get(Mj);if(o.startsWith(pte))return n(...i);const c=a[o];return kt(c)?n(...i):(delete a[o],c)}),r),vte=mte.concat(bte),_te=t=>function(...n){const r=wte(),[s,i,o]=yte(n),a=hte(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(vte);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Ete=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};gte();const mS=Ci.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),gS={dedupe:!0},Cte=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,m,w]=bc.get(r),[y,b]=NP(t),_=O.useRef(!1),E=O.useRef(!1),C=O.useRef(y),I=O.useRef(e),A=O.useRef(n),x=()=>A.current,S=()=>x().isVisible()&&x().isOnline(),[k,P,M,W]=Dj(r,y),U=O.useRef({}).current,N=kt(o)?kt(n.fallback)?ms:n.fallback[y]:o,T=(G,J)=>{for(const de in U){const oe=de;if(oe==="data"){if(!s(G[oe],J[oe])&&(!kt(G[oe])||!s(X,J[oe])))return!1}else if(J[oe]!==G[oe])return!1}return!0},$=O.useMemo(()=>{const G=!y||!e?!1:kt(a)?x().isPaused()||i?!1:c!==!1:a,J=Xe=>{const rt=Eu(Xe);return delete rt._k,G?{isValidating:!0,isLoading:!0,...rt}:rt},de=k(),oe=W(),le=J(de),Ye=de===oe?le:J(oe);let $e=le;return[()=>{const Xe=J(k());return T(Xe,$e)?($e.data=Xe.data,$e.isLoading=Xe.isLoading,$e.isValidating=Xe.isValidating,$e.error=Xe.error,$e):($e=Xe,Xe)},()=>Ye]},[r,y]),R=Tj.useSyncExternalStore(O.useCallback(G=>M(y,(J,de)=>{T(de,J)||G()}),[r,y]),$[0],$[1]),D=!_.current,j=f[y]&&f[y].length>0,z=R.data,Q=kt(z)?N&&kj(N)?mS(N):N:z,te=R.error,Z=O.useRef(Q),X=h?kt(z)?kt(Z.current)?Q:Z.current:z:Q,ie=j&&!kt(te)?!1:D&&!kt(a)?a:x().isPaused()?!1:i?kt(Q)?!1:c:kt(Q)||c,Ke=!!(y&&e&&D&&ie),it=kt(R.isValidating)?Ke:R.isValidating,Be=kt(R.isLoading)?Ke:R.isLoading,yt=O.useCallback(async G=>{const J=I.current;if(!y||!J||E.current||x().isPaused())return!1;let de,oe,le=!0;const Ye=G||{},$e=!m[y]||!Ye.dedupe,Xe=()=>RD?!E.current&&y===C.current&&_.current:y===C.current,rt={isValidating:!1,isLoading:!1},fn=()=>{P(rt)},Un=()=>{const $t=m[y];$t&&$t[1]===oe&&delete m[y]},Tn={isValidating:!0};kt(k().data)&&(Tn.isLoading=!0);try{if($e&&(P(Tn),n.loadingTimeout&&kt(k().data)&&setTimeout(()=>{le&&Xe()&&x().onLoadingSlow(y,n)},n.loadingTimeout),m[y]=[J(b),Rx()]),[de,oe]=m[y],de=await de,$e&&setTimeout(Un,n.dedupingInterval),!m[y]||m[y][1]!==oe)return $e&&Xe()&&x().onDiscarded(y),!1;rt.error=ms;const $t=p[y];if(!kt($t)&&(oe<=$t[0]||oe<=$t[1]||$t[1]===0))return fn(),$e&&Xe()&&x().onDiscarded(y),!1;const Yn=k().data;rt.data=s(Yn,de)?Yn:de,$e&&Xe()&&x().onSuccess(de,y,n)}catch($t){Un();const Yn=x(),{shouldRetryOnError:Yr}=Yn;Yn.isPaused()||(rt.error=$t,$e&&Xe()&&(Yn.onError($t,y,Yn),(Yr===!0||xa(Yr)&&Yr($t))&&(!x().revalidateOnFocus||!x().revalidateOnReconnect||S())&&Yn.onErrorRetry($t,y,Yn,xs=>{const ta=f[y];ta&&ta[0]&&ta[0](ND,xs)},{retryCount:(Ye.retryCount||0)+1,dedupe:!0})))}return le=!1,fn(),!0},[y,r]),Ct=O.useCallback((...G)=>$j(r,C.current,...G),[]);if(hS(()=>{I.current=e,A.current=n,kt(z)||(Z.current=z)}),hS(()=>{if(!y)return;const G=yt.bind(ms,gS);let J=0;x().revalidateOnFocus&&(J=Date.now()+x().focusThrottleInterval);const oe=Ete(y,f,(le,Ye={})=>{if(le==Rj){const $e=Date.now();x().revalidateOnFocus&&$e>J&&S()&&(J=$e+x().focusThrottleInterval,G())}else if(le==Pj)x().revalidateOnReconnect&&S()&&G();else{if(le==Oj)return yt();if(le==ND)return yt(Ye)}});return E.current=!1,C.current=y,_.current=!0,P({_k:b}),ie&&(m[y]||(kt(Q)||jy?G():rte(G))),()=>{E.current=!0,oe()}},[y]),hS(()=>{let G;function J(){const oe=xa(l)?l(k().data):l;oe&&G!==-1&&(G=setTimeout(de,oe))}function de(){!k().error&&(u||x().isVisible())&&(d||x().isOnline())?yt(gS).then(J):J()}return J(),()=>{G&&(clearTimeout(G),G=-1)}},[l,u,d,y]),O.useDebugValue(X),i&&kt(Q)&&y){if(!RD&&jy)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,A.current=n,E.current=!1;const G=w[y];if(!kt(G)){const J=Ct(G);mS(J)}if(kt(te)){const J=yt(gS);kt(X)||(J.status="fulfilled",J.value=!0),mS(J)}else throw te}return{mutate:Ct,get data(){return U.data=!0,X},get error(){return U.error=!0,te},get isValidating(){return U.isValidating=!0,it},get isLoading(){return U.isLoading=!0,Be}}},kD=_te(Cte);class Ste extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const Ate=kD.default||kD,Ite="https://react-tweet.vercel.app";async function xte([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Ste({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const Nte=(t,e,n)=>{const{isLoading:r,data:s,error:i}=Ate(()=>e||t?[e||t&&`${Ite}/api/tweet/${t}`,n]:null,xte,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},Tte=({id:t,apiUrl:e,fallback:n=g.jsx(jee,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=Nte(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Dee;return g.jsx(l,{error:i?i(a):a})}return g.jsx(Pee,{tweet:o,components:r})};var JE={exports:{}},Uj={},jj={exports:{}},Rte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pte=Rte,Ote=Pte;function Bj(){}function Fj(){}Fj.resetWarningCache=Bj;var kte=function(){function t(r,s,i,o,a,c){if(c!==Ote){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Fj,resetWarningCache:Bj};return n.PropTypes=n,n};jj.exports=kte();var Wj=jj.exports,Px={exports:{}};function zj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=zj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function DD(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=zj(t))&&(r&&(r+=" "),r+=e);return r}Px.exports=DD,Px.exports.clsx=DD;var Dte=Px.exports,Gn={},Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.dontSetMe=jte;Ga.findInArray=$te;Ga.int=Ute;Ga.isFunction=Mte;Ga.isNum=Lte;function $te(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Mte(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Lte(t){return typeof t=="number"&&!isNaN(t)}function Ute(t){return parseInt(t,10)}function jte(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var gh={};Object.defineProperty(gh,"__esModule",{value:!0});gh.browserPrefixToKey=qj;gh.browserPrefixToStyle=Bte;gh.default=void 0;gh.getPrefix=Hj;const yS=["Moz","Webkit","O","ms"];function Hj(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<yS.length;s++)if(qj(t,yS[s])in e)return yS[s];return""}function qj(t,e){return e?`${e}${Fte(t)}`:t}function Bte(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Fte(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}gh.default=Hj();Object.defineProperty(Gn,"__esModule",{value:!0});Gn.addClassName=Kj;Gn.addEvent=zte;Gn.addUserSelectStyles=ene;Gn.createCSSTransform=Qte;Gn.createSVGTransform=Zte;Gn.getTouch=Xte;Gn.getTouchIdentifier=Jte;Gn.getTranslation=TP;Gn.innerHeight=Gte;Gn.innerWidth=Kte;Gn.matchesSelector=Gj;Gn.matchesSelectorAndParentsTo=Wte;Gn.offsetXYFromParent=Yte;Gn.outerHeight=qte;Gn.outerWidth=Vte;Gn.removeClassName=Yj;Gn.removeEvent=Hte;Gn.scheduleRemoveUserSelectStyles=tne;var Ai=Ga,$D=Vj(gh);function Vj(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Vj=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let _b="";function Gj(t,e){return _b||(_b=(0,Ai.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Ai.isFunction)(t[n])})),(0,Ai.isFunction)(t[_b])?t[_b](e):!1}function Wte(t,e,n){let r=t;do{if(Gj(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function zte(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Hte(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function qte(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ai.int)(n.borderTopWidth),e+=(0,Ai.int)(n.borderBottomWidth),e}function Vte(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Ai.int)(n.borderLeftWidth),e+=(0,Ai.int)(n.borderRightWidth),e}function Gte(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ai.int)(n.paddingTop),e-=(0,Ai.int)(n.paddingBottom),e}function Kte(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Ai.int)(n.paddingLeft),e-=(0,Ai.int)(n.paddingRight),e}function Yte(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Qte(t,e){const n=TP(t,e,"px");return{[(0,$D.browserPrefixToKey)("transform",$D.default)]:n}}function Zte(t,e){return TP(t,e,"")}function TP(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Xte(t,e){return t.targetTouches&&(0,Ai.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Ai.findInArray)(t.changedTouches,n=>e===n.identifier)}function Jte(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function ene(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&Kj(t.body,"react-draggable-transparent-selection")}function tne(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{MD(t)}):MD(t)}function MD(t){if(t)try{if(t.body&&Yj(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function Kj(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function Yj(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.canDragX=sne;Ka.canDragY=ine;Ka.createCoreData=ane;Ka.createDraggableData=cne;Ka.getBoundPosition=nne;Ka.getControlPosition=one;Ka.snapToGrid=rne;var hi=Ga,Of=Gn;function nne(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:lne(r);const s=RP(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,hi.int)(u.paddingLeft)+(0,hi.int)(l.marginLeft),top:-s.offsetTop+(0,hi.int)(u.paddingTop)+(0,hi.int)(l.marginTop),right:(0,Of.innerWidth)(c)-(0,Of.outerWidth)(s)-s.offsetLeft+(0,hi.int)(u.paddingRight)-(0,hi.int)(l.marginRight),bottom:(0,Of.innerHeight)(c)-(0,Of.outerHeight)(s)-s.offsetTop+(0,hi.int)(u.paddingBottom)-(0,hi.int)(l.marginBottom)}}return(0,hi.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,hi.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,hi.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,hi.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function rne(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function sne(t){return t.props.axis==="both"||t.props.axis==="x"}function ine(t){return t.props.axis==="both"||t.props.axis==="y"}function one(t,e,n){const r=typeof e=="number"?(0,Of.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=RP(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Of.offsetXYFromParent)(r||t,i,n.props.scale)}function ane(t,e,n){const r=!(0,hi.isNum)(t.lastX),s=RP(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function cne(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function lne(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function RP(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var eC={},tC={};Object.defineProperty(tC,"__esModule",{value:!0});tC.default=une;function une(){}Object.defineProperty(eC,"__esModule",{value:!0});eC.default=void 0;var wS=Qj(O),cs=PP(Wj),dne=PP(SP),Xr=Gn,el=Ka,bS=Ga,Wm=PP(tC);function PP(t){return t&&t.__esModule?t:{default:t}}function Qj(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(Qj=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function us(t,e,n){return(e=hne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hne(t){var e=fne(t,"string");return typeof e=="symbol"?e:e+""}function fne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Ao={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let tl=Ao.mouse,nC=class extends wS.Component{constructor(){super(...arguments),us(this,"dragging",!1),us(this,"lastX",NaN),us(this,"lastY",NaN),us(this,"touchIdentifier",null),us(this,"mounted",!1),us(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Xr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Xr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Xr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,el.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,el.createCoreData)(this,o,a);(0,Wm.default)("DraggableCore: handleDragStart: %j",c),(0,Wm.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Xr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Xr.addEvent)(r,tl.move,this.handleDrag),(0,Xr.addEvent)(r,tl.stop,this.handleDragStop))}),us(this,"handleDrag",e=>{const n=(0,el.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,el.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,el.createCoreData)(this,r,s);if((0,Wm.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),us(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,el.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,el.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,el.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Xr.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Wm.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Wm.default)("DraggableCore: Removing handlers"),(0,Xr.removeEvent)(a.ownerDocument,tl.move,this.handleDrag),(0,Xr.removeEvent)(a.ownerDocument,tl.stop,this.handleDragStop))}),us(this,"onMouseDown",e=>(tl=Ao.mouse,this.handleDragStart(e))),us(this,"onMouseUp",e=>(tl=Ao.mouse,this.handleDragStop(e))),us(this,"onTouchStart",e=>(tl=Ao.touch,this.handleDragStart(e))),us(this,"onTouchEnd",e=>(tl=Ao.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Xr.addEvent)(e,Ao.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Xr.removeEvent)(n,Ao.mouse.move,this.handleDrag),(0,Xr.removeEvent)(n,Ao.touch.move,this.handleDrag),(0,Xr.removeEvent)(n,Ao.mouse.stop,this.handleDragStop),(0,Xr.removeEvent)(n,Ao.touch.stop,this.handleDragStop),(0,Xr.removeEvent)(e,Ao.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Xr.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:dne.default.findDOMNode(this)}render(){return wS.cloneElement(wS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};eC.default=nC;us(nC,"displayName","DraggableCore");us(nC,"propTypes",{allowAnyClick:cs.default.bool,allowMobileScroll:cs.default.bool,children:cs.default.node.isRequired,disabled:cs.default.bool,enableUserSelectHack:cs.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:cs.default.arrayOf(cs.default.number),handle:cs.default.string,cancel:cs.default.string,nodeRef:cs.default.object,onStart:cs.default.func,onDrag:cs.default.func,onStop:cs.default.func,onMouseDown:cs.default.func,scale:cs.default.number,className:bS.dontSetMe,style:bS.dontSetMe,transform:bS.dontSetMe});us(nC,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(O),n=u(Wj),r=u(SP),s=Dte,i=Gn,o=Ka,a=Ga,c=u(eC),l=u(tC);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var _=new WeakMap,E=new WeakMap;return(d=function(C,I){if(!I&&C&&C.__esModule)return C;var A,x,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(A=I?E:_){if(A.has(C))return A.get(C);A.set(C,S)}for(const k in C)k!=="default"&&{}.hasOwnProperty.call(C,k)&&((x=(A=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,k))&&(x.get||x.set)?A(S,k,x):S[k]=C[k]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var _=arguments[b];for(var E in _)({}).hasOwnProperty.call(_,E)&&(y[E]=_[E])}return y},h.apply(null,arguments)}function f(y,b,_){return(b=p(b))in y?Object.defineProperty(y,b,{value:_,enumerable:!0,configurable:!0,writable:!0}):y[b]=_,y}function p(y){var b=m(y,"string");return typeof b=="symbol"?b:b+""}function m(y,b){if(typeof y!="object"||!y)return y;var _=y[Symbol.toPrimitive];if(_!==void 0){var E=_.call(y,b);if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,_){let{position:E}=b,{prevPropsPosition:C}=_;return E&&(!C||E.x!==C.x||E.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:E,prevPropsPosition:C}),{x:E.x,y:E.y,prevPropsPosition:{...E}}):null}constructor(b){super(b),f(this,"onDragStart",(_,E)=>{if((0,l.default)("Draggable: onDragStart: %j",E),this.props.onStart(_,(0,o.createDraggableData)(this,E))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(_,E)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",E);const C=(0,o.createDraggableData)(this,E),I={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[k,P]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=k,I.y=P,I.slackX=this.state.slackX+(x-I.x),I.slackY=this.state.slackY+(S-I.y),C.x=I.x,C.y=I.y,C.deltaX=I.x-this.state.x,C.deltaY=I.y-this.state.y}if(this.props.onDrag(_,C)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(_,E)=>{if(!this.state.dragging||this.props.onStop(_,(0,o.createDraggableData)(this,E))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",E);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x,y:S}=this.props.position;I.x=x,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,_;return((_=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:_.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:_,children:E,defaultPosition:C,defaultClassName:I,defaultClassNameDragging:A,defaultClassNameDragged:x,position:S,positionOffset:k,scale:P,...M}=this.props;let W={},U=null;const T=!!!S||this.state.dragging,$=S||C,R={x:(0,o.canDragX)(this)&&T?this.state.x:$.x,y:(0,o.canDragY)(this)&&T?this.state.y:$.y};this.state.isElementSVG?U=(0,i.createSVGTransform)(R,k):W=(0,i.createCSSTransform)(R,k);const D=(0,s.clsx)(E.props.className||"",I,{[A]:this.state.dragging,[x]:this.state.dragged});return e.createElement(c.default,h({},M,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(E),{className:D,style:{...E.props.style,...W},transform:U}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Uj);const{default:Zj,DraggableCore:pne}=Uj;JE.exports=Zj;JE.exports.default=Zj;JE.exports.DraggableCore=pne;var mne=JE.exports;const r0=hh(mne);function $n(){return $n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$n.apply(null,arguments)}function Xj(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Jj={exports:{}},en={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=typeof Symbol=="function"&&Symbol.for,OP=Rr?Symbol.for("react.element"):60103,kP=Rr?Symbol.for("react.portal"):60106,rC=Rr?Symbol.for("react.fragment"):60107,sC=Rr?Symbol.for("react.strict_mode"):60108,iC=Rr?Symbol.for("react.profiler"):60114,oC=Rr?Symbol.for("react.provider"):60109,aC=Rr?Symbol.for("react.context"):60110,DP=Rr?Symbol.for("react.async_mode"):60111,cC=Rr?Symbol.for("react.concurrent_mode"):60111,lC=Rr?Symbol.for("react.forward_ref"):60112,uC=Rr?Symbol.for("react.suspense"):60113,gne=Rr?Symbol.for("react.suspense_list"):60120,dC=Rr?Symbol.for("react.memo"):60115,hC=Rr?Symbol.for("react.lazy"):60116,yne=Rr?Symbol.for("react.block"):60121,wne=Rr?Symbol.for("react.fundamental"):60117,bne=Rr?Symbol.for("react.responder"):60118,vne=Rr?Symbol.for("react.scope"):60119;function Oi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case OP:switch(t=t.type,t){case DP:case cC:case rC:case iC:case sC:case uC:return t;default:switch(t=t&&t.$$typeof,t){case aC:case lC:case hC:case dC:case oC:return t;default:return e}}case kP:return e}}}function eB(t){return Oi(t)===cC}en.AsyncMode=DP;en.ConcurrentMode=cC;en.ContextConsumer=aC;en.ContextProvider=oC;en.Element=OP;en.ForwardRef=lC;en.Fragment=rC;en.Lazy=hC;en.Memo=dC;en.Portal=kP;en.Profiler=iC;en.StrictMode=sC;en.Suspense=uC;en.isAsyncMode=function(t){return eB(t)||Oi(t)===DP};en.isConcurrentMode=eB;en.isContextConsumer=function(t){return Oi(t)===aC};en.isContextProvider=function(t){return Oi(t)===oC};en.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===OP};en.isForwardRef=function(t){return Oi(t)===lC};en.isFragment=function(t){return Oi(t)===rC};en.isLazy=function(t){return Oi(t)===hC};en.isMemo=function(t){return Oi(t)===dC};en.isPortal=function(t){return Oi(t)===kP};en.isProfiler=function(t){return Oi(t)===iC};en.isStrictMode=function(t){return Oi(t)===sC};en.isSuspense=function(t){return Oi(t)===uC};en.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===rC||t===cC||t===iC||t===sC||t===uC||t===gne||typeof t=="object"&&t!==null&&(t.$$typeof===hC||t.$$typeof===dC||t.$$typeof===oC||t.$$typeof===aC||t.$$typeof===lC||t.$$typeof===wne||t.$$typeof===bne||t.$$typeof===vne||t.$$typeof===yne)};en.typeOf=Oi;Jj.exports=en;var _ne=Jj.exports,$P=_ne,Ene={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Cne={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Sne={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},MP={};MP[$P.ForwardRef]=Sne;MP[$P.Memo]=tB;function LD(t){return $P.isMemo(t)?tB:MP[t.$$typeof]||Ene}var Ane=Object.defineProperty,Ine=Object.getOwnPropertyNames,UD=Object.getOwnPropertySymbols,xne=Object.getOwnPropertyDescriptor,Nne=Object.getPrototypeOf,jD=Object.prototype;function nB(t,e,n){if(typeof e!="string"){if(jD){var r=Nne(e);r&&r!==jD&&nB(t,r,n)}var s=Ine(e);UD&&(s=s.concat(UD(e)));for(var i=LD(t),o=LD(e),a=0;a<s.length;++a){var c=s[a];if(!Cne[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=xne(e,c);try{Ane(t,c,l)}catch{}}}}return t}var Tne=nB;const Rne=hh(Tne);var rB={};Object.defineProperty(rB,"__esModule",{value:!0});rB.default=Pne;function Pne(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function Eb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k_(){return k_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k_.apply(this,arguments)}function One(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function nl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kne(t){var e=function(n){One(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,Eb(nl(nl(i)),"cachedTheme",void 0),Eb(nl(nl(i)),"lastOuterTheme",void 0),Eb(nl(nl(i)),"lastTheme",void 0),Eb(nl(nl(i)),"renderProvider",function(l){var u=i.props.children;return Ci.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?k_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Ci.createElement(t.Consumer,null,this.renderProvider):null},r}(Ci.Component);return e}function Dne(t){return function(n){var r=Ci.forwardRef(function(s,i){return Ci.createElement(t.Consumer,null,function(o){return Ci.createElement(n,k_({theme:o,ref:i},s))})});return Rne(r,n),r}}function $ne(t){var e=function(){var r=Ci.useContext(t);return r};return e}function Mne(t){return{context:t,withTheme:Dne(t),useTheme:$ne(t),ThemeProvider:kne(t)}}var sB=O.createContext();Mne(sB);var BD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm=(typeof window>"u"?"undefined":BD(window))==="object"&&(typeof document>"u"?"undefined":BD(document))==="object"&&document.nodeType===9;function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function Lne(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Une(t){var e=Lne(t,"string");return By(e)=="symbol"?e:e+""}function jne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Une(r.key),r)}}function LP(t,e,n){return e&&jne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ox(t,e){return Ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ox(t,e)}function iB(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ox(t,e)}function FD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Bne={}.constructor;function kx(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(kx);if(t.constructor!==Bne)return t;var e={};for(var n in t)e[n]=kx(t[n]);return e}function fC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=kx(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var WD=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Od=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=WD(e[r]," ");else n=WD(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function sm(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function zm(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Fy(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=sm(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=zm(f+":"+u+Od(p)+";",o))}}else for(var m in a){var w=a[m];w!=null&&(r&&(r+=l),r+=zm(m+":"+u+Od(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=zm(y+":"+u+Od(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),zm(""+t+u+"{"+r,o)+zm("}",o))}var Fne=/([[\].#*$><+~=|^:(),"'`\s])/g,zD=typeof CSS<"u"&&CSS.escape,UP=function(t){return zD?zD(t):t.replace(Fne,"\\$1")},oB=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),Dx=function(t){iB(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(FD(FD(o)),l),o.selectorText="."+UP(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Od(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?$n({},s,{allowEmpty:!0}):s;return Fy(this.selectorText,this.style,a)},LP(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(oB),Wne={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Dx(e,n,r)}},vS={indent:1,children:!0},zne=/@([\w-]+)/,Hne=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(zne);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new pC($n({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=vS);var s=sm(r),i=s.linebreak;if(r.indent==null&&(r.indent=vS.indent),r.children==null&&(r.children=vS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),qne=/@container|@media|@supports\s+/,Vne={onCreateRule:function(e,n,r){return qne.test(e)?new Hne(e,n,r):null}},_S={indent:1,children:!0},Gne=/@keyframes\s+([\w-]+)/,$x=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Gne);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:UP(c(this,a)),this.rules=new pC($n({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],$n({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=_S);var s=sm(r),i=s.linebreak;if(r.indent==null&&(r.indent=_S.indent),r.children==null&&(r.children=_S.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Kne=/@keyframes\s+/,Yne=/\$([\w-]+)/g,Mx=function(e,n){return typeof e=="string"?e.replace(Yne,function(r,s){return s in n?n[s]:r}):e},HD=function(e,n,r){var s=e[n],i=Mx(s,r);i!==s&&(e[n]=i)},Qne={onCreateRule:function(e,n,r){return typeof e=="string"&&Kne.test(e)?new $x(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&HD(e,"animation-name",r.keyframes),"animation"in e&&HD(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return Mx(e,s.keyframes);case"animation-name":return Mx(e,s.keyframes);default:return e}}},Zne=function(t){iB(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?$n({},s,{allowEmpty:!0}):s;return Fy(this.key,this.style,a)},e}(oB),Xne={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Zne(e,n,r):null}},Jne=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=sm(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Fy(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return Fy(this.at,this.style,r)},t}(),ere=/@font-face/,tre={onCreateRule:function(e,n,r){return ere.test(e)?new Jne(e,n,r):null}},nre=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return Fy(this.key,this.style,r)},t}(),rre={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new nre(e,n,r):null}},sre=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),ire={"@charset":!0,"@import":!0,"@namespace":!0},ore={onCreateRule:function(e,n,r){return e in ire?new sre(e,n,r):null}},qD=[Wne,Vne,Qne,Xne,tre,rre,ore],are={process:!0},VD={force:!0,process:!0},pC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=$n({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+UP(this.classes[p]));var m=fC(p,s,f);if(!m)return null;this.register(m);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,m),m},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=$n({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Dx?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof $x&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Dx?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof $x&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=are);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,VD)}for(var f in l){var p=r.style[f],m=l[f];p==null&&p!==m&&r.prop(f,null,VD)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=sm(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),aB=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=$n({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new pC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),cre=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),lre=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=Xj(s,["attached"]),a=sm(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},LP(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),Gg=new lre,Lx=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),Ux="2f1acc6c3a606b082e5eef5e54414ffb";Lx[Ux]==null&&(Lx[Ux]=0);var GD=Lx[Ux]++,KD=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+GD+a+n:c+i.key+"-"+GD+(a?"-"+a:"")+"-"+n};return r},cB=function(e){var n;return function(){return n||(n=e()),n}},ure=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},dre=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Od(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},hre=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},fre=function(e,n){return e.selectorText=n,e.selectorText===n},lB=cB(function(){return document.querySelector("head")});function pre(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function mre(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function gre(t){for(var e=lB(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function yre(t){var e=Gg.registry;if(e.length>0){var n=pre(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=mre(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=gre(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function wre(t,e){var n=e.insertionPoint,r=yre(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}lB().appendChild(t)}var bre=cB(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),YD=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},QD=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},vre=function(){var e=document.createElement("style");return e.textContent=`
`,e},_re=function(){function t(n){this.getPropertyValue=ure,this.setProperty=dre,this.removeProperty=hre,this.setSelector=fre,this.hasInsertedRules=!1,this.cssRules=[],n&&Gg.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||vre(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=bre();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){wre(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=QD(i,s);if(a=YD(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=QD(i,s),d=YD(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof aB&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Ere=0,Cre=function(){function t(n){this.id=Ere++,this.version="10.10.0",this.plugins=new cre,this.options={id:{minify:!1},createGenerateId:KD,Renderer:rm?_re:null,plugins:[]},this.generateId=KD({minify:!1});for(var r=0;r<qD.length;r++)this.plugins.use(qD[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=$n({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=Gg.index===0?0:Gg.index+1);var a=new aB(r,$n({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),Gg.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=$n({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=fC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),uB=function(e){return new Cre(e)},ZD=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},LP(t,[{key:"size",get:function(){return this.length}}]),t}(),jP=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function dB(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=dB(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */uB();var hB=Date.now(),ES="fnValues"+hB,CS="fnStyle"+ ++hB,Sre=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=fC(n,{},s);return i[CS]=r,i},onProcessStyle:function(n,r){if(ES in r||CS in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[ES]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[CS];a&&(o.style=a(n)||{});var c=o[ES];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function Are(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var ff;typeof self<"u"?ff=self:typeof window<"u"?ff=window:typeof global<"u"?ff=global:typeof module<"u"?ff=module:ff=Function("return this")();var XD=Are(ff),JD=function(e){return e&&e[XD]&&e===e[XD]()},Ire=function(e){return{onCreateRule:function(r,s,i){if(!JD(s))return null;var o=s,a=fC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!JD(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},xre=/;\n/,Nre=function(e){for(var n={},r=e.split(xre),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},Tre=function(e){typeof e.style=="string"&&(e.style=Nre(e.style))};function Rre(){return{onProcessRule:Tre}}var au="@global",jx="@global ",Pre=function(){function t(n,r,s){this.type="global",this.at=au,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new pC($n({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Ore=function(){function t(n,r,s){this.type="global",this.at=au,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(jx.length);this.rule=s.jss.createRule(i,r,$n({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),kre=/\s*,\s*/g;function fB(t,e){for(var n=t.split(kre),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Dre(t,e){var n=t.options,r=t.style,s=r?r[au]:null;if(s){for(var i in s)e.addRule(i,s[i],$n({},n,{selector:fB(i,t.selector)}));delete r[au]}}function $re(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,au.length)!==au)){var i=fB(s.substr(au.length),t.selector);e.addRule(i,r[s],$n({},n,{selector:i})),delete r[s]}}function Mre(){function t(n,r,s){if(!n)return null;if(n===au)return new Pre(n,r,s);if(n[0]==="@"&&n.substr(0,jx.length)===jx)return new Ore(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Dre(n,r),$re(n,r))}return{onCreateRule:t,onProcessRule:e}}var _v=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},SS="extendCurrValue"+Date.now();function Lre(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];hd(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?$n({},t,{extend:l}):t.extend[c];hd(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){hd(t.extend.extend,e,n,r);continue}if(_v(t.extend[d])){d in r||(r[d]={}),hd(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Ure(t,e,n,r){for(var s in t)if(s!=="extend"){if(_v(r[s])&&_v(t[s])){hd(t[s],e,n,r[s]);continue}if(_v(t[s])){r[s]=hd(t[s],e,n);continue}r[s]=t[s]}}function hd(t,e,n,r){return r===void 0&&(r={}),Lre(t,e,n,r),Ure(t,e,n,r),r}function jre(){function t(n,r,s){return"extend"in n?hd(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[SS])s.prop(i,null);return s[SS]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[SS]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var e3=/\s*,\s*/g,Bre=/&/g,Fre=/\$([\w-]+)/g;function Wre(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(e3),a=s.split(e3),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Bre,u):u+" "+h}return c}function n(s,i,o){if(o)return $n({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=$n({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Fre,u);var m=a.key+"-"+d;"replaceRule"in c?c.replaceRule(m,s[d],$n({},l,{selector:p})):c.addRule(m,s[d],$n({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function Bx(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=Bx(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return Bx(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function zre(){function t(e,n){return"composes"in e&&(Bx(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Hre=/[A-Z]/g,qre=/^ms-/,AS={};function Vre(t){return"-"+t.toLowerCase()}function pB(t){if(AS.hasOwnProperty(t))return AS[t];var e=t.replace(Hre,Vre);return AS[t]=qre.test(e)?"-"+e:e}function D_(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:pB(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(D_):e.fallbacks=D_(t.fallbacks)),e}function Gre(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=D_(n[r]);return n}return D_(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=pB(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ee=jP&&CSS?CSS.px:"px",Cb=jP&&CSS?CSS.ms:"ms",jh=jP&&CSS?CSS.percent:"%",Kre={"animation-delay":Cb,"animation-duration":Cb,"background-position":ee,"background-position-x":ee,"background-position-y":ee,"background-size":ee,border:ee,"border-bottom":ee,"border-bottom-left-radius":ee,"border-bottom-right-radius":ee,"border-bottom-width":ee,"border-left":ee,"border-left-width":ee,"border-radius":ee,"border-right":ee,"border-right-width":ee,"border-top":ee,"border-top-left-radius":ee,"border-top-right-radius":ee,"border-top-width":ee,"border-width":ee,"border-block":ee,"border-block-end":ee,"border-block-end-width":ee,"border-block-start":ee,"border-block-start-width":ee,"border-block-width":ee,"border-inline":ee,"border-inline-end":ee,"border-inline-end-width":ee,"border-inline-start":ee,"border-inline-start-width":ee,"border-inline-width":ee,"border-start-start-radius":ee,"border-start-end-radius":ee,"border-end-start-radius":ee,"border-end-end-radius":ee,margin:ee,"margin-bottom":ee,"margin-left":ee,"margin-right":ee,"margin-top":ee,"margin-block":ee,"margin-block-end":ee,"margin-block-start":ee,"margin-inline":ee,"margin-inline-end":ee,"margin-inline-start":ee,padding:ee,"padding-bottom":ee,"padding-left":ee,"padding-right":ee,"padding-top":ee,"padding-block":ee,"padding-block-end":ee,"padding-block-start":ee,"padding-inline":ee,"padding-inline-end":ee,"padding-inline-start":ee,"mask-position-x":ee,"mask-position-y":ee,"mask-size":ee,height:ee,width:ee,"min-height":ee,"max-height":ee,"min-width":ee,"max-width":ee,bottom:ee,left:ee,top:ee,right:ee,inset:ee,"inset-block":ee,"inset-block-end":ee,"inset-block-start":ee,"inset-inline":ee,"inset-inline-end":ee,"inset-inline-start":ee,"box-shadow":ee,"text-shadow":ee,"column-gap":ee,"column-rule":ee,"column-rule-width":ee,"column-width":ee,"font-size":ee,"font-size-delta":ee,"letter-spacing":ee,"text-decoration-thickness":ee,"text-indent":ee,"text-stroke":ee,"text-stroke-width":ee,"word-spacing":ee,motion:ee,"motion-offset":ee,outline:ee,"outline-offset":ee,"outline-width":ee,perspective:ee,"perspective-origin-x":jh,"perspective-origin-y":jh,"transform-origin":jh,"transform-origin-x":jh,"transform-origin-y":jh,"transform-origin-z":jh,"transition-delay":Cb,"transition-duration":Cb,"vertical-align":ee,"flex-basis":ee,"shape-margin":ee,size:ee,gap:ee,grid:ee,"grid-gap":ee,"row-gap":ee,"grid-row-gap":ee,"grid-column-gap":ee,"grid-template-rows":ee,"grid-template-columns":ee,"grid-auto-rows":ee,"grid-auto-columns":ee,"box-shadow-x":ee,"box-shadow-y":ee,"box-shadow-blur":ee,"box-shadow-spread":ee,"font-line-height":ee,"text-shadow-x":ee,"text-shadow-y":ee,"text-shadow-blur":ee};function mB(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Yre=mB(Kre);function Kg(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Kg(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Kg(s,e[s],n);else for(var i in e)e[i]=Kg(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Yre[t];return o&&!(e===0&&o===ee)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Qre(t){t===void 0&&(t={});var e=mB(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Kg(o,s[o],e);return s}function r(s,i){return Kg(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Zre={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Xre={position:!0,size:!0},Sb={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},IS={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function Jre(t,e,n){return t.map(function(r){return yB(r,e,n,!1,!0)})}function gB(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?gB(t[0],e,n,r):typeof t[0]=="object"?Jre(t,e,r):[t]}function yB(t,e,n,r,s){if(!(Sb[e]||IS[e]))return[];var i=[];if(IS[e]&&(t=ese(t,n,IS[e],r)),Object.keys(t).length)for(var o in Sb[e]){if(t[o]){Array.isArray(t[o])?i.push(Xre[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}Sb[e][o]!=null&&i.push(Sb[e][o])}return!i.length||s?i:[i]}function ese(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=Wy((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function Wy(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=Wy(t.fallbacks[i],e,!0);continue}t[r]=gB(s,r,Zre,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=Wy(t.fallbacks,e,!0);continue}t[r]=yB(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function tse(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=Wy(e[r],n);return e}return Wy(e,n)}return{onProcessStyle:t}}function Fx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nse(t){if(Array.isArray(t))return Fx(t)}function rse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sse(t,e){if(t){if(typeof t=="string")return Fx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fx(t,e):void 0}}function ise(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ose(t){return nse(t)||rse(t)||sse(t)||ise()}var yg="",Wx="",wB="",bB="",ase=rm&&"ontouchstart"in document.documentElement;if(rm){var xS={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},cse=document.createElement("p"),NS=cse.style,lse="Transform";for(var TS in xS)if(TS+lse in NS){yg=TS,Wx=xS[TS];break}yg==="Webkit"&&"msHyphens"in NS&&(yg="ms",Wx=xS.ms,bB="edge"),yg==="Webkit"&&"-apple-trailing-word"in NS&&(wB="apple")}var mt={js:yg,css:Wx,vendor:wB,browser:bB,isTouch:ase};function use(t){return t[1]==="-"||mt.js==="ms"?t:"@"+mt.css+"keyframes"+t.substr(10)}var dse={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:mt.js==="ms"?"-webkit-"+e:mt.css+e}},hse={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:mt.js==="Webkit"?mt.css+"print-"+e:e}},fse=/[-\s]+(.)?/g;function pse(t,e){return e?e.toUpperCase():""}function BP(t){return t.replace(fse,pse)}function Cu(t){return BP("-"+t)}var mse={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(mt.js==="Webkit"){var r="mask-image";if(BP(r)in n)return e;if(mt.js+Cu(r)in n)return mt.css+e}return e}},gse={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:mt.vendor==="apple"&&!mt.isTouch?mt.css+e:e}},yse={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:mt.css+e}},wse={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:mt.css+e}},bse={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:mt.js==="Webkit"||mt.js==="ms"&&mt.browser!=="edge"?mt.css+e:e}},vse={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:mt.js==="Moz"||mt.js==="ms"||mt.vendor==="apple"?mt.css+e:e}},_se={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(mt.js==="Webkit"){var r="WebkitColumn"+Cu(e);return r in n?mt.css+"column-"+e:!1}if(mt.js==="Moz"){var s="page"+Cu(e);return s in n?"page-"+e:!1}return!1}},Ese={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(mt.js==="Moz")return e;var r=e.replace("-inline","");return mt.js+Cu(r)in n?mt.css+r:!1}},Cse={supportedProperty:function(e,n){return BP(e)in n?e:!1}},Sse={supportedProperty:function(e,n){var r=Cu(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:mt.js+r in n?mt.css+e:mt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},Ase={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:mt.js==="ms"?""+mt.css+e:e}},Ise={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:mt.js==="ms"?mt.css+"scroll-chaining":e}},xse={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Nse={supportedProperty:function(e,n){var r=xse[e];return r&&mt.js+Cu(r)in n?mt.css+r:!1}},vB={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Tse=Object.keys(vB),Rse=function(e){return mt.css+e},Pse={supportedProperty:function(e,n,r){var s=r.multiple;if(Tse.indexOf(e)>-1){var i=vB[e];if(!Array.isArray(i))return mt.js+Cu(i)in n?mt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(mt.js+Cu(i[0])in n))return!1;return i.map(Rse)}return!1}},_B=[dse,hse,mse,gse,yse,wse,bse,vse,_se,Ese,Cse,Sse,Ase,Ise,Nse,Pse],t3=_B.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Ose=_B.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,ose(e.noPrefill)),t},[]),wg,nd={};if(rm){wg=document.createElement("p");var RS=window.getComputedStyle(document.documentElement,"");for(var PS in RS)isNaN(PS)||(nd[RS[PS]]=RS[PS]);Ose.forEach(function(t){return delete nd[t]})}function zx(t,e){if(e===void 0&&(e={}),!wg)return t;if(nd[t]!=null)return nd[t];(t==="transition"||t==="transform")&&(e[t]=t in wg.style);for(var n=0;n<t3.length&&(nd[t]=t3[n](t,wg.style,e),!nd[t]);n++);try{wg.style[t]=""}catch{return!1}return nd[t]}var Bh={},kse={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Dse=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,ml;function $se(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?zx(e):", "+zx(n);return r||e||n}rm&&(ml=document.createElement("p"));function n3(t,e){var n=e;if(!ml||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Bh[r]!=null)return Bh[r];try{ml.style[t]=n}catch{return Bh[r]=!1,!1}if(kse[t])n=n.replace(Dse,$se);else if(ml.style[t]===""&&(n=mt.css+n,n==="-ms-flex"&&(ml.style[t]="-ms-flexbox"),ml.style[t]=n,ml.style[t]===""))return Bh[r]=!1,!1;return ml.style[t]="",Bh[r]=n,Bh[r]}function Mse(){function t(s){if(s.type==="keyframes"){var i=s;i.at=use(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=zx(i);c&&c!==i&&(a=!0);var l=!1,u=n3(c,Od(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return n3(i,Od(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Lse(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Use=function(e){return e===void 0&&(e={}),{plugins:[Sre(),Ire(e.observable),Rre(),Mre(),jre(),Wre(),zre(),Gre(),Qre(e.defaultUnit),tse(),Mse(),Lse()]}},jse=Number.MIN_SAFE_INTEGER||-1e9,Bse=function(){return jse++},Fse=O.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!rm}),r3=new Map,FP=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new ZD),r[n];var s=r3.get(n);return s||(s=new ZD,r3.set(n,s)),s},s3=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=FP(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Wse=function(e){if(e.sheet){var n=FP(e.context,e.index);n.unmanage(e.theme)}},zse=uB(Use()),EB=new WeakMap,CB=function(e){return EB.get(e)},Hse=function(e,n){EB.set(e,n)},qse=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Vse(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",$n({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Gse=function(e){if(!e.context.disableStylesGeneration){var n=FP(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||zse,i=qse(e),o=dB(i),a=s.createStyleSheet(i,Vse(e,o!==null));return Hse(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Kse=function(e,n){for(var r in n)e.deleteRule(n[r])},Yse=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Qse=function(e,n){var r=CB(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Zse=function(e,n){if(!n)return e.classes;var r=CB(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function i3(t){return t?O.useEffect:Ci.useInsertionEffect||O.useLayoutEffect}var OS={},Jo=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Bse():s,o=r.theming,a=r.name,c=Xj(r,["index","theming","name"]),l=o&&o.context||sB,u=function(f){return typeof e=="function"&&(f||O.useContext(l))||OS},d={};return function(f){var p=O.useRef(!0),m=O.useContext(Fse),w=u(f&&f.theme),y=O.useMemo(function(){var C=Gse({context:m,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&m.isSSR&&s3({index:i,context:m,sheet:C,theme:w}),[C,C?Qse(C,f):null]},[m,w]),b=y[0],_=y[1];i3(m.isSSR)(function(){b&&_&&!p.current&&Yse(f,b,_)},[f]),i3(m.isSSR)(function(){return b&&s3({index:i,context:m,sheet:b,theme:w}),function(){b&&(Wse({index:i,context:m,sheet:b,theme:w}),_&&Kse(b,_))}},[b]);var E=O.useMemo(function(){return b&&_?Zse(b,_):d},[b,_]);return O.useDebugValue(E),O.useDebugValue(w===OS?"No theme":w),O.useEffect(function(){p.current=!1}),E}};const Xse=Jo({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function kS({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Xse(),d=O.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=g.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[g.jsx("img",{src:t,alt:e,className:u.iconImage}),g.jsx("span",{className:u.iconLabel,children:e})]});return o?f:g.jsx(r0,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const Jse=Jo({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Hi({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=Jse({isOpen:e}),u=O.useRef(null),d=()=>{r&&r(t)};return g.jsx(r0,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:g.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[g.jsxs("div",{className:l.header,children:[g.jsx("span",{children:i||t.replace("-popup","")}),g.jsxs("div",{className:l.titleBarButtons,children:[g.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),g.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),g.jsx("div",{className:l.content,children:s})]})})}const DS=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],eie=80,tie=80,nie=10,rie=10,sie=10,iie=10,oie=({onIconClick:t})=>{const e=DS.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:sie+d*(eie+nie),y:iie+u*(tie+rie)},u++,u>=4&&(u=0,d++)}),l},[r,s]=O.useState(n()),[i,o]=O.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return g.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:g.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>g.jsx(kS,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&g.jsx(Hi,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:DS.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>g.jsx(kS,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&g.jsx(Hi,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:DS.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>g.jsx(kS,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},aie=Jo({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),cie=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=O.useState(!1),[o,a]=O.useState(new Date),c=aie({isOpen:s});O.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return g.jsxs("div",{className:c.taskbar,children:[g.jsxs("div",{className:c.leftSection,children:[g.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),g.jsx("div",{className:c.windows,children:t.map(h=>g.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),g.jsxs("div",{className:c.rightSection,children:[g.jsxs("div",{className:c.statusSection,children:[g.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:g.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),g.jsx("div",{className:c.clock,children:l(o)})]}),s&&g.jsxs("div",{className:c.menu,children:[g.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),g.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),g.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),g.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),g.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),g.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),g.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function SB(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function WP(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function AB(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function zP(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function IB(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function xB(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,m,w,y,b,_,E,C,I,A,x,S,k,P,M,W,U,N,T,$,R,D,j,z,Q,te,Z;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((m=(p=u.content)==null?void 0:p.metadata)==null?void 0:m.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((E=(_=(b=u.content)==null?void 0:b.files)==null?void 0:_[0])==null?void 0:E.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((x=(A=(I=u.content)==null?void 0:I.files)==null?void 0:A[0])==null?void 0:x.uri)||((k=(S=u.content)==null?void 0:S.metadata)==null?void 0:k.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((M=(P=u.content)==null?void 0:P.metadata)==null?void 0:M.description)||"",image:((N=(U=(W=u.content)==null?void 0:W.files)==null?void 0:U[0])==null?void 0:N.uri)||(($=(T=u.content)==null?void 0:T.metadata)==null?void 0:$.image)||"",image_url_shrunk:((j=(D=(R=u.content)==null?void 0:R.files)==null?void 0:D[0])==null?void 0:j.uri)||((Q=(z=u.content)==null?void 0:z.metadata)==null?void 0:Q.image)||"",animation_url:((Z=(te=u.content)==null?void 0:te.metadata)==null?void 0:Z.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function lie(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,m,w,y,b,_,E,C,I,A,x,S,k,P,M,W,U,N,T,$,R,D,j,z,Q,te,Z,X,ie;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((m=(p=u.content)==null?void 0:p.metadata)==null?void 0:m.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((E=(_=(b=u.content)==null?void 0:b.files)==null?void 0:_[0])==null?void 0:E.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((x=(A=(I=u.content)==null?void 0:I.files)==null?void 0:A[0])==null?void 0:x.uri)||((k=(S=u.content)==null?void 0:S.metadata)==null?void 0:k.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((M=(P=u.content)==null?void 0:P.metadata)==null?void 0:M.description)||"",image:((N=(U=(W=u.content)==null?void 0:W.files)==null?void 0:U[0])==null?void 0:N.uri)||(($=(T=u.content)==null?void 0:T.metadata)==null?void 0:$.image)||"",image_url_shrunk:((j=(D=(R=u.content)==null?void 0:R.files)==null?void 0:D[0])==null?void 0:j.uri)||((Q=(z=u.content)==null?void 0:z.metadata)==null?void 0:Q.image)||"",animation_url:((Z=(te=u.content)==null?void 0:te.metadata)==null?void 0:Z.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ie=(X=u.grouping)==null?void 0:X.find(Ke=>Ke.group_key==="collection"))==null?void 0:ie.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const uie=Jo({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),die=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=uie({isOpen:t}),i=O.useRef(null),[o,a]=O.useState([]),[c,l]=O.useState(!1),[u,d]=O.useState(!1),[h,f]=O.useState({}),[p,m]=O.useState(null),[w,y]=O.useState(null);O.useEffect(()=>{t&&r&&b()},[t,r]);const b=async()=>{l(!0),m(null);try{const A=await SB(r);a(A);const x={};A.forEach(S=>{x[S.id]=0}),f(x)}catch(A){m(A.message)}finally{l(!1)}},_=(A,x)=>{f(S=>({...S,[A]:Math.max(0,x)}))},E=async()=>{const A=Object.entries(h).filter(([,x])=>x>0).map(([x,S])=>({id:x,quantity:S}));if(A.length===0){m("Please select at least one item to mint");return}if(!w){m("Wallet not connected");return}d(!0),m(null);try{console.log("Starting mint process for address:",r);const x=await AB(r,A);if(console.log("Mint API result:",x),x.success&&x.mintTransaction){console.log("Got mint transaction:",x.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const S=await w.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});console.log("Transaction sent successfully:",S),alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){console.error("Transaction sending failed:",S),m("Transaction failed: "+S.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){console.error("Minting failed:",x),m("Minting failed: "+x.message)}finally{d(!1)}},C=(A,x)=>`${parseFloat(A)} ${x}`,I=()=>{n&&n()};return t?g.jsx(r0,{nodeRef:i,handle:`.${s.header}`,children:g.jsxs("div",{ref:i,className:s.popup,children:[g.jsxs("div",{className:s.header,children:[g.jsx("span",{children:"Mint Pixelawbster"}),g.jsxs("div",{className:s.titleBarButtons,children:[g.jsx("button",{className:s.titleBarButton,onClick:I,title:"Minimize",children:"_"}),g.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),g.jsxs("div",{className:s.content,children:[p&&g.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?g.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?g.jsx("div",{children:"No eligible invite lists found for your wallet."}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("h3",{children:"Available Lists:"}),o.map(A=>g.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[g.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",C(A.token_price,A.currency_symbol)]}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[g.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),g.jsx("input",{type:"number",min:"0",max:A.wallet_limit===4294967295?999:A.wallet_limit,value:h[A.id]||0,onChange:x=>_(A.id,parseInt(x.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},A.id))]}),g.jsx("button",{onClick:()=>void E(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},NB=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",TB=({src:t,alt:e,style:n})=>{const[r,s]=O.useState(t),[i,o]=O.useState(!1),[a,c]=O.useState(0);O.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?g.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):g.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},hie=Jo({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),fie=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},pie=({nft:t,onClose:e})=>{const n=hie(),r=O.useRef(null),s=fie(t.attributes);return g.jsx(r0,{nodeRef:r,handle:`.${n.header}`,children:g.jsxs("div",{className:n.popup,ref:r,children:[g.jsxs("div",{className:n.header,children:[g.jsxs("span",{children:[t.name," - Details"]}),g.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),g.jsxs("div",{className:n.content,children:[g.jsx(TB,{src:NB(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),g.jsx("h3",{children:"Traits"}),g.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>g.jsxs("li",{children:[g.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):g.jsx("li",{children:"No traits found."})})]})]})})},mie=Symbol(),o3=Object.getPrototypeOf,Hx=new WeakMap,gie=t=>t&&(Hx.has(t)?Hx.get(t):o3(t)===Object.prototype||o3(t)===Array.prototype),yie=t=>gie(t)&&t[mie]||null,a3=(t,e=!0)=>{Hx.set(t,e)},$_={},$S=t=>typeof t=="object"&&t!==null,vl=new WeakMap,bg=new WeakSet,wie=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>$S(l)&&!bg.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return a3(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const m=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:m,enumerable:w,configurable:!0};if(bg.has(m))a3(m,!1);else if(m instanceof Promise)delete y.value,y.get=()=>d(m);else if(vl.has(m)){const[b,_]=vl.get(m);y.value=i(b,_(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!$S(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,k=++a[0])=>{d!==k&&(d=k,h.forEach(P=>P(S,k)))};let p=a[1];const m=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([k])=>{const P=k[1](S);P>d&&(d=P)})),d),w=S=>(k,P)=>{const M=[...k];M[1]=[S,...M[1]],f(M,P)},y=new Map,b=(S,k)=>{if(($_?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=k[3](w(S));y.set(S,[k,P])}else y.set(S,[k])},_=S=>{var k;const P=y.get(S);P&&(y.delete(S),(k=P[1])==null||k.call(P))},E=S=>(h.add(S),h.size===1&&y.forEach(([P,M],W)=>{if(($_?"production":void 0)!=="production"&&M)throw new Error("remove already exists");const U=P[3](w(W));y.set(W,[P,U])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,M],W)=>{M&&(M(),y.set(W,[P]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),A=e(C,{deleteProperty(S,k){const P=Reflect.get(S,k);_(k);const M=Reflect.deleteProperty(S,k);return M&&f(["delete",[k],P]),M},set(S,k,P,M){const W=Reflect.has(S,k),U=Reflect.get(S,k,M);if(W&&(t(U,P)||o.has(P)&&t(U,o.get(P))))return!0;_(k),$S(P)&&(P=yie(P)||P);let N=P;if(P instanceof Promise)P.then(T=>{P.status="fulfilled",P.value=T,f(["resolve",[k],T])}).catch(T=>{P.status="rejected",P.reason=T,f(["reject",[k],T])});else{!vl.has(P)&&n(P)&&(N=c(P));const T=!bg.has(N)&&vl.get(N);T&&b(k,T)}return Reflect.set(S,k,N,M),f(["set",[k],P,U]),!0}});o.set(l,A);const x=[C,m,i,E];return vl.set(A,x),Reflect.ownKeys(l).forEach(S=>{const k=Object.getOwnPropertyDescriptor(l,S);"value"in k&&(A[S]=l[S],delete k.value,delete k.writable),Object.defineProperty(C,S,k)}),A})=>[c,vl,bg,t,e,n,r,s,i,o,a],[bie]=wie();function xn(t={}){return bie(t)}function is(t,e,n){const r=vl.get(t);($_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function zy(t,e){const n=vl.get(t);($_?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Gd(t){return bg.add(t),t}function as(t,e,n,r){let s=t[e];return is(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function vie(t){const e=xn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var c3={};const Se={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof c3<"u"?c3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},RB={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Se.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var _ie=20,Eie=1,Kd=1e6,l3=1e6,Cie=-7,Sie=21,Aie=!1,s0="[big.js] ",yh=s0+"Invalid ",mC=yh+"decimal places",Iie=yh+"rounding mode",PB=s0+"Division by zero",Jt={},ka=void 0,xie=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function OB(){function t(e){var n=this;if(!(n instanceof t))return e===ka?OB():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(yh+"value");e=e===0&&1/e<0?"-0":String(e)}Nie(n,e)}n.constructor=t}return t.prototype=Jt,t.DP=_ie,t.RM=Eie,t.NE=Cie,t.PE=Sie,t.strict=Aie,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Nie(t,e){var n,r,s;if(!xie.test(e))throw Error(yh+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function wh(t,e,n,r){var s=t.c;if(n===ka&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Iie);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==ka))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==ka||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function bh(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Jt.abs=function(){var t=new this.constructor(this);return t.s=1,t};Jt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Jt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Kd)throw Error(mC);if(!s[0])throw Error(PB);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,m=r.slice(0,a),w=m.length,y=t,b=y.c=[],_=0,E=o+(y.e=e.e-t.e)+1;for(y.s=i,i=E<0?0:E,h.unshift(0);w++<a;)m.push(0);do{for(l=0;l<10;l++){if(a!=(w=m.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=m[d]){u=s[d]>m[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(m[--w]<c[w]){for(d=w;d&&!m[--d];)m[d]=9;--m[d],m[w]+=10}m[w]-=c[w]}for(;!m[0];)m.shift()}else break}b[_++]=u?l:++l,m[0]&&u?m[w]=r[f]||0:m=[r[f]]}while((f++<p||m[0]!==ka)&&i--);return!b[0]&&_!=1&&(b.shift(),y.e--,E--),_>E&&wh(y,E,n.RM,m[0]!==ka),y};Jt.eq=function(t){return this.cmp(t)===0};Jt.gt=function(t){return this.cmp(t)>0};Jt.gte=function(t){return this.cmp(t)>-1};Jt.lt=function(t){return this.cmp(t)<0};Jt.lte=function(t){return this.cmp(t)<1};Jt.minus=Jt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Jt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(PB);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Jt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Jt.plus=Jt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Jt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-l3||t>l3)throw Error(yh+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Jt.prec=function(t,e){if(t!==~~t||t<1||t>Kd)throw Error(yh+"precision");return wh(new this.constructor(this),t,e)};Jt.round=function(t,e){if(t===ka)t=0;else if(t!==~~t||t<-Kd||t>Kd)throw Error(mC);return wh(new this.constructor(this),t+this.e+1,e)};Jt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(s0+"No square root");i=Math.sqrt(+bh(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return wh(t,(s.DP-=4)+t.e+1,s.RM)};Jt.times=Jt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Jt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==ka){if(t!==~~t||t<0||t>Kd)throw Error(mC);for(n=wh(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return bh(n,!0,!!r)};Jt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==ka){if(t!==~~t||t<0||t>Kd)throw Error(mC);for(n=wh(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return bh(n,!1,!!r)};Jt[Symbol.for("nodejs.util.inspect.custom")]=Jt.toJSON=Jt.toString=function(){var t=this,e=t.constructor;return bh(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Jt.toNumber=function(){var t=+bh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(s0+"Imprecise conversion");return t};Jt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==ka){if(t!==~~t||t<1||t>Kd)throw Error(yh+"precision");for(n=wh(new r(n),t,e);n.c.length<t;)n.c.push(0)}return bh(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Jt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(s0+"valueOf disallowed");return bh(t,t.e<=e.NE||t.e>=e.PE,!0)};var Na=OB();const Tie={bigNumber(t){return t?new Na(t):new Na(0)},multiply(t,e){if(t===void 0||e===void 0)return new Na(0);const n=new Na(t),r=new Na(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Rie=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Pie=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Oie=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],kie={getERC20Abi:t=>Se.USDT_CONTRACT_ADDRESSES.includes(t)?Oie:Rie,getSwapAbi:()=>Pie},rl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ht={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function MS(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ct={setItem(t,e){vg()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(vg())return localStorage.getItem(t)||void 0},removeItem(t){vg()&&localStorage.removeItem(t)},clear(){vg()&&localStorage.clear()}};function vg(){return typeof window<"u"&&typeof localStorage<"u"}function Sc(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var u3={};const LS=(typeof process<"u"&&typeof u3<"u"?u3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",kB=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Die="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",an={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:LS,SECURE_SITE_DASHBOARD:`${LS}/dashboard`,SECURE_SITE_FAVICON:`${LS}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Pe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Pe.getActiveNamespace(),e=Pe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ct.setItem(ht.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ct.getItem(ht.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ct.removeItem(ht.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ct.setItem(ht.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ct.setItem(ht.ACTIVE_CAIP_NETWORK_ID,t),Pe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ct.getItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ct.removeItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=MS(t);ct.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Pe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ct.setItem(ht.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ct.getItem(ht.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=MS(t);ct.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ct.getItem(ht.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=MS(t);return ct.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ct.setItem(ht.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ct.getItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ct.removeItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ct.getItem(ht.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ct.getItem(ht.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ct.setItem(ht.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ct.getItem(ht.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ct.getItem(ht.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ct.setItem(ht.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Pe.getConnectedNamespaces();e.includes(t)||(e.push(t),Pe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Pe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Pe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ct.getItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ct.setItem(ht.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ct.removeItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ct.getItem(ht.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Pe.getBalanceCache();ct.setItem(ht.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Pe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Pe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Pe.getBalanceCache();e[t.caipAddress]=t,ct.setItem(ht.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ct.getItem(ht.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Pe.getBalanceCache();ct.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Pe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Pe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Pe.getNativeBalanceCache();e[t.caipAddress]=t,ct.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ct.getItem(ht.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Pe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Pe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Pe.getEnsCache();e[t.address]=t,ct.setItem(ht.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Pe.getEnsCache();ct.setItem(ht.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ct.getItem(ht.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Pe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Pe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Pe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ct.setItem(ht.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Pe.getIdentityCache();ct.setItem(ht.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ct.removeItem(ht.PORTFOLIO_CACHE),ct.removeItem(ht.NATIVE_BALANCE_CACHE),ct.removeItem(ht.ENS_CACHE),ct.removeItem(ht.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ct.setItem(ht.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ct.getItem(ht.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Pe.getConnections(),[e]:t};ct.setItem(ht.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ct.getItem(ht.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},je={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return je.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=an.TEN_SEC_MS:!0},isAllowedRetry(t,e=an.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(je.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+an.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(je.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!je.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Pe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,je.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Se.W3M_API_URL},getBlockchainApiUrl(){return Se.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Se.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?an.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Se.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Hm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let i0=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Hm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Hm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Hm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Hm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Hm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const $ie={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?an.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(je.isTelegram()){if(je.isIos())return t.filter(e=>e!=="google");if(je.isMac())return t.filter(e=>e!=="x");if(je.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ve=xn({features:an.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:an.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ae={state:Ve,subscribeKey(t,e){return as(Ve,t,e)},setOptions(t){Object.assign(Ve,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Ve.remoteFeatures,...t};Ve.remoteFeatures=e,(n=Ve.remoteFeatures)!=null&&n.socials&&(Ve.remoteFeatures.socials=$ie.filterSocialsByPlatform(Ve.remoteFeatures.socials))},setFeatures(t){if(!t)return;Ve.features||(Ve.features=an.DEFAULT_FEATURES);const e={...Ve.features,...t};Ve.features=e},setProjectId(t){Ve.projectId=t},setCustomRpcUrls(t){Ve.customRpcUrls=t},setAllWallets(t){Ve.allWallets=t},setIncludeWalletIds(t){Ve.includeWalletIds=t},setExcludeWalletIds(t){Ve.excludeWalletIds=t},setFeaturedWalletIds(t){Ve.featuredWalletIds=t},setTokens(t){Ve.tokens=t},setTermsConditionsUrl(t){Ve.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ve.privacyPolicyUrl=t},setCustomWallets(t){Ve.customWallets=t},setIsSiweEnabled(t){Ve.isSiweEnabled=t},setIsUniversalProvider(t){Ve.isUniversalProvider=t},setSdkVersion(t){Ve.sdkVersion=t},setMetadata(t){Ve.metadata=t},setDisableAppend(t){Ve.disableAppend=t},setEIP6963Enabled(t){Ve.enableEIP6963=t},setDebug(t){Ve.debug=t},setEnableWalletConnect(t){Ve.enableWalletConnect=t},setEnableWalletGuide(t){Ve.enableWalletGuide=t},setEnableAuthLogger(t){Ve.enableAuthLogger=t},setEnableWallets(t){Ve.enableWallets=t},setPreferUniversalLinks(t){Ve.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){Ve.hasMultipleAddresses=t},setSIWX(t){Ve.siwx=t},setConnectMethodsOrder(t){Ve.features={...Ve.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ve.features={...Ve.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ve.remoteFeatures={...Ve.remoteFeatures,socials:t}},setCollapseWallets(t){Ve.features={...Ve.features,collapseWallets:t}},setEnableEmbedded(t){Ve.enableEmbedded=t},setAllowUnsupportedChain(t){Ve.allowUnsupportedChain=t},setManualWCControl(t){Ve.manualWCControl=t},setEnableNetworkSwitch(t){Ve.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ve.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ve.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ve.universalProviderConfigOverride},getSnapshot(){return zy(Ve)}},Mie=Object.freeze({enabled:!0,events:[]}),Lie=new i0({baseUrl:je.getAnalyticsUrl(),clientId:null}),Uie=5,jie=60*1e3,sl=xn({...Mie}),Bie={state:sl,subscribeKey(t,e){return as(sl,t,e)},async sendError(t,e){if(!sl.enabled)return;const n=Date.now();if(sl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<jie}).length>=Uie)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};sl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ae.state;await Lie.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:je.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){sl.enabled=!0},disable(){sl.enabled=!1},clearEvents(){sl.events=[]}};let qx=class Vx extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Vx.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Vx):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function d3(t,e){const n=t instanceof qx?t:new qx(t instanceof Error?t.message:String(t),e,t);throw Bie.sendError(n,n.category),n}function ki(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return d3(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return d3(a,e)}},n[r]=i}else n[r]=s}),n}const _a={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Fie={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===_a.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${_a.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===_a.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${_a.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Se.CHAIN.SOLANA&&t===_a.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${_a.COINBASE.url}/dapp?cb_url=${r}`)}},ai=xn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Wie={state:ai,subscribeNetworkImages(t){return is(ai.networkImages,()=>t(ai.networkImages))},subscribeKey(t,e){return as(ai,t,e)},subscribe(t){return is(ai,()=>t(ai))},setWalletImage(t,e){ai.walletImages[t]=e},setNetworkImage(t,e){ai.networkImages[t]=e},setChainImage(t,e){ai.chainImages[t]=e},setConnectorImage(t,e){ai.connectorImages={...ai.connectorImages,[t]:e}},setTokenImage(t,e){ai.tokenImages[t]=e},setCurrencyImage(t,e){ai.currencyImages[t]=e}},Do=ki(Wie),zie={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},US=xn({networkImagePromises:{}}),DB={async fetchWalletImage(t){if(t)return await Fe._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(US.networkImagePromises[t]||(US.networkImagePromises[t]=Fe._fetchNetworkImage(t)),await US.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Do.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Do.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Do.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Do.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Do.state.connectorImages[t.imageId]},getChainImage(t){return Do.state.networkImages[zie[t]]}},il=xn({message:"",variant:"info",open:!1}),Hie={state:il,subscribeKey(t,e){return as(il,t,e)},open(t,e){const{debug:n}=ae.state,{shortMessage:r,longMessage:s}=t;n&&(il.message=r,il.variant=e,il.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){il.open=!1,il.message="",il.variant="info"}},Ta=ki(Hie),qie=je.getAnalyticsUrl(),Vie=new i0({baseUrl:qie,clientId:null}),Gie=["MODAL_CREATED"],Xa=xn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Pn={state:Xa,subscribe(t){return is(Xa,()=>t(Xa))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ae.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Re.state.address;if(Gie.includes(t.data.event)||typeof window>"u")return;await Vie.post({path:"/e",params:Pn.getSdkProperties(),body:{eventId:je.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Xa.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Se.HTTP_STATUS_CODES.FORBIDDEN&&!Xa.reportedErrors.FORBIDDEN&&(Ta.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${vg()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Xa.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Xa.timestamp=Date.now(),Xa.data=t,(e=ae.state.features)!=null&&e.analytics&&Pn._sendAnalyticsEvent(Xa)}},Kie=je.getApiUrl(),Ns=new i0({baseUrl:Kie,clientId:null}),Yie=40,h3=4,Qie=20,ft=xn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Fe={state:ft,subscribeKey(t,e){return as(ft,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ae.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ae.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ns.baseUrl}/getWalletImage/${t}`,n=await Ns.getBlob({path:e,params:Fe._getSdkProperties()});Do.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ns.baseUrl}/public/getAssetImage/${t}`,n=await Ns.getBlob({path:e,params:Fe._getSdkProperties()});Do.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ns.baseUrl}/public/getAssetImage/${t}`,n=await Ns.getBlob({path:e,params:Fe._getSdkProperties()});Do.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ns.baseUrl}/public/getCurrencyImage/${t}`,n=await Ns.getBlob({path:e,params:Fe._getSdkProperties()});Do.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ns.baseUrl}/public/getTokenImage/${t}`,n=await Ns.getBlob({path:e,params:Fe._getSdkProperties()});Do.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return je.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===_a.COINBASE.id?!0:L.state.activeChain==="solana"&&(n.id===_a.SOLFLARE.id||n.id===_a.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ns.get({path:"/appkit/v1/config",params:Fe._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ns.get({path:"/projects/v1/origins",params:Fe._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=L.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!DB.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Fe._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ce.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Fe._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Fe._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Fe._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Fe._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(_a).map(o=>o.id));const r=await Ns.get({path:"/getWallets",params:{...Fe._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Fe._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ae.state;if(t!=null&&t.length){const e={...Fe._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??h3,include:t},{data:n}=await Fe.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Fe._fetchWalletImage(i))),ft.featured=r,ft.allFeatured=r}},async fetchRecommendedWallets(){try{ft.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ae.state,r=[...e??[],...n??[]].filter(Boolean),s=L.getRequestedCaipNetworkIds().join(","),i={page:1,entries:h3,include:t,exclude:r,chains:s},{data:o,count:a}=await Fe.fetchWallets(i),c=Pe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Fe._fetchWalletImage(d))),ft.recommended=o,ft.allRecommended=o,ft.count=a??0}catch{}finally{ft.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ae.state,s=L.getRequestedCaipNetworkIds().join(","),i=[...ft.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Yie,include:e,exclude:i,chains:s},{data:a,count:c}=await Fe.fetchWallets(o),l=a.slice(0,Qie).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Fe._fetchWalletImage(u))),ft.wallets=je.uniqueBy([...ft.wallets,...Fe._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),ft.count=c>ft.count?c:ft.count,ft.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Fe.fetchWallets(e);n&&n.forEach(r=>{ft.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ae.state,s=L.getRequestedCaipNetworkIds().join(",");ft.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Fe.fetchWallets(i);Pn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Fe._fetchWalletImage(c)),je.wait(300)]),ft.search=Fe._filterOutExtensions(o)},initPromise(t,e){const n=ft.promises[t];return n||(ft.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Fe.initPromise("connectorImages",Fe.fetchConnectorImages),e&&Fe.initPromise("featuredWallets",Fe.fetchFeaturedWallets),n&&Fe.initPromise("recommendedWallets",Fe.fetchRecommendedWallets),r&&Fe.initPromise("networkImages",Fe.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ae.state.features)!=null&&t.analytics&&Fe.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ns.get({path:"/getAnalyticsConfig",params:Fe._getSdkProperties()});ae.setFeatures({analytics:t})}catch{ae.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){ft.featured=ft.allFeatured,ft.recommended=ft.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");ft.featured=ft.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ft.recommended=ft.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ft.filteredWallets=ft.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){ft.filteredWallets=[]},setFilterByNamespace(t){if(!t){ft.featured=ft.allFeatured,ft.recommended=ft.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");ft.featured=ft.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ft.recommended=ft.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ft.filteredWallets=ft.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},nn=xn({view:"Connect",history:["Connect"],transactionStack:[]}),Zie={state:nn,subscribeKey(t,e){return as(nn,t,e)},pushTransactionStack(t){nn.transactionStack.push(t)},popTransactionStack(t){const e=nn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),_t.goBack();break;case"cancel":s==null||s(),_t.goBack();break}},push(t,e){t!==nn.view&&(nn.view=t,nn.history.push(t),nn.data=e)},reset(t,e){nn.view=t,nn.history=[t],nn.data=e},replace(t,e){nn.history.at(-1)===t||(nn.view=t,nn.history[nn.history.length-1]=t,nn.data=e)},goBack(){var r;const t=L.state.activeCaipAddress,e=_t.state.view==="ConnectingFarcaster",n=!t&&e;if(nn.history.length>1){nn.history.pop();const[s]=nn.history.slice(-1);s&&(t&&s==="Connect"?nn.view="Account":nn.view=s)}else Ir.close();(r=nn.data)!=null&&r.wallet&&(nn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Re.setFarcasterUrl(void 0,L.state.activeChain);const a=Ce.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=zy(ae.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(nn.history.length>1){nn.history=nn.history.slice(0,t+1);const[e]=nn.history.slice(-1);e&&(nn.view=e)}},goBackOrCloseModal(){_t.state.history.length>1?_t.goBack():Ir.close()}},_t=ki(Zie),Ja=xn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Gx={state:Ja,subscribe(t){return is(Ja,()=>t(Ja))},setThemeMode(t){Ja.themeMode=t;try{const e=Ce.getAuthConnector();if(e){const n=Gx.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Sc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ja.themeVariables={...Ja.themeVariables,...t};try{const e=Ce.getAuthConnector();if(e){const n=Gx.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Sc(Ja.themeVariables,Ja.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return zy(Ja)}},Ws=ki(Gx),$B={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Mt=xn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...$B},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Xie={state:Mt,subscribe(t){return is(Mt,()=>{t(Mt)})},subscribeKey(t,e){return as(Mt,t,e)},initialize(t){t.forEach(e=>{const n=Pe.getConnectedConnectorId(e);n&&Ce.setConnectorId(n,e)})},setActiveConnector(t){t&&(Mt.activeConnector=Gd(t))},setConnectors(t){t.filter(s=>!Mt.allConnectors.some(i=>i.id===s.id&&Ce.getConnectorName(i.name)===Ce.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Mt.allConnectors.push(Gd(s))});const n=Ce.getEnabledNamespaces(),r=Ce.getEnabledConnectors(n);Mt.connectors=Ce.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Mt.filterByNamespaceMap).forEach(e=>{Mt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Mt.filterByNamespaceMap[e]=!0}),Ce.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Mt.filterByNamespaceMap[t]=e,Ce.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ce.getEnabledNamespaces(),e=Ce.getEnabledConnectors(t),n=Ce.areAllNamespacesEnabled();Mt.connectors=Ce.mergeMultiChainConnectors(e),n?Fe.clearFilterByNamespaces():Fe.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Mt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Mt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Mt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ce.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Se.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ce.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Se.CONNECTOR_ID.AUTH){const s=t,i=zy(ae.state),o=Ws.getSnapshot().themeMode,a=Ws.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Sc(a,o)}),Ce.setConnectors([t])}else Ce.setConnectors([t])},getAuthConnector(t){var r;const e=t||L.state.activeChain,n=Mt.connectors.find(s=>s.id===Se.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Mt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Mt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Mt.allConnectors.filter(r=>r.chain===L.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=zy(ae.state),r=Ws.getSnapshot().themeMode,s=Ws.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Sc(s,r)})},getConnectorsByNamespace(t){const e=Mt.allConnectors.filter(n=>n.chain===t);return Ce.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Ce.getConnector(t.id,t.rdns),n=L.state.activeChain;Fie.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?_t.push("ConnectingExternal",{connector:e}):_t.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ce.getConnectorsByNamespace(t):Ce.mergeMultiChainConnectors(Mt.allConnectors)},setFilterByNamespace(t){Mt.filterByNamespace=t,Mt.connectors=Ce.getConnectors(t),Fe.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Mt.activeConnectorIds={...Mt.activeConnectorIds,[e]:t},Pe.setConnectedConnectorId(e,t))},removeConnectorId(t){Mt.activeConnectorIds={...Mt.activeConnectorIds,[t]:void 0},Pe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Mt.activeConnectorIds[t]},isConnected(t){return t?!!Mt.activeConnectorIds[t]:Object.values(Mt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Mt.activeConnectorIds={...$B}}},Ce=ki(Xie);var Sp={};const Jie="https://secure.walletconnect.org/sdk",eoe=(typeof process<"u"&&typeof Sp<"u"?Sp.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Jie,toe=(typeof process<"u"&&typeof Sp<"u"?Sp.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",noe=(typeof process<"u"&&typeof Sp<"u"?Sp.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ne={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Wr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Zu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),rr=xn({...Zu}),roe={state:rr,subscribeKey(t,e){return as(rr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=je.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){rr.message=Zu.message,rr.variant=Zu.variant,rr.svg=Zu.svg,rr.open=Zu.open,rr.autoClose=Zu.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Zu.autoClose}){rr.open?(rr.open=!1,setTimeout(()=>{rr.message=t,rr.variant=n,rr.svg=e,rr.open=!0,rr.autoClose=r},150)):(rr.message=t,rr.variant=n,rr.svg=e,rr.open=!0,rr.autoClose=r)}},Lo=roe,pn=xn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),soe={state:pn,subscribe(t){return is(pn,()=>t(pn))},setLastNetworkInView(t){pn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");pn.loading=!0;try{const s=await Qe.fetchTransactions({account:t,cursor:pn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=_g.filterSpamTransactions(s.data),o=_g.filterByConnectedChain(i),a=[...pn.transactions,...o];pn.loading=!1,e==="coinbase"?pn.coinbaseTransactions=_g.groupTransactionsByYearAndMonth(pn.coinbaseTransactions,s.data):(pn.transactions=a,pn.transactionsByYear=_g.groupTransactionsByYearAndMonth(pn.transactionsByYear,o)),pn.empty=a.length===0,pn.next=s.next?s.next:void 0}catch{const i=L.state.activeChain;Pn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ae.state.projectId,cursor:pn.next,isSmartAccount:((r=Re.state.preferredAccountTypes)==null?void 0:r[i])===Wr.ACCOUNT_TYPES.SMART_ACCOUNT}}),Lo.showError("Failed to fetch transactions"),pn.loading=!1,pn.empty=!0,pn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){pn.next=void 0},resetTransactions(){pn.transactions=[],pn.transactionsByYear={},pn.lastNetworkInView=void 0,pn.loading=!1,pn.empty=!1,pn.next=void 0}},_g=ki(soe,"API_ERROR"),ln=xn({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let ju;const ioe={state:ln,subscribeKey(t,e){return as(ln,t,e)},_getClient(){return ln._client},setClient(t){ln._client=Gd(t)},async connectWalletConnect(){var t,e,n,r;if(je.isTelegram()||je.isSafari()&&je.isIos()){if(ju){await ju,ju=void 0;return}if(!je.isPairingExpired(ln==null?void 0:ln.wcPairingExpiry)){const s=ln.wcUri;ln.wcUri=s;return}ju=(e=(t=Ze._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Ze.state.status="connecting",await ju,ju=void 0,ln.wcPairingExpiry=void 0,Ze.state.status="connected"}else await((r=(n=Ze._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=Ze._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&L.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=Ze._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||L.state.activeChain;e&&Ce.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Ir.setLoading(!0,L.state.activeChain);const n=Ce.getAuthConnector();n&&(Re.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Pe.setPreferredAccountTypes(Re.state.preferredAccountTypes??{[e]:t}),await Ze.reconnectExternal(n),Ir.setLoading(!1,L.state.activeChain),Pn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Ze._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Ze._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Ze._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Ze._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Ze._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Ze._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Ze._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Ze._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Ze._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Ze._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Ze._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Ze._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){ln.wcUri=void 0,ln.wcPairingExpiry=void 0,ln.wcLinking=void 0,ln.recentWallet=void 0,ln.status="disconnected",_g.resetTransactions(),Pe.deleteWalletConnectDeepLink()},resetUri(){ln.wcUri=void 0,ln.wcPairingExpiry=void 0,ju=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Ze.state;t&&Pe.setWalletConnectDeepLink(t),e&&Pe.setAppKitRecent(e),Pn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=_t.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){ln.wcBasic=t},setUri(t){ln.wcUri=t,ln.wcPairingExpiry=je.getPairingExpiry()},setWcLinking(t){ln.wcLinking=t},setWcError(t){ln.wcError=t,ln.buffering=!1},setRecentWallet(t){ln.recentWallet=t},setBuffering(t){ln.buffering=t},setStatus(t){ln.status=t},async disconnect(t){var e;try{await((e=Ze._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new qx("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){ln.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Ce.state.activeConnectorIds[n]===t.connectorId){const i=L.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Re.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Ce.getConnector(t.connectorId);i?Ze.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},Ze=ki(ioe),Fh=xn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Da={state:Fh,subscribe(t){return is(Fh,()=>t(Fh))},subscribeOpen(t){return as(Fh,"open",t)},set(t){Object.assign(Fh,{...Fh,...t})}},ooe="1.0.8";let Di=class Kx extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Kx?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Kx&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${ooe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Gc(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const MB=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,LB=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,UB=/^\(.+?\).*?$/,f3=/^tuple(?<array>(\[(\d*)\])*)$/;function Yx(t){let e=t.type;if(f3.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Yx(i),s<n-1&&(e+=", ")}const r=Gc(f3,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Yx({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function qm(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Yx(s),r!==n-1&&(e+=", ")}return e}function M_(t){var e;return t.type==="function"?`function ${t.name}(${qm(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${qm(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${qm(t.inputs)})`:t.type==="error"?`error ${t.name}(${qm(t.inputs)})`:t.type==="constructor"?`constructor(${qm(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const jB=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function aoe(t){return jB.test(t)}function coe(t){return Gc(jB,t)}const BB=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function loe(t){return BB.test(t)}function uoe(t){return Gc(BB,t)}const FB=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function doe(t){return FB.test(t)}function hoe(t){return Gc(FB,t)}const WB=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function HP(t){return WB.test(t)}function foe(t){return Gc(WB,t)}const zB=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function poe(t){return zB.test(t)}function moe(t){return Gc(zB,t)}const HB=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function goe(t){return HB.test(t)}function yoe(t){return Gc(HB,t)}const woe=/^receive\(\) external payable$/;function boe(t){return woe.test(t)}const voe=new Set(["indexed"]),Qx=new Set(["calldata","memory","storage"]);class _oe extends Di{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Eoe extends Di{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Coe extends Di{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Soe extends Di{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Aoe extends Di{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ioe extends Di{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class xoe extends Di{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Noe extends Di{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class im extends Di{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Toe extends Di{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Roe extends Di{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Poe extends Di{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Ooe extends Di{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function koe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const jS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Zx(t,e={}){if(doe(t))return Doe(t,e);if(loe(t))return $oe(t,e);if(aoe(t))return Moe(t,e);if(poe(t))return Loe(t,e);if(goe(t))return Uoe(t);if(boe(t))return{type:"receive",stateMutability:"payable"};throw new Toe({signature:t})}function Doe(t,e={}){const n=hoe(t);if(!n)throw new im({signature:t,type:"function"});const r=Uo(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Yd(r[a],{modifiers:Qx,structs:e,type:"function"}));const o=[];if(n.returns){const a=Uo(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Yd(a[l],{modifiers:Qx,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function $oe(t,e={}){const n=uoe(t);if(!n)throw new im({signature:t,type:"event"});const r=Uo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Yd(r[o],{modifiers:voe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Moe(t,e={}){const n=coe(t);if(!n)throw new im({signature:t,type:"error"});const r=Uo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Yd(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Loe(t,e={}){const n=moe(t);if(!n)throw new im({signature:t,type:"constructor"});const r=Uo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Yd(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Uoe(t){const e=yoe(t);if(!e)throw new im({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const joe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Boe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Foe=/^u?int$/;function Yd(t,e){var d,h;const n=koe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(jS.has(n))return jS.get(n);const r=UB.test(t),s=Gc(r?Boe:joe,t);if(!s)throw new Soe({param:t});if(s.name&&zoe(s.name))throw new Aoe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Uo(s.type),p=[],m=f.length;for(let w=0;w<m;w++)p.push(Yd(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Foe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!qB(c))throw new Coe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new Ioe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Qx.has(s.modifier)&&!Hoe(c,!!s.array))throw new xoe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return jS.set(n,u),u}function Uo(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Uo(a,[...e,n.trim()]):Uo(a,e,`${n}${o}`,r);case"(":return Uo(a,e,`${n}${o}`,r+1);case")":return Uo(a,e,`${n}${o}`,r-1);default:return Uo(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Ooe({current:n,depth:r});return e.push(n.trim()),e}function qB(t){return t==="address"||t==="bool"||t==="function"||t==="string"||MB.test(t)||LB.test(t)}const Woe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function zoe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||MB.test(t)||LB.test(t)||Woe.test(t)}function Hoe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function VB(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!HP(a))continue;const c=foe(a);if(!c)throw new im({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const m=Yd(p,{type:"struct"});u.push(m)}if(!u.length)throw new Roe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=GB(c,e)}return r}const qoe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function GB(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(UB.test(o.type))r.push(o);else{const c=Gc(qoe,o.type);if(!(c!=null&&c.type))throw new Noe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Poe({type:u});r.push({...o,type:`tuple${l??""}`,components:GB(e[u]??[],e,new Set([...n,u]))})}else if(qB(u))r.push(o);else throw new Eoe({type:u})}}return r}function KB(t){const e=VB(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];HP(i)||n.push(Zx(i,e))}return n}function p3(t){let e;if(typeof t=="string")e=Zx(t);else{const n=VB(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!HP(i)){e=Zx(i,n);break}}}if(!e)throw new _oe({signature:t});return e}function He(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Yo(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new sae(t.type);return`${t.name}(${gC(t.inputs,{includeName:e})})`}function gC(t,{includeName:e=!1}={}){return t?t.map(n=>Voe(n,{includeName:e})).join(e?", ":","):""}function Voe(t,{includeName:e}){return t.type.startsWith("tuple")?`(${gC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function ja(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qn(t){return ja(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const YB="2.32.0";let Vm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${YB}`},re=class Xx extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Xx?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Xx&&n.cause.docsPath||n.docsPath,i=(a=Vm.getDocsUrl)==null?void 0:a.call(Vm,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Vm.version?[`Version: ${Vm.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=YB}walk(e){return QB(this,e)}};function QB(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?QB(t.cause,e):e?null:t}class Goe extends re{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class m3 extends re{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class ZB extends re{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${gC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class o0 extends re{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Koe extends re{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Yoe extends re{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${qn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Qoe extends re{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Zoe extends re{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class g3 extends re{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class XB extends re{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Xoe extends re{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class JB extends re{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class y3 extends re{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Ap extends re{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class eF extends re{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Joe extends re{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class eae extends re{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Yo(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Yo(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let tae=class extends re{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Hy extends re{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${gC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class yC extends re{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Yo(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class nae extends re{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class rae extends re{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let tF=class extends re{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class sae extends re{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class iae extends re{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let nF=class extends re{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},rF=class extends re{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class w3 extends re{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function om(t,{dir:e,size:n=32}={}){return typeof t=="string"?cu(t,{dir:e,size:n}):oae(t,{dir:e,size:n})}function cu(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new rF({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function oae(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new rF({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let sF=class extends re{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class aae extends re{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class cae extends re{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let lae=class extends re{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function $a(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function uo(t,{size:e}){if(qn(t)>e)throw new lae({givenSize:qn(t),maxSize:e})}function Ni(t,e={}){const{signed:n}=e;e.size&&uo(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function uae(t,e={}){let n=t;if(e.size&&(uo(n,{size:e.size}),n=$a(n)),$a(n)==="0x00")return!1;if($a(n)==="0x01")return!0;throw new cae(n)}function Qo(t,e={}){return Number(Ni(t,e))}function iF(t,e={}){let n=oo(t);return e.size&&(uo(n,{size:e.size}),n=$a(n,{dir:"right"})),new TextDecoder().decode(n)}const dae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function io(t,e={}){return typeof t=="number"||typeof t=="bigint"?De(t,e):typeof t=="string"?Ip(t,e):typeof t=="boolean"?oF(t,e):mr(t,e)}function oF(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(uo(n,{size:e.size}),om(n,{size:e.size})):n}function mr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=dae[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(uo(r,{size:e.size}),om(r,{dir:"right",size:e.size})):r}function De(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new sF({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?om(a,{size:r}):a}const hae=new TextEncoder;function Ip(t,e={}){const n=hae.encode(t);return mr(n,e)}const fae=new TextEncoder;function am(t,e={}){return typeof t=="number"||typeof t=="bigint"?mae(t,e):typeof t=="boolean"?pae(t,e):ja(t)?oo(t,e):kd(t,e)}function pae(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(uo(n,{size:e.size}),om(n,{size:e.size})):n}const ec={zero:48,nine:57,A:65,F:70,a:97,f:102};function b3(t){if(t>=ec.zero&&t<=ec.nine)return t-ec.zero;if(t>=ec.A&&t<=ec.F)return t-(ec.A-10);if(t>=ec.a&&t<=ec.f)return t-(ec.a-10)}function oo(t,e={}){let n=t;e.size&&(uo(n,{size:e.size}),n=om(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=b3(r.charCodeAt(a++)),l=b3(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new re(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function mae(t,e){const n=De(t,e);return oo(n)}function kd(t,e={}){const n=fae.encode(t);return typeof e.size=="number"?(uo(n,{size:e.size}),om(n,{dir:"right",size:e.size})):n}const Ab=BigInt(2**32-1),v3=BigInt(32);function gae(t,e=!1){return e?{h:Number(t&Ab),l:Number(t>>v3&Ab)}:{h:Number(t>>v3&Ab)|0,l:Number(t&Ab)|0}}function yae(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=gae(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const wae=(t,e,n)=>t<<n|e>>>32-n,bae=(t,e,n)=>e<<n|t>>>32-n,vae=(t,e,n)=>e<<n-32|t>>>64-n,_ae=(t,e,n)=>t<<n-32|e>>>64-n,Wh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qy(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Zo(t,...e){if(!qP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Eae(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");qy(t.outputLen),qy(t.blockLen)}function xp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aF(t,e){Zo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Cae(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Np(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function BS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ia(t,e){return t<<32-e|t>>>e}const Sae=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Aae(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Iae(t){for(let e=0;e<t.length;e++)t[e]=Aae(t[e]);return t}const _3=Sae?t=>t:Iae,cF=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Vy(t){if(Zo(t),cF)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=xae[t[n]];return e}const tc={_0:48,_9:57,A:65,F:70,a:97,f:102};function E3(t){if(t>=tc._0&&t<=tc._9)return t-tc._0;if(t>=tc.A&&t<=tc.F)return t-(tc.A-10);if(t>=tc.a&&t<=tc.f)return t-(tc.a-10)}function VP(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(cF)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=E3(t.charCodeAt(i)),a=E3(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Nae(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function a0(t){return typeof t=="string"&&(t=Nae(t)),Zo(t),t}function fd(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Zo(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let GP=class{};function lF(t){const e=r=>t().update(a0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Tae(t){const e=(r,s)=>t(s).update(a0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Rae(t=32){if(Wh&&typeof Wh.getRandomValues=="function")return Wh.getRandomValues(new Uint8Array(t));if(Wh&&typeof Wh.randomBytes=="function")return Uint8Array.from(Wh.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Pae=BigInt(0),Gm=BigInt(1),Oae=BigInt(2),kae=BigInt(7),Dae=BigInt(256),$ae=BigInt(113),uF=[],dF=[],hF=[];for(let t=0,e=Gm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],uF.push(2*(5*r+n)),dF.push((t+1)*(t+2)/2%64);let s=Pae;for(let i=0;i<7;i++)e=(e<<Gm^(e>>kae)*$ae)%Dae,e&Oae&&(s^=Gm<<(Gm<<BigInt(i))-Gm);hF.push(s)}const fF=yae(hF,!0),Mae=fF[0],Lae=fF[1],C3=(t,e,n)=>n>32?vae(t,e,n):wae(t,e,n),S3=(t,e,n)=>n>32?_ae(t,e,n):bae(t,e,n);function pF(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=C3(l,u,1)^n[a],h=S3(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=dF[o],c=C3(s,i,a),l=S3(s,i,a),u=uF[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Mae[r],t[1]^=Lae[r]}Np(n)}let KP=class mF extends GP{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,qy(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Cae(this.state)}clone(){return this._cloneInto()}keccak(){_3(this.state32),pF(this.state32,this.rounds),_3(this.state32),this.posOut=0,this.pos=0}update(e){xp(this),e=a0(e),Zo(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){xp(this,!1),Zo(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return qy(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aF(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Np(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new mF(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const ku=(t,e,n)=>lF(()=>new KP(e,t,n)),Uae=ku(6,144,224/8),jae=ku(6,136,256/8),Bae=ku(6,104,384/8),Fae=ku(6,72,512/8),Wae=ku(1,144,224/8),YP=ku(1,136,256/8),zae=ku(1,104,384/8),Hae=ku(1,72,512/8),gF=(t,e,n)=>Tae((r={})=>new KP(e,t,r.dkLen===void 0?n:r.dkLen,!0)),qae=gF(31,168,128/8),Vae=gF(31,136,256/8),N5e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:KP,keccakP:pF,keccak_224:Wae,keccak_256:YP,keccak_384:zae,keccak_512:Hae,sha3_224:Uae,sha3_256:jae,sha3_384:Bae,sha3_512:Fae,shake128:qae,shake256:Vae},Symbol.toStringTag,{value:"Module"}));function Br(t,e){const n=e||"hex",r=YP(ja(t,{strict:!1})?am(t):t);return n==="bytes"?r:io(r)}const Gae=t=>Br(am(t));function Kae(t){return Gae(t)}function Yae(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new re("Unable to normalize signature.");return s}const Qae=t=>{const e=typeof t=="string"?t:M_(t);return Yae(e)};function yF(t){return Kae(Qae(t))}const wC=yF;let Su=class extends re{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},bC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const FS=new bC(8192);function c0(t,e){if(FS.has(`${t}.${e}`))return FS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Br(kd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return FS.set(`${t}.${e}`,i),i}function Ac(t,e){if(!ao(t,{strict:!1}))throw new Su({address:t});return c0(t,e)}const Zae=/^0x[a-fA-F0-9]{40}$/,WS=new bC(8192);function ao(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(WS.has(r))return WS.get(r);const s=Zae.test(t)?t.toLowerCase()===t?!0:n?c0(t)===t:!0:!1;return WS.set(r,s),s}function co(t){return typeof t[0]=="string"?cm(t):Xae(t)}function Xae(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function cm(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Tp(t,e,n,{strict:r}={}){return ja(t,{strict:!1})?L_(t,e,n,{strict:r}):vF(t,e,n,{strict:r})}function wF(t,e){if(typeof e=="number"&&e>0&&e>qn(t)-1)throw new nF({offset:e,position:"start",size:qn(t)})}function bF(t,e,n){if(typeof e=="number"&&typeof n=="number"&&qn(t)!==n-e)throw new nF({offset:n,position:"end",size:qn(t)})}function vF(t,e,n,{strict:r}={}){wF(t,e);const s=t.slice(e,n);return r&&bF(s,e,n),s}function L_(t,e,n,{strict:r}={}){wF(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&bF(s,e,n),s}const Jae=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_F=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Du(t,e){if(t.length!==e.length)throw new Qoe({expectedLength:t.length,givenLength:e.length});const n=ece({params:t,values:e}),r=ZP(n);return r.length===0?"0x":r}function ece({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(QP({param:t[r],value:e[r]}));return n}function QP({param:t,value:e}){const n=XP(t.type);if(n){const[r,s]=n;return nce(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return ace(e,{param:t});if(t.type==="address")return tce(e);if(t.type==="bool")return sce(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=_F.exec(t.type)??[];return ice(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return rce(e,{param:t});if(t.type==="string")return oce(e);throw new nae(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function ZP(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=qn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(De(e+s,{size:32})),r.push(a),s+=qn(a)):n.push(a)}return co([...n,...r])}function tce(t){if(!ao(t))throw new Su({address:t});return{dynamic:!1,encoded:cu(t.toLowerCase())}}function nce(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new tF(t);if(!r&&t.length!==e)throw new Koe({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=QP({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=ZP(i);if(r){const a=De(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?co([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:co(i.map(({encoded:o})=>o))}}function rce(t,{param:e}){const[,n]=e.type.split("bytes"),r=qn(t);if(!n){let s=t;return r%32!==0&&(s=cu(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:co([cu(De(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Yoe({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:cu(t,{dir:"right"})}}function sce(t){if(typeof t!="boolean")throw new re(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:cu(oF(t))}}function ice(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new sF({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:De(t,{size:32,signed:e})}}function oce(t){const e=Ip(t),n=Math.ceil(qn(e)/32),r=[];for(let s=0;s<n;s++)r.push(cu(Tp(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:co([cu(De(qn(e),{size:32})),...r])}}function ace(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=QP({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?ZP(r):co(r.map(({encoded:s})=>s))}}function XP(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const l0=t=>Tp(yF(t),0,4);function vh(t){const{abi:e,args:n=[],name:r}=t,s=ja(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?l0(a)===r:a.type==="event"?wC(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?Jx(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=EF(a.inputs,o.inputs,n);if(l)throw new eae({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function Jx(t,e){const n=typeof t,r=e.type;switch(r){case"address":return ao(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Jx(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Jx(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function EF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return EF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?ao(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?ao(n[r],{strict:!1}):!1)return o}}const A3="/docs/contract/encodeEventTopics";function u0(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=vh({abi:e,name:n});if(!l)throw new y3(n,{docsPath:A3});s=l}if(s.type!=="event")throw new y3(void 0,{docsPath:A3});const i=Yo(s),o=wC(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>I3({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?I3({param:d,value:u[h]}):null))??[])}return[o,...a]}function I3({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Br(am(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new iae(t.type);return Du([t],[e])}function vC(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function CF(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=vC(t,{method:"eth_newFilter"}),u=i?u0({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?De(o):o,toBlock:typeof c=="bigint"?De(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}function Vn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const x3="/docs/contract/encodeFunctionData";function cce(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=vh({abi:e,args:n,name:r});if(!i)throw new Ap(r,{docsPath:x3});s=i}if(s.type!=="function")throw new Ap(void 0,{docsPath:x3});return{abi:[s],functionName:l0(Yo(s))}}function ho(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:cce(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Du(s.inputs,e??[]):void 0;return cm([i,o??"0x"])}const SF={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},AF={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},lce={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class N3 extends re{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class IF extends re{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class uce extends re{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const dce={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new uce({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new IF({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new N3({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new N3({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function JP(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(dce);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function hce(t,e={}){typeof e.size<"u"&&uo(t,{size:e.size});const n=mr(t,e);return Ni(n,e)}function fce(t,e={}){let n=t;if(typeof e.size<"u"&&(uo(n,{size:e.size}),n=$a(n)),n.length>1||n[0]>1)throw new aae(n);return!!n[0]}function Nc(t,e={}){typeof e.size<"u"&&uo(t,{size:e.size});const n=mr(t,e);return Qo(n,e)}function pce(t,e={}){let n=t;return typeof e.size<"u"&&(uo(n,{size:e.size}),n=$a(n,{dir:"right"})),new TextDecoder().decode(n)}function d0(t,e){const n=typeof e=="string"?oo(e):e,r=JP(n);if(qn(n)===0&&t.length>0)throw new o0;if(qn(e)&&qn(e)<32)throw new ZB({data:typeof e=="string"?e:mr(e),params:t,size:qn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Vf(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Vf(t,e,{staticPosition:n}){const r=XP(e.type);if(r){const[s,i]=r;return gce(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return vce(t,e,{staticPosition:n});if(e.type==="address")return mce(t);if(e.type==="bool")return yce(t);if(e.type.startsWith("bytes"))return wce(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return bce(t,e);if(e.type==="string")return _ce(t,{staticPosition:n});throw new rae(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const T3=32,eN=32;function mce(t){const e=t.readBytes(32);return[c0(mr(vF(e,-20))),32]}function gce(t,e,{length:n,staticPosition:r}){if(!n){const o=Nc(t.readBytes(eN)),a=r+o,c=a+T3;t.setPosition(a);const l=Nc(t.readBytes(T3)),u=Gy(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,m]=Vf(t,e,{staticPosition:c});d+=m,h.push(p)}return t.setPosition(r+32),[h,32]}if(Gy(e)){const o=Nc(t.readBytes(eN)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Vf(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Vf(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function yce(t){return[fce(t.readBytes(32),{size:32}),32]}function wce(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Nc(t.readBytes(32));t.setPosition(n+o);const a=Nc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[mr(c),32]}return[mr(t.readBytes(Number.parseInt(s),32)),32]}function bce(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?hce(s,{signed:n}):Nc(s,{signed:n}),32]}function vce(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Gy(e)){const o=Nc(t.readBytes(eN)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Vf(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Vf(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function _ce(t,{staticPosition:e}){const n=Nc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Nc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=pce($a(i));return t.setPosition(e+32),[o,32]}function Gy(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Gy);const n=XP(t.type);return!!(n&&Gy({...t,type:n[1]}))}function Ece(t){const{abi:e,data:n}=t,r=Tp(n,0,4);if(r==="0x")throw new o0;const i=[...e||[],AF,lce].find(o=>o.type==="error"&&r===l0(Yo(o)));if(!i)throw new XB(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?d0(i.inputs,Tp(n,4)):void 0,errorName:i.name}}const fr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function xF({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?fr(e[i]):e[i]}`).join(", ")})`}const Cce={gwei:9,wei:18},Sce={ether:-9,wei:9},Ace={ether:-18,gwei:-9};function _h(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function eO(t,e="wei"){return _h(t,Cce[e])}function ti(t,e="wei"){return _h(t,Sce[e])}class Ice extends re{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class xce extends re{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function R3(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Nce(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=R3(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=R3(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function h0(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class Tce extends re{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class Rce extends re{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",h0(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Pce extends re{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=h0({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${eO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ti(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ti(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ti(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class NF extends re{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class TF extends re{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class Oce extends re{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const kce=t=>t,tO=t=>t;class RF extends re{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Vn(n):void 0;let m=h0({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${eO(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ti(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ti(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ti(l)} gwei`,nonce:u});f&&(m+=`
${Nce(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class PF extends re{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=vh({abi:n,args:r,name:o}),l=c?xF({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Yo(c,{includeName:!0}):void 0,d=h0({address:s&&kce(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class tN extends re{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Ece({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=SF[f]}else{const f=u?Yo(u,{includeName:!0}):void 0,p=u&&h?xF({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof XB&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Dce extends re{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class $ce extends re{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class _C extends re{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Yg extends re{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${tO(o)}`,e&&`Request body: ${fr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class nO extends re{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${tO(r)}`,`Request body: ${fr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class P3 extends re{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${tO(n)}`,`Request body: ${fr(e)}`],name:"TimeoutError"})}}const Mce=-1;class ii extends re{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof nO?e.code:n??Mce}}class $i extends ii{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Ky extends ii{constructor(e){super(e,{code:Ky.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Ky,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Yy extends ii{constructor(e){super(e,{code:Yy.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Yy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Qy extends ii{constructor(e,{method:n}={}){super(e,{code:Qy.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Qy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Zy extends ii{constructor(e){super(e,{code:Zy.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Zy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Qd extends ii{constructor(e){super(e,{code:Qd.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Qd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Zd extends ii{constructor(e){super(e,{code:Zd.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Zd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Xy extends ii{constructor(e){super(e,{code:Xy.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Xy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class lu extends ii{constructor(e){super(e,{code:lu.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(lu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Rp extends ii{constructor(e){super(e,{code:Rp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Rp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class pd extends ii{constructor(e,{method:n}={}){super(e,{code:pd.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(pd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Pp extends ii{constructor(e){super(e,{code:Pp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Pp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Jy extends ii{constructor(e){super(e,{code:Jy.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Jy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class or extends $i{constructor(e){super(e,{code:or.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(or,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ew extends $i{constructor(e){super(e,{code:ew.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ew,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class tw extends $i{constructor(e,{method:n}={}){super(e,{code:tw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(tw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class nw extends $i{constructor(e){super(e,{code:nw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(nw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class rw extends $i{constructor(e){super(e,{code:rw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(rw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ba extends $i{constructor(e){super(e,{code:Ba.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ba,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Op extends $i{constructor(e){super(e,{code:Op.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Op,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class sw extends $i{constructor(e){super(e,{code:sw.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(sw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class iw extends $i{constructor(e){super(e,{code:iw.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(iw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class ow extends $i{constructor(e){super(e,{code:ow.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(ow,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class aw extends $i{constructor(e){super(e,{code:aw.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(aw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class cw extends $i{constructor(e){super(e,{code:cw.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(cw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class kp extends $i{constructor(e){super(e,{code:kp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Lce extends ii{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Uce=3;function Xd(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof _C?t:t instanceof re?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof o0?new Dce({functionName:i}):[Uce,Qd.code].includes(c)&&(l||u||d||h)?new tN({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof nO?u:h??d}):t;return new PF(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function jce(t){const e=Br(`0x${t.substring(4)}`).substring(26);return c0(`0x${e}`)}const Bce="modulepreload",Fce=function(t){return"/"+t},O3={},ts=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Fce(c),c in O3)return;O3[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Bce,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function Wce({hash:t,signature:e}){const n=ja(t)?t:io(t),{secp256k1:r}=await ts(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>Nhe);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=k3(f);return new r.Signature(Ni(l),Ni(u)).addRecoveryBit(p)}const o=ja(e)?e:io(e);if(qn(o)!==65)throw new Error("invalid signature length");const a=Qo(`0x${o.slice(130)}`),c=k3(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function k3(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function OF({hash:t,signature:e}){return jce(await Wce({hash:t,signature:e}))}function zce(t,e="hex"){const n=kF(t),r=JP(new Uint8Array(n.length));return n.encode(r),e==="hex"?mr(r.bytes):r.bytes}function kF(t){return Array.isArray(t)?Hce(t.map(e=>kF(e))):qce(t)}function Hce(t){const e=t.reduce((s,i)=>s+i.length,0),n=DF(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function qce(t){const e=typeof t=="string"?oo(t):t,n=DF(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function DF(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new re("Length is too large.")}function Vce(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Br(cm(["0x05",zce([e?De(e):"0x",s,n?De(n):"0x"])]));return r==="bytes"?oo(i):i}async function $F(t){const{authorization:e,signature:n}=t;return OF({hash:Vce(e),signature:n??e})}class Gce extends re{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=h0({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${eO(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${ti(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${ti(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${ti(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class md extends re{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(md,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(md,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class U_ extends re{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ti(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(U_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class nN extends re{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${ti(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(nN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class rN extends re{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(rN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class sN extends re{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(sN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class iN extends re{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(iN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class oN extends re{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(oN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class aN extends re{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(aN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class cN extends re{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(cN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class lN extends re{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(lN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class j_ extends re{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${ti(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${ti(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(j_,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class f0 extends re{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function EC(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof re?t.walk(s=>(s==null?void 0:s.code)===md.code):t;return r instanceof re?new md({cause:t,message:r.details}):md.nodeMessage.test(n)?new md({cause:t,message:t.details}):U_.nodeMessage.test(n)?new U_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):nN.nodeMessage.test(n)?new nN({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rN.nodeMessage.test(n)?new rN({cause:t,nonce:e==null?void 0:e.nonce}):sN.nodeMessage.test(n)?new sN({cause:t,nonce:e==null?void 0:e.nonce}):iN.nodeMessage.test(n)?new iN({cause:t,nonce:e==null?void 0:e.nonce}):oN.nodeMessage.test(n)?new oN({cause:t}):aN.nodeMessage.test(n)?new aN({cause:t,gas:e==null?void 0:e.gas}):cN.nodeMessage.test(n)?new cN({cause:t,gas:e==null?void 0:e.gas}):lN.nodeMessage.test(n)?new lN({cause:t}):j_.nodeMessage.test(n)?new j_({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new f0({cause:t})}function Kce(t,{docsPath:e,...n}){const r=(()=>{const s=EC(t,n);return s instanceof f0?t:s})();return new Gce(r,{docsPath:e,...n})}function CC(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Yce={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function lm(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Qce(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>mr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=De(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=De(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=De(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=De(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=De(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=De(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Yce[t.type]),typeof t.value<"u"&&(e.value=De(t.value)),e}function Qce(t){return t.map(e=>({address:e.address,r:e.r?De(BigInt(e.r)):e.r,s:e.s?De(BigInt(e.s)):e.s,chainId:De(e.chainId),nonce:De(e.nonce),...typeof e.yParity<"u"?{yParity:De(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:De(e.v)}:{}}))}function D3(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new w3({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new w3({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Zce(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=De(e)),n!==void 0&&(o.nonce=De(n)),r!==void 0&&(o.state=D3(r)),s!==void 0){if(o.state)throw new xce;o.stateDiff=D3(s)}return o}function rO(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!ao(n,{strict:!1}))throw new Su({address:n});if(e[n])throw new Ice({address:n});e[n]=Zce(r)}return e}const Xce=2n**256n-1n;function Eh(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Vn(e):void 0;if(o&&!ao(o.address))throw new Su({address:o.address});if(i&&!ao(i))throw new Su({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Tce;if(r&&r>Xce)throw new U_({maxFeePerGas:r});if(s&&r&&s>r)throw new j_({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Jce extends re{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class sO extends re{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class ele extends re{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ti(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class MF extends re{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const LF={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function UF(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Qo(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Qo(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?LF[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=tle(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function tle(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function jF(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:UF(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Ra(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?De(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new MF({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||jF)(c)}async function iO(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function nle(t,e){return BF(t,e)}async function BF(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await He(t,Ra,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ni(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):He(t,Ra,"getBlock")({}),He(t,iO,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new sO;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function rle(t,e){return uN(t,e)}async function uN(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,m;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((m=r==null?void 0:r.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(o<1)throw new Jce;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await He(t,Ra,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new sO;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await BF(t,{block:u,chain:r,request:s}),m=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??m+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await He(t,iO,"getGasPrice")({}))}}async function oO(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?De(r):n]},{dedupe:!!r});return Qo(s)}function FF(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>oo(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>mr(i))}function WF(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>oo(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>oo(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>mr(o))}function sle(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function ile(t,e,n){return t&e^~t&n}function ole(t,e,n){return t&e^t&n^e&n}class ale extends GP{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=BS(this.buffer)}update(e){xp(this),e=a0(e),Zo(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=BS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){xp(this),aF(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Np(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;sle(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=BS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const ol=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cle=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),al=new Uint32Array(64);class lle extends ale{constructor(e=32){super(64,e,8,!1),this.A=ol[0]|0,this.B=ol[1]|0,this.C=ol[2]|0,this.D=ol[3]|0,this.E=ol[4]|0,this.F=ol[5]|0,this.G=ol[6]|0,this.H=ol[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)al[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=al[d-15],f=al[d-2],p=ia(h,7)^ia(h,18)^h>>>3,m=ia(f,17)^ia(f,19)^f>>>10;al[d]=m+al[d-7]+p+al[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ia(a,6)^ia(a,11)^ia(a,25),f=u+h+ile(a,c,l)+cle[d]+al[d]|0,m=(ia(r,2)^ia(r,13)^ia(r,22))+ole(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Np(al)}destroy(){this.set(0,0,0,0,0,0,0,0),Np(this.buffer)}}const zF=lF(()=>new lle),ule=zF;function dle(t,e){return ule(ja(t,{strict:!1})?am(t):t)}function hle(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=dle(e);return s.set([n],0),r==="bytes"?s:mr(s)}function fle(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(hle({commitment:i,to:r,version:n}));return s}const $3=6,HF=32,aO=4096,qF=HF*aO,M3=qF*$3-1-1*aO*$3;class ple extends re{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class mle extends re{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function gle(t){const e=typeof t.data=="string"?oo(t.data):t.data,n=qn(e);if(!n)throw new mle;if(n>M3)throw new ple({maxSize:M3,size:n});const r=[];let s=!0,i=0;for(;s;){const o=JP(new Uint8Array(qF));let a=0;for(;a<aO;){const c=e.slice(i,i+(HF-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>mr(o.bytes))}function yle(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??gle({data:e}),i=t.commitments??FF({blobs:s,kzg:n,to:r}),o=t.proofs??WF({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function wle(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new Rce({transaction:t})}async function um(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Qo(e)}const VF=["blobVersionedHashes","chainId","fees","gas","nonce","type"],L3=new Map;async function p0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=VF,type:u}=e,d=n&&Vn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await He(t,Ra,"getBlock")({blockTag:"latest"}),f)}let m;async function w(){return m||(s?s.id:typeof e.chainId<"u"?e.chainId:(m=await He(t,um,"getChainId")({}),m))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await He(t,oO,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=FF({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=fle({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=WF({blobs:r,commitments:y,kzg:o}),_=yle({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=_}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=wle(h)}catch{let y=L3.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",L3.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:_}=await uN(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<_)throw new ele({maxPriorityFeePerGas:_});h.maxPriorityFeePerGas=_,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new sO;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await uN(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await He(t,SC,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Eh(h),delete h.parameters,h}async function cO(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?De(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function SC(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Vn(n):void 0;try{let U=function(T){const{block:$,request:R,rpcStateOverride:D}=T;return t.request({method:"eth_estimateGas",params:D?[R,$??"latest",D]:$?[R,$]:[R]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:_,value:E,stateOverride:C,...I}=await p0(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),x=(typeof d=="bigint"?De(d):void 0)||h,S=rO(C),k=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await $F({authorization:c[0]}).catch(()=>{throw new re("`to` is required. Could not infer from `authorizationList`")})})();Eh(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,W=(P||lm)({...CC(I,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:_,to:k,value:E});let N=BigInt(await U({block:x,request:W,rpcStateOverride:S}));if(c){const T=await cO(t,{address:W.from}),$=await Promise.all(c.map(async R=>{const{address:D}=R,j=await U({block:x,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:D,value:De(T)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));N+=$.reduce((R,D)=>R+D,0n)}return N}catch(a){throw Kce(a,{...e,account:r,chain:t.chain})}}async function ble(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=ho({abi:n,args:s,functionName:i});try{return await He(t,SC,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Vn(a.account):void 0;throw Xd(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}function AC(t,e){if(!ao(t,{strict:!1}))throw new Su({address:t});if(!ao(e,{strict:!1}))throw new Su({address:e});return t.toLowerCase()===e.toLowerCase()}const U3="/docs/contract/decodeEventLog";function lO(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Xoe({docsPath:U3});const c=e.find(m=>m.type==="event"&&o===wC(Yo(m)));if(!(c&&"name"in c)||c.type!=="event")throw new JB(o,{docsPath:U3});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(m=>!("name"in m&&m.name)),h=d?[]:{},f=u.map((m,w)=>[m,w]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<f.length;m++){const[w,y]=f[m],b=a[m];if(!b)throw new yC({abiItem:c,param:w});h[d?y:w.name||y]=vle({param:w,value:b})}const p=u.filter(m=>!("indexed"in m&&m.indexed));if(p.length>0){if(n&&n!=="0x")try{const m=d0(p,n);if(m)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??m.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=m[w]}catch(m){if(i)throw m instanceof ZB||m instanceof IF?new Hy({abiItem:c,data:n,params:p,size:qn(n)}):m}else if(i)throw new Hy({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function vle({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(d0([t],e)||[])[0]}function uO(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===wC(u));if(!c)return null;const l=lO({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!_le({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof JB)return null;if(c instanceof Hy||c instanceof yC){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function _le(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?AC(o,a):i.type==="string"||i.type==="bytes"?Br(am(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Bc(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function dO(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(m=>u0({abi:[m],eventName:m.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?De(r):r,toBlock:typeof s=="bigint"?De(s):s}]});const f=h.map(p=>Bc(p));return u?uO({abi:u,args:a,logs:f,strict:l}):f}async function GF(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?vh({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return He(t,dO,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}const zS="/docs/contract/decodeFunctionResult";function Ch(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=vh({abi:e,args:n,name:r});if(!a)throw new Ap(r,{docsPath:zS});i=a}if(i.type!=="function")throw new Ap(void 0,{docsPath:zS});if(!i.outputs)throw new eF(i.name,{docsPath:zS});const o=d0(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hO=BigInt(0),dN=BigInt(1);function B_(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Ib(t){const e=t.toString(16);return e.length&1?"0"+e:e}function KF(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?hO:BigInt("0x"+t)}function IC(t){return KF(Vy(t))}function YF(t){return Zo(t),KF(Vy(Uint8Array.from(t).reverse()))}function fO(t,e){return VP(t.toString(16).padStart(e*2,"0"))}function QF(t,e){return fO(t,e).reverse()}function Vi(t,e,n){let r;if(typeof e=="string")try{r=VP(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(qP(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const HS=t=>typeof t=="bigint"&&hO<=t;function Ele(t,e,n){return HS(t)&&HS(e)&&HS(n)&&e<=t&&t<n}function Cle(t,e,n,r){if(!Ele(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Sle(t){let e;for(e=0;t>hO;t>>=dN,e+=1);return e}const xC=t=>(dN<<BigInt(t))-dN;function Ale(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const m=i.slice();p.push(m),f+=i.length}return fd(...p)};return(f,p)=>{c(),u(f);let m;for(;!(m=p(d()));)u();return c(),m}}function pO(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function j3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Ile="0.1.1";function xle(){return Ile}let Jn=class hN extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof hN){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof hN&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${xle()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return ZF(this,e)}};function ZF(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?ZF(t.cause,e):e?null:t}const Nle="#__bigint";function Tle(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Nle:s,n)}function Rle(t,e){if(F3(t)>e)throw new Ble({givenSize:F3(t),maxSize:e})}const nc={zero:48,nine:57,A:65,F:70,a:97,f:102};function B3(t){if(t>=nc.zero&&t<=nc.nine)return t-nc.zero;if(t>=nc.A&&t<=nc.F)return t-(nc.A-10);if(t>=nc.a&&t<=nc.f)return t-(nc.a-10)}function Ple(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Fle({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function mO(t,e){if(lo(t)>e)throw new Vle({givenSize:lo(t),maxSize:e})}function Ole(t,e){if(typeof e=="number"&&e>0&&e>lo(t)-1)throw new n9({offset:e,position:"start",size:lo(t)})}function kle(t,e,n){if(typeof e=="number"&&typeof n=="number"&&lo(t)!==n-e)throw new n9({offset:n,position:"end",size:lo(t)})}function XF(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Gle({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Dle=new TextEncoder;function $le(t){return t instanceof Uint8Array?t:typeof t=="string"?Lle(t):Mle(t)}function Mle(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Lle(t,e={}){const{size:n}=e;let r=t;n&&(mO(t,n),r=eh(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=B3(s.charCodeAt(c++)),u=B3(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Jn(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Ule(t,e={}){const{size:n}=e,r=Dle.encode(t);return typeof n=="number"?(Rle(r,n),jle(r,n)):r}function jle(t,e){return Ple(t,{dir:"right",size:e})}function F3(t){return t.length}let Ble=class extends Jn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Fle=class extends Jn{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Wle=new TextEncoder,zle=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hle(t,e={}){const{strict:n=!1}=e;if(!t)throw new W3(t);if(typeof t!="string")throw new W3(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new z3(t);if(!t.startsWith("0x"))throw new z3(t)}function Fa(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function JF(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(mO(n,e.size),Jd(n,e.size)):n}function e9(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=zle[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(mO(r,e.size),eh(r,e.size)):r}function gs(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new t9({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Jd(c,r):c}function gO(t,e={}){return e9(Wle.encode(t),e)}function Jd(t,e){return XF(t,{dir:"left",size:e})}function eh(t,e){return XF(t,{dir:"right",size:e})}function yO(t,e,n,r={}){const{strict:s}=r;Ole(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&kle(i,e,n),i}function lo(t){return Math.ceil((t.length-2)/2)}function qle(t,e={}){const{strict:n=!1}=e;try{return Hle(t,{strict:n}),!0}catch{return!1}}let t9=class extends Jn{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class W3 extends Jn{constructor(e){super(`Value \`${typeof e=="object"?Tle(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class z3 extends Jn{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Vle=class extends Jn{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class n9 extends Jn{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Gle=class extends Jn{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Kle(t){return{address:t.address,amount:gs(t.amount),index:gs(t.index),validatorIndex:gs(t.validatorIndex)}}function r9(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:gs(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:gs(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:gs(t.gasLimit)},...typeof t.number=="bigint"&&{number:gs(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:gs(t.prevRandao)},...typeof t.time=="bigint"&&{time:gs(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Kle)}}}const fN=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],pN=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],s9=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],i9=[...s9,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Yle=[...s9,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],H3=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],q3=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],V3=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Qle="0x82ad56cb",o9="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Zle="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Xle="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class mN extends re{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Jle extends re{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class eue extends re{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class a9 extends re{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const qS="/docs/contract/encodeDeployData";function NC(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Goe({docsPath:qS});if(!("inputs"in s))throw new m3({docsPath:qS});if(!s.inputs||s.inputs.length===0)throw new m3({docsPath:qS});const i=Du(s.inputs,n);return cm([r,i])}function dm({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new mN({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new mN({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function c9(t,{docsPath:e,...n}){const r=(()=>{const s=EC(t,n);return s instanceof f0?t:s})();return new RF(r,{docsPath:e,...n})}function wO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const VS=new Map;function l9({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>VS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>VS.get(e)||[],l=u=>VS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=wO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function m0(t,e){var W,U,N,T;const{account:n=t.account,authorizationList:r,batch:s=!!((W=t.batch)!=null&&W.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:_,to:E,value:C,stateOverride:I,...A}=e,x=n?Vn(n):void 0;if(u&&(h||f))throw new re("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new re("Cannot provide both `code` & `to` as parameters.");const S=u&&d,k=h&&f&&E&&d,P=S||k,M=S?rue({code:u,data:d}):k?sue({data:d,factory:h,factoryData:f,to:E}):d;try{Eh(e);const R=(typeof i=="bigint"?De(i):void 0)||o,D=l?r9(l):void 0,j=rO(I),z=(T=(N=(U=t.chain)==null?void 0:U.formatters)==null?void 0:N.transactionRequest)==null?void 0:T.format,te=(z||lm)({...CC(A,{format:z}),from:x==null?void 0:x.address,accessList:a,authorizationList:r,blobs:c,data:M,gas:p,gasPrice:m,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:_,to:P?void 0:E,value:C});if(s&&tue({request:te})&&!j&&!D)try{return await nue(t,{...te,blockNumber:i,blockTag:o})}catch(ie){if(!(ie instanceof a9)&&!(ie instanceof mN))throw ie}const Z=(()=>{const ie=[te,R];return j&&D?[...ie,j,D]:j?[...ie,j]:D?[...ie,{},D]:ie})(),X=await t.request({method:"eth_call",params:Z});return X==="0x"?{data:void 0}:{data:X}}catch($){const R=iue($),{offchainLookup:D,offchainLookupSignature:j}=await ts(async()=>{const{offchainLookup:z,offchainLookupSignature:Q}=await import("./ccip-DO5mx64o.js");return{offchainLookup:z,offchainLookupSignature:Q}},[]);if(t.ccipRead!==!1&&(R==null?void 0:R.slice(0,10))===j&&E)return{data:await D(t,{data:R,to:E})};throw P&&(R==null?void 0:R.slice(0,10))==="0x101bb98d"?new $ce({factory:h}):c9($,{...e,account:x,chain:t.chain})}}function tue({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Qle)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function nue(t,e){var m;const{batchSize:n=1024,wait:r=0}=typeof((m=t.batch)==null?void 0:m.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new a9;l=dm({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?De(s):void 0)||i,{schedule:h}=l9({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:_})=>b+(_.length-2),0)>n*2},fn:async w=>{const y=w.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),b=ho({abi:fN,args:[y],functionName:"aggregate3"}),_=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return Ch({abi:fN,args:[y],functionName:"aggregate3",data:_||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new _C({data:f});return f==="0x"?{data:void 0}:{data:f}}function rue(t){const{code:e,data:n}=t;return NC({abi:KB(["constructor(bytes, bytes)"]),bytecode:o9,args:[e,n]})}function sue(t){const{data:e,factory:n,factoryData:r,to:s}=t;return NC({abi:KB(["constructor(address, bytes, address, bytes)"]),bytecode:Zle,args:[s,e,n,r]})}function iue(t){var n;if(!(t instanceof re))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Wa(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=ho({abi:n,args:s,functionName:i});try{const{data:c}=await He(t,m0,"call")({...o,data:a,to:r});return Ch({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Xd(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function oue(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Vn(a.account):t.account,l=ho({abi:n,args:s,functionName:o});try{const{data:u}=await He(t,m0,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Ch({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Xd(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}const GS=new Map,G3=new Map;let aue=0;function Fc(t,e,n){const r=++aue,s=()=>GS.get(t)||[],i=()=>{const u=s();GS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=G3.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(GS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const m of h)(p=(f=m.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&G3.set(t,l),o}async function F_(t){return new Promise(e=>setTimeout(e,t))}function hm(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await F_(c);const l=async()=>{s&&(await t({unpoll:i}),await F_(r),l())};l()})(),i}const cue=new Map,lue=new Map;function uue(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,cue),r=e(t,lue);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function due(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=uue(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const hue=t=>`blockNumber.${t}`;async function g0(t,{cacheTime:e=t.cacheTime}={}){const n=await due(()=>t.request({method:"eth_blockNumber"}),{cacheKey:hue(t.uid),cacheTime:e});return BigInt(n)}async function TC(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Bc(i));return!("abi"in e)||!e.abi?s:uO({abi:e.abi,logs:s,strict:n})}async function RC(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function fue(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=fr(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return Fc(y,{onLogs:l,onError:c},b=>{let _;a!==void 0&&(_=a-1n);let E,C=!1;const I=hm(async()=>{var A;if(!C){try{E=await He(t,CF,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let x;if(E)x=await He(t,TC,"getFilterChanges")({filter:E});else{const S=await He(t,g0,"getBlockNumber")({});_&&_<S?x=await He(t,GF,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:_+1n,toBlock:S,strict:w}):x=[],_=S}if(x.length===0)return;if(i)b.onLogs(x);else for(const S of x)b.onLogs([S])}catch(x){E&&x instanceof Zd&&(C=!1),(A=b.onError)==null||A.call(b,x)}},{emitOnBegin:!0,interval:d});return async()=>{E&&await He(t,RC,"uninstallFilter")({filter:E}),I()}})})():(()=>{const w=h??!1,y=fr(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,_=()=>b=!1;return Fc(y,{onLogs:l,onError:c},E=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const x=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return x?x.value:t.transport}return t.transport})(),I=o?u0({abi:n,eventName:o,args:s}):[],{unsubscribe:A}=await C.subscribe({params:["logs",{address:r,topics:I}],onData(x){var k;if(!b)return;const S=x.result;try{const{eventName:P,args:M}=lO({abi:n,data:S.data,topics:S.topics,strict:h}),W=Bc(S,{args:M,eventName:P});E.onLogs([W])}catch(P){let M,W;if(P instanceof Hy||P instanceof yC){if(h)return;M=P.abiItem.name,W=(k=P.abiItem.inputs)==null?void 0:k.some(N=>!("name"in N&&N.name))}const U=Bc(S,{args:W?[]:{},eventName:M});E.onLogs([U])}},onError(x){var S;(S=E.onError)==null||S.call(E,x)}});_=A,b||_()}catch(C){c==null||c(C)}})(),()=>_()))})()}class Sh extends re{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Ev extends re{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function u9({chain:t,currentChainId:e}){if(!t)throw new eue;if(e!==t.id)throw new Jle({chain:t,currentChainId:e})}function d9(t,{docsPath:e,...n}){const r=(()=>{const s=EC(t,n);return s instanceof f0?t:s})();return new Pce(r,{docsPath:e,...n})}async function bO(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const KS=new bC(128);async function y0(t,e){var b,_,E,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:m,...w}=e;if(typeof n>"u")throw new Sh({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Vn(n):null;try{Eh(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await $F({authorization:i[0]}).catch(()=>{throw new re("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let A;r!==null&&(A=await He(t,um,"getChainId")({}),u9({currentChainId:A,chain:r}));const x=(E=(_=(b=t.chain)==null?void 0:b.formatters)==null?void 0:_.transactionRequest)==null?void 0:E.format,k=(x||lm)({...CC(w,{format:x}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:m}),P=KS.get(t.uid),M=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:M,params:[k]},{retryCount:0})}catch(W){if(P===!1)throw W;const U=W;if(U.name==="InvalidInputRpcError"||U.name==="InvalidParamsRpcError"||U.name==="MethodNotFoundRpcError"||U.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(N=>(KS.set(t.uid,!0),N)).catch(N=>{const T=N;throw T.name==="MethodNotFoundRpcError"||T.name==="MethodNotSupportedRpcError"?(KS.set(t.uid,!1),U):T});throw U}}if((y==null?void 0:y.type)==="local"){const A=await He(t,p0,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...VF,"sidecars"],type:p,value:m,...w,to:I}),x=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await y.signTransaction(A,{serializer:x});return await He(t,bO,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new Ev({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ev({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof Ev?I:d9(I,{...e,account:y,chain:e.chain||void 0})}}async function h9(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Sh({docsPath:"/docs/contract/writeContract"});const l=r?Vn(r):null,u=ho({abi:n,args:i,functionName:a});try{return await He(t,y0,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Xd(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}const f9={"0x0":"reverted","0x1":"success"};function pue(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Bc(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Qo(t.transactionIndex):null,status:t.status?f9[t.status]:null,type:t.type?LF[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const p9="0x5792579257925792579257925792579257925792579257925792579257925792",m9=De(0,{size:32});async function mue(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Vn(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?ho({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?co([p,f.dataSuffix]):p,to:f.to,value:f.value?De(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:De(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Op(new re(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new kp(new re(y,{details:y}))}const p=[];for(const y of d){const b=y0(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Ni(y.value):void 0});p.push(b),o>0&&await new Promise(_=>setTimeout(_,o))}const m=await Promise.allSettled(p);if(m.every(y=>y.status==="rejected"))throw m[0].reason;const w=m.map(y=>y.status==="fulfilled"?y.value:m9);return{id:co([...w,De(s.id,{size:32}),p9])}}throw d9(h,{...e,account:u,chain:e.chain})}}async function g9(t,e){async function n(u){if(u.endsWith(p9.slice(2))){const h=$a(L_(u,-64,-32)),f=L_(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>m9.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),m=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Qo(h),receipts:p.filter(Boolean),status:m,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Qo(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Ni(u.blockNumber),gasUsed:Ni(u.gasUsed),status:f9[u.status]})))??[],statusCode:l,status:c,version:o}}async function gue(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=fr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=wO();let u;const d=Fc(o,{resolve:c,reject:l},h=>{const f=hm(async()=>{const p=m=>{clearTimeout(u),f(),m(),d()};try{const m=await g9(t,{id:n});if(!s(m))return;p(()=>h.resolve(m))}catch(m){p(()=>h.reject(m))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new yue({id:n}))},i):void 0,await a}class yue extends re{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const gN=256;let xb=gN,Nb;function y9(t=11){if(!Nb||xb+t>gN*2){Nb="",xb=0;for(let e=0;e<gN;e++)Nb+=(256+Math.random()*256|0).toString(16).substring(1)}return Nb.substring(xb,xb+++t)}function w9(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Vn(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),m={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:m,type:o,uid:y9()};function y(b){return _=>{const E=_(b);for(const I in w)delete E[I];const C={...b,...E};return Object.assign(C,{extend:y(C)})}}return Object.assign(w,{extend:y(w)})}const Tb=new bC(8192);function wue(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Tb.get(n))return Tb.get(n);const r=t().finally(()=>Tb.delete(n));return Tb.set(n,r),r}function W_(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await F_(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function bue(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new pd(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new pd(new Error("method not supported"),{method:l});const u=s?Ip(`${c}.${fr(n)}`):void 0;return wue(()=>W_(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Ky.code:throw new Ky(f);case Yy.code:throw new Yy(f);case Qy.code:throw new Qy(f,{method:n.method});case Zy.code:throw new Zy(f);case Qd.code:throw new Qd(f);case Zd.code:throw new Zd(f);case Xy.code:throw new Xy(f);case lu.code:throw new lu(f);case Rp.code:throw new Rp(f);case pd.code:throw new pd(f,{method:n.method});case Pp.code:throw new Pp(f);case Jy.code:throw new Jy(f);case or.code:throw new or(f);case ew.code:throw new ew(f);case tw.code:throw new tw(f);case nw.code:throw new nw(f);case rw.code:throw new rw(f);case Ba.code:throw new Ba(f);case Op.code:throw new Op(f);case sw.code:throw new sw(f);case iw.code:throw new iw(f);case ow.code:throw new ow(f);case aw.code:throw new aw(f);case cw.code:throw new cw(f);case kp.code:throw new kp(f);case 5e3:throw new or(f);default:throw h instanceof re?h:new Lce(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Yg){const m=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(m!=null&&m.match(/\d/))return Number.parseInt(m)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>vue(h)}),{enabled:s,id:u})}}function vue(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Pp.code||t.code===Qd.code:t instanceof Yg&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function vO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=y9();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:bue(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function _ue(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>vO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function z_(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Eue,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=vO({key:n,name:r,async request({method:m,params:w}){let y;const b=async(_=0)=>{const E=h[_]({...d,chain:c,retryCount:0,timeout:u});try{const C=await E.request({method:m,params:w});return f({method:m,params:w,response:C,transport:E,status:"success"}),C}catch(C){if(f({error:C,method:m,params:w,transport:E,status:"error"}),i(C)||_===h.length-1||(y??(y=h.slice(_+1).some(I=>{const{include:A,exclude:x}=I({chain:c}).config.methods||{};return A?A.includes(m):x?!x.includes(m):!0})),!y))throw C;return b(_+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:m=>f=m,transports:h.map(m=>m({chain:c,retryCount:0}))});if(s){const m=typeof s=="object"?s:{};Cue({chain:c,interval:m.interval??l,onTransports:w=>h=w,ping:m.ping,sampleCount:m.sampleCount,timeout:m.timeout,transports:h,weights:m.weights})}return p}}function Eue(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Rp.code||t.code===or.code||md.nodeMessage.test(t.message)||t.code===5e3))}function Cue({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async m=>{const w=m({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,_;try{await(r?r({transport:w}):w.request({method:"net_listening"})),_=1}catch{_=0}finally{b=Date.now()}return{latency:b-y,success:_}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(m=>Math.max(...m.map(({latency:w})=>w)))),p=o.map((m,w)=>{const y=u.map(I=>I[w].latency),_=1-y.reduce((I,A)=>I+A,0)/y.length/f,E=u.map(I=>I[w].success),C=E.reduce((I,A)=>I+A,0)/E.length;return C===0?[0,w]:[l*_+c*C,w]}).sort((m,w)=>w[0]-m[0]);n(p.map(([,m])=>o[m])),await F_(e),d()};d()}class Sue extends re{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function b9(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function Aue(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const K3=Aue();function Iue(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await b9(async({signal:p})=>{const m={...a,body:Array.isArray(r)?fr(r.map(_=>({jsonrpc:"2.0",id:_.id??K3.take(),..._}))):fr({jsonrpc:"2.0",id:r.id??K3.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,m),y=await(s==null?void 0:s(w,m))??{...m,url:t};return await fetch(y.url??t,y)},{errorInstance:new P3({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Yg({body:r,details:fr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Yg||h instanceof P3?h:new Yg({body:r,cause:h,url:t})}}}}function eo(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:m=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new Sue;const _=Iue(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return vO({key:s,methods:i,name:o,async request({method:E,params:C}){const I={method:E,params:C},{schedule:A}=l9({id:b,wait:m,shouldSplitBatch(P){return P.length>p},fn:P=>_.request({body:P}),sort:(P,M)=>P.id-M.id}),x=async P=>n?A(P):[await _.request({body:P})],[{error:S,result:k}]=await x(I);if(u)return{error:S,result:k};if(S)throw new nO({body:I,error:S,url:b});return k},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function _O(t,e){var r,s,i,o,a,c;if(!(t instanceof re))return!1;const n=t.walk(l=>l instanceof tN);return n instanceof tN?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===SF[50]):!1}function xue(t){const{abi:e,data:n}=t,r=Tp(n,0,4),s=e.find(i=>i.type==="function"&&r===l0(Yo(i)));if(!s)throw new Joe(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?d0(s.inputs,Tp(n,4)):void 0}}const YS="/docs/contract/encodeErrorResult";function Y3(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=vh({abi:e,args:r,name:n});if(!c)throw new g3(n,{docsPath:YS});s=c}if(s.type!=="error")throw new g3(void 0,{docsPath:YS});const i=Yo(s),o=l0(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Zoe(s.name,{docsPath:YS});a=Du(s.inputs,r)}return cm([o,a])}const QS="/docs/contract/encodeFunctionResult";function Nue(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=vh({abi:e,name:n});if(!o)throw new Ap(n,{docsPath:QS});s=o}if(s.type!=="function")throw new Ap(void 0,{docsPath:QS});if(!s.outputs)throw new eF(s.name,{docsPath:QS});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new tF(r)})();return Du(s.outputs,i)}const EO="x-batch-gateway:true";async function Tue(t){const{data:e,ccipRequest:n}=t,{args:[r]}=xue({abi:pN,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(EO)?await Tue({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Rue(c)}})),Nue({abi:pN,functionName:"query",result:[s,i]})}function Rue(t){return t.name==="HttpRequestError"&&t.status?Y3({abi:pN,errorName:"HttpError",args:[t.status,t.shortMessage]}):Y3({abi:[AF],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function v9(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return ja(e)?e:null}function Cv(t){let e=new Uint8Array(32).fill(0);if(!t)return mr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=v9(n[r]),i=s?am(s):Br(kd(n[r]),"bytes");e=Br(co([e,i]),"bytes")}return mr(e)}function Pue(t){return`[${t.slice(2)}]`}function Oue(t){const e=new Uint8Array(32).fill(0);return t?v9(t)||Br(kd(t)):mr(e)}function PC(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(kd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=kd(s[i]);o.byteLength>255&&(o=kd(Pue(Oue(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function kue(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return dm({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=ho({abi:q3,functionName:"addr",...s!=null?{args:[Cv(i),BigInt(s)]}:{args:[Cv(i)]}}),h={address:l,abi:i9,functionName:"resolve",args:[io(PC(i)),d,o??[EO]],blockNumber:n,blockTag:r},p=await He(t,Wa,"readContract")(h);if(p[0]==="0x")return null;const m=Ch({abi:q3,args:s!=null?[Cv(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return m==="0x"||$a(m)==="0x00"?null:m}catch(d){if(a)throw d;if(_O(d,"resolve"))return null;throw d}}class Due extends re{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Km extends re{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class CO extends re{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class $ue extends re{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Mue=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Lue=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Uue=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,jue=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Bue(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function Q3(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function _9({uri:t,gatewayUrls:e}){const n=Uue.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=Q3(e==null?void 0:e.ipfs,"https://ipfs.io"),s=Q3(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Mue),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Lue.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(jue,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new CO({uri:t})}function E9(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Due({data:t});return t.image||t.image_url||t.image_data}async function Fue({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await SO({gatewayUrls:t,uri:E9(n)})}catch{throw new CO({uri:e})}}async function SO({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=_9({uri:e,gatewayUrls:t});if(r||await Bue(n))return n;throw new CO({uri:e})}function Wue(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Km({reason:"Only EIP-155 supported"});if(!o)throw new Km({reason:"Chain ID not found"});if(!c)throw new Km({reason:"Contract address not found"});if(!s)throw new Km({reason:"Token ID not found"});if(!a)throw new Km({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function zue(t,{nft:e}){if(e.namespace==="erc721")return Wa(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Wa(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new $ue({namespace:e.namespace})}async function Hue(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?que(t,{gatewayUrls:e,record:n}):SO({uri:n,gatewayUrls:e})}async function que(t,{gatewayUrls:e,record:n}){const r=Wue(n),s=await zue(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=_9({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return SO({uri:E9(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Fue({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function C9(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return dm({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:i9,functionName:"resolve",args:[io(PC(i)),ho({abi:H3,functionName:"text",args:[Cv(i),s]}),o??[EO]],blockNumber:n,blockTag:r},f=await He(t,Wa,"readContract")(d);if(f[0]==="0x")return null;const p=Ch({abi:H3,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(_O(d,"resolve"))return null;throw d}}async function Vue(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await He(t,C9,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await Hue(t,{record:c,gatewayUrls:r})}catch{return null}}async function S9(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=dm({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Yle,functionName:"reverse",args:[io(PC(c))],blockNumber:n,blockTag:r},u=He(t,Wa,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(_O(l,"reverse"))return null;throw l}}async function Gue(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return dm({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await He(t,Wa,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[io(PC(s))],blockNumber:n,blockTag:r});return c}async function A9(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,m=n?Vn(n):void 0;try{Eh(e);const E=(typeof r=="bigint"?De(r):void 0)||s,C=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,A=(C||lm)({...CC(p,{format:C}),from:m==null?void 0:m.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),x=await t.request({method:"eth_createAccessList",params:[A,E]});return{accessList:x.accessList,gasUsed:BigInt(x.gasUsed)}}catch(_){throw c9(_,{...e,account:m,chain:t.chain})}}async function Kue(t){const e=vC(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function I9(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=vC(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>u0({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?De(i):i,toBlock:typeof a=="bigint"?De(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function x9(t){const e=vC(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Yue(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function Que(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?De(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Qo(i)}async function Z3(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?De(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class Zue extends re{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Xue(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await He(t,Wa,"readContract")({abi:Jue,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Zue({address:n}):o}}const Jue=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function ede(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function tde(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?De(n):void 0,o=await t.request({method:"eth_feeHistory",params:[De(e),i||r,s]},{dedupe:!!i});return ede(o)}async function nde(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Bc(i));return e.abi?uO({abi:e.abi,logs:s,strict:n}):s}function N9(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class rde extends re{constructor({domain:e}){super(`Invalid domain "${fr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class sde extends re{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class ide extends re{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function ode(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:D9({domain:e}),...t.types};k9({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(ade({domain:e,types:s})),r!=="EIP712Domain"&&i.push(T9({data:n,primaryType:r,types:s})),Br(co(i))}function ade({domain:t,types:e}){return T9({data:t,primaryType:"EIP712Domain",types:e})}function T9({data:t,primaryType:e,types:n}){const r=R9({data:t,primaryType:e,types:n});return Br(r)}function R9({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[cde({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=O9({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Du(r,s)}function cde({primaryType:t,types:e}){const n=io(lde({primaryType:t,types:e}));return Br(n)}function lde({primaryType:t,types:e}){let n="";const r=P9({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function P9({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])P9({primaryType:i.type,types:e},n);return n}function O9({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Br(R9({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Br(r)];if(n==="string")return[{type:"bytes32"},Br(io(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>O9({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Br(Du(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function ude(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return fr({domain:o,message:a,primaryType:r,types:s})}function k9(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(_F);if(h&&(typeof d=="number"||typeof d=="bigint")){const[m,w,y]=h;De(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!ao(d))throw new Su({address:d});const f=u.match(Jae);if(f){const[m,w]=f;if(w&&qn(d)!==Number.parseInt(w))throw new tae({expectedSize:Number.parseInt(w),givenSize:qn(d)})}const p=s[u];p&&(dde(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new rde({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new sde({primaryType:r,types:s})}function D9({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function dde(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new ide({type:t})}const hde=`Ethereum Signed Message:
`;function fde(t){const e=typeof t=="string"?Ip(t):typeof t.raw=="string"?t.raw:mr(t.raw),n=Ip(`${hde}${qn(e)}`);return co([n,e])}function $9(t,e){return Br(fde(t),e)}const M9="0x6492649264926492649264926492649264926492649264926492649264926492";function pde(t){return L_(t,-32)===M9}function mde(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=cm([Du([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),M9]);return s==="hex"?i:oo(i)}class gde extends re{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function yde(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new gde({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function wde(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function bde(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Qo(t.nonce):void 0,storageProof:t.storageProof?wde(t.storageProof):void 0}}async function vde(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?De(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return bde(a)}async function _de(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?De(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function OC(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?De(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,De(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,De(i)]},{dedupe:!!a}),!c)throw new NF({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||UF)(c)}async function Ede(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([He(t,g0,"getBlockNumber")({}),e?He(t,OC,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function yN(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new TF({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||pue)(n)}async function L9(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=dm({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:_,address:E,args:C,functionName:I}=l[b];try{const A=ho({abi:_,args:C,functionName:I});p+=(A.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(A.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:A,target:E}]}catch(A){const x=Xd(A,{abi:_,address:E,args:C,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw x;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:E}]}}const m=await Promise.allSettled(h.map(b=>He(t,Wa,"readContract")({abi:fN,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<m.length;b++){const _=m[b];if(_.status==="rejected"){if(!r)throw _.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:_.reason,result:void 0});continue}const E=_.value;for(let C=0;C<E.length;C++){const{returnData:I,success:A}=E[C],{callData:x}=h[b][C],{abi:S,address:k,functionName:P,args:M}=l[w.length];try{if(x==="0x")throw new o0;if(!A)throw new _C({data:I});const W=Ch({abi:S,args:M,data:I,functionName:P});w.push(r?{result:W,status:"success"}:W)}catch(W){const U=Xd(W,{abi:S,address:k,args:M,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw U;w.push({error:U,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new re("multicall results mismatch");return w}async function wN(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?r9(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?Vn(y.account):void 0,_=y.abi?ho(y):y.data,E={...y,data:y.dataSuffix?co([_||"0x",y.dataSuffix]):_,from:y.from??(b==null?void 0:b.address)};return Eh(E),lm(E)}),m=h.stateOverrides?rO(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:m})}const u=(typeof n=="bigint"?De(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...jF(h),calls:h.calls.map((p,m)=>{var k,P;const{abi:w,args:y,functionName:b,to:_}=s[f].calls[m],E=((k=p.error)==null?void 0:k.data)??p.returnData,C=BigInt(p.gasUsed),I=(P=p.logs)==null?void 0:P.map(M=>Bc(M)),A=p.status==="0x1"?"success":"failure",x=w&&A==="success"&&E!=="0x"?Ch({abi:w,data:E,functionName:b}):null,S=(()=>{var W;if(A==="success")return;let M;if(((W=p.error)==null?void 0:W.data)==="0x"?M=new o0:p.error&&(M=new _C(p.error)),!!M)return Xd(M,{abi:w??[],address:_??"0x",args:y,functionName:b??"<unknown>"})})();return{data:E,gasUsed:C,logs:I,status:A,...A==="success"?{result:x}:{error:S}}})}))}catch(c){const l=c,u=EC(l,{});throw u instanceof f0?l:u}}function U9(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=YP($le(t));return n==="Bytes"?r:e9(r)}let Cde=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Sde={checksum:new Cde(8192)},ZS=Sde.checksum,Ade=/^0x[a-fA-F0-9]{40}$/;function kC(t,e={}){const{strict:n=!0}=e;if(!Ade.test(t))throw new X3({address:t,cause:new xde});if(n){if(t.toLowerCase()===t)return;if(Ide(t)!==t)throw new X3({address:t,cause:new Nde})}}function Ide(t){if(ZS.has(t))return ZS.get(t);kC(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=U9(Ule(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return ZS.set(t,s),s}function bN(t,e={}){const{strict:n=!0}=e??{};try{return kC(t,{strict:n}),!0}catch{return!1}}class X3 extends Jn{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class xde extends Jn{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Nde extends Jn{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function vN(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Jn("Unable to normalize signature.");return s}function _N(t,e){const n=typeof t,r=e.type;switch(r){case"address":return bN(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>_N(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>_N(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function j9(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return j9(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?bN(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?bN(n[r],{strict:!1}):!1)return o}}function B9(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?p3(t):t;return{...r,...n?{hash:kf(r)}:{}}}function Tde(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=qle(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?F9(l)===yO(e,0,4):l.type==="event"?kf(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new EN({name:e});if(o.length===1)return{...o[0],...s?{hash:kf(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:kf(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?_N(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=j9(l.inputs,a.inputs,r);if(d)throw new Pde({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new EN({name:e});return{...c,...s?{hash:kf(c)}:{}}}function F9(t){return yO(kf(t),0,4)}function Rde(t){const e=typeof t=="string"?t:M_(t);return vN(e)}function kf(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:U9(gO(Rde(t)))}class Pde extends Jn{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${vN(M_(e.abiItem))}\`, and`,`\`${n.type}\` in \`${vN(M_(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class EN extends Jn{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Ode=/^(.*)\[([0-9]*)\]$/,kde=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,W9=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Dde({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(AO({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function AO({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Wde(r.type);if(s){const[i,o]=s;return Mde(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Fde(n,{checksumAddress:t,parameter:r});if(r.type==="address")return $de(n,{checksum:t});if(r.type==="bool")return Ude(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=W9.exec(r.type)??[];return jde(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Lde(n,{type:r.type});if(r.type==="string")return Bde(n);throw new V9(r.type)}function IO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=lo(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(gs(e+s,{size:32})),r.push(a),s+=lo(a)):n.push(a)}return Fa(...n,...r)}function $de(t,e){const{checksum:n=!1}=e;return kC(t,{strict:n}),{dynamic:!1,encoded:Jd(t.toLowerCase())}}function Mde(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Hde(t);if(!i&&t.length!==r)throw new zde({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=AO({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=IO(a);if(i){const l=gs(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Fa(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Fa(...a.map(({encoded:c})=>c))}}function Lde(t,{type:e}){const[,n]=e.split("bytes"),r=lo(t);if(!n){let s=t;return r%32!==0&&(s=eh(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Fa(Jd(gs(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new H9({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:eh(t)}}function Ude(t){if(typeof t!="boolean")throw new Jn(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Jd(JF(t))}}function jde(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new t9({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:gs(t,{size:32,signed:e})}}function Bde(t){const e=gO(t),n=Math.ceil(lo(e)/32),r=[];for(let s=0;s<n;s++)r.push(eh(yO(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Fa(eh(gs(lo(e),{size:32})),...r)}}function Fde(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=AO({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?IO(i):Fa(...i.map(({encoded:o})=>o))}}function Wde(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function z9(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new q9({expectedLength:t.length,givenLength:e.length});const s=Dde({checksumAddress:r,parameters:t,values:e}),i=IO(s);return i.length===0?"0x":i}function CN(t,e){if(t.length!==e.length)throw new q9({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(CN.encode(s,i))}return Fa(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return kC(c),Jd(c.toLowerCase(),s?32:0)}if(n==="string")return gO(r);if(n==="bytes")return r;if(n==="bool")return Jd(JF(r),s?32:1);const i=n.match(W9);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return gs(r,{size:s?32:d,signed:l==="int"})}const o=n.match(kde);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new H9({expectedSize:Number.parseInt(l),value:r});return eh(r,s?32:0)}const a=n.match(Ode);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Fa(...u)}throw new V9(n)}t.encode=e})(CN||(CN={}));class zde extends Jn{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class H9 extends Jn{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${lo(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class q9 extends Jn{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Hde extends Jn{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class V9 extends Jn{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function qde(t,e){var s;const{bytecode:n,args:r}=e;return Fa(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?z9(t.inputs,r):"0x")}function Vde(t){return B9(t)}function Gde(t,...e){const{overloads:n}=t,r=n?Kde([t,...n],t.name,{args:e[0]}):t,s=Yde(r),i=e.length>0?z9(r.inputs,e[0]):void 0;return i?Fa(s,i):s}function zh(t,e={}){return B9(t,e)}function Kde(t,e,n){const r=Tde(t,e,n);if(r.type!=="function")throw new EN({name:e,type:"function"});return r}function Yde(t){return F9(t)}const Qde="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",oa="0x0000000000000000000000000000000000000000",Zde="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Xde(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Vn(e.account):void 0;if(o&&!l)throw new re("`account` is required when `traceAssetChanges` is true");const u=l?qde(Vde("constructor(bytes, bytes)"),{bytecode:o9,args:[Zde,Gde(zh("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async R=>{if(!R.data&&!R.abi)return;const{accessList:D}=await A9(t,{account:l.address,...R,data:R.abi?ho(R):R.data});return D.map(({address:j,storageKeys:z})=>z.length>0?j:null)})).then(R=>R.flat().filter(Boolean)):[],h=await wN(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((R,D)=>({abi:[zh("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:oa,nonce:D})),stateOverrides:[{address:oa,nonce:0}]}]:[],{calls:[...s,{}].map(R=>({...R,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((R,D)=>({abi:[zh("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:oa,nonce:D})),stateOverrides:[{address:oa,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[zh("function decimals() returns (uint256)")],functionName:"decimals",from:oa,nonce:D})),stateOverrides:[{address:oa,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[zh("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:oa,nonce:D})),stateOverrides:[{address:oa,nonce:0}]},{calls:d.map((R,D)=>({to:R,abi:[zh("function symbol() returns (string)")],functionName:"symbol",from:oa,nonce:D})),stateOverrides:[{address:oa,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,m,,w,y,b,_,E]=o?h:[],{calls:C,...I}=f,A=C.slice(0,-1)??[],x=(p==null?void 0:p.calls)??[],S=(m==null?void 0:m.calls)??[],k=[...x,...S].map(R=>R.status==="success"?Ni(R.data):null),P=(w==null?void 0:w.calls)??[],M=(y==null?void 0:y.calls)??[],W=[...P,...M].map(R=>R.status==="success"?Ni(R.data):null),U=((b==null?void 0:b.calls)??[]).map(R=>R.status==="success"?R.result:null),N=((E==null?void 0:E.calls)??[]).map(R=>R.status==="success"?R.result:null),T=((_==null?void 0:_.calls)??[]).map(R=>R.status==="success"?R.result:null),$=[];for(const[R,D]of W.entries()){const j=k[R];if(typeof D!="bigint"||typeof j!="bigint")continue;const z=U[R-1],Q=N[R-1],te=T[R-1],Z=R===0?{address:Qde,decimals:18,symbol:"ETH"}:{address:d[R-1],decimals:te||z?Number(z??1):void 0,symbol:Q??void 0};$.some(X=>X.token.address===Z.address)||$.push({token:Z,value:{pre:j,post:D,diff:D-j}})}return{assetChanges:$,block:I,results:A}}class G9 extends GP{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Eae(e);const r=a0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Np(i)}update(e){return xp(this),this.iHash.update(e),this}digestInto(e){xp(this),Zo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const K9=(t,e,n)=>new G9(t,e).update(n).digest();K9.create=(t,e)=>new G9(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qs=BigInt(0),vs=BigInt(1),gd=BigInt(2),Jde=BigInt(3),Y9=BigInt(4),Q9=BigInt(5),Z9=BigInt(8);function Yi(t,e){const n=t%e;return n>=Qs?n:e+n}function Li(t,e,n){let r=t;for(;e-- >Qs;)r*=r,r%=n;return r}function J3(t,e){if(t===Qs)throw new Error("invert: expected non-zero number");if(e<=Qs)throw new Error("invert: expected positive modulus, got "+e);let n=Yi(t,e),r=e,s=Qs,i=vs;for(;n!==Qs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==vs)throw new Error("invert: does not exist");return Yi(s,e)}function X9(t,e){const n=(t.ORDER+vs)/Y9,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function ehe(t,e){const n=(t.ORDER-Q9)/Z9,r=t.mul(e,gd),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,gd),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function the(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-vs,n=0;for(;e%gd===Qs;)e/=gd,n++;let r=gd;const s=DC(t);for(;e$(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return X9;let i=s.pow(r,e);const o=(e+vs)/gd;return function(c,l){if(c.is0(l))return l;if(e$(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,m=c.sqr(h);for(;!c.eql(m,c.ONE);)if(p++,m=c.sqr(m),p===u)throw new Error("Cannot find square root");const w=vs<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function nhe(t){return t%Y9===Jde?X9:t%Z9===Q9?ehe:the(t)}const rhe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function she(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=rhe.reduce((r,s)=>(r[s]="function",r),e);return pO(t,n),t}function ihe(t,e,n){if(n<Qs)throw new Error("invalid exponent, negatives unsupported");if(n===Qs)return t.ONE;if(n===vs)return e;let r=t.ONE,s=e;for(;n>Qs;)n&vs&&(r=t.mul(r,s)),s=t.sqr(s),n>>=vs;return r}function J9(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function e$(t,e){const n=(t.ORDER-vs)/gd,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function ohe(t,e){e!==void 0&&qy(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function DC(t,e,n=!1,r={}){if(t<=Qs)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=ohe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:xC(o),ZERO:Qs,ONE:vs,create:u=>Yi(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Qs<=u&&u<t},is0:u=>u===Qs,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&vs)===vs,neg:u=>Yi(-u,t),eql:(u,d)=>u===d,sqr:u=>Yi(u*u,t),add:(u,d)=>Yi(u+d,t),sub:(u,d)=>Yi(u-d,t),mul:(u,d)=>Yi(u*d,t),pow:(u,d)=>ihe(l,u,d),div:(u,d)=>Yi(u*J3(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>J3(u,t),sqrt:i||(u=>(c||(c=nhe(t)),c(l,u))),toBytes:u=>n?QF(u,a):fO(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?YF(u):IC(u)},invertBatch:u=>J9(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function e7(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function t7(t){const e=e7(t);return e+Math.ceil(e/2)}function ahe(t,e,n=!1){const r=t.length,s=e7(e),i=t7(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?YF(t):IC(t),a=Yi(o,e-vs)+vs;return n?QF(a,s):fO(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dp=BigInt(0),yd=BigInt(1);function Qg(t,e){const n=e.negate();return t?n:e}function che(t,e,n){const r=o=>o.pz,s=J9(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function n7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function XS(t,e){n7(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=xC(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function t$(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=yd);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function lhe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function uhe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const JS=new WeakMap,r7=new WeakMap;function eA(t){return r7.get(t)||1}function n$(t){if(t!==Dp)throw new Error("invalid wNAF")}function dhe(t,e){return{constTimeNegate:Qg,hasPrecomputes(n){return eA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Dp;)r&yd&&(s=s.add(i)),i=i.double(),r>>=yd;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=XS(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=XS(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=t$(s,c,a);s=l,d?o=o.add(Qg(f,r[p])):i=i.add(Qg(h,r[u]))}return n$(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=XS(n,e);for(let a=0;a<o.windows&&s!==Dp;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=t$(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return n$(s),i},getPrecomputes(n,r,s){let i=JS.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),JS.set(r,i))),i},wNAFCached(n,r,s){const i=eA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=eA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){n7(r,e),r7.set(n,r),JS.delete(n)}}}function hhe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Dp||r>Dp;)n&yd&&(i=i.add(s)),r&yd&&(o=o.add(s)),s=s.double(),n>>=yd,r>>=yd;return{p1:i,p2:o}}function fhe(t,e,n,r){lhe(n,t),uhe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Sle(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=xC(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let m=0;m<i;m++){const w=r[m],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[m])}let p=o;for(let m=u.length-1,w=o;m>0;m--)w=w.add(u[m]),p=p.add(w);if(h=h.add(p),f!==0)for(let m=0;m<c;m++)h=h.double()}return h}function r$(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return she(e),e}else return DC(t)}function phe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Dp))throw new Error(`CURVE.${a} must be positive bigint`)}const r=r$(e.p,n.Fp),s=r$(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function s$(t){t.lowS!==void 0&&B_("lowS",t.lowS),t.prehash!==void 0&&B_("prehash",t.prehash)}class mhe extends Error{constructor(e=""){super(e)}}const mc={Err:mhe,_tlv:{encode:(t,e)=>{const{Err:n}=mc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Ib(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ib(s.length/2|128):"";return Ib(t)+i+s+e},decode(t,e){const{Err:n}=mc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=mc;if(t<Zg)throw new e("integer: negative integers are not allowed");let n=Ib(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=mc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return IC(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=mc,s=Vi("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=mc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Zg=BigInt(0),Xg=BigInt(1),ghe=BigInt(2),Rb=BigInt(3),yhe=BigInt(4);function whe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function s7(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Vi("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function bhe(t,e={}){const{Fp:n,Fn:r}=phe("weierstrass",t,e),{h:s,n:i}=t;pO(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(x,S,k){const{x:P,y:M}=S.toAffine(),W=n.toBytes(P);if(B_("isCompressed",k),k){a();const U=!n.isOdd(M);return fd(i7(U),W)}else return fd(Uint8Array.of(4),W,n.toBytes(M))}function l(x){Zo(x);const S=n.BYTES,k=S+1,P=2*S+1,M=x.length,W=x[0],U=x.subarray(1);if(M===k&&(W===2||W===3)){const N=n.fromBytes(U);if(!n.isValid(N))throw new Error("bad point: is not on curve, wrong x");const T=h(N);let $;try{$=n.sqrt(T)}catch(j){const z=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+z)}a();const R=n.isOdd($);return(W&1)===1!==R&&($=n.neg($)),{x:N,y:$}}else if(M===P&&W===4){const N=n.fromBytes(U.subarray(S*0,S*1)),T=n.fromBytes(U.subarray(S*1,S*2));if(!f(N,T))throw new Error("bad point: is not on curve");return{x:N,y:T}}else throw new Error(`bad point: got length ${M}, expected compressed=${k} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=whe(n,t.a,t.b);function f(x,S){const k=n.sqr(S),P=h(x);return n.eql(k,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Rb),yhe),m=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,m)))throw new Error("bad curve params: a or b");function w(x,S,k=!1){if(!n.isValid(S)||k&&n.is0(S))throw new Error(`bad point coordinate ${x}`);return S}function y(x){if(!(x instanceof C))throw new Error("ProjectivePoint expected")}const b=j3((x,S)=>{const{px:k,py:P,pz:M}=x;if(n.eql(M,n.ONE))return{x:k,y:P};const W=x.is0();S==null&&(S=W?n.ONE:n.inv(M));const U=n.mul(k,S),N=n.mul(P,S),T=n.mul(M,S);if(W)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:U,y:N}}),_=j3(x=>{if(x.is0()){if(e.allowInfinityPoint&&!n.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:S,y:k}=x.toAffine();if(!n.isValid(S)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(S,k))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(x,S,k,P,M){return k=new C(n.mul(k.px,x),k.py,k.pz),S=Qg(P,S),k=Qg(M,k),S.add(k)}class C{constructor(S,k,P){this.px=w("x",S),this.py=w("y",k,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:k,y:P}=S||{};if(!S||!n.isValid(k)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(P)?C.ZERO:new C(k,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return che(C,"pz",S)}static fromBytes(S){return Zo(S),C.fromHex(S)}static fromHex(S){const k=C.fromAffine(d(Vi("pointHex",S)));return k.assertValidity(),k}static fromPrivateKey(S){const k=s7(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(k(S))}static msm(S,k){return fhe(C,r,S,k)}precompute(S=8,k=!0){return A.setWindowSize(this,S),k||this.multiply(Rb),this}_setWindowSize(S){this.precompute(S)}assertValidity(){_(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:k,py:P,pz:M}=this,{px:W,py:U,pz:N}=S,T=n.eql(n.mul(k,N),n.mul(W,M)),$=n.eql(n.mul(P,N),n.mul(U,M));return T&&$}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:k}=t,P=n.mul(k,Rb),{px:M,py:W,pz:U}=this;let N=n.ZERO,T=n.ZERO,$=n.ZERO,R=n.mul(M,M),D=n.mul(W,W),j=n.mul(U,U),z=n.mul(M,W);return z=n.add(z,z),$=n.mul(M,U),$=n.add($,$),N=n.mul(S,$),T=n.mul(P,j),T=n.add(N,T),N=n.sub(D,T),T=n.add(D,T),T=n.mul(N,T),N=n.mul(z,N),$=n.mul(P,$),j=n.mul(S,j),z=n.sub(R,j),z=n.mul(S,z),z=n.add(z,$),$=n.add(R,R),R=n.add($,R),R=n.add(R,j),R=n.mul(R,z),T=n.add(T,R),j=n.mul(W,U),j=n.add(j,j),R=n.mul(j,z),N=n.sub(N,R),$=n.mul(j,D),$=n.add($,$),$=n.add($,$),new C(N,T,$)}add(S){y(S);const{px:k,py:P,pz:M}=this,{px:W,py:U,pz:N}=S;let T=n.ZERO,$=n.ZERO,R=n.ZERO;const D=t.a,j=n.mul(t.b,Rb);let z=n.mul(k,W),Q=n.mul(P,U),te=n.mul(M,N),Z=n.add(k,P),X=n.add(W,U);Z=n.mul(Z,X),X=n.add(z,Q),Z=n.sub(Z,X),X=n.add(k,M);let ie=n.add(W,N);return X=n.mul(X,ie),ie=n.add(z,te),X=n.sub(X,ie),ie=n.add(P,M),T=n.add(U,N),ie=n.mul(ie,T),T=n.add(Q,te),ie=n.sub(ie,T),R=n.mul(D,X),T=n.mul(j,te),R=n.add(T,R),T=n.sub(Q,R),R=n.add(Q,R),$=n.mul(T,R),Q=n.add(z,z),Q=n.add(Q,z),te=n.mul(D,te),X=n.mul(j,X),Q=n.add(Q,te),te=n.sub(z,te),te=n.mul(D,te),X=n.add(X,te),z=n.mul(Q,X),$=n.add($,z),z=n.mul(ie,X),T=n.mul(Z,T),T=n.sub(T,z),z=n.mul(Z,Q),R=n.mul(ie,R),R=n.add(R,z),new C(T,$,R)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:k}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,M;const W=U=>A.wNAFCached(this,U,C.normalizeZ);if(k){const{k1neg:U,k1:N,k2neg:T,k2:$}=k.splitScalar(S),{p:R,f:D}=W(N),{p:j,f:z}=W($);M=D.add(z),P=E(k.beta,R,j,U,T)}else{const{p:U,f:N}=W(S);P=U,M=N}return C.normalizeZ([P,M])[0]}multiplyUnsafe(S){const{endo:k}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===Zg||P.is0())return C.ZERO;if(S===Xg)return P;if(A.hasPrecomputes(this))return this.multiply(S);if(k){const{k1neg:M,k1:W,k2neg:U,k2:N}=k.splitScalar(S),{p1:T,p2:$}=hhe(C,P,W,N);return E(k.beta,T,$,M,U)}else return A.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,k,P){const M=this.multiplyUnsafe(k).add(S.multiplyUnsafe(P));return M.is0()?void 0:M}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===Xg?!0:S?S(C,this):A.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===Xg?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return B_("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return Vy(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const I=r.BITS,A=dhe(C,e.endo?Math.ceil(I/2):I);return C}function i7(t){return Uint8Array.of(t?2:3)}function vhe(t,e,n={}){pO(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Rae,s=e.hmac||((P,...M)=>K9(e.hash,P,fd(...M))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const M=a>>Xg;return P>M}function u(P){return l(P)?o.neg(P):P}function d(P,M){if(!o.isValidNot0(M))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(M,W,U){d("r",M),d("s",W),this.r=M,this.s=W,U!=null&&(this.recovery=U),Object.freeze(this)}static fromCompact(M){const W=o.BYTES,U=Vi("compactSignature",M,W*2);return new h(o.fromBytes(U.subarray(0,W)),o.fromBytes(U.subarray(W,W*2)))}static fromDER(M){const{r:W,s:U}=mc.toSig(Vi("DER",M));return new h(W,U)}assertValidity(){}addRecoveryBit(M){return new h(this.r,this.s,M)}recoverPublicKey(M){const W=i.ORDER,{r:U,s:N,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(a*ghe<W&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=T===2||T===3?U+a:U;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(R),j=t.fromHex(fd(i7((T&1)===0),D)),z=o.inv(R),Q=_(Vi("msgHash",M)),te=o.create(-Q*z),Z=o.create(N*z),X=t.BASE.multiplyUnsafe(te).add(j.multiplyUnsafe(Z));if(X.is0())throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(M){if(M==="compact")return fd(o.toBytes(this.r),o.toBytes(this.s));if(M==="der")return VP(mc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Vy(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Vy(this.toBytes("compact"))}}const f=s7(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return ahe(r(t7(P)),P)},precompute(P=8,M=t.BASE){return M.precompute(P,!1)}};function m(P,M=!0){return t.fromPrivateKey(P).toBytes(M)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const W=Vi("key",P).length,U=i.BYTES,N=U+1,T=2*U+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===N))return W===N||W===T}function y(P,M,W=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(M)===!1)throw new Error("second arg must be public key");return t.fromHex(M).multiply(f(P)).toBytes(W)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const M=IC(P),W=P.length*8-c;return W>0?M>>BigInt(W):M},_=e.bits2int_modN||function(P){return o.create(b(P))},E=xC(c);function C(P){return Cle("num < 2^"+c,P,Zg,E),o.toBytes(P)}function I(P,M,W=A){if(["recovered","canonical"].some(Z=>Z in W))throw new Error("sign() legacy options not supported");const{hash:U}=e;let{lowS:N,prehash:T,extraEntropy:$}=W;N==null&&(N=!0),P=Vi("msgHash",P),s$(W),T&&(P=Vi("prehashed msgHash",U(P)));const R=_(P),D=f(M),j=[C(D),C(R)];if($!=null&&$!==!1){const Z=$===!0?r(i.BYTES):$;j.push(Vi("extraEntropy",Z))}const z=fd(...j),Q=R;function te(Z){const X=b(Z);if(!o.isValidNot0(X))return;const ie=o.inv(X),Ke=t.BASE.multiply(X).toAffine(),it=o.create(Ke.x);if(it===Zg)return;const Be=o.create(ie*o.create(Q+it*D));if(Be===Zg)return;let yt=(Ke.x===it?0:2)|Number(Ke.y&Xg),Ct=Be;return N&&l(Be)&&(Ct=u(Be),yt^=1),new h(it,Ct,yt)}return{seed:z,k2sig:te}}const A={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};function S(P,M,W=A){const{seed:U,k2sig:N}=I(P,M,W);return Ale(e.hash.outputLen,o.BYTES,s)(U,N)}t.BASE.precompute(8);function k(P,M,W,U=x){const N=P;M=Vi("msgHash",M),W=Vi("publicKey",W),s$(U);const{lowS:T,prehash:$,format:R}=U;if("strict"in U)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const D=typeof N=="string"||qP(N),j=!D&&!R&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!D&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let z,Q;try{if(j)if(R===void 0||R==="js")z=new h(N.r,N.s);else throw new Error("invalid format");if(D){try{R!=="compact"&&(z=h.fromDER(N))}catch(Ct){if(!(Ct instanceof mc.Err))throw Ct}!z&&R!=="der"&&(z=h.fromCompact(N))}Q=t.fromHex(W)}catch{return!1}if(!z||T&&z.hasHighS())return!1;$&&(M=e.hash(M));const{r:te,s:Z}=z,X=_(M),ie=o.inv(Z),Ke=o.create(X*ie),it=o.create(te*ie),Be=t.BASE.multiplyUnsafe(Ke).add(Q.multiplyUnsafe(it));return Be.is0()?!1:o.create(Be.x)===te}return Object.freeze({getPublicKey:m,getSharedSecret:y,sign:S,verify:k,utils:p,Point:t,Signature:h})}function _he(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=DC(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Ehe(t){const{CURVE:e,curveOpts:n}=_he(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Che(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function She(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Ehe(t),s=bhe(e,n),i=vhe(s,r,n);return Che(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ahe(t,e){const n=r=>She({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const H_={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Ihe=BigInt(1),SN=BigInt(2),i$=(t,e)=>(t+e/SN)/e;function xhe(t){const e=H_.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Li(u,n,e)*u%e,h=Li(d,n,e)*u%e,f=Li(h,SN,e)*l%e,p=Li(f,s,e)*f%e,m=Li(p,i,e)*p%e,w=Li(m,a,e)*m%e,y=Li(w,c,e)*w%e,b=Li(y,a,e)*m%e,_=Li(b,n,e)*u%e,E=Li(_,o,e)*p%e,C=Li(E,r,e)*l%e,I=Li(C,SN,e);if(!AN.eql(AN.sqr(I),t))throw new Error("Cannot find square root");return I}const AN=DC(H_.p,void 0,void 0,{sqrt:xhe}),o7=Ahe({...H_,Fp:AN,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=H_.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ihe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=i$(i*t,e),c=i$(-r*t,e);let l=Yi(t-a*n-c*s,e),u=Yi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},zF),Nhe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:o7},Symbol.toStringTag,{value:"Module"}));function The({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new o7.Signature(Ni(t),Ni(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:oo(o)}async function xO(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=ja(o)?o:typeof o=="object"&&"r"in o&&"s"in o?The(o):mr(o),u=await(async()=>!r&&!s||pde(l)?l:mde({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:ho({abi:V3,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:NC({abi:V3,args:[n,i,u],bytecode:Xle}),...c},{data:m}=await He(t,m0,"call")(p);return uae(m??"0x0")}catch(p){try{if(AC(Ac(n),await OF({hash:i,signature:o})))return!0}catch{}if(p instanceof RF)return!1;throw p}}async function Rhe(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=$9(n);return xO(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function Phe(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=ode({message:o,primaryType:a,types:c,domain:l});return xO(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}function a7(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=fr(["watchBlockNumber",t.uid,e,n,o]);return Fc(d,{onBlockNumber:r,onError:s},h=>hm(async()=>{var f;try{const p=await He(t,g0,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let m=c+1n;m<p;m++)h.onBlockNumber(m,c),c=m}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=fr(["watchBlockNumber",t.uid,e,n]);return Fc(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const m=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await m.subscribe({params:["newHeads"],onData(y){var _;if(!f)return;const b=Ni((_=y.result)==null?void 0:_.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(m){s==null||s(m)}})(),()=>p()})})()}async function c7(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=fr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:m,resolve:w,reject:y}=wO(),b=a?setTimeout(()=>{p(),f(),y(new Oce({hash:n}))},a):void 0;return f=Fc(c,{onReplaced:r,resolve:w,reject:y},_=>{p=He(t,a7,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(E){const C=A=>{clearTimeout(b),p(),A(),f()};let I=E;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>_.resolve(d));return}if(l||(h=!0,await W_(async()=>{l=await He(t,OC,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await He(t,yN,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>_.resolve(d))}catch(A){if(A instanceof NF||A instanceof TF){if(!l){h=!1;return}try{u=l,h=!0;const x=await W_(()=>He(t,Ra,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof MF});h=!1;const S=x.transactions.find(({from:P,nonce:M})=>P===u.from&&M===u.nonce);if(!S||(d=await He(t,yN,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let k="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?k="repriced":S.from===S.to&&S.value===0n&&(k="cancelled"),C(()=>{var P;(P=_.onReplaced)==null||P.call(_,{reason:k,replacedTransaction:u,transaction:S,transactionReceipt:d}),_.resolve(d)})}catch(x){C(()=>_.reject(x))}}else C(()=>_.reject(A))}}})}),m}function Ohe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=fr(["watchBlocks",t.uid,e,n,r,u,c]);return Fc(p,{onBlock:s,onError:i},m=>hm(async()=>{var w;try{const y=await He(t,Ra,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const _=await He(t,Ra,"getBlock")({blockNumber:b,includeTransactions:u});m.onBlock(_,d),d=_}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(m.onBlock(y,d),d=y)}catch(y){(w=m.onError)==null||w.call(m,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,m=!0,w=()=>p=!1;return(async()=>{try{r&&He(t,Ra,"getBlock")({blockTag:e,includeTransactions:u}).then(_=>{p&&m&&(s(_,void 0),m=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const _=t.transport.transports.find(E=>E.config.type==="webSocket"||E.config.type==="ipc");return _?_.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(_){var C;if(!p)return;const E=await He(t,Ra,"getBlock")({blockNumber:(C=_.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(E,d),m=!1,d=E)},onError(_){i==null||i(_)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function khe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=fr(["watchEvent",e,n,r,t.uid,s,u,o]);return Fc(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let _,E=!1;const C=hm(async()=>{var I;if(!E){try{_=await He(t,I9,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}E=!0;return}try{let A;if(_)A=await He(t,TC,"getFilterChanges")({filter:_});else{const x=await He(t,g0,"getBlockNumber")({});b&&b!==x?A=await He(t,dO,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:x}):A=[],b=x}if(A.length===0)return;if(r)y.onLogs(A);else for(const x of A)y.onLogs([x])}catch(A){_&&A instanceof Zd&&(E=!1),(I=y.onError)==null||I.call(y,A)}},{emitOnBegin:!0,interval:u});return async()=>{_&&await He(t,RC,"uninstallFilter")({filter:_}),C()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),_=i??(s?[s]:void 0);let E=[];_&&(E=[_.flatMap(A=>u0({abi:[A],eventName:A.name,args:n}))],s&&(E=E[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:E}],onData(I){var x;if(!w)return;const A=I.result;try{const{eventName:S,args:k}=lO({abi:_??[],data:A.data,topics:A.topics,strict:f}),P=Bc(A,{args:k,eventName:S});c([P])}catch(S){let k,P;if(S instanceof Hy||S instanceof yC){if(d)return;k=S.abiItem.name,P=(x=S.abiItem.inputs)==null?void 0:x.some(W=>!("name"in W&&W.name))}const M=Bc(A,{args:P?[]:{},eventName:k});c([M])}},onError(I){a==null||a(I)}});y=C,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function l7(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=fr(["watchPendingTransactions",t.uid,e,i]);return Fc(l,{onTransactions:r,onError:n},u=>{let d;const h=hm(async()=>{var f;try{if(!d)try{d=await He(t,x9,"createPendingTransactionFilter")({});return}catch(m){throw h(),m}const p=await He(t,TC,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const m of p)u.onTransactions([m])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await He(t,RC,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}function Dhe(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match($he))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(Mhe))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const $he=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Mhe=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Lhe(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!ao(r.address,{strict:!1})||e&&!AC(r.address,e))return!1}catch{return!1}return!0}async function Uhe(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=Dhe(s);if(!u.address||!Lhe({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=$9(s);return xO(t,{address:u.address,hash:h,signature:a,...l})}function jhe(t){return{call:e=>m0(t,e),createAccessList:e=>A9(t,e),createBlockFilter:()=>Kue(t),createContractEventFilter:e=>CF(t,e),createEventFilter:e=>I9(t,e),createPendingTransactionFilter:()=>x9(t),estimateContractGas:e=>ble(t,e),estimateGas:e=>SC(t,e),getBalance:e=>cO(t,e),getBlobBaseFee:()=>Yue(t),getBlock:e=>Ra(t,e),getBlockNumber:e=>g0(t,e),getBlockTransactionCount:e=>Que(t,e),getBytecode:e=>Z3(t,e),getChainId:()=>um(t),getCode:e=>Z3(t,e),getContractEvents:e=>GF(t,e),getEip712Domain:e=>Xue(t,e),getEnsAddress:e=>kue(t,e),getEnsAvatar:e=>Vue(t,e),getEnsName:e=>S9(t,e),getEnsResolver:e=>Gue(t,e),getEnsText:e=>C9(t,e),getFeeHistory:e=>tde(t,e),estimateFeesPerGas:e=>rle(t,e),getFilterChanges:e=>TC(t,e),getFilterLogs:e=>nde(t,e),getGasPrice:()=>iO(t),getLogs:e=>dO(t,e),getProof:e=>vde(t,e),estimateMaxPriorityFeePerGas:e=>nle(t,e),getStorageAt:e=>_de(t,e),getTransaction:e=>OC(t,e),getTransactionConfirmations:e=>Ede(t,e),getTransactionCount:e=>oO(t,e),getTransactionReceipt:e=>yN(t,e),multicall:e=>L9(t,e),prepareTransactionRequest:e=>p0(t,e),readContract:e=>Wa(t,e),sendRawTransaction:e=>bO(t,e),simulate:e=>wN(t,e),simulateBlocks:e=>wN(t,e),simulateCalls:e=>Xde(t,e),simulateContract:e=>oue(t,e),verifyMessage:e=>Rhe(t,e),verifySiweMessage:e=>Uhe(t,e),verifyTypedData:e=>Phe(t,e),uninstallFilter:e=>RC(t,e),waitForTransactionReceipt:e=>c7(t,e),watchBlocks:e=>Ohe(t,e),watchBlockNumber:e=>a7(t,e),watchContractEvent:e=>fue(t,e),watchEvent:e=>khe(t,e),watchPendingTransactions:e=>l7(t,e)}}async function Bhe(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:De(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Fhe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=NC({abi:n,args:r,bytecode:s});return y0(t,{...i,...i.authorizationList?{to:null}:{},data:o})}async function Whe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>c0(r))}async function zhe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Vn(n):void 0,i=r?[s==null?void 0:s.address,[De(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}async function Hhe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function u7(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Sh({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Vn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Vn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await He(t,um,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await He(t,oO,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&AC(o.address,i.address))&&(a.nonce+=1)),a}async function qhe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Ac(n))}async function Vhe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function Ghe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Khe(t,e){const{account:n=t.account}=e;if(!n)throw new Sh({docsPath:"/docs/eip7702/signAuthorization"});const r=Vn(n);if(!r.signAuthorization)throw new Ev({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await u7(t,e);return r.signAuthorization(s)}async function d7(t,{account:e=t.account,message:n}){if(!e)throw new Sh({docsPath:"/docs/actions/wallet/signMessage"});const r=Vn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Ip(n):n.raw instanceof Uint8Array?io(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Yhe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Sh({docsPath:"/docs/actions/wallet/signTransaction"});const i=Vn(n);Eh({account:i,...e});const o=await He(t,um,"getChainId")({});r!==null&&u9({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||lm;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:De(o),from:i.address}]},{retryCount:0})}async function Qhe(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Sh({docsPath:"/docs/actions/wallet/signTypedData"});const o=Vn(n),a={EIP712Domain:D9({domain:r}),...e.types};if(k9({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=ude({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Zhe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:De(e)}]},{retryCount:0})}async function Xhe(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function Jhe(t){return{addChain:e=>Bhe(t,e),deployContract:e=>Fhe(t,e),getAddresses:()=>Whe(t),getCallsStatus:e=>g9(t,e),getCapabilities:e=>zhe(t,e),getChainId:()=>um(t),getPermissions:()=>Hhe(t),prepareAuthorization:e=>u7(t,e),prepareTransactionRequest:e=>p0(t,e),requestAddresses:()=>qhe(t),requestPermissions:e=>Vhe(t,e),sendCalls:e=>mue(t,e),sendRawTransaction:e=>bO(t,e),sendTransaction:e=>y0(t,e),showCallsStatus:e=>Ghe(t,e),signAuthorization:e=>Khe(t,e),signMessage:e=>d7(t,e),signTransaction:e=>Yhe(t,e),signTypedData:e=>Qhe(t,e),switchChain:e=>Zhe(t,e),waitForCallsStatus:e=>gue(t,e),watchAsset:e=>Xhe(t,e),writeContract:e=>h9(t,e)}}const tA={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return _h(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},o$={async getMyTokensWithBalance(t){const e=Re.state.address,n=L.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await Qe.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=tA.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Ze.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Ze.walletGetAssets({account:t,chainFilter:[s]});return tA.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>tA.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:L.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Qt=xn({tokenBalances:[],loading:!1}),efe={state:Qt,subscribe(t){return is(Qt,()=>t(Qt))},subscribeKey(t,e){return as(Qt,t,e)},setToken(t){t&&(Qt.token=Gd(t))},setTokenAmount(t){Qt.sendTokenAmount=t},setReceiverAddress(t){Qt.receiverAddress=t},setReceiverProfileImageUrl(t){Qt.receiverProfileImageUrl=t},setReceiverProfileName(t){Qt.receiverProfileName=t},setNetworkBalanceInUsd(t){Qt.networkBalanceInUSD=t},setLoading(t){Qt.loading=t},async sendToken(){var t;try{switch(Ht.setLoading(!0),(t=L.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Ht.sendEvmToken();return;case"solana":await Ht.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ht.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=L.state.activeChain,e=(n=Re.state.preferredAccountTypes)==null?void 0:n[t];if(!Ht.state.sendTokenAmount||!Ht.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ht.state.token)throw new Error("A token is required");(r=Ht.state.token)!=null&&r.address?(Pn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Wr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ht.state.token.address,amount:Ht.state.sendTokenAmount,network:((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Ht.sendERC20Token({receiverAddress:Ht.state.receiverAddress,tokenAddress:Ht.state.token.address,sendTokenAmount:Ht.state.sendTokenAmount,decimals:Ht.state.token.quantity.decimals})):(Pn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Wr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ht.state.token.symbol||"",amount:Ht.state.sendTokenAmount,network:((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Ht.sendNativeToken({receiverAddress:Ht.state.receiverAddress,sendTokenAmount:Ht.state.sendTokenAmount,decimals:Ht.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Qt.loading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?je.getPlainAddress(r):void 0;if(Qt.lastRetry&&!je.isAllowedRetry(Qt.lastRetry,30*an.ONE_SEC_MS))return Qt.loading=!1,[];try{if(s&&e&&n){const a=await o$.getMyTokensWithBalance();return Qt.tokenBalances=a,Qt.lastRetry=void 0,a}}catch(a){Qt.lastRetry=Date.now(),t==null||t(a),Lo.showError("Token Balance Unavailable")}finally{Qt.loading=!1}return[]},fetchNetworkBalance(){if(Qt.tokenBalances.length===0)return;const t=o$.mapBalancesToSwapTokens(Qt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===L.getActiveNetworkTokenAddress());e&&(Qt.networkBalanceInUSD=e?Tie.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;_t.pushTransactionStack({});const e=t.receiverAddress,n=Re.state.address,r=Ze.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ze.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),Pn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Re.state.preferredAccountTypes)==null?void 0:i.eip155)===Wr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Ht.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=Ze._getClient())==null||c.updateBalance("eip155"),Ht.resetSend()},async sendERC20Token(t){_t.pushTransactionStack({onSuccess(){_t.replace("Account")}});const e=Ze.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Re.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=je.getPlainAddress(t.tokenAddress);await Ze.writeContract({fromAddress:Re.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:kie.getERC20Abi(n),chainNamespace:"eip155"}),Ht.resetSend()}},async sendSolanaToken(){var t;if(!Ht.state.sendTokenAmount||!Ht.state.receiverAddress)throw new Error("An amount and receiver address are required");_t.pushTransactionStack({onSuccess(){_t.replace("Account")}}),await Ze.sendTransaction({chainNamespace:"solana",to:Ht.state.receiverAddress,value:Ht.state.sendTokenAmount}),(t=Ze._getClient())==null||t.updateBalance("solana"),Ht.resetSend()},resetSend(){Qt.token=void 0,Qt.sendTokenAmount=void 0,Qt.receiverAddress=void 0,Qt.receiverProfileImageUrl=void 0,Qt.receiverProfileName=void 0,Qt.loading=!1,Qt.tokenBalances=[]}},Ht=ki(efe),nA={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Pb={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},we=xn({chains:vie(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),tfe={state:we,subscribe(t){return is(we,()=>{t(we)})},subscribeKey(t,e){return as(we,t,e)},subscribeChainProp(t,e,n){let r;return is(we.chains,()=>{var i;const s=n||we.activeChain;if(s){const o=(i=we.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Pe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ae.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(we.noAdapters=!0),we.noAdapters||(we.activeChain=a==null?void 0:a.namespace,we.activeCaipNetwork=i,L.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),we.activeChain&&Da.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);L.state.chains.set(u,{namespace:u,networkState:xn({...Pb,caipNetwork:d==null?void 0:d[0]}),accountState:xn(nA),caipNetworks:d??[],...n}),L.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(we.activeChain===t){const r=Array.from(we.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&L.setActiveCaipNetwork(s)}}we.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){we.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Pb,caipNetwork:r[0]},accountState:nA,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),L.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=we.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),we.chains.set(t.chainNamespace,{...e,caipNetworks:r}),L.setRequestedCaipNetworks(r,t.chainNamespace),Ce.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=we.chains.get(t);if(n){const o=((r=we.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&L.setActiveCaipNetwork(n.caipNetworks[0]),we.chains.set(t,{...n,caipNetworks:a}),L.setRequestedCaipNetworks(a||[],t),a.length===0&&Ce.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=we.chains.get(t);n&&(n.networkState={...n.networkState||Pb,...e},we.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=we.chains.get(t);if(r){const s={...r.accountState||nA,...e};we.chains.set(t,{...r,accountState:s}),(we.chains.size===1||we.activeChain===t)&&(e.caipAddress&&(we.activeCaipAddress=e.caipAddress),Re.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=we.chains.get(t);if(n){const r={...n.networkState||Pb,...e};we.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){L.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Ce.removeConnectorId(n)},setActiveNamespace(t){var r,s;we.activeChain=t;const e=t?we.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(we.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,we.activeCaipNetwork=n,L.setChainNetworkData(t,{caipNetwork:n}),Pe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Da.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;we.activeChain!==t.chainNamespace&&L.setIsSwitchingNamespace(!0);const e=we.chains.get(t.chainNamespace);we.activeChain=t.chainNamespace,we.activeCaipNetwork=t,L.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?we.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:we.activeCaipAddress=void 0,L.setAccountProp("caipAddress",we.activeCaipAddress,t.chainNamespace),e&&Re.replaceState(e.accountState),Ht.resetSend(),Da.set({activeChain:we.activeChain,selectedNetworkId:(i=we.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Pe.setActiveCaipNetworkId(t.caipNetworkId),!L.checkIfSupportedNetwork(t.chainNamespace)&&ae.state.enableNetworkSwitch&&!ae.state.allowUnsupportedChain&&!Ze.state.wcBasic&&L.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=we.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==L.state.activeChain,n=(s=L.getNetworkData(t))==null?void 0:s.caipNetwork,r=L.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await L.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=L.state.chains.get(L.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=we.activeCaipNetwork)==null?void 0:o.id)})),r=L.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Ir.close()}catch{_t.goBack()}Pn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||we.activeChain,n=we.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||we.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=we.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=we.activeChain;if(e&&(n=e),!n)return;const r=(s=we.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=we.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=we.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return je.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return we.chains.forEach(e=>{const n=L.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){L.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=L.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ce.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return we.chains.forEach(e=>{const n=L.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return we.activeCaipNetwork},getActiveCaipAddress(){return we.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=we.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=L.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());L.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||we.activeCaipNetwork,r=L.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!we.activeChain)return!0;const e=L.getRequestedCaipNetworks(we.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){L.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=RB.caipNetworkIdToNumber((r=we.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=we.activeChain;if(!e||!t)return!1;const n=L.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=we.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=we.activeCaipNetwork)==null?void 0:s.id)||1,n=an.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Ir.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=we.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&an.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){L.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");we.activeCaipAddress=void 0,L.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Ce.removeConnectorId(e)},setIsSwitchingNamespace(t){we.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(we.chains.forEach(s=>{Se.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=we.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=L.state.chains.get(t))==null?void 0:e.accountState:Re.state},getNetworkData(t){var n;const e=t||we.activeChain;if(e)return(n=L.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=L.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ce.state.filterByNamespace;return(t?[we.chains.get(t)]:Array.from(we.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?L.getRequestedCaipNetworks(t):L.getAllRequestedCaipNetworks()}},L=ki(tfe),nfe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},h7=je.getBlockchainApiUrl(),Ts=xn({clientId:null,api:new i0({baseUrl:h7,clientId:null}),supportedChains:{http:[],ws:[]}}),Qe={state:Ts,async get(t){const{st:e,sv:n}=Qe.getSdkProperties(),r=ae.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Ts.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ae.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Ts.supportedChains.http.length||await Qe.getSupportedNetworks()}catch{return!1}return Ts.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Qe.get({path:"v1/supported-chains"});return Ts.supportedChains=t,t}catch{return Ts.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Qe.isNetworkSupported(e))return{avatar:"",name:""};const r=Pe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Qe.get({path:`/v1/identity/${t}`,params:{sender:L.state.activeCaipAddress?je.getPlainAddress(L.state.activeCaipAddress):void 0}});return Pe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Qe.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Qe.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Qe.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Qe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Qe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Ts.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ae.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Qe.isNetworkSupported((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Qe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Qe.getSdkProperties();if(!await Qe.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Qe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Qe.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Ts.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:an.CONVERT_SLIPPAGE_TOLERANCE},projectId:ae.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Qe.getSdkProperties();if(!await Qe.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Qe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Qe.getSdkProperties();if(!await Qe.isNetworkSupported((l=L.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Lo.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Pe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Qe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Pe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Qe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Qe.get({path:`/v1/profile/reverse/${t}`,params:{sender:Re.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Qe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Qe.isNetworkSupported((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Ts.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Qe.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Ts.api.post({path:"/v1/generators/onrampurl",params:{projectId:ae.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Qe.isNetworkSupported((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Qe.get({path:"/v1/onramp/options"})}catch{return nfe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Qe.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Ts.api.post({path:"/v1/onramp/quote",params:{projectId:ae.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Qe.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Qe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Qe.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Ts.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ae.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Ts.clientId=t,Ts.api=new i0({baseUrl:h7,clientId:t})}},Ui=xn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),rfe={state:Ui,replaceState(t){t&&Object.assign(Ui,Gd(t))},subscribe(t){return L.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return L.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){L.setAccountProp("status",t,e)},getCaipAddress(t){return L.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?je.getPlainAddress(t):void 0;e===L.state.activeChain&&(L.state.activeCaipAddress=t),L.setAccountProp("caipAddress",t,e),L.setAccountProp("address",n,e)},setBalance(t,e,n){L.setAccountProp("balance",t,n),L.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){L.setAccountProp("profileName",t,e)},setProfileImage(t,e){L.setAccountProp("profileImage",t,e)},setUser(t,e){L.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){L.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){L.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){L.setAccountProp("currentTab",t,L.state.activeChain)},setTokenBalance(t,e){t&&L.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){L.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){L.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=L.getAccountProp("addressLabels",n)||new Map;r.set(t,e),L.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=L.getAccountProp("addressLabels",e)||new Map;n.delete(t),L.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){L.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){L.setAccountProp("preferredAccountTypes",{...Ui.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Ui.preferredAccountTypes=t},setSocialProvider(t,e){t&&L.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){L.setAccountProp("socialWindow",t?Gd(t):void 0,e)},setFarcasterUrl(t,e){L.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ui.balanceLoading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?je.getPlainAddress(r):void 0;if(Ui.lastRetry&&!je.isAllowedRetry(Ui.lastRetry,30*an.ONE_SEC_MS))return Ui.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await Qe.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Re.setTokenBalance(c,n),Ui.lastRetry=void 0,Ui.balanceLoading=!1,c}}catch(a){Ui.lastRetry=Date.now(),t==null||t(a),Lo.showError("Token Balance Unavailable")}finally{Ui.balanceLoading=!1}return[]},resetAccount(t){L.resetAccount(t)}},Re=ki(rfe),sfe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=L.state.activeCaipNetwork,r=_t.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Re.getCaipAddress(L.state.activeChain),o=t.chainNamespace!==L.state.activeChain,a=Re.getCaipAddress(t.chainNamespace),l=Ce.getConnectorId(L.state.activeChain)===Se.CONNECTOR_ID.AUTH,u=Se.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?_t.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?_t.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):_t.push("SwitchNetwork",{...r,network:t})}},Rs=xn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),ife={state:Rs,subscribe(t){return is(Rs,()=>t(Rs))},subscribeKey(t,e){return as(Rs,t,e)},async open(t){var o,a;const e=Re.state.status==="connected",n=t==null?void 0:t.namespace,r=L.state.activeChain,s=n&&n!==r,i=(o=L.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(Ze.state.wcBasic?Fe.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Fe.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Ce.setFilterByNamespace(t==null?void 0:t.namespace),Ir.setLoading(!0,n),n&&s){const c=((a=L.getNetworkData(n))==null?void 0:a.caipNetwork)||L.getRequestedCaipNetworks(n)[0];c&&sfe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=L.state.noAdapters;ae.state.manualWCControl||c&&!i?je.isMobile()?_t.reset("AllWallets"):_t.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?_t.reset(t.view,t.data):i?_t.reset("Account"):_t.reset("Connect")}Rs.open=!0,Da.set({open:!0}),Pn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ae.state.enableEmbedded,e=!!L.state.activeCaipAddress;Rs.open&&Pn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Rs.open=!1,_t.reset("Connect"),Ir.clearLoading(),t?e?_t.replace("Account"):_t.push("Connect"):Da.set({open:!1}),Ze.resetUri()},setLoading(t,e){e&&Rs.loadingNamespaceMap.set(e,t),Rs.loading=t,Da.set({loading:t})},clearLoading(){Rs.loadingNamespaceMap.clear(),Rs.loading=!1},shake(){Rs.shake||(Rs.shake=!0,setTimeout(()=>{Rs.shake=!1},500))}},Ir=ki(ife),Jg={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},IN={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},ofe={providers:kB,selectedProvider:null,error:null,purchaseCurrency:Jg,paymentCurrency:IN,purchaseCurrencies:[Jg],paymentCurrencies:[],quotesLoading:!1},Ot=xn(ofe),afe={state:Ot,subscribe(t){return is(Ot,()=>t(Ot))},subscribeKey(t,e){return as(Ot,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=L.state.activeChain===Se.CHAIN.SOLANA?"SOL":"USDC",n=Re.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",Die),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ae.state.projectId),Ot.selectedProvider={...t,url:r.toString()}}else Ot.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=kB.filter(r=>e.includes(r.name));Ot.providers=n}else Ot.providers=[]},setPurchaseCurrency(t){Ot.purchaseCurrency=t},setPaymentCurrency(t){Ot.paymentCurrency=t},setPurchaseAmount(t){xN.state.purchaseAmount=t},setPaymentAmount(t){xN.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Qe.getOnrampOptions();Ot.purchaseCurrencies=t.purchaseCurrencies,Ot.paymentCurrencies=t.paymentCurrencies,Ot.paymentCurrency=t.paymentCurrencies[0]||IN,Ot.purchaseCurrency=t.purchaseCurrencies[0]||Jg,await Fe.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Fe.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Ot.quotesLoading=!0;try{const n=await Qe.getOnrampQuote({purchaseCurrency:Ot.purchaseCurrency,paymentCurrency:Ot.paymentCurrency,amount:((t=Ot.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Ot.purchaseCurrency)==null?void 0:e.symbol});return Ot.quotesLoading=!1,Ot.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Ot.error=n.message,Ot.quotesLoading=!1,null}finally{Ot.quotesLoading=!1}},resetState(){Ot.selectedProvider=null,Ot.error=null,Ot.purchaseCurrency=Jg,Ot.paymentCurrency=IN,Ot.purchaseCurrencies=[Jg],Ot.paymentCurrencies=[],Ot.paymentAmount=void 0,Ot.purchaseAmount=void 0,Ot.quotesLoading=!1}},xN=ki(afe),a$=2147483648,cfe={convertEVMChainIdToCoinType(t){if(t>=a$)throw new Error("Invalid chainId");return(a$|t)>>>0}},ji=xn({suggestions:[],loading:!1}),lfe={state:ji,subscribe(t){return is(ji,()=>t(ji))},subscribeKey(t,e){return as(ji,t,e)},async resolveName(t){var e,n;try{return await Qe.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Qe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ji.loading=!0,ji.suggestions=[];const e=await Qe.getEnsNameSuggestions(t);return ji.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ji.suggestions}catch(e){const n=ey.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ji.loading=!1}},async getNamesForAddress(t){try{if(!L.state.activeCaipNetwork)return[];const n=Pe.getEnsFromCacheForAddress(t);if(n)return n;const r=await Qe.reverseLookupEnsName({address:t});return Pe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ey.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=L.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Re.state.address,r=Ce.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");ji.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});_t.pushTransactionStack({onCancel(){_t.replace("RegisterAccountName")}});const i=await Ze.signMessage(s);ji.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=cfe.convertEVMChainIdToCoinType(Number(o));await Qe.registerEnsName({coinType:a,address:n,signature:i,message:s}),Re.setProfileName(t,e.chainNamespace),_t.replace("RegisterAccountNameSuccess")}catch(s){const i=ey.parseEnsApiError(s,`Error registering name ${t}`);throw _t.replace("RegisterAccountName"),new Error(i)}finally{ji.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ey=ki(lfe);var NO={exports:{}},Gf=typeof Reflect=="object"?Reflect:null,c$=Gf&&typeof Gf.apply=="function"?Gf.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Sv;Gf&&typeof Gf.ownKeys=="function"?Sv=Gf.ownKeys:Object.getOwnPropertySymbols?Sv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Sv=function(e){return Object.getOwnPropertyNames(e)};function ufe(t){console&&console.warn&&console.warn(t)}var f7=Number.isNaN||function(e){return e!==e};function cn(){cn.init.call(this)}NO.exports=cn;NO.exports.once=pfe;cn.EventEmitter=cn;cn.prototype._events=void 0;cn.prototype._eventsCount=0;cn.prototype._maxListeners=void 0;var l$=10;function $C(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(cn,"defaultMaxListeners",{enumerable:!0,get:function(){return l$},set:function(t){if(typeof t!="number"||t<0||f7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l$=t}});cn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};cn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||f7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function p7(t){return t._maxListeners===void 0?cn.defaultMaxListeners:t._maxListeners}cn.prototype.getMaxListeners=function(){return p7(this)};cn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")c$(c,this,n);else for(var l=c.length,u=b7(c,l),r=0;r<l;++r)c$(u[r],this,n);return!0};function m7(t,e,n,r){var s,i,o;if($C(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=p7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ufe(a)}return t}cn.prototype.addListener=function(e,n){return m7(this,e,n,!1)};cn.prototype.on=cn.prototype.addListener;cn.prototype.prependListener=function(e,n){return m7(this,e,n,!0)};function dfe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=dfe.bind(r);return s.listener=n,r.wrapFn=s,s}cn.prototype.once=function(e,n){return $C(n),this.on(e,g7(this,e,n)),this};cn.prototype.prependOnceListener=function(e,n){return $C(n),this.prependListener(e,g7(this,e,n)),this};cn.prototype.removeListener=function(e,n){var r,s,i,o,a;if($C(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():hfe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};cn.prototype.off=cn.prototype.removeListener;cn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function y7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?ffe(s):b7(s,s.length)}cn.prototype.listeners=function(e){return y7(this,e,!0)};cn.prototype.rawListeners=function(e){return y7(this,e,!1)};cn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):w7.call(t,e)};cn.prototype.listenerCount=w7;function w7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}cn.prototype.eventNames=function(){return this._eventsCount>0?Sv(this._events):[]};function b7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function hfe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ffe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function pfe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}v7(t,e,i,{once:!0}),e!=="error"&&mfe(t,s,{once:!0})})}function mfe(t,e,n){typeof t.on=="function"&&v7(t,"error",e,n)}function v7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var fo=NO.exports;const TO=hh(fo);var he={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var NN=function(t,e){return NN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},NN(t,e)};function gfe(t,e){NN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var TN=function(){return TN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},TN.apply(this,arguments)};function yfe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function wfe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function bfe(t,e){return function(n,r){e(n,r,t)}}function vfe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function _fe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Efe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Cfe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Sfe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function RN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _7(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Afe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_7(arguments[e]));return t}function Ife(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function lw(t){return this instanceof lw?(this.v=t,this):new lw(t)}function xfe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof lw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Nfe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:lw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Tfe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof RN=="function"?RN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Rfe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Pfe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Ofe(t){return t&&t.__esModule?t:{default:t}}function kfe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Dfe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const $fe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return TN},__asyncDelegator:Nfe,__asyncGenerator:xfe,__asyncValues:Tfe,__await:lw,__awaiter:_fe,__classPrivateFieldGet:kfe,__classPrivateFieldSet:Dfe,__createBinding:Cfe,__decorate:wfe,__exportStar:Sfe,__extends:gfe,__generator:Efe,__importDefault:Ofe,__importStar:Pfe,__makeTemplateObject:Rfe,__metadata:vfe,__param:bfe,__read:_7,__rest:yfe,__spread:Afe,__spreadArrays:Ife,__values:RN},Symbol.toStringTag,{value:"Module"})),MC=x6($fe);var rA={},Ym={},u$;function Mfe(){if(u$)return Ym;u$=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Ym.delay=t,Ym}var Bu={},sA={},Fu={},d$;function Lfe(){return d$||(d$=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.ONE_THOUSAND=Fu.ONE_HUNDRED=void 0,Fu.ONE_HUNDRED=100,Fu.ONE_THOUSAND=1e3),Fu}var iA={},h$;function Ufe(){return h$||(h$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(iA)),iA}var f$;function E7(){return f$||(f$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=MC;e.__exportStar(Lfe(),t),e.__exportStar(Ufe(),t)}(sA)),sA}var p$;function jfe(){if(p$)return Bu;p$=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.fromMiliseconds=Bu.toMiliseconds=void 0;const t=E7();function e(r){return r*t.ONE_THOUSAND}Bu.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Bu.fromMiliseconds=n,Bu}var m$;function Bfe(){return m$||(m$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=MC;e.__exportStar(Mfe(),t),e.__exportStar(jfe(),t)}(rA)),rA}var Hh={},g$;function Ffe(){if(g$)return Hh;g$=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Hh.Watch=t,Hh.default=t,Hh}var oA={},Qm={},y$;function Wfe(){if(y$)return Qm;y$=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.IWatch=void 0;class t{}return Qm.IWatch=t,Qm}var w$;function zfe(){return w$||(w$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),MC.__exportStar(Wfe(),t)}(oA)),oA}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=MC;e.__exportStar(Bfe(),t),e.__exportStar(Ffe(),t),e.__exportStar(zfe(),t),e.__exportStar(E7(),t)})(he);class Ah{}let Hfe=class extends Ah{constructor(e){super()}};const b$=he.FIVE_SECONDS,Ih={pulse:"heartbeat_pulse"};let qfe=class C7 extends Hfe{constructor(e){super(e),this.events=new fo.EventEmitter,this.interval=b$,this.interval=(e==null?void 0:e.interval)||b$}static async init(e){const n=new C7(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),he.toMiliseconds(this.interval))}pulse(){this.events.emit(Ih.pulse)}};const Vfe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Gfe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Kfe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Yfe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Qfe(t);return}return e}function Qfe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ob(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Kfe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Vfe.test(t)||Gfe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Yfe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function xh(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function S7(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=xh(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let aA;function w0(){return aA||(aA=S7("keyval-store","keyval")),aA}function v$(t,e=w0()){return e("readonly",n=>xh(n.get(t)))}function Zfe(t,e,n=w0()){return n("readwrite",r=>(r.put(e,t),xh(r.transaction)))}function Xfe(t,e=w0()){return e("readwrite",n=>(n.delete(t),xh(n.transaction)))}function Jfe(t=w0()){return t("readwrite",e=>(e.clear(),xh(e.transaction)))}function epe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},xh(t.transaction)}function tpe(t=w0()){return t("readonly",e=>{if(e.getAllKeys)return xh(e.getAllKeys());const n=[];return epe(e,r=>n.push(r.key)).then(()=>n)})}const npe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),rpe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function th(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return rpe(t)}catch{return t}}function Wc(t){return typeof t=="string"?t:npe(t)||""}function spe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var ipe=ope;function ope(t,e,n){var r=n&&n.stringify||spe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const _$=ipe;var pf=Ma;const uw=gpe().console||{},ape={mapHttpRequest:kb,mapHttpResponse:kb,wrapRequestSerializer:cA,wrapResponseSerializer:cA,wrapErrorSerializer:cA,req:kb,res:kb,err:hpe};function cpe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ma(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||uw;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=cpe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=dw),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:fpe(t)};c.levels=Ma.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=dw,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=PN());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,qh(l,c,"error","log"),qh(l,c,"fatal","error"),qh(l,c,"warn","error"),qh(l,c,"info","log"),qh(l,c,"debug","log"),qh(l,c,"trace","log")}function f(p,m){if(!p)throw new Error("missing bindings for child Pino");m=m||{},s&&p.serializers&&(m.serializers=p.serializers);const w=m.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,LC([p],b,y,this._stdErrSerialize)}function _(E){this._childLevel=(E._childLevel|0)+1,this.error=Vh(E,p,"error"),this.fatal=Vh(E,p,"fatal"),this.warn=Vh(E,p,"warn"),this.info=Vh(E,p,"info"),this.debug=Vh(E,p,"debug"),this.trace=Vh(E,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=PN([].concat(E._logEvent.bindings,p)))}return _.prototype=this,new _(this)}return c}Ma.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ma.stdSerializers=ape;Ma.stdTimeFunctions=Object.assign({},{nullTime:A7,epochTime:I7,unixTime:ppe,isoTime:mpe});function qh(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?dw:s[n]?s[n]:uw[n]||uw[r]||dw,lpe(t,e,n)}function lpe(t,e,n){!t.transmit&&e[n]===dw||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===uw?uw:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&LC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,upe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Ma.levels.values[l],d=Ma.levels.values[n];if(d<u)return;dpe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Ma.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function upe(t,e,n,r){t._serialize&&LC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Ma.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?_$(s.shift(),s):void 0}else typeof i=="string"&&(i=_$(s.shift(),s));return i!==void 0&&(o.msg=i),o}function LC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Ma.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Vh(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function dpe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;LC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=PN(c)}function PN(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function hpe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function fpe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?A7:I7}function kb(){return{}}function cA(t){return t}function dw(){}function A7(){return!1}function I7(){return Date.now()}function ppe(){return Math.round(Date.now()/1e3)}function mpe(){return new Date(Date.now()).toISOString()}function gpe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const b0=hh(pf),ype={level:"info"},v0="custom_context",RO=1e3*1024;let wpe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},E$=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new wpe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},x7=class{constructor(e,n=RO){this.level=e??"error",this.levelValue=pf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new E$(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===pf.levels.values.error?console.error(e):n===pf.levels.values.warn?console.warn(e):n===pf.levels.values.debug?console.debug(e):n===pf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Wc({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new E$(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Wc({extraMetadata:e})),new Blob(n,{type:"application/json"})}},bpe=class{constructor(e,n=RO){this.baseChunkLogger=new x7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},vpe=class{constructor(e,n=RO){this.baseChunkLogger=new x7(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var _pe=Object.defineProperty,Epe=Object.defineProperties,Cpe=Object.getOwnPropertyDescriptors,C$=Object.getOwnPropertySymbols,Spe=Object.prototype.hasOwnProperty,Ape=Object.prototype.propertyIsEnumerable,S$=(t,e,n)=>e in t?_pe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q_=(t,e)=>{for(var n in e||(e={}))Spe.call(e,n)&&S$(t,n,e[n]);if(C$)for(var n of C$(e))Ape.call(e,n)&&S$(t,n,e[n]);return t},V_=(t,e)=>Epe(t,Cpe(e));function Nh(t){return V_(q_({},t),{level:(t==null?void 0:t.level)||ype.level})}function Ipe(t,e=v0){return t[e]||""}function xpe(t,e,n=v0){return t[n]=e,t}function oi(t,e=v0){let n="";return typeof t.bindings>"u"?n=Ipe(t,e):n=t.bindings().context||"",n}function Npe(t,e,n=v0){const r=oi(t,n);return r.trim()?`${r}/${e}`:e}function qr(t,e,n=v0){const r=Npe(t,e,n),s=t.child({context:r});return xpe(s,r,n)}function Tpe(t){var e,n;const r=new bpe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:b0(V_(q_({},t.opts),{level:"trace",browser:V_(q_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Rpe(t){var e;const n=new vpe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:b0(V_(q_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function UC(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Tpe(t):Rpe(t)}function Ppe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function N7(t,...e){if(!Ppe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function A$(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ope(t,e){N7(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Gh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lA=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function kpe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function T7(t){return typeof t=="string"&&(t=kpe(t)),N7(t),t}let Dpe=class{clone(){return this._cloneInto()}};function $pe(t){const e=r=>t().update(T7(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function R7(t=32){if(Gh&&typeof Gh.getRandomValues=="function")return Gh.getRandomValues(new Uint8Array(t));if(Gh&&typeof Gh.randomBytes=="function")return Gh.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Mpe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Lpe=class extends Dpe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=lA(this.buffer)}update(e){A$(this);const{view:n,buffer:r,blockLen:s}=this;e=T7(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=lA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){A$(this),Ope(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Mpe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=lA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Db=BigInt(2**32-1),ON=BigInt(32);function P7(t,e=!1){return e?{h:Number(t&Db),l:Number(t>>ON&Db)}:{h:Number(t>>ON&Db)|0,l:Number(t&Db)|0}}function Upe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=P7(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const jpe=(t,e)=>BigInt(t>>>0)<<ON|BigInt(e>>>0),Bpe=(t,e,n)=>t>>>n,Fpe=(t,e,n)=>t<<32-n|e>>>n,Wpe=(t,e,n)=>t>>>n|e<<32-n,zpe=(t,e,n)=>t<<32-n|e>>>n,Hpe=(t,e,n)=>t<<64-n|e>>>n-32,qpe=(t,e,n)=>t>>>n-32|e<<64-n,Vpe=(t,e)=>e,Gpe=(t,e)=>t,Kpe=(t,e,n)=>t<<n|e>>>32-n,Ype=(t,e,n)=>e<<n|t>>>32-n,Qpe=(t,e,n)=>e<<n-32|t>>>64-n,Zpe=(t,e,n)=>t<<n-32|e>>>64-n;function Xpe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Jpe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),eme=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,tme=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),nme=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,rme=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),sme=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,vt={fromBig:P7,split:Upe,toBig:jpe,shrSH:Bpe,shrSL:Fpe,rotrSH:Wpe,rotrSL:zpe,rotrBH:Hpe,rotrBL:qpe,rotr32H:Vpe,rotr32L:Gpe,rotlSH:Kpe,rotlSL:Ype,rotlBH:Qpe,rotlBL:Zpe,add:Xpe,add3L:Jpe,add3H:eme,add4L:tme,add4H:nme,add5H:sme,add5L:rme},[ime,ome]=vt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),cl=new Uint32Array(80),ll=new Uint32Array(80);let ame=class extends Lpe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:m,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,m,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=w|0}process(e,n){for(let _=0;_<16;_++,n+=4)cl[_]=e.getUint32(n),ll[_]=e.getUint32(n+=4);for(let _=16;_<80;_++){const E=cl[_-15]|0,C=ll[_-15]|0,I=vt.rotrSH(E,C,1)^vt.rotrSH(E,C,8)^vt.shrSH(E,C,7),A=vt.rotrSL(E,C,1)^vt.rotrSL(E,C,8)^vt.shrSL(E,C,7),x=cl[_-2]|0,S=ll[_-2]|0,k=vt.rotrSH(x,S,19)^vt.rotrBH(x,S,61)^vt.shrSH(x,S,6),P=vt.rotrSL(x,S,19)^vt.rotrBL(x,S,61)^vt.shrSL(x,S,6),M=vt.add4L(A,P,ll[_-7],ll[_-16]),W=vt.add4H(M,I,k,cl[_-7],cl[_-16]);cl[_]=W|0,ll[_]=M|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:m,Gl:w,Hh:y,Hl:b}=this;for(let _=0;_<80;_++){const E=vt.rotrSH(d,h,14)^vt.rotrSH(d,h,18)^vt.rotrBH(d,h,41),C=vt.rotrSL(d,h,14)^vt.rotrSL(d,h,18)^vt.rotrBL(d,h,41),I=d&f^~d&m,A=h&p^~h&w,x=vt.add5L(b,C,A,ome[_],ll[_]),S=vt.add5H(x,y,E,I,ime[_],cl[_]),k=x|0,P=vt.rotrSH(r,s,28)^vt.rotrBH(r,s,34)^vt.rotrBH(r,s,39),M=vt.rotrSL(r,s,28)^vt.rotrBL(r,s,34)^vt.rotrBL(r,s,39),W=r&i^r&a^i&a,U=s&o^s&c^o&c;y=m|0,b=w|0,m=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=vt.add(l|0,u|0,S|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const N=vt.add3L(k,M,U);r=vt.add3H(N,S,P,W),s=N|0}({h:r,l:s}=vt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=vt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=vt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=vt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=vt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=vt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:w}=vt.add(this.Gh|0,this.Gl|0,m|0,w|0),{h:y,l:b}=vt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,m,w,y,b)}roundClean(){cl.fill(0),ll.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const cme=$pe(()=>new ame);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const PO=BigInt(0),O7=BigInt(1),lme=BigInt(2);function OO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kO(t){if(!OO(t))throw new Error("Uint8Array expected")}function uA(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const ume=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function DO(t){kO(t);let e="";for(let n=0;n<t.length;n++)e+=ume[t[n]];return e}function k7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?PO:BigInt("0x"+t)}const rc={_0:48,_9:57,A:65,F:70,a:97,f:102};function I$(t){if(t>=rc._0&&t<=rc._9)return t-rc._0;if(t>=rc.A&&t<=rc.F)return t-(rc.A-10);if(t>=rc.a&&t<=rc.f)return t-(rc.a-10)}function D7(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=I$(t.charCodeAt(i)),a=I$(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function dme(t){return k7(DO(t))}function Av(t){return kO(t),k7(DO(Uint8Array.from(t).reverse()))}function $7(t,e){return D7(t.toString(16).padStart(e*2,"0"))}function kN(t,e){return $7(t,e).reverse()}function sc(t,e,n){let r;if(typeof e=="string")try{r=D7(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(OO(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function x$(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kO(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const dA=t=>typeof t=="bigint"&&PO<=t;function hme(t,e,n){return dA(t)&&dA(e)&&dA(n)&&e<=t&&t<n}function Zm(t,e,n,r){if(!hme(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function fme(t){let e;for(e=0;t>PO;t>>=O7,e+=1);return e}const pme=t=>(lme<<BigInt(t-1))-O7,mme={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||OO(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $O(t,e,n={}){const r=(s,i,o)=>{const a=mme[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function N$(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const xr=BigInt(0),Zn=BigInt(1),rd=BigInt(2),gme=BigInt(3),DN=BigInt(4),T$=BigInt(5),R$=BigInt(8);function cr(t,e){const n=t%e;return n>=xr?n:e+n}function yme(t,e,n){if(e<xr)throw new Error("invalid exponent, negatives unsupported");if(n<=xr)throw new Error("invalid modulus");if(n===Zn)return xr;let r=Zn;for(;e>xr;)e&Zn&&(r=r*t%n),t=t*t%n,e>>=Zn;return r}function aa(t,e,n){let r=t;for(;e-- >xr;)r*=r,r%=n;return r}function P$(t,e){if(t===xr)throw new Error("invert: expected non-zero number");if(e<=xr)throw new Error("invert: expected positive modulus, got "+e);let n=cr(t,e),r=e,s=xr,i=Zn;for(;n!==xr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Zn)throw new Error("invert: does not exist");return cr(s,e)}function wme(t){const e=(t-Zn)/rd;let n,r,s;for(n=t-Zn,r=0;n%rd===xr;n/=rd,r++);for(s=rd;s<t&&yme(s,e,t)!==t-Zn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Zn)/DN;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Zn)/rd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Zn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function bme(t){if(t%DN===gme){const e=(t+Zn)/DN;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%R$===T$){const e=(t-T$)/R$;return function(n,r){const s=n.mul(r,rd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,rd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return wme(t)}const vme=(t,e)=>(cr(t,e)&Zn)===Zn,_me=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Eme(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=_me.reduce((r,s)=>(r[s]="function",r),e);return $O(t,n)}function Cme(t,e,n){if(n<xr)throw new Error("invalid exponent, negatives unsupported");if(n===xr)return t.ONE;if(n===Zn)return e;let r=t.ONE,s=e;for(;n>xr;)n&Zn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Zn;return r}function Sme(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function M7(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function L7(t,e,n=!1,r={}){if(t<=xr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=M7(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:pme(s),ZERO:xr,ONE:Zn,create:c=>cr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return xr<=c&&c<t},is0:c=>c===xr,isOdd:c=>(c&Zn)===Zn,neg:c=>cr(-c,t),eql:(c,l)=>c===l,sqr:c=>cr(c*c,t),add:(c,l)=>cr(c+l,t),sub:(c,l)=>cr(c-l,t),mul:(c,l)=>cr(c*l,t),pow:(c,l)=>Cme(a,c,l),div:(c,l)=>cr(c*P$(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>P$(c,t),sqrt:r.sqrt||(c=>(o||(o=bme(t)),o(a,c))),invertBatch:c=>Sme(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?kN(c,i):$7(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Av(c):dme(c)}});return Object.freeze(a)}const O$=BigInt(0),$b=BigInt(1);function hA(t,e){const n=e.negate();return t?n:e}function U7(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function fA(t,e){U7(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Ame(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Ime(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const pA=new WeakMap,j7=new WeakMap;function mA(t){return j7.get(t)||1}function xme(t,e){return{constTimeNegate:hA,hasPrecomputes(n){return mA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>O$;)r&$b&&(s=s.add(i)),i=i.double(),r>>=$b;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=fA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=fA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=$b);const m=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(hA(y,r[m])):a=a.add(hA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=fA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===O$)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=$b),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=pA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&pA.set(r,s(i))),i},wNAFCached(n,r,s){const i=mA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=mA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){U7(r,e),j7.set(n,r),pA.delete(n)}}}function Nme(t,e,n,r){if(Ame(n,t),Ime(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=fme(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],m=Number(p>>BigInt(d)&BigInt(a));c[m]=c[m].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Tme(t){return Eme(t.Fp),$O(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...M7(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const vo=BigInt(0),Ps=BigInt(1),Mb=BigInt(2),Rme=BigInt(8),Pme={zip215:!0};function Ome(t){const e=Tme(t);return $O(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function kme(t){const e=Ome(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Mb<<BigInt(a*8)-Ps,u=n.create,d=L7(e.n,e.nBitLength),h=e.uvRatio||((N,T)=>{try{return{isValid:!0,value:n.sqrt(N*n.inv(T))}}catch{return{isValid:!1,value:vo}}}),f=e.adjustScalarBytes||(N=>N),p=e.domain||((N,T,$)=>{if(uA("phflag",$),T.length||$)throw new Error("Contexts/pre-hash are not supported");return N});function m(N,T){Zm("coordinate "+N,T,vo,l)}function w(N){if(!(N instanceof _))throw new Error("ExtendedPoint expected")}const y=N$((N,T)=>{const{ex:$,ey:R,ez:D}=N,j=N.is0();T==null&&(T=j?Rme:n.inv(D));const z=u($*T),Q=u(R*T),te=u(D*T);if(j)return{x:vo,y:Ps};if(te!==Ps)throw new Error("invZ was invalid");return{x:z,y:Q}}),b=N$(N=>{const{a:T,d:$}=e;if(N.is0())throw new Error("bad point: ZERO");const{ex:R,ey:D,ez:j,et:z}=N,Q=u(R*R),te=u(D*D),Z=u(j*j),X=u(Z*Z),ie=u(Q*T),Ke=u(Z*u(ie+te)),it=u(X+u($*u(Q*te)));if(Ke!==it)throw new Error("bad point: equation left != right (1)");const Be=u(R*D),yt=u(j*z);if(Be!==yt)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(T,$,R,D){this.ex=T,this.ey=$,this.ez=R,this.et=D,m("x",T),m("y",$),m("z",R),m("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof _)throw new Error("extended point not allowed");const{x:$,y:R}=T||{};return m("x",$),m("y",R),new _($,R,Ps,u($*R))}static normalizeZ(T){const $=n.invertBatch(T.map(R=>R.ez));return T.map((R,D)=>R.toAffine($[D])).map(_.fromAffine)}static msm(T,$){return Nme(_,d,T,$)}_setWindowSize(T){I.setWindowSize(this,T)}assertValidity(){b(this)}equals(T){w(T);const{ex:$,ey:R,ez:D}=this,{ex:j,ey:z,ez:Q}=T,te=u($*Q),Z=u(j*D),X=u(R*Q),ie=u(z*D);return te===Z&&X===ie}is0(){return this.equals(_.ZERO)}negate(){return new _(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:T}=e,{ex:$,ey:R,ez:D}=this,j=u($*$),z=u(R*R),Q=u(Mb*u(D*D)),te=u(T*j),Z=$+R,X=u(u(Z*Z)-j-z),ie=te+z,Ke=ie-Q,it=te-z,Be=u(X*Ke),yt=u(ie*it),Ct=u(X*it),Kn=u(Ke*ie);return new _(Be,yt,Kn,Ct)}add(T){w(T);const{a:$,d:R}=e,{ex:D,ey:j,ez:z,et:Q}=this,{ex:te,ey:Z,ez:X,et:ie}=T;if($===BigInt(-1)){const $e=u((j-D)*(Z+te)),Xe=u((j+D)*(Z-te)),rt=u(Xe-$e);if(rt===vo)return this.double();const fn=u(z*Mb*ie),Un=u(Q*Mb*X),Tn=Un+fn,$t=Xe+$e,Yn=Un-fn,Yr=u(Tn*rt),xs=u($t*Yn),ta=u(Tn*Yn),Oh=u(rt*$t);return new _(Yr,xs,Oh,ta)}const Ke=u(D*te),it=u(j*Z),Be=u(Q*R*ie),yt=u(z*X),Ct=u((D+j)*(te+Z)-Ke-it),Kn=yt-Be,G=yt+Be,J=u(it-$*Ke),de=u(Ct*Kn),oe=u(G*J),le=u(Ct*J),Ye=u(Kn*G);return new _(de,oe,Ye,le)}subtract(T){return this.add(T.negate())}wNAF(T){return I.wNAFCached(this,T,_.normalizeZ)}multiply(T){const $=T;Zm("scalar",$,Ps,r);const{p:R,f:D}=this.wNAF($);return _.normalizeZ([R,D])[0]}multiplyUnsafe(T,$=_.ZERO){const R=T;return Zm("scalar",R,vo,r),R===vo?C:this.is0()||R===Ps?this:I.wNAFCachedUnsafe(this,R,_.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(T){return y(this,T)}clearCofactor(){const{h:T}=e;return T===Ps?this:this.multiplyUnsafe(T)}static fromHex(T,$=!1){const{d:R,a:D}=e,j=n.BYTES;T=sc("pointHex",T,j),uA("zip215",$);const z=T.slice(),Q=T[j-1];z[j-1]=Q&-129;const te=Av(z),Z=$?l:n.ORDER;Zm("pointHex.y",te,vo,Z);const X=u(te*te),ie=u(X-Ps),Ke=u(R*X-D);let{isValid:it,value:Be}=h(ie,Ke);if(!it)throw new Error("Point.fromHex: invalid y coordinate");const yt=(Be&Ps)===Ps,Ct=(Q&128)!==0;if(!$&&Be===vo&&Ct)throw new Error("Point.fromHex: x=0 and x_0=1");return Ct!==yt&&(Be=u(-Be)),_.fromAffine({x:Be,y:te})}static fromPrivateKey(T){return S(T).point}toRawBytes(){const{x:T,y:$}=this.toAffine(),R=kN($,n.BYTES);return R[R.length-1]|=T&Ps?128:0,R}toHex(){return DO(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,Ps,u(e.Gx*e.Gy)),_.ZERO=new _(vo,Ps,Ps,vo);const{BASE:E,ZERO:C}=_,I=xme(_,a*8);function A(N){return cr(N,r)}function x(N){return A(Av(N))}function S(N){const T=n.BYTES;N=sc("private key",N,T);const $=sc("hashed private key",i(N),2*T),R=f($.slice(0,T)),D=$.slice(T,2*T),j=x(R),z=E.multiply(j),Q=z.toRawBytes();return{head:R,prefix:D,scalar:j,point:z,pointBytes:Q}}function k(N){return S(N).pointBytes}function P(N=new Uint8Array,...T){const $=x$(...T);return x(i(p($,sc("context",N),!!s)))}function M(N,T,$={}){N=sc("message",N),s&&(N=s(N));const{prefix:R,scalar:D,pointBytes:j}=S(T),z=P($.context,R,N),Q=E.multiply(z).toRawBytes(),te=P($.context,Q,j,N),Z=A(z+te*D);Zm("signature.s",Z,vo,r);const X=x$(Q,kN(Z,n.BYTES));return sc("result",X,n.BYTES*2)}const W=Pme;function U(N,T,$,R=W){const{context:D,zip215:j}=R,z=n.BYTES;N=sc("signature",N,2*z),T=sc("message",T),$=sc("publicKey",$,z),j!==void 0&&uA("zip215",j),s&&(T=s(T));const Q=Av(N.slice(z,2*z));let te,Z,X;try{te=_.fromHex($,j),Z=_.fromHex(N.slice(0,z),j),X=E.multiplyUnsafe(Q)}catch{return!1}if(!j&&te.isSmallOrder())return!1;const ie=P(D,Z.toRawBytes(),te.toRawBytes(),T);return Z.add(te.multiplyUnsafe(ie)).subtract(X).clearCofactor().equals(_.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:M,verify:U,ExtendedPoint:_,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(N=8,T=_.BASE){return T._setWindowSize(N),T.multiply(BigInt(3)),T}}}}BigInt(0),BigInt(1);const MO=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),k$=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Dme=BigInt(1),D$=BigInt(2);BigInt(3);const $me=BigInt(5),Mme=BigInt(8);function Lme(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=MO,o=t*t%i*t%i,a=aa(o,D$,i)*o%i,c=aa(a,Dme,i)*t%i,l=aa(c,$me,i)*c%i,u=aa(l,e,i)*l%i,d=aa(u,n,i)*u%i,h=aa(d,r,i)*d%i,f=aa(h,s,i)*h%i,p=aa(f,s,i)*h%i,m=aa(p,e,i)*l%i;return{pow_p_5_8:aa(m,D$,i)*t%i,b2:o}}function Ume(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function jme(t,e){const n=MO,r=cr(e*e*e,n),s=cr(r*r*e,n),i=Lme(t*s).pow_p_5_8;let o=cr(t*r*i,n);const a=cr(e*o*o,n),c=o,l=cr(o*k$,n),u=a===t,d=a===cr(-t,n),h=a===cr(-t*k$,n);return u&&(o=c),(d||h)&&(o=l),vme(o,n)&&(o=cr(-o,n)),{isValid:u||d,value:o}}const Bme=L7(MO,void 0,!0),Fme={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Bme,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Mme,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:cme,randomBytes:R7,adjustScalarBytes:Ume,uvRatio:jme},B7=kme(Fme),Wme="EdDSA",zme="JWT",G_=".",jC="base64url",F7="utf8",W7="utf8",Hme=":",qme="did",Vme="key",$$="base58btc",Gme="z",Kme="K36",Yme=32;function LO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function z7(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?LO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function H7(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=z7(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return LO(n)}function Qme(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var _=(b-y)*u+1>>>0,E=new Uint8Array(_);y!==b;){for(var C=p[y],I=0,A=_-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*E[A]>>>0,E[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=_-w;x!==_&&E[x]===0;)x++;for(var S=c.repeat(m);x<_;++x)S+=t.charAt(E[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var w=0,y=0;p[m]===c;)w++,m++;for(var b=(p.length-m)*l+1>>>0,_=new Uint8Array(b);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var C=0,I=b-1;(E!==0||C<y)&&I!==-1;I--,C++)E+=a*_[I]>>>0,_[I]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=C,m++}if(p[m]!==" "){for(var A=b-y;A!==b&&_[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=_[A++];return x}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Zme=Qme,Xme=Zme;const q7=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Jme=t=>new TextEncoder().encode(t),ege=t=>new TextDecoder().decode(t);let tge=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},nge=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return V7(this,e)}},rge=class{constructor(e){this.decoders=e}or(e){return V7(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const V7=(t,e)=>new rge({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let sge=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new tge(e,n,r),this.decoder=new nge(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const BC=({name:t,prefix:e,encode:n,decode:r})=>new sge(t,e,n,r),_0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Xme(n,e);return BC({prefix:t,name:e,encode:r,decode:i=>q7(s(i))})},ige=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},oge=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Vr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>BC({prefix:e,name:t,encode(s){return oge(s,r,n)},decode(s){return ige(s,r,n,t)}}),age=BC({prefix:"\0",name:"identity",encode:t=>ege(t),decode:t=>Jme(t)});var cge=Object.freeze({__proto__:null,identity:age});const lge=Vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var uge=Object.freeze({__proto__:null,base2:lge});const dge=Vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hge=Object.freeze({__proto__:null,base8:dge});const fge=_0({prefix:"9",name:"base10",alphabet:"0123456789"});var pge=Object.freeze({__proto__:null,base10:fge});const mge=Vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gge=Vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yge=Object.freeze({__proto__:null,base16:mge,base16upper:gge});const wge=Vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),bge=Vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vge=Vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_ge=Vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ege=Vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Cge=Vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Sge=Vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Age=Vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ige=Vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var xge=Object.freeze({__proto__:null,base32:wge,base32upper:bge,base32pad:vge,base32padupper:_ge,base32hex:Ege,base32hexupper:Cge,base32hexpad:Sge,base32hexpadupper:Age,base32z:Ige});const Nge=_0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Tge=_0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Rge=Object.freeze({__proto__:null,base36:Nge,base36upper:Tge});const Pge=_0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Oge=_0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kge=Object.freeze({__proto__:null,base58btc:Pge,base58flickr:Oge});const Dge=Vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$ge=Vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Mge=Vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Lge=Vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Uge=Object.freeze({__proto__:null,base64:Dge,base64pad:$ge,base64url:Mge,base64urlpad:Lge});const G7=Array.from(""),jge=G7.reduce((t,e,n)=>(t[n]=e,t),[]),Bge=G7.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Fge(t){return t.reduce((e,n)=>(e+=jge[n],e),"")}function Wge(t){const e=[];for(const n of t){const r=Bge[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const zge=BC({prefix:"",name:"base256emoji",encode:Fge,decode:Wge});var Hge=Object.freeze({__proto__:null,base256emoji:zge}),qge=K7,M$=128,Vge=-128,Gge=Math.pow(2,31);function K7(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Gge;)e[n++]=t&255|M$,t/=128;for(;t&Vge;)e[n++]=t&255|M$,t>>>=7;return e[n]=t|0,K7.bytes=n-r+1,e}var Kge=$N,Yge=128,L$=127;function $N(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw $N.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&L$)<<s:(o&L$)*Math.pow(2,s),s+=7}while(o>=Yge);return $N.bytes=i-r,n}var Qge=Math.pow(2,7),Zge=Math.pow(2,14),Xge=Math.pow(2,21),Jge=Math.pow(2,28),eye=Math.pow(2,35),tye=Math.pow(2,42),nye=Math.pow(2,49),rye=Math.pow(2,56),sye=Math.pow(2,63),iye=function(t){return t<Qge?1:t<Zge?2:t<Xge?3:t<Jge?4:t<eye?5:t<tye?6:t<nye?7:t<rye?8:t<sye?9:10},oye={encode:qge,decode:Kge,encodingLength:iye},Y7=oye;const U$=(t,e,n=0)=>(Y7.encode(t,e,n),e),j$=t=>Y7.encodingLength(t),MN=(t,e)=>{const n=e.byteLength,r=j$(t),s=r+j$(n),i=new Uint8Array(s+n);return U$(t,i,0),U$(n,i,r),i.set(e,s),new aye(t,n,e,i)};let aye=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const Q7=({name:t,code:e,encode:n})=>new cye(t,e,n);let cye=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?MN(this.code,n):n.then(r=>MN(this.code,r))}else throw Error("Unknown type, must be binary type")}};const Z7=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),lye=Q7({name:"sha2-256",code:18,encode:Z7("SHA-256")}),uye=Q7({name:"sha2-512",code:19,encode:Z7("SHA-512")});var dye=Object.freeze({__proto__:null,sha256:lye,sha512:uye});const X7=0,hye="identity",J7=q7,fye=t=>MN(X7,J7(t)),pye={code:X7,name:hye,encode:J7,digest:fye};var mye=Object.freeze({__proto__:null,identity:pye});new TextEncoder,new TextDecoder;const B$={...cge,...uge,...hge,...pge,...yge,...xge,...Rge,...kge,...Uge,...Hge};({...dye,...mye});function eW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const F$=eW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),gA=eW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=z7(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),tW={utf8:F$,"utf-8":F$,hex:B$.base16,latin1:gA,ascii:gA,binary:gA,...B$};function FC(t,e="utf8"){const n=tW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function fm(t,e="utf8"){const n=tW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?LO(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function W$(t){return th(FC(fm(t,jC),F7))}function K_(t){return FC(fm(Wc(t),F7),jC)}function nW(t){const e=fm(Kme,$$),n=Gme+FC(H7([e,t]),$$);return[qme,Vme,n].join(Hme)}function gye(t){return FC(t,jC)}function yye(t){return fm(t,jC)}function wye(t){return fm([K_(t.header),K_(t.payload)].join(G_),W7)}function bye(t){return[K_(t.header),K_(t.payload),gye(t.signature)].join(G_)}function LN(t){const e=t.split(G_),n=W$(e[0]),r=W$(e[1]),s=yye(e[2]),i=fm(e.slice(0,2).join(G_),W7);return{header:n,payload:r,signature:s,data:i}}function z$(t=R7(Yme)){const e=B7.getPublicKey(t);return{secretKey:H7([t,e]),publicKey:e}}async function vye(t,e,n,r,s=he.fromMiliseconds(Date.now())){const i={alg:Wme,typ:zme},o=nW(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=wye({header:i,payload:c}),u=B7.sign(l,r.secretKey.slice(0,32));return bye({header:i,payload:c,signature:u})}var H$=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},_ye=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Eye=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Cye=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),Sye=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Aye=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Iye=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,xye=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,q$=3,Nye=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Iye]],V$=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Tye(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Aye:typeof navigator<"u"?Pye(navigator.userAgent):kye()}function Rye(t){return t!==""&&Nye.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Pye(t){var e=Rye(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Sye;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<q$&&(s=H$(H$([],s,!0),Dye(q$-s.length),!0)):s=[];var i=s.join("."),o=Oye(t),a=xye.exec(t);return a&&a[1]?new Cye(n,i,o,a[1]):new _ye(n,i,o)}function Oye(t){for(var e=0,n=V$.length;e<n;e++){var r=V$[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function kye(){var t=typeof process<"u"&&process.version;return t?new Eye(process.version.slice(1)):null}function Dye(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.getLocalStorage=yn.getLocalStorageOrThrow=yn.getCrypto=yn.getCryptoOrThrow=rW=yn.getLocation=yn.getLocationOrThrow=UO=yn.getNavigator=yn.getNavigatorOrThrow=nh=yn.getDocument=yn.getDocumentOrThrow=yn.getFromWindowOrThrow=yn.getFromWindow=void 0;function Th(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}yn.getFromWindow=Th;function pm(t){const e=Th(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}yn.getFromWindowOrThrow=pm;function $ye(){return pm("document")}yn.getDocumentOrThrow=$ye;function Mye(){return Th("document")}var nh=yn.getDocument=Mye;function Lye(){return pm("navigator")}yn.getNavigatorOrThrow=Lye;function Uye(){return Th("navigator")}var UO=yn.getNavigator=Uye;function jye(){return pm("location")}yn.getLocationOrThrow=jye;function Bye(){return Th("location")}var rW=yn.getLocation=Bye;function Fye(){return pm("crypto")}yn.getCryptoOrThrow=Fye;function Wye(){return Th("crypto")}yn.getCrypto=Wye;function zye(){return pm("localStorage")}yn.getLocalStorageOrThrow=zye;function Hye(){return Th("localStorage")}yn.getLocalStorage=Hye;var jO={};Object.defineProperty(jO,"__esModule",{value:!0});var sW=jO.getWindowMetadata=void 0;const G$=yn;function qye(){let t,e;try{t=G$.getDocumentOrThrow(),e=G$.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],m=p.getAttribute("rel");if(m&&m.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const _=b.join("/");y+=_+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],m=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(m.length&&m){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}sW=jO.getWindowMetadata=qye;function Vye(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,m=new Uint8Array(p);for(;h!==f;){let b=l[h],_=0;for(let E=p-1;(b!==0||_<d)&&E!==-1;E--,_++)b+=256*m[E]>>>0,m[E]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=_,h++}let w=p-d;for(;w!==p&&m[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(m[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let _=e[b];if(_===255)return;let E=0;for(let C=f-1;(_!==0||E<h)&&C!==-1;C--,E++)_+=n*p[C]>>>0,p[C]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");h=E,u++}let m=f-h;for(;m!==f&&p[m]===0;)m++;const w=new Uint8Array(d+(f-m));let y=d;for(;m!==f;)w[y++]=p[m++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Gye="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const iW=Vye(Gye);function oW(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function ty(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=oW(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Kye(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var _=(b-y)*u+1>>>0,E=new Uint8Array(_);y!==b;){for(var C=p[y],I=0,A=_-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*E[A]>>>0,E[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=_-w;x!==_&&E[x]===0;)x++;for(var S=c.repeat(m);x<_;++x)S+=t.charAt(E[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var w=0,y=0;p[m]===c;)w++,m++;for(var b=(p.length-m)*l+1>>>0,_=new Uint8Array(b);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var C=0,I=b-1;(E!==0||C<y)&&I!==-1;I--,C++)E+=a*_[I]>>>0,_[I]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=C,m++}if(p[m]!==" "){for(var A=b-y;A!==b&&_[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=_[A++];return x}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Yye=Kye,Qye=Yye;const Zye=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Xye=t=>new TextEncoder().encode(t),Jye=t=>new TextDecoder().decode(t);class ewe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class twe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return aW(this,e)}}class nwe{constructor(e){this.decoders=e}or(e){return aW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const aW=(t,e)=>new nwe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class rwe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new ewe(e,n,r),this.decoder=new twe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const WC=({name:t,prefix:e,encode:n,decode:r})=>new rwe(t,e,n,r),E0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Qye(n,e);return WC({prefix:t,name:e,encode:r,decode:i=>Zye(s(i))})},swe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},iwe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Gr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>WC({prefix:e,name:t,encode(s){return iwe(s,r,n)},decode(s){return swe(s,r,n,t)}}),owe=WC({prefix:"\0",name:"identity",encode:t=>Jye(t),decode:t=>Xye(t)}),awe=Object.freeze(Object.defineProperty({__proto__:null,identity:owe},Symbol.toStringTag,{value:"Module"})),cwe=Gr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),lwe=Object.freeze(Object.defineProperty({__proto__:null,base2:cwe},Symbol.toStringTag,{value:"Module"})),uwe=Gr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),dwe=Object.freeze(Object.defineProperty({__proto__:null,base8:uwe},Symbol.toStringTag,{value:"Module"})),hwe=E0({prefix:"9",name:"base10",alphabet:"0123456789"}),fwe=Object.freeze(Object.defineProperty({__proto__:null,base10:hwe},Symbol.toStringTag,{value:"Module"})),pwe=Gr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mwe=Gr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),gwe=Object.freeze(Object.defineProperty({__proto__:null,base16:pwe,base16upper:mwe},Symbol.toStringTag,{value:"Module"})),ywe=Gr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wwe=Gr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bwe=Gr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vwe=Gr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_we=Gr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ewe=Gr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cwe=Gr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Swe=Gr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Awe=Gr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Iwe=Object.freeze(Object.defineProperty({__proto__:null,base32:ywe,base32hex:_we,base32hexpad:Cwe,base32hexpadupper:Swe,base32hexupper:Ewe,base32pad:bwe,base32padupper:vwe,base32upper:wwe,base32z:Awe},Symbol.toStringTag,{value:"Module"})),xwe=E0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Nwe=E0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Twe=Object.freeze(Object.defineProperty({__proto__:null,base36:xwe,base36upper:Nwe},Symbol.toStringTag,{value:"Module"})),Rwe=E0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Pwe=E0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Owe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Rwe,base58flickr:Pwe},Symbol.toStringTag,{value:"Module"})),kwe=Gr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Dwe=Gr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$we=Gr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mwe=Gr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Lwe=Object.freeze(Object.defineProperty({__proto__:null,base64:kwe,base64pad:Dwe,base64url:$we,base64urlpad:Mwe},Symbol.toStringTag,{value:"Module"})),cW=Array.from(""),Uwe=cW.reduce((t,e,n)=>(t[n]=e,t),[]),jwe=cW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Bwe(t){return t.reduce((e,n)=>(e+=Uwe[n],e),"")}function Fwe(t){const e=[];for(const n of t){const r=jwe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Wwe=WC({prefix:"",name:"base256emoji",encode:Bwe,decode:Fwe}),zwe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Wwe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const K$={...awe,...lwe,...dwe,...fwe,...gwe,...Iwe,...Twe,...Owe,...Lwe,...zwe};function lW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Y$=lW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),yA=lW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=oW(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),uW={utf8:Y$,"utf-8":Y$,hex:K$.base16,latin1:yA,ascii:yA,binary:yA,...K$};function to(t,e="utf8"){const n=uW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function ni(t,e="utf8"){const n=uW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Hwe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},qwe="PARSE_ERROR",Vwe="INVALID_REQUEST",Gwe="METHOD_NOT_FOUND",Kwe="INVALID_PARAMS",dW="INTERNAL_ERROR",BO="SERVER_ERROR",Ywe=[-32700,-32600,-32601,-32602,-32603],ny={[qwe]:{code:-32700,message:"Parse error"},[Vwe]:{code:-32600,message:"Invalid Request"},[Gwe]:{code:-32601,message:"Method not found"},[Kwe]:{code:-32602,message:"Invalid params"},[dW]:{code:-32603,message:"Internal error"},[BO]:{code:-32e3,message:"Server error"}},hW=BO;function Qwe(t){return Ywe.includes(t)}function Q$(t){return Object.keys(ny).includes(t)?ny[t]:ny[hW]}function Zwe(t){const e=Object.values(ny).find(n=>n.code===t);return e||ny[hW]}function fW(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var pW={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var UN=function(t,e){return UN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},UN(t,e)};function Xwe(t,e){UN(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jN=function(){return jN=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jN.apply(this,arguments)};function Jwe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function e0e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function t0e(t,e){return function(n,r){e(n,r,t)}}function n0e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function r0e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function s0e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function i0e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function o0e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function BN(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mW(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function a0e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(mW(arguments[e]));return t}function c0e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function hw(t){return this instanceof hw?(this.v=t,this):new hw(t)}function l0e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,m){i.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof hw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function u0e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:hw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function d0e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof BN=="function"?BN(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function h0e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function f0e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p0e(t){return t&&t.__esModule?t:{default:t}}function m0e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function g0e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const y0e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return jN},__asyncDelegator:u0e,__asyncGenerator:l0e,__asyncValues:d0e,__await:hw,__awaiter:r0e,__classPrivateFieldGet:m0e,__classPrivateFieldSet:g0e,__createBinding:i0e,__decorate:e0e,__exportStar:o0e,__extends:Xwe,__generator:s0e,__importDefault:p0e,__importStar:f0e,__makeTemplateObject:h0e,__metadata:n0e,__param:t0e,__read:mW,__rest:Jwe,__spread:a0e,__spreadArrays:c0e,__values:BN},Symbol.toStringTag,{value:"Module"})),w0e=x6(y0e);var ic={},Z$;function b0e(){if(Z$)return ic;Z$=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.isBrowserCryptoAvailable=ic.getSubtleCrypto=ic.getBrowerCrypto=void 0;function t(){return(va==null?void 0:va.crypto)||(va==null?void 0:va.msCrypto)||{}}ic.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}ic.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return ic.isBrowserCryptoAvailable=n,ic}var oc={},X$;function v0e(){if(X$)return oc;X$=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.isBrowser=oc.isNode=oc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}oc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}oc.isNode=e;function n(){return!t()&&!e()}return oc.isBrowser=n,oc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=w0e;e.__exportStar(b0e(),t),e.__exportStar(v0e(),t)})(pW);function ma(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function wd(t=6){return BigInt(ma(t))}function Wl(t,e,n){return{id:n||ma(),jsonrpc:"2.0",method:t,params:e}}function zC(t,e){return{id:t,jsonrpc:"2.0",result:e}}function HC(t,e,n){return{id:t,jsonrpc:"2.0",error:_0e(e)}}function _0e(t,e){return typeof t>"u"?Q$(dW):(typeof t=="string"&&(t=Object.assign(Object.assign({},Q$(BO)),{message:t})),Qwe(t.code)&&(t=Zwe(t.code)),t)}let E0e=class{},C0e=class extends E0e{constructor(){super()}},S0e=class extends C0e{constructor(e){super()}};const A0e="^https?:",I0e="^wss?:";function x0e(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function gW(t,e){const n=x0e(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function J$(t){return gW(t,A0e)}function e5(t){return gW(t,I0e)}function N0e(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function yW(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function FO(t){return yW(t)&&"method"in t}function qC(t){return yW(t)&&(ga(t)||Ki(t))}function ga(t){return"result"in t}function Ki(t){return"error"in t}let po=class extends S0e{constructor(e){super(e),this.events=new fo.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Wl(e.method,e.params||[],e.id||wd().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ki(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),qC(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const T0e=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),R0e=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",t5=t=>t.split("?")[0],n5=10,P0e=T0e();let O0e=class{constructor(e){if(this.url=e,this.events=new fo.EventEmitter,this.registering=!1,!e5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Wc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!e5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=pW.isReactNative()?void 0:{rejectUnauthorized:!N0e(e)},i=new P0e(e,[],s);R0e()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?th(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=HC(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return fW(e,t5(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>n5&&this.events.setMaxListeners(n5)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${t5(this.url)}`));return this.events.emit("register_error",n),n}};var FN={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof va<"u"&&va,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof va<"u"&&va||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(N){return N&&DataView.prototype.isPrototypeOf(N)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(N){return N&&u.indexOf(Object.prototype.toString.call(N))>-1};function h(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function f(N){return typeof N!="string"&&(N=String(N)),N}function p(N){var T={next:function(){var $=N.shift();return{done:$===void 0,value:$}}};return c.iterable&&(T[Symbol.iterator]=function(){return T}),T}function m(N){this.map={},N instanceof m?N.forEach(function(T,$){this.append($,T)},this):Array.isArray(N)?N.forEach(function(T){if(T.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+T.length);this.append(T[0],T[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(T){this.append(T,N[T])},this)}m.prototype.append=function(N,T){N=h(N),T=f(T);var $=this.map[N];this.map[N]=$?$+", "+T:T},m.prototype.delete=function(N){delete this.map[h(N)]},m.prototype.get=function(N){return N=h(N),this.has(N)?this.map[N]:null},m.prototype.has=function(N){return this.map.hasOwnProperty(h(N))},m.prototype.set=function(N,T){this.map[h(N)]=f(T)},m.prototype.forEach=function(N,T){for(var $ in this.map)this.map.hasOwnProperty($)&&N.call(T,this.map[$],$,this)},m.prototype.keys=function(){var N=[];return this.forEach(function(T,$){N.push($)}),p(N)},m.prototype.values=function(){var N=[];return this.forEach(function(T){N.push(T)}),p(N)},m.prototype.entries=function(){var N=[];return this.forEach(function(T,$){N.push([$,T])}),p(N)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function w(N){if(!N._noBody){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}}function y(N){return new Promise(function(T,$){N.onload=function(){T(N.result)},N.onerror=function(){$(N.error)}})}function b(N){var T=new FileReader,$=y(T);return T.readAsArrayBuffer(N),$}function _(N){var T=new FileReader,$=y(T),R=/charset=([A-Za-z0-9_-]+)/.exec(N.type),D=R?R[1]:"utf-8";return T.readAsText(N,D),$}function E(N){for(var T=new Uint8Array(N),$=new Array(T.length),R=0;R<T.length;R++)$[R]=String.fromCharCode(T[R]);return $.join("")}function C(N){if(N.slice)return N.slice(0);var T=new Uint8Array(N.byteLength);return T.set(new Uint8Array(N)),T.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(N){this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:c.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:c.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():c.arrayBuffer&&c.blob&&l(N)?(this._bodyArrayBuffer=C(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||d(N))?this._bodyArrayBuffer=C(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=w(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function x(N){var T=N.toUpperCase();return A.indexOf(T)>-1?T:N}function S(N,T){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var $=T.body;if(N instanceof S){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,T.headers||(this.headers=new m(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!$&&N._bodyInit!=null&&($=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new m(T.headers)),this.method=x(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function k(N){var T=new FormData;return N.trim().split("&").forEach(function($){if($){var R=$.split("="),D=R.shift().replace(/\+/g," "),j=R.join("=").replace(/\+/g," ");T.append(decodeURIComponent(D),decodeURIComponent(j))}}),T}function P(N){var T=new m,$=N.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var D=R.split(":"),j=D.shift().trim();if(j){var z=D.join(":").trim();try{T.append(j,z)}catch(Q){console.warn("Response "+Q.message)}}}),T}I.call(S.prototype);function M(N,T){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new m(T.headers),this.url=T.url||"",this._initBody(N)}I.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},M.error=function(){var N=new M(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var W=[301,302,303,307,308];M.redirect=function(N,T){if(W.indexOf(T)===-1)throw new RangeError("Invalid status code");return new M(null,{status:T,headers:{location:N}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,$){this.message=T,this.name=$;var R=Error(T);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function U(N,T){return new Promise(function($,R){var D=new S(N,T);if(D.signal&&D.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function z(){j.abort()}j.onload=function(){var Z={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&(j.status<200||j.status>599)?Z.status=200:Z.status=j.status,Z.url="responseURL"in j?j.responseURL:Z.headers.get("X-Request-URL");var X="response"in j?j.response:j.responseText;setTimeout(function(){$(new M(X,Z))},0)},j.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function Q(Z){try{return Z===""&&a.location.href?a.location.href:Z}catch{return Z}}if(j.open(D.method,Q(D.url),!0),D.credentials==="include"?j.withCredentials=!0:D.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof m||a.Headers&&T.headers instanceof a.Headers)){var te=[];Object.getOwnPropertyNames(T.headers).forEach(function(Z){te.push(h(Z)),j.setRequestHeader(Z,f(T.headers[Z]))}),D.headers.forEach(function(Z,X){te.indexOf(X)===-1&&j.setRequestHeader(X,Z)})}else D.headers.forEach(function(Z,X){j.setRequestHeader(X,Z)});D.signal&&(D.signal.addEventListener("abort",z),j.onreadystatechange=function(){j.readyState===4&&D.signal.removeEventListener("abort",z)}),j.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return U.polyfill=!0,a.fetch||(a.fetch=U,a.Headers=m,a.Request=S,a.Response=M),o.Headers=m,o.Request=S,o.Response=M,o.fetch=U,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(FN,FN.exports);var k0e=FN.exports;const r5=hh(k0e);var D0e=Object.defineProperty,$0e=Object.defineProperties,M0e=Object.getOwnPropertyDescriptors,s5=Object.getOwnPropertySymbols,L0e=Object.prototype.hasOwnProperty,U0e=Object.prototype.propertyIsEnumerable,i5=(t,e,n)=>e in t?D0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o5=(t,e)=>{for(var n in e||(e={}))L0e.call(e,n)&&i5(t,n,e[n]);if(s5)for(var n of s5(e))U0e.call(e,n)&&i5(t,n,e[n]);return t},a5=(t,e)=>$0e(t,M0e(e));const j0e={Accept:"application/json","Content-Type":"application/json"},B0e="POST",c5={headers:j0e,method:B0e},l5=10;let ea=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new fo.EventEmitter,this.isAvailable=!1,this.registering=!1,!J$(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Wc(e),r=await(await r5(this.url,a5(o5({},c5),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!J$(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Wc({id:1,jsonrpc:"2.0",method:"test",params:[]});await r5(e,a5(o5({},c5),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?th(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=HC(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return fW(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>l5&&this.events.setMaxListeners(l5)}};const ry={getSIWX(){return ae.state.siwx},async initializeIfEnabled(){var i;const t=ae.state.siwx,e=L.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(L.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Ir.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Pn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Ze._getClient())==null?void 0:i.disconnect().catch(console.error)),_t.reset("Connect"),Lo.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ae.state.siwx,e=je.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork(),r=Ze._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ce.getConnectorId(n.chainNamespace)===Se.CONNECTOR_ID.AUTH&&_t.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Ir.close(),Pn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Ir.state.open||_t.state.view==="ApproveTransaction")&&await Ir.open({view:"SIWXSignMessage"}),i.isSmartAccount?Lo.showError("This application might not support Smart Accounts"):Lo.showError("Signature declined"),Pn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await Ze.disconnect():Ir.close(),_t.reset("Connect"),Pn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ae.state.siwx,e=je.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=_t.state.view==="ApproveTransaction",r=_t.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=ry.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=L.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Lo.showLoading("Authenticating...",{autoClose:!1}),Re.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Pn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:ry.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Pn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:ry.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Lo.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=L.state.activeChain;return{network:((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Re.state.preferredAccountTypes)==null?void 0:n[t])===Wr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function Lb(t,e){return Ce.getConnectorId(t)===e}function F0e(t){const e=Array.from(L.state.chains.keys());let n=[];return t?(n.push([t,L.state.chains.get(t)]),Lb(t,Se.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Lb(r,Se.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,L.state.chains.get(r)])}):Lb(t,Se.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Lb(r,Se.CONNECTOR_ID.AUTH)&&n.push([r,L.state.chains.get(r)])})):n=Array.from(L.state.chains.entries()),n}const zs={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Y_={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Se.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Se.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Se.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Se.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Se.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Se.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Se.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Se.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Se.CONNECTOR_ID.COINBASE]:"Coinbase",[Se.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Se.CONNECTOR_ID.LEDGER]:"Ledger",[Se.CONNECTOR_ID.SAFE]:"Safe"}},VC={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${zs.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},W0e=new AbortController,Ea={EmbeddedWalletAbortController:W0e,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${z0e()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function z0e(){return typeof window<"u"}const H0e={createLogger(t,e="error"){const n=Nh({level:e}),{logger:r}=UC({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},q0e="rpc.walletconnect.org";function u5(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const wA=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],mf={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===q0e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Se.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Se.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return wA.includes(e)?u5(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,m,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((m=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:m[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Y_.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>mf.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(eo(a.url,a.config))}),wA.includes(t.caipNetworkId)&&r.push(eo(u5(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(eo(a))}),z_(r)},extendWagmiTransports(t,e,n){if(wA.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return z_([n,eo(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Se.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Pe.getActiveCaipNetworkId(),n=L.getAllRequestedCaipNetworks(),r=Array.from(((c=L.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},Q_={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Os=xn({providers:{...Q_},providerIds:{...Q_}}),sn={state:Os,subscribeKey(t,e){return as(Os,t,e)},subscribe(t){return is(Os,()=>{t(Os)})},subscribeProviders(t){return is(Os.providers,()=>t(Os.providers))},setProvider(t,e){e&&(Os.providers[t]=Gd(e))},getProvider(t){return Os.providers[t]},setProviderId(t,e){e&&(Os.providerIds[t]=e)},getProviderId(t){if(t)return Os.providerIds[t]},reset(){Os.providers={...Q_},Os.providerIds={...Q_}},resetChain(t){Os.providers[t]=void 0,Os.providerIds[t]=void 0}},d5={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Mr={set(t,e){vi.isClient&&localStorage.setItem(`${Ne.STORAGE_KEY}${t}`,e)},get(t){return vi.isClient?localStorage.getItem(`${Ne.STORAGE_KEY}${t}`):null},delete(t,e){vi.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ne.STORAGE_KEY}${t}`))}},Ub=30*1e3,vi={checkIfAllowedToTriggerEmail(){const t=Mr.get(Ne.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ub){const n=Math.ceil((Ub-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Mr.get(Ne.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Ub)return Math.ceil((Ub-e)/1e3)}return 0},checkIfRequestExists(t){return Wr.NOT_SAFE_RPC_METHODS.includes(t.method)||Wr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(d5.transactionHash))||(t==null?void 0:t.match(d5.signedMessage)))?Ne.RPC_RESPONSE_TYPE_TX:Ne.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Wr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Bt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Bt||(Bt={}));var WN;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(WN||(WN={}));const ve=Bt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Il=t=>{switch(typeof t){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return isNaN(t)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(t)?ve.array:t===null?ve.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ve.promise:typeof Map<"u"&&t instanceof Map?ve.map:typeof Set<"u"&&t instanceof Set?ve.set:typeof Date<"u"&&t instanceof Date?ve.date:ve.object;default:return ve.unknown}},ue=Bt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),V0e=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Vo extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Bt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Vo.create=t=>new Vo(t);const fw=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===ve.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Bt.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${Bt.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Bt.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${Bt.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Bt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,Bt.assertNever(t)}return{message:n}};let wW=fw;function G0e(t){wW=t}function Z_(){return wW}const X_=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},K0e=[];function xe(t,e){const n=X_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Z_(),fw].filter(r=>!!r)});t.common.issues.push(n)}class os{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return dt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return os.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return dt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const dt=Object.freeze({status:"aborted"}),bW=t=>({status:"dirty",value:t}),Es=t=>({status:"valid",value:t}),zN=t=>t.status==="aborted",HN=t=>t.status==="dirty",pw=t=>t.status==="valid",J_=t=>typeof Promise<"u"&&t instanceof Promise;var ze;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ze||(ze={}));class za{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const h5=(t,e)=>{if(pw(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vo(t.common.issues);return this._error=n,this._error}}};function gt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Et{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Il(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Il(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new os,ctx:{common:e.parent.common,data:e.data,parsedType:Il(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(J_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Il(e)},i=this._parseSync({data:e,path:s.path,parent:s});return h5(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Il(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(J_(s)?s:Promise.resolve(s));return h5(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ue.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Xo({schema:this,typeName:nt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Tc.create(this,this._def)}nullable(){return ih.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Go.create(this,this._def)}promise(){return Mp.create(this,this._def)}or(e){return ww.create([this,e],this._def)}and(e){return bw.create(this,e,this._def)}transform(e){return new Xo({...gt(this._def),schema:this,typeName:nt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Sw({...gt(this._def),innerType:this,defaultValue:n,typeName:nt.ZodDefault})}brand(){return new _W({typeName:nt.ZodBranded,type:this,...gt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new rE({...gt(this._def),innerType:this,catchValue:n,typeName:nt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return C0.create(this,e)}readonly(){return iE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Y0e=/^c[^\s-]{8,}$/i,Q0e=/^[a-z][a-z0-9]*$/,Z0e=/^[0-9A-HJKMNP-TV-Z]{26}$/,X0e=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,J0e=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ebe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let bA;const tbe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,nbe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,rbe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function sbe(t,e){return!!((e==="v4"||!e)&&tbe.test(t)||(e==="v6"||!e)&&nbe.test(t))}class Fo extends Et{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:ve.string,received:i.parsedType}),dt}const r=new os;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?xe(s,{code:ue.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&xe(s,{code:ue.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")J0e.test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"email",code:ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")bA||(bA=new RegExp(ebe,"u")),bA.test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"emoji",code:ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")X0e.test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"uuid",code:ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Y0e.test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"cuid",code:ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Q0e.test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"cuid2",code:ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Z0e.test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"ulid",code:ue.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),xe(s,{validation:"url",code:ue.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"regex",code:ue.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?rbe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?sbe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),xe(s,{validation:"ip",code:ue.invalid_string,message:i.message}),r.dirty()):Bt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ue.invalid_string,...ze.errToObj(r)})}_addCheck(e){return new Fo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ze.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ze.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ze.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ze.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ze.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ze.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ze.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ze.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ze.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ze.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ze.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ze.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ze.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ze.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ze.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ze.errToObj(n)})}nonempty(e){return this.min(1,ze.errToObj(e))}trim(){return new Fo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Fo.create=t=>{var e;return new Fo({checks:[],typeName:nt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...gt(t)})};function ibe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Au extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:ve.number,received:i.parsedType}),dt}let r;const s=new os;for(const i of this._def.checks)i.kind==="int"?Bt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?ibe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.not_finite,message:i.message}),s.dirty()):Bt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ze.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ze.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ze.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ze.toString(n))}setLimit(e,n,r,s){return new Au({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ze.toString(s)}]})}_addCheck(e){return new Au({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ze.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ze.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ze.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ze.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ze.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ze.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Bt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Au.create=t=>new Au({checks:[],typeName:nt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...gt(t)});class Iu extends Et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ve.bigint){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:ve.bigint,received:i.parsedType}),dt}let r;const s=new os;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),xe(r,{code:ue.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Bt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ze.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ze.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ze.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ze.toString(n))}setLimit(e,n,r,s){return new Iu({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ze.toString(s)}]})}_addCheck(e){return new Iu({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ze.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ze.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ze.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ze.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ze.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Iu.create=t=>{var e;return new Iu({checks:[],typeName:nt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...gt(t)})};class mw extends Et{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){const r=this._getOrReturnCtx(e);return xe(r,{code:ue.invalid_type,expected:ve.boolean,received:r.parsedType}),dt}return Es(e.data)}}mw.create=t=>new mw({typeName:nt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...gt(t)});class rh extends Et{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_type,expected:ve.date,received:i.parsedType}),dt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return xe(i,{code:ue.invalid_date}),dt}const r=new os;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),xe(s,{code:ue.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Bt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ze.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ze.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}rh.create=t=>new rh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:nt.ZodDate,...gt(t)});class eE extends Et{_parse(e){if(this._getType(e)!==ve.symbol){const r=this._getOrReturnCtx(e);return xe(r,{code:ue.invalid_type,expected:ve.symbol,received:r.parsedType}),dt}return Es(e.data)}}eE.create=t=>new eE({typeName:nt.ZodSymbol,...gt(t)});class gw extends Et{_parse(e){if(this._getType(e)!==ve.undefined){const r=this._getOrReturnCtx(e);return xe(r,{code:ue.invalid_type,expected:ve.undefined,received:r.parsedType}),dt}return Es(e.data)}}gw.create=t=>new gw({typeName:nt.ZodUndefined,...gt(t)});class yw extends Et{_parse(e){if(this._getType(e)!==ve.null){const r=this._getOrReturnCtx(e);return xe(r,{code:ue.invalid_type,expected:ve.null,received:r.parsedType}),dt}return Es(e.data)}}yw.create=t=>new yw({typeName:nt.ZodNull,...gt(t)});class $p extends Et{constructor(){super(...arguments),this._any=!0}_parse(e){return Es(e.data)}}$p.create=t=>new $p({typeName:nt.ZodAny,...gt(t)});class Dd extends Et{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Es(e.data)}}Dd.create=t=>new Dd({typeName:nt.ZodUnknown,...gt(t)});class zc extends Et{_parse(e){const n=this._getOrReturnCtx(e);return xe(n,{code:ue.invalid_type,expected:ve.never,received:n.parsedType}),dt}}zc.create=t=>new zc({typeName:nt.ZodNever,...gt(t)});class tE extends Et{_parse(e){if(this._getType(e)!==ve.undefined){const r=this._getOrReturnCtx(e);return xe(r,{code:ue.invalid_type,expected:ve.void,received:r.parsedType}),dt}return Es(e.data)}}tE.create=t=>new tE({typeName:nt.ZodVoid,...gt(t)});class Go extends Et{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ve.array)return xe(n,{code:ue.invalid_type,expected:ve.array,received:n.parsedType}),dt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(xe(n,{code:o?ue.too_big:ue.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(xe(n,{code:ue.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(xe(n,{code:ue.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new za(n,o,n.path,a)))).then(o=>os.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new za(n,o,n.path,a)));return os.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Go({...this._def,minLength:{value:e,message:ze.toString(n)}})}max(e,n){return new Go({...this._def,maxLength:{value:e,message:ze.toString(n)}})}length(e,n){return new Go({...this._def,exactLength:{value:e,message:ze.toString(n)}})}nonempty(e){return this.min(1,e)}}Go.create=(t,e)=>new Go({type:t,minLength:null,maxLength:null,exactLength:null,typeName:nt.ZodArray,...gt(e)});function gf(t){if(t instanceof On){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Tc.create(gf(r))}return new On({...t._def,shape:()=>e})}else return t instanceof Go?new Go({...t._def,type:gf(t.element)}):t instanceof Tc?Tc.create(gf(t.unwrap())):t instanceof ih?ih.create(gf(t.unwrap())):t instanceof Ha?Ha.create(t.items.map(e=>gf(e))):t}class On extends Et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Bt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ve.object){const l=this._getOrReturnCtx(e);return xe(l,{code:ue.invalid_type,expected:ve.object,received:l.parsedType}),dt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof zc&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new za(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof zc){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(xe(s,{code:ue.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new za(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>os.mergeObjectSync(r,l)):os.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ze.errToObj,new On({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ze.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new On({...this._def,unknownKeys:"strip"})}passthrough(){return new On({...this._def,unknownKeys:"passthrough"})}extend(e){return new On({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new On({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:nt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new On({...this._def,catchall:e})}pick(e){const n={};return Bt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new On({...this._def,shape:()=>n})}omit(e){const n={};return Bt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new On({...this._def,shape:()=>n})}deepPartial(){return gf(this)}partial(e){const n={};return Bt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new On({...this._def,shape:()=>n})}required(e){const n={};return Bt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Tc;)i=i._def.innerType;n[r]=i}}),new On({...this._def,shape:()=>n})}keyof(){return vW(Bt.objectKeys(this.shape))}}On.create=(t,e)=>new On({shape:()=>t,unknownKeys:"strip",catchall:zc.create(),typeName:nt.ZodObject,...gt(e)});On.strictCreate=(t,e)=>new On({shape:()=>t,unknownKeys:"strict",catchall:zc.create(),typeName:nt.ZodObject,...gt(e)});On.lazycreate=(t,e)=>new On({shape:t,unknownKeys:"strip",catchall:zc.create(),typeName:nt.ZodObject,...gt(e)});class ww extends Et{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Vo(a.ctx.common.issues));return xe(n,{code:ue.invalid_union,unionErrors:o}),dt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Vo(c));return xe(n,{code:ue.invalid_union,unionErrors:a}),dt}}get options(){return this._def.options}}ww.create=(t,e)=>new ww({options:t,typeName:nt.ZodUnion,...gt(e)});const Iv=t=>t instanceof _w?Iv(t.schema):t instanceof Xo?Iv(t.innerType()):t instanceof Ew?[t.value]:t instanceof xu?t.options:t instanceof Cw?Object.keys(t.enum):t instanceof Sw?Iv(t._def.innerType):t instanceof gw?[void 0]:t instanceof yw?[null]:null;class GC extends Et{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.object)return xe(n,{code:ue.invalid_type,expected:ve.object,received:n.parsedType}),dt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(xe(n,{code:ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),dt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Iv(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new GC({typeName:nt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...gt(r)})}}function qN(t,e){const n=Il(t),r=Il(e);if(t===e)return{valid:!0,data:t};if(n===ve.object&&r===ve.object){const s=Bt.objectKeys(e),i=Bt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=qN(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ve.array&&r===ve.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=qN(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ve.date&&r===ve.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class bw extends Et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(zN(i)||zN(o))return dt;const a=qN(i.value,o.value);return a.valid?((HN(i)||HN(o))&&n.dirty(),{status:n.value,value:a.data}):(xe(r,{code:ue.invalid_intersection_types}),dt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}bw.create=(t,e,n)=>new bw({left:t,right:e,typeName:nt.ZodIntersection,...gt(n)});class Ha extends Et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.array)return xe(r,{code:ue.invalid_type,expected:ve.array,received:r.parsedType}),dt;if(r.data.length<this._def.items.length)return xe(r,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),dt;!this._def.rest&&r.data.length>this._def.items.length&&(xe(r,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new za(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>os.mergeArray(n,o)):os.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ha({...this._def,rest:e})}}Ha.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ha({items:t,typeName:nt.ZodTuple,rest:null,...gt(e)})};class vw extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.object)return xe(r,{code:ue.invalid_type,expected:ve.object,received:r.parsedType}),dt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new za(r,a,r.path,a)),value:o._parse(new za(r,r.data[a],r.path,a))});return r.common.async?os.mergeObjectAsync(n,s):os.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Et?new vw({keyType:e,valueType:n,typeName:nt.ZodRecord,...gt(r)}):new vw({keyType:Fo.create(),valueType:e,typeName:nt.ZodRecord,...gt(n)})}}class nE extends Et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.map)return xe(r,{code:ue.invalid_type,expected:ve.map,received:r.parsedType}),dt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new za(r,a,r.path,[l,"key"])),value:i._parse(new za(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return dt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return dt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}nE.create=(t,e,n)=>new nE({valueType:e,keyType:t,typeName:nt.ZodMap,...gt(n)});class sh extends Et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ve.set)return xe(r,{code:ue.invalid_type,expected:ve.set,received:r.parsedType}),dt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(xe(r,{code:ue.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(xe(r,{code:ue.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return dt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new za(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new sh({...this._def,minSize:{value:e,message:ze.toString(n)}})}max(e,n){return new sh({...this._def,maxSize:{value:e,message:ze.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}sh.create=(t,e)=>new sh({valueType:t,minSize:null,maxSize:null,typeName:nt.ZodSet,...gt(e)});class Kf extends Et{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.function)return xe(n,{code:ue.invalid_type,expected:ve.function,received:n.parsedType}),dt;function r(a,c){return X_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Z_(),fw].filter(l=>!!l),issueData:{code:ue.invalid_arguments,argumentsError:c}})}function s(a,c){return X_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Z_(),fw].filter(l=>!!l),issueData:{code:ue.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Mp){const a=this;return Es(async function(...c){const l=new Vo([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Es(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Vo([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Vo([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Kf({...this._def,args:Ha.create(e).rest(Dd.create())})}returns(e){return new Kf({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Kf({args:e||Ha.create([]).rest(Dd.create()),returns:n||Dd.create(),typeName:nt.ZodFunction,...gt(r)})}}class _w extends Et{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}_w.create=(t,e)=>new _w({getter:t,typeName:nt.ZodLazy,...gt(e)});class Ew extends Et{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return xe(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),dt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ew.create=(t,e)=>new Ew({value:t,typeName:nt.ZodLiteral,...gt(e)});function vW(t,e){return new xu({values:t,typeName:nt.ZodEnum,...gt(e)})}class xu extends Et{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return xe(n,{expected:Bt.joinValues(r),received:n.parsedType,code:ue.invalid_type}),dt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return xe(n,{received:n.data,code:ue.invalid_enum_value,options:r}),dt}return Es(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return xu.create(e)}exclude(e){return xu.create(this.options.filter(n=>!e.includes(n)))}}xu.create=vW;class Cw extends Et{_parse(e){const n=Bt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ve.string&&r.parsedType!==ve.number){const s=Bt.objectValues(n);return xe(r,{expected:Bt.joinValues(s),received:r.parsedType,code:ue.invalid_type}),dt}if(n.indexOf(e.data)===-1){const s=Bt.objectValues(n);return xe(r,{received:r.data,code:ue.invalid_enum_value,options:s}),dt}return Es(e.data)}get enum(){return this._def.values}}Cw.create=(t,e)=>new Cw({values:t,typeName:nt.ZodNativeEnum,...gt(e)});class Mp extends Et{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.promise&&n.common.async===!1)return xe(n,{code:ue.invalid_type,expected:ve.promise,received:n.parsedType}),dt;const r=n.parsedType===ve.promise?n.data:Promise.resolve(n.data);return Es(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Mp.create=(t,e)=>new Mp({type:t,typeName:nt.ZodPromise,...gt(e)});class Xo extends Et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===nt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{xe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?dt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?dt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!pw(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>pw(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Bt.assertNever(s)}}Xo.create=(t,e,n)=>new Xo({schema:t,typeName:nt.ZodEffects,effect:e,...gt(n)});Xo.createWithPreprocess=(t,e,n)=>new Xo({schema:e,effect:{type:"preprocess",transform:t},typeName:nt.ZodEffects,...gt(n)});class Tc extends Et{_parse(e){return this._getType(e)===ve.undefined?Es(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Tc.create=(t,e)=>new Tc({innerType:t,typeName:nt.ZodOptional,...gt(e)});class ih extends Et{_parse(e){return this._getType(e)===ve.null?Es(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ih.create=(t,e)=>new ih({innerType:t,typeName:nt.ZodNullable,...gt(e)});class Sw extends Et{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ve.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Sw.create=(t,e)=>new Sw({innerType:t,typeName:nt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...gt(e)});class rE extends Et{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return J_(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Vo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rE.create=(t,e)=>new rE({innerType:t,typeName:nt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...gt(e)});class sE extends Et{_parse(e){if(this._getType(e)!==ve.nan){const r=this._getOrReturnCtx(e);return xe(r,{code:ue.invalid_type,expected:ve.nan,received:r.parsedType}),dt}return{status:"valid",value:e.data}}}sE.create=t=>new sE({typeName:nt.ZodNaN,...gt(t)});const obe=Symbol("zod_brand");class _W extends Et{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class C0 extends Et{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?dt:i.status==="dirty"?(n.dirty(),bW(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?dt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new C0({in:e,out:n,typeName:nt.ZodPipeline})}}class iE extends Et{_parse(e){const n=this._def.innerType._parse(e);return pw(n)&&(n.value=Object.freeze(n.value)),n}}iE.create=(t,e)=>new iE({innerType:t,typeName:nt.ZodReadonly,...gt(e)});const EW=(t,e={},n)=>t?$p.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):$p.create(),abe={object:On.lazycreate};var nt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(nt||(nt={}));const cbe=(t,e={message:`Input not instance of ${t.name}`})=>EW(n=>n instanceof t,e),CW=Fo.create,SW=Au.create,lbe=sE.create,ube=Iu.create,AW=mw.create,dbe=rh.create,hbe=eE.create,fbe=gw.create,pbe=yw.create,mbe=$p.create,gbe=Dd.create,ybe=zc.create,wbe=tE.create,bbe=Go.create,vbe=On.create,_be=On.strictCreate,Ebe=ww.create,Cbe=GC.create,Sbe=bw.create,Abe=Ha.create,Ibe=vw.create,xbe=nE.create,Nbe=sh.create,Tbe=Kf.create,Rbe=_w.create,Pbe=Ew.create,Obe=xu.create,kbe=Cw.create,Dbe=Mp.create,f5=Xo.create,$be=Tc.create,Mbe=ih.create,Lbe=Xo.createWithPreprocess,Ube=C0.create,jbe=()=>CW().optional(),Bbe=()=>SW().optional(),Fbe=()=>AW().optional(),Wbe={string:t=>Fo.create({...t,coerce:!0}),number:t=>Au.create({...t,coerce:!0}),boolean:t=>mw.create({...t,coerce:!0}),bigint:t=>Iu.create({...t,coerce:!0}),date:t=>rh.create({...t,coerce:!0})},zbe=dt;var v=Object.freeze({__proto__:null,defaultErrorMap:fw,setErrorMap:G0e,getErrorMap:Z_,makeIssue:X_,EMPTY_PATH:K0e,addIssueToContext:xe,ParseStatus:os,INVALID:dt,DIRTY:bW,OK:Es,isAborted:zN,isDirty:HN,isValid:pw,isAsync:J_,get util(){return Bt},get objectUtil(){return WN},ZodParsedType:ve,getParsedType:Il,ZodType:Et,ZodString:Fo,ZodNumber:Au,ZodBigInt:Iu,ZodBoolean:mw,ZodDate:rh,ZodSymbol:eE,ZodUndefined:gw,ZodNull:yw,ZodAny:$p,ZodUnknown:Dd,ZodNever:zc,ZodVoid:tE,ZodArray:Go,ZodObject:On,ZodUnion:ww,ZodDiscriminatedUnion:GC,ZodIntersection:bw,ZodTuple:Ha,ZodRecord:vw,ZodMap:nE,ZodSet:sh,ZodFunction:Kf,ZodLazy:_w,ZodLiteral:Ew,ZodEnum:xu,ZodNativeEnum:Cw,ZodPromise:Mp,ZodEffects:Xo,ZodTransformer:Xo,ZodOptional:Tc,ZodNullable:ih,ZodDefault:Sw,ZodCatch:rE,ZodNaN:sE,BRAND:obe,ZodBranded:_W,ZodPipeline:C0,ZodReadonly:iE,custom:EW,Schema:Et,ZodSchema:Et,late:abe,get ZodFirstPartyTypeKind(){return nt},coerce:Wbe,any:mbe,array:bbe,bigint:ube,boolean:AW,date:dbe,discriminatedUnion:Cbe,effect:f5,enum:Obe,function:Tbe,instanceof:cbe,intersection:Sbe,lazy:Rbe,literal:Pbe,map:xbe,nan:lbe,nativeEnum:kbe,never:ybe,null:pbe,nullable:Mbe,number:SW,object:vbe,oboolean:Fbe,onumber:Bbe,optional:$be,ostring:jbe,pipeline:Ube,preprocess:Lbe,promise:Dbe,record:Ibe,set:Nbe,strictObject:_be,string:CW,symbol:hbe,transformer:f5,tuple:Abe,undefined:fbe,union:Ebe,unknown:gbe,void:wbe,NEVER:zbe,ZodIssueCode:ue,quotelessJson:V0e,ZodError:Vo});const Bn=v.object({message:v.string()});function Ae(t){return v.literal(Ne[t])}v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const Hbe=v.object({chainId:v.string().or(v.number())}),qbe=v.object({email:v.string().email()}),Vbe=v.object({otp:v.string()}),Gbe=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number()))}),Kbe=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string())}),Ybe=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),Qbe=v.object({email:v.string().email()}),Zbe=v.object({otp:v.string()}),Xbe=v.object({otp:v.string()}),Jbe=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),eve=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),tve=v.object({type:v.string()}),nve=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),rve=v.object({url:v.string()}),sve=v.object({userName:v.string()}),ive=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([Wr.ACCOUNT_TYPES.EOA,Wr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string())}),ove=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),ave=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([Wr.ACCOUNT_TYPES.EOA,Wr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string())}),cve=v.object({uri:v.string()}),lve=v.object({isConnected:v.boolean()}),uve=v.object({chainId:v.string().or(v.number())}),dve=v.object({chainId:v.string().or(v.number())}),hve=v.object({newEmail:v.string().email()}),fve=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const pve=v.object({version:v.string().optional()}),mve=v.object({type:v.string(),address:v.string()}),gve=v.any(),yve=v.object({method:v.literal("eth_accounts")}),wve=v.object({method:v.literal("eth_blockNumber")}),bve=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),vve=v.object({method:v.literal("eth_chainId")}),_ve=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),Eve=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),Cve=v.object({method:v.literal("eth_gasPrice")}),Sve=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),Ave=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),Ive=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),xve=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),Nve=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),Tve=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),Rve=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),Pve=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),Ove=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),kve=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),Dve=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),$ve=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),Mve=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),Lve=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),Uve=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),jve=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),Bve=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),Fve=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),Wve=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),zve=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),Hve=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),qve=v.object({method:v.literal("eth_newBlockFilter")}),Vve=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),Gve=v.object({method:v.literal("eth_newPendingTransactionFilter")}),Kve=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),Yve=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),Qve=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),p5=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),Zve=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),Xve=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),Jve=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),e_e=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),t_e=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),n_e=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),r_e=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),s_e=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),i_e=v.object({method:v.literal("wallet_getCapabilities")}),o_e=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),a_e=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),c_e=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),m5=v.object({token:v.string()}),Ie=v.object({id:v.string().optional()}),Xm={appEvent:Ie.extend({type:Ae("APP_SWITCH_NETWORK"),payload:Hbe}).or(Ie.extend({type:Ae("APP_CONNECT_EMAIL"),payload:qbe})).or(Ie.extend({type:Ae("APP_CONNECT_DEVICE")})).or(Ie.extend({type:Ae("APP_CONNECT_OTP"),payload:Vbe})).or(Ie.extend({type:Ae("APP_CONNECT_SOCIAL"),payload:Gbe})).or(Ie.extend({type:Ae("APP_GET_FARCASTER_URI")})).or(Ie.extend({type:Ae("APP_CONNECT_FARCASTER")})).or(Ie.extend({type:Ae("APP_GET_USER"),payload:v.optional(Kbe)})).or(Ie.extend({type:Ae("APP_GET_SOCIAL_REDIRECT_URI"),payload:Ybe})).or(Ie.extend({type:Ae("APP_SIGN_OUT")})).or(Ie.extend({type:Ae("APP_IS_CONNECTED"),payload:v.optional(m5)})).or(Ie.extend({type:Ae("APP_GET_CHAIN_ID")})).or(Ie.extend({type:Ae("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ie.extend({type:Ae("APP_INIT_SMART_ACCOUNT")})).or(Ie.extend({type:Ae("APP_SET_PREFERRED_ACCOUNT"),payload:tve})).or(Ie.extend({type:Ae("APP_RPC_REQUEST"),payload:p5.or(c_e).or(yve).or(wve).or(bve).or(vve).or(_ve).or(Eve).or(Cve).or(Sve).or(Ave).or(Ive).or(xve).or(Nve).or(Tve).or(Rve).or(Pve).or(Ove).or(kve).or(Dve).or($ve).or(Mve).or(Lve).or(Uve).or(jve).or(Bve).or(Fve).or(Wve).or(zve).or(Hve).or(qve).or(Vve).or(Gve).or(Kve).or(Yve).or(Qve).or(p5).or(Zve).or(Xve).or(Jve).or(e_e).or(t_e).or(n_e).or(s_e).or(r_e).or(i_e).or(o_e).or(a_e)})).or(Ie.extend({type:Ae("APP_UPDATE_EMAIL"),payload:Qbe})).or(Ie.extend({type:Ae("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Zbe})).or(Ie.extend({type:Ae("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Xbe})).or(Ie.extend({type:Ae("APP_SYNC_THEME"),payload:Jbe})).or(Ie.extend({type:Ae("APP_SYNC_DAPP_DATA"),payload:eve})).or(Ie.extend({type:Ae("APP_RELOAD")})),frameEvent:Ie.extend({type:Ae("FRAME_SWITCH_NETWORK_ERROR"),payload:Bn}).or(Ie.extend({type:Ae("FRAME_SWITCH_NETWORK_SUCCESS"),payload:dve})).or(Ie.extend({type:Ae("FRAME_CONNECT_EMAIL_SUCCESS"),payload:nve})).or(Ie.extend({type:Ae("FRAME_CONNECT_EMAIL_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:rve})).or(Ie.extend({type:Ae("FRAME_GET_FARCASTER_URI_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:sve})).or(Ie.extend({type:Ae("FRAME_CONNECT_FARCASTER_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_CONNECT_OTP_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_CONNECT_OTP_SUCCESS")})).or(Ie.extend({type:Ae("FRAME_CONNECT_DEVICE_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ie.extend({type:Ae("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:ive})).or(Ie.extend({type:Ae("FRAME_CONNECT_SOCIAL_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_GET_USER_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_GET_USER_SUCCESS"),payload:ave})).or(Ie.extend({type:Ae("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:cve})).or(Ie.extend({type:Ae("FRAME_SIGN_OUT_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_SIGN_OUT_SUCCESS")})).or(Ie.extend({type:Ae("FRAME_IS_CONNECTED_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_IS_CONNECTED_SUCCESS"),payload:lve})).or(Ie.extend({type:Ae("FRAME_GET_CHAIN_ID_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_GET_CHAIN_ID_SUCCESS"),payload:uve})).or(Ie.extend({type:Ae("FRAME_RPC_REQUEST_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_RPC_REQUEST_SUCCESS"),payload:gve})).or(Ie.extend({type:Ae("FRAME_SESSION_UPDATE"),payload:m5})).or(Ie.extend({type:Ae("FRAME_UPDATE_EMAIL_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_UPDATE_EMAIL_SUCCESS"),payload:ove})).or(Ie.extend({type:Ae("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ie.extend({type:Ae("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:hve})).or(Ie.extend({type:Ae("FRAME_SYNC_THEME_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_SYNC_THEME_SUCCESS")})).or(Ie.extend({type:Ae("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ie.extend({type:Ae("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:fve})).or(Ie.extend({type:Ae("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:mve})).or(Ie.extend({type:Ae("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_READY"),payload:pve})).or(Ie.extend({type:Ae("FRAME_RELOAD_ERROR"),payload:Bn})).or(Ie.extend({type:Ae("FRAME_RELOAD_SUCCESS")}))};function vA(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let l_e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=Se.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!vA(Ne.FRAME_EVENT_KEY,l))return;const u=Xm.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}vi.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{vi.isClient&&window.addEventListener("message",({data:o})=>{if(!vA(Ne.FRAME_EVENT_KEY,o))return;const a=Xm.frameEvent.parse(o);i(a)})},onAppEvent:i=>{vi.isClient&&window.addEventListener("message",({data:o})=>{if(!vA(Ne.APP_EVENT_KEY,o))return;const a=Xm.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(vi.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Xm.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(vi.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Xm.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),vi.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${eoe}?projectId=${e}&chainId=${r}&version=${noe}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},u_e=class{constructor(e){var i;const n=Nh({level:toe}),{logger:r,chunkLoggerController:s}=UC({opts:n});this.logger=qr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},d_e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new u_e(e)),this.abortController=i,this.w3mFrame=new l_e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ne.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Mr.get(Ne.EMAIL_LOGIN_USED_KEY)}getEmail(){return Mr.get(Ne.EMAIL)}getUsername(){return Mr.get(Ne.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ne.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{vi.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ne.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ne.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ne.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ne.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ne.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ne.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ne.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ne.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ne.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ne.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ne.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ne.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ne.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ne.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ne.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ne.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ne.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ne.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ne.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ne.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Wr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ne.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ne.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ne.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ne.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ne.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ne.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ne.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ne.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Wr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ne.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ne.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Wr.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ne.APP_SYNC_DAPP_DATA,Ne.APP_SYNC_THEME,Ne.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ne.APP_CONNECT_EMAIL,Ne.APP_CONNECT_DEVICE,Ne.APP_CONNECT_OTP,Ne.APP_CONNECT_SOCIAL,Ne.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,m;const u=Math.random().toString(36).substring(7);(m=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||m.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,_,E;w.id===u&&((_=y==null?void 0:(b=y.logger).info)==null||_.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((E=w.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Mr.set(Ne.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Mr.set(Ne.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Mr.set(Ne.EMAIL,e),Mr.set(Ne.EMAIL_LOGIN_USED_KEY,"true"),Mr.delete(Ne.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Mr.delete(Ne.EMAIL_LOGIN_USED_KEY),Mr.delete(Ne.EMAIL),Mr.delete(Ne.LAST_USED_CHAIN_KEY),Mr.delete(Ne.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Mr.set(Ne.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Mr.get(Ne.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Mr.set(Ne.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},h_e=class xv{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return xv.instance||(xv.instance=new d_e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),xv.instance}};function f_e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function wr(t,...e){try{return f_e(t(...e))}catch(n){return Promise.reject(n)}}function p_e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function m_e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Nv(t){if(p_e(t))return String(t);if(m_e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Nv(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const VN="base64:";function g_e(t){return typeof t=="string"?t:VN+b_e(t)}function y_e(t){return typeof t!="string"||!t.startsWith(VN)?t:w_e(t.slice(VN.length))}function w_e(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function b_e(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ls(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function v_e(...t){return Ls(t.join(":"))}function jb(t){return t=Ls(t),t?t+":":""}function __e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function E_e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const C_e="memory",S_e=()=>{const t=new Map;return{name:C_e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function A_e(t={}){const e={mounts:{"":t.driver||S_e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ls(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await g5(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let m=h.get(p.base);return m||(m={driver:p.driver,base:p.base,items:[]},h.set(p.base,m)),m};for(const p of l){const m=typeof p=="string",w=Ls(m?p:p.key),y=m?void 0:p.value,b=m||!p.options?u:{...u,...p.options},_=n(w);f(_).items.push({key:w,value:y,relativeKey:_.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ls(l);const{relativeKey:d,driver:h}=n(l);return wr(h.hasItem,d,u)},getItem(l,u={}){l=Ls(l);const{relativeKey:d,driver:h}=n(l);return wr(h.getItem,d,u).then(f=>Ob(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?wr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:v_e(d.base,f.key),value:Ob(f.value)}))):Promise.all(d.items.map(h=>wr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Ob(f)})))))},getItemRaw(l,u={}){l=Ls(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?wr(h.getItemRaw,d,u):wr(h.getItem,d,u).then(f=>y_e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ls(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await wr(f.setItem,h,Nv(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return wr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Nv(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>wr(d.driver.setItem,h.relativeKey,Nv(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ls(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await wr(f.setItemRaw,h,u,d);else if(f.setItem)await wr(f.setItem,h,g_e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ls(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await wr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await wr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ls(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await wr(h.getMeta,d,u)),!u.nativeOnly){const p=await wr(h.getItem,d+"$",u).then(m=>Ob(m));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=jb(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await wr(y.driver.getKeys,y.relativeBase,u);for(const _ of b){const E=y.mountpoint+Ls(_);h.some(C=>E.startsWith(C))||f.push(E)}h=[y.mountpoint,...h.filter(_=>!_.startsWith(y.mountpoint))]}const m=u.maxDepth!==void 0&&!p;return f.filter(y=>(!m||__e(y,u.maxDepth))&&E_e(y,l))},async clear(l,u={}){l=jb(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return wr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>y5(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=jb(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(g5(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=jb(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await y5(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ls(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ls(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function g5(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function y5(t){typeof t.dispose=="function"&&await wr(t.dispose)}const I_e="idb-keyval";var x_e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=S7(t.dbName,t.storeName)),{name:I_e,options:t,async hasItem(s){return!(typeof await v$(n(s),r)>"u")},async getItem(s){return await v$(n(s),r)??null},setItem(s,i){return Zfe(n(s),i,r)},removeItem(s){return Xfe(n(s),r)},getKeys(){return tpe(r)},clear(){return Jfe(r)}}};const N_e="WALLET_CONNECT_V2_INDEXED_DB",T_e="keyvaluestorage";let R_e=class{constructor(){this.indexedDb=A_e({driver:x_e({dbName:N_e,storeName:T_e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Wc(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var _A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tv={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof _A<"u"&&_A.localStorage?Tv.exports=_A.localStorage:typeof window<"u"&&window.localStorage?Tv.exports=window.localStorage:Tv.exports=new e})();function P_e(t){var e;return[t[0],th((e=t[1])!=null?e:"")]}let O_e=class{constructor(){this.localStorage=Tv.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(P_e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return th(n)}async setItem(e,n){this.localStorage.setItem(e,Wc(n))}async removeItem(e){this.localStorage.removeItem(e)}};const k_e="wc_storage_version",w5=1,D_e=async(t,e,n)=>{const r=k_e,s=await e.getItem(r);if(s&&s>=w5){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,w5),n(e),$_e(t,o)},$_e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let M_e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new O_e;this.storage=e;try{const n=new R_e;D_e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var L_e=Object.defineProperty,U_e=(t,e,n)=>e in t?L_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b5=(t,e,n)=>U_e(t,typeof e!="symbol"?e+"":e,n);let j_e=class extends Ah{constructor(e){super(),this.opts=e,b5(this,"protocol","wc"),b5(this,"version",2)}};var B_e=Object.defineProperty,F_e=(t,e,n)=>e in t?B_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W_e=(t,e,n)=>F_e(t,e+"",n);let z_e=class extends Ah{constructor(e,n){super(),this.core=e,this.logger=n,W_e(this,"records",new Map)}},H_e=class{constructor(e,n){this.logger=e,this.core=n}},q_e=class extends Ah{constructor(e,n){super(),this.relayer=e,this.logger=n}},V_e=class extends Ah{constructor(e){super()}},G_e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},K_e=class extends Ah{constructor(e,n){super(),this.relayer=e,this.logger=n}},Y_e=class extends Ah{constructor(e,n){super(),this.core=e,this.logger=n}},Q_e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Z_e=class{constructor(e,n){this.projectId=e,this.logger=n}},X_e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var J_e=Object.defineProperty,eEe=(t,e,n)=>e in t?J_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v5=(t,e,n)=>eEe(t,typeof e!="symbol"?e+"":e,n);let tEe=class{constructor(e){this.opts=e,v5(this,"protocol","wc"),v5(this,"version",2)}},nEe=class{constructor(e){this.client=e}};function Aw(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function _5(t){return Aw(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const IW="2.23.2";let Jm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${IW}`},KC=class GN extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof GN?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof GN&&n.cause.docsPath||n.docsPath,i=(a=Jm.getDocsUrl)==null?void 0:a.call(Jm,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Jm.version?[`Version: ${Jm.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=IW}walk(e){return xW(this,e)}};function xW(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?xW(t.cause,e):e?null:t}class NW extends KC{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function mm(t,{dir:e,size:n=32}={}){return typeof t=="string"?rEe(t,{dir:e,size:n}):sEe(t,{dir:e,size:n})}function rEe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new NW({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function sEe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new NW({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class iEe extends KC{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class oEe extends KC{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function gm(t,{size:e}){if(_5(t)>e)throw new oEe({givenSize:_5(t),maxSize:e})}function KN(t,e={}){const{signed:n}=e;e.size&&gm(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function aEe(t,e={}){return Number(KN(t,e))}const cEe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YN(t,e={}){return typeof t=="number"||typeof t=="bigint"?RW(t,e):typeof t=="string"?dEe(t,e):typeof t=="boolean"?lEe(t,e):TW(t,e)}function lEe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(gm(n,{size:e.size}),mm(n,{size:e.size})):n}function TW(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=cEe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(gm(r,{size:e.size}),mm(r,{dir:"right",size:e.size})):r}function RW(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new iEe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?mm(a,{size:r}):a}const uEe=new TextEncoder;function dEe(t,e={}){const n=uEe.encode(t);return TW(n,e)}const hEe=new TextEncoder;function fEe(t,e={}){return typeof t=="number"||typeof t=="bigint"?mEe(t,e):typeof t=="boolean"?pEe(t,e):Aw(t)?PW(t,e):OW(t,e)}function pEe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(gm(n,{size:e.size}),mm(n,{size:e.size})):n}const ac={zero:48,nine:57,A:65,F:70,a:97,f:102};function E5(t){if(t>=ac.zero&&t<=ac.nine)return t-ac.zero;if(t>=ac.A&&t<=ac.F)return t-(ac.A-10);if(t>=ac.a&&t<=ac.f)return t-(ac.a-10)}function PW(t,e={}){let n=t;e.size&&(gm(n,{size:e.size}),n=mm(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=E5(r.charCodeAt(a++)),l=E5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new KC(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function mEe(t,e){const n=RW(t,e);return PW(n)}function OW(t,e={}){const n=hEe.encode(t);return typeof e.size=="number"?(gm(n,{size:e.size}),mm(n,{dir:"right",size:e.size})):n}function oE(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function gEe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function YC(t,...e){if(!gEe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CMe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");oE(t.outputLen),oE(t.blockLen)}function C5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yEe(t,e){YC(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Bb=BigInt(2**32-1),S5=BigInt(32);function wEe(t,e=!1){return e?{h:Number(t&Bb),l:Number(t>>S5&Bb)}:{h:Number(t>>S5&Bb)|0,l:Number(t&Bb)|0}}function bEe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=wEe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const vEe=(t,e,n)=>t<<n|e>>>32-n,_Ee=(t,e,n)=>e<<n|t>>>32-n,EEe=(t,e,n)=>e<<n-32|t>>>64-n,CEe=(t,e,n)=>t<<n-32|e>>>64-n,Kh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function SEe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function SMe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function AMe(t,e){return t<<32-e|t>>>e}const A5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function AEe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function I5(t){for(let e=0;e<t.length;e++)t[e]=AEe(t[e])}function IEe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function kW(t){return typeof t=="string"&&(t=IEe(t)),YC(t),t}function IMe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];YC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class xEe{clone(){return this._cloneInto()}}function NEe(t){const e=r=>t().update(kW(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function xMe(t=32){if(Kh&&typeof Kh.getRandomValues=="function")return Kh.getRandomValues(new Uint8Array(t));if(Kh&&typeof Kh.randomBytes=="function")return Kh.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const DW=[],$W=[],MW=[],TEe=BigInt(0),eg=BigInt(1),REe=BigInt(2),PEe=BigInt(7),OEe=BigInt(256),kEe=BigInt(113);for(let t=0,e=eg,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],DW.push(2*(5*r+n)),$W.push((t+1)*(t+2)/2%64);let s=TEe;for(let i=0;i<7;i++)e=(e<<eg^(e>>PEe)*kEe)%OEe,e&REe&&(s^=eg<<(eg<<BigInt(i))-eg);MW.push(s)}const[DEe,$Ee]=bEe(MW,!0),x5=(t,e,n)=>n>32?EEe(t,e,n):vEe(t,e,n),N5=(t,e,n)=>n>32?CEe(t,e,n):_Ee(t,e,n);function MEe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=x5(l,u,1)^n[a],h=N5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=$W[o],c=x5(s,i,a),l=N5(s,i,a),u=DW[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=DEe[r],t[1]^=$Ee[r]}n.fill(0)}class WO extends xEe{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,oE(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=SEe(this.state)}keccak(){A5||I5(this.state32),MEe(this.state32,this.rounds),A5||I5(this.state32),this.posOut=0,this.pos=0}update(e){C5(this);const{blockLen:n,state:r}=this;e=kW(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){C5(this,!1),YC(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return oE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(yEe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new WO(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const LEe=(t,e,n)=>NEe(()=>new WO(e,t,n)),UEe=LEe(1,136,256/8);function LW(t,e){const n=e||"hex",r=UEe(Aw(t,{strict:!1})?fEe(t):t);return n==="bytes"?r:YN(r)}class jEe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const EA=new jEe(8192);function BEe(t,e){if(EA.has(`${t}.${e}`))return EA.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=LW(OW(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return EA.set(`${t}.${e}`,i),i}function FEe(t){const e=LW(`0x${t.substring(4)}`).substring(26);return BEe(`0x${e}`)}async function WEe({hash:t,signature:e}){const n=Aw(t)?t:YN(t),{secp256k1:r}=await ts(async()=>{const{secp256k1:o}=await import("./secp256k1-PQmP2qdq.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=T5(f);return new r.Signature(KN(l),KN(u)).addRecoveryBit(p)}const o=Aw(e)?e:YN(e),a=aEe(`0x${o.slice(130)}`),c=T5(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function T5(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function zEe({hash:t,signature:e}){return FEe(await WEe({hash:t,signature:e}))}var HEe={};const qEe=":";function Yf(t){const[e,n]=t.split(qEe);return{namespace:e,reference:n}}function UW(t,e){return t.includes(":")?[t]:e.chains||[]}var VEe=Object.defineProperty,GEe=Object.defineProperties,KEe=Object.getOwnPropertyDescriptors,R5=Object.getOwnPropertySymbols,YEe=Object.prototype.hasOwnProperty,QEe=Object.prototype.propertyIsEnumerable,P5=(t,e,n)=>e in t?VEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O5=(t,e)=>{for(var n in e||(e={}))YEe.call(e,n)&&P5(t,n,e[n]);if(R5)for(var n of R5(e))QEe.call(e,n)&&P5(t,n,e[n]);return t},ZEe=(t,e)=>GEe(t,KEe(e));const XEe="ReactNative",Ei={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},JEe="js";function aE(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function $u(){return!nh()&&!!UO()&&navigator.product===XEe}function eCe(){return $u()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function tCe(){return $u()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ym(){return!aE()&&!!UO()&&!!nh()}function S0(){return $u()?Ei.reactNative:aE()?Ei.node:ym()?Ei.browser:Ei.unknown}function k5(){var t;try{return $u()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function nCe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function rCe(t){var e,n;const r=jW();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),ZEe(O5(O5({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function jW(){return sW()||{name:"",description:"",url:"",icons:[""]}}function sCe(){if(S0()===Ei.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Tye();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function iCe(){var t;const e=S0();return e===Ei.browser?[e,((t=rW())==null?void 0:t.host)||"unknown"].join(":"):e}function BW(t,e,n){const r=sCe(),s=iCe();return[[t,e].join("-"),[JEe,n].join("-"),r,s].join("/")}function oCe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=BW(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=nCe(l[1]||"",d);return l[0]+"?"+h}function bd(t,e){return t.filter(n=>e.includes(n)).length===t.length}function QN(t){return Object.fromEntries(t.entries())}function ZN(t){return new Map(Object.entries(t))}function Xu(t=he.FIVE_MINUTES,e){const n=he.toMiliseconds(t||he.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function zl(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function FW(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function aCe(t){return FW("topic",t)}function cCe(t){return FW("id",t)}function WW(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function ir(t,e){return he.fromMiliseconds(Date.now()+he.toMiliseconds(t))}function _l(t){return Date.now()>=he.toMiliseconds(t)}function Gt(t,e){return`${t}${e?`:${e}`:""}`}function La(t=[],e=[]){return[...new Set([...t,...e])]}async function lCe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=uCe(i,t,e),a=S0();if(a===Ei.browser){if(!((r=nh())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}dCe(o)}else a===Ei.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function uCe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${mCe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function dCe(t){let e="_self";pCe()?e="_top":(fCe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function hCe(t,e){let n="";try{if(ym()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function D5(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function $5(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function zO(){return typeof process<"u"&&HEe.IS_VITEST==="true"}function fCe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function pCe(){try{return window.self!==window.top}catch{return!1}}function mCe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function zW(t){return Buffer.from(t,"base64").toString("utf-8")}function gCe(t){return new Promise(e=>setTimeout(e,t))}function Iw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yCe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function A0(t,...e){if(!yCe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function HO(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Iw(t.outputLen),Iw(t.blockLen)}function Lp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function HW(t,e){A0(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Fb=BigInt(2**32-1),M5=BigInt(32);function wCe(t,e=!1){return e?{h:Number(t&Fb),l:Number(t>>M5&Fb)}:{h:Number(t>>M5&Fb)|0,l:Number(t&Fb)|0}}function bCe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=wCe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const vCe=(t,e,n)=>t<<n|e>>>32-n,_Ce=(t,e,n)=>e<<n|t>>>32-n,ECe=(t,e,n)=>e<<n-32|t>>>64-n,CCe=(t,e,n)=>t<<n-32|e>>>64-n,Yh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function SCe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function CA(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ca(t,e){return t<<32-e|t>>>e}const L5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ACe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function U5(t){for(let e=0;e<t.length;e++)t[e]=ACe(t[e])}function ICe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Up(t){return typeof t=="string"&&(t=ICe(t)),A0(t),t}function xCe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];A0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let qO=class{clone(){return this._cloneInto()}};function qW(t){const e=r=>t().update(Up(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function wm(t=32){if(Yh&&typeof Yh.getRandomValues=="function")return Yh.getRandomValues(new Uint8Array(t));if(Yh&&typeof Yh.randomBytes=="function")return Yh.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const VW=[],GW=[],KW=[],NCe=BigInt(0),tg=BigInt(1),TCe=BigInt(2),RCe=BigInt(7),PCe=BigInt(256),OCe=BigInt(113);for(let t=0,e=tg,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],VW.push(2*(5*r+n)),GW.push((t+1)*(t+2)/2%64);let s=NCe;for(let i=0;i<7;i++)e=(e<<tg^(e>>RCe)*OCe)%PCe,e&TCe&&(s^=tg<<(tg<<BigInt(i))-tg);KW.push(s)}const[kCe,DCe]=bCe(KW,!0),j5=(t,e,n)=>n>32?ECe(t,e,n):vCe(t,e,n),B5=(t,e,n)=>n>32?CCe(t,e,n):_Ce(t,e,n);function $Ce(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=j5(l,u,1)^n[a],h=B5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=GW[o],c=j5(s,i,a),l=B5(s,i,a),u=VW[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=kCe[r],t[1]^=DCe[r]}n.fill(0)}let MCe=class YW extends qO{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Iw(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=SCe(this.state)}keccak(){L5||U5(this.state32),$Ce(this.state32,this.rounds),L5||U5(this.state32),this.posOut=0,this.pos=0}update(e){Lp(this);const{blockLen:n,state:r}=this;e=Up(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Lp(this,!1),A0(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Iw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(HW(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new YW(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const LCe=(t,e,n)=>qW(()=>new MCe(e,t,n)),UCe=LCe(1,136,256/8),jCe="https://rpc.walletconnect.org/v1";function QW(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(UCe(n)).toString("hex")}async function BCe(t,e,n,r,s,i){switch(n.t){case"eip191":return await FCe(t,e,n.s);case"eip1271":return await WCe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function FCe(t,e,n){return(await zEe({hash:QW(e),signature:n})).toLowerCase()===t.toLowerCase()}async function WCe(t,e,n,r,s,i){const o=Yf(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=QW(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||jCe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:zCe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function zCe(){return Date.now()+Math.floor(Math.random()*1e3)}function HCe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return iW.encode(i)}var qCe=Object.defineProperty,VCe=Object.defineProperties,GCe=Object.getOwnPropertyDescriptors,F5=Object.getOwnPropertySymbols,KCe=Object.prototype.hasOwnProperty,YCe=Object.prototype.propertyIsEnumerable,W5=(t,e,n)=>e in t?qCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QCe=(t,e)=>{for(var n in e||(e={}))KCe.call(e,n)&&W5(t,n,e[n]);if(F5)for(var n of F5(e))YCe.call(e,n)&&W5(t,n,e[n]);return t},ZCe=(t,e)=>VCe(t,GCe(e));const XCe="did:pkh:",VO=t=>t==null?void 0:t.split(":"),JCe=t=>{const e=t&&VO(t);if(e)return t.includes(XCe)?e[3]:e[1]},XN=t=>{const e=t&&VO(t);if(e)return e[2]+":"+e[3]},cE=t=>{const e=t&&VO(t);if(e)return e.pop()};async function z5(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=ZW(s,s.iss),o=cE(s.iss);return await BCe(o,i,r,XN(s.iss),n)}const ZW=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=cE(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${JCe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(m=>`
- ${m}`).join("")}`:void 0,p=Rv(t.resources);if(p){const m=xw(p);s=c1e(s,m)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(m=>m!=null).join(`
`)};function e1e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function t1e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function oh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function n1e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:r1e(e,n,r)}}}function r1e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function XW(t){return oh(t),`urn:recap:${e1e(t).replace(/=/g,"")}`}function xw(t){const e=t1e(t.replace("urn:recap:",""));return oh(e),e}function s1e(t,e,n){const r=n1e(t,e,n);return XW(r)}function i1e(t){return t&&t.includes("urn:recap:")}function o1e(t,e){const n=xw(t),r=xw(e),s=a1e(n,r);return XW(s)}function a1e(t,e){oh(t),oh(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=ZCe(QCe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function c1e(t="",e){oh(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function H5(t){var e;const n=xw(t);oh(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function q5(t){const e=xw(t);oh(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Rv(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return i1e(e)?e:void 0}function SA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function JW(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bi(t,...e){if(!JW(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function V5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function l1e(t,e){bi(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function G5(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const uu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),u1e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),d1e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!d1e)throw new Error("Non little-endian hardware is not supported");function h1e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function JN(t){if(typeof t=="string")t=h1e(t);else if(JW(t))t=eT(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function f1e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function p1e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const m1e=(t,e)=>{function n(r,...s){if(bi(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?bi(l):bi(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&bi(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");bi(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,bi(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(bi(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function K5(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!g1e(e))throw new Error("invalid output, must be aligned");return e}function Y5(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function g1e(t){return t.byteOffset%4===0}function eT(t){return Uint8Array.from(t)}function jp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const ez=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),y1e=ez("expand 16-byte k"),w1e=ez("expand 32-byte k"),b1e=uu(y1e),v1e=uu(w1e);function Lt(t,e){return t<<e|t>>>32-e}function tT(t){return t.byteOffset%4===0}const Wb=64,_1e=16,tz=2**32-1,Q5=new Uint32Array;function E1e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Wb),u=uu(l),d=tT(s)&&tT(i),h=d?uu(s):Q5,f=d?uu(i):Q5;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=tz)throw new Error("arx: counter overflow");const m=Math.min(Wb,c-p);if(d&&m===Wb){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<_1e;y++)b=w+y,f[b]=h[b]^u[y];p+=Wb;continue}for(let w=0,y;w<m;w++)y=p+w,i[y]=s[y]^l[w];p+=m}}function C1e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=f1e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return SA(s),SA(o),G5(i),G5(n),(a,c,l,u,d=0)=>{bi(a),bi(c),bi(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),bi(u),SA(d),d<0||d>=tz)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,m,w;if(p===32)f.push(m=eT(a)),w=v1e;else if(p===16&&n)m=new Uint8Array(32),m.set(a),m.set(a,16),w=b1e,f.push(m);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);tT(c)||f.push(c=eT(c));const y=uu(m);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,uu(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,f.push(c)}const _=uu(c);return E1e(t,w,y,_,l,u,d,o),jp(...f),u}}const Or=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class S1e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=JN(e),bi(e,32);const n=Or(e,0),r=Or(e,2),s=Or(e,4),i=Or(e,6),o=Or(e,8),a=Or(e,10),c=Or(e,12),l=Or(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Or(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],m=o[8],w=o[9],y=Or(e,n+0),b=Or(e,n+2),_=Or(e,n+4),E=Or(e,n+6),C=Or(e,n+8),I=Or(e,n+10),A=Or(e,n+12),x=Or(e,n+14);let S=i[0]+(y&8191),k=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|_<<6)&8191),M=i[3]+((_>>>7|E<<9)&8191),W=i[4]+((E>>>4|C<<12)&8191),U=i[5]+(C>>>1&8191),N=i[6]+((C>>>14|I<<2)&8191),T=i[7]+((I>>>11|A<<5)&8191),$=i[8]+((A>>>8|x<<8)&8191),R=i[9]+(x>>>5|s),D=0,j=D+S*a+k*(5*w)+P*(5*m)+M*(5*p)+W*(5*f);D=j>>>13,j&=8191,j+=U*(5*h)+N*(5*d)+T*(5*u)+$*(5*l)+R*(5*c),D+=j>>>13,j&=8191;let z=D+S*c+k*a+P*(5*w)+M*(5*m)+W*(5*p);D=z>>>13,z&=8191,z+=U*(5*f)+N*(5*h)+T*(5*d)+$*(5*u)+R*(5*l),D+=z>>>13,z&=8191;let Q=D+S*l+k*c+P*a+M*(5*w)+W*(5*m);D=Q>>>13,Q&=8191,Q+=U*(5*p)+N*(5*f)+T*(5*h)+$*(5*d)+R*(5*u),D+=Q>>>13,Q&=8191;let te=D+S*u+k*l+P*c+M*a+W*(5*w);D=te>>>13,te&=8191,te+=U*(5*m)+N*(5*p)+T*(5*f)+$*(5*h)+R*(5*d),D+=te>>>13,te&=8191;let Z=D+S*d+k*u+P*l+M*c+W*a;D=Z>>>13,Z&=8191,Z+=U*(5*w)+N*(5*m)+T*(5*p)+$*(5*f)+R*(5*h),D+=Z>>>13,Z&=8191;let X=D+S*h+k*d+P*u+M*l+W*c;D=X>>>13,X&=8191,X+=U*a+N*(5*w)+T*(5*m)+$*(5*p)+R*(5*f),D+=X>>>13,X&=8191;let ie=D+S*f+k*h+P*d+M*u+W*l;D=ie>>>13,ie&=8191,ie+=U*c+N*a+T*(5*w)+$*(5*m)+R*(5*p),D+=ie>>>13,ie&=8191;let Ke=D+S*p+k*f+P*h+M*d+W*u;D=Ke>>>13,Ke&=8191,Ke+=U*l+N*c+T*a+$*(5*w)+R*(5*m),D+=Ke>>>13,Ke&=8191;let it=D+S*m+k*p+P*f+M*h+W*d;D=it>>>13,it&=8191,it+=U*u+N*l+T*c+$*a+R*(5*w),D+=it>>>13,it&=8191;let Be=D+S*w+k*m+P*p+M*f+W*h;D=Be>>>13,Be&=8191,Be+=U*d+N*u+T*l+$*c+R*a,D+=Be>>>13,Be&=8191,D=(D<<2)+D|0,D=D+j|0,j=D&8191,D=D>>>13,z+=D,i[0]=j,i[1]=z,i[2]=Q,i[3]=te,i[4]=Z,i[5]=X,i[6]=ie,i[7]=Ke,i[8]=it,i[9]=Be}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;jp(r)}update(e){V5(this);const{buffer:n,blockLen:r}=this;e=JN(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){jp(this.h,this.r,this.buffer,this.pad)}digestInto(e){V5(this),l1e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function A1e(t){const e=(r,s)=>t(s).update(JN(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const I1e=A1e(t=>new S1e(t));function x1e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],m=e[5],w=e[6],y=e[7],b=s,_=n[0],E=n[1],C=n[2],I=o,A=a,x=c,S=l,k=u,P=d,M=h,W=f,U=p,N=m,T=w,$=y,R=b,D=_,j=E,z=C;for(let te=0;te<i;te+=2)I=I+k|0,R=Lt(R^I,16),U=U+R|0,k=Lt(k^U,12),I=I+k|0,R=Lt(R^I,8),U=U+R|0,k=Lt(k^U,7),A=A+P|0,D=Lt(D^A,16),N=N+D|0,P=Lt(P^N,12),A=A+P|0,D=Lt(D^A,8),N=N+D|0,P=Lt(P^N,7),x=x+M|0,j=Lt(j^x,16),T=T+j|0,M=Lt(M^T,12),x=x+M|0,j=Lt(j^x,8),T=T+j|0,M=Lt(M^T,7),S=S+W|0,z=Lt(z^S,16),$=$+z|0,W=Lt(W^$,12),S=S+W|0,z=Lt(z^S,8),$=$+z|0,W=Lt(W^$,7),I=I+P|0,z=Lt(z^I,16),T=T+z|0,P=Lt(P^T,12),I=I+P|0,z=Lt(z^I,8),T=T+z|0,P=Lt(P^T,7),A=A+M|0,R=Lt(R^A,16),$=$+R|0,M=Lt(M^$,12),A=A+M|0,R=Lt(R^A,8),$=$+R|0,M=Lt(M^$,7),x=x+W|0,D=Lt(D^x,16),U=U+D|0,W=Lt(W^U,12),x=x+W|0,D=Lt(D^x,8),U=U+D|0,W=Lt(W^U,7),S=S+k|0,j=Lt(j^S,16),N=N+j|0,k=Lt(k^N,12),S=S+k|0,j=Lt(j^S,8),N=N+j|0,k=Lt(k^N,7);let Q=0;r[Q++]=o+I|0,r[Q++]=a+A|0,r[Q++]=c+x|0,r[Q++]=l+S|0,r[Q++]=u+k|0,r[Q++]=d+P|0,r[Q++]=h+M|0,r[Q++]=f+W|0,r[Q++]=p+U|0,r[Q++]=m+N|0,r[Q++]=w+T|0,r[Q++]=y+$|0,r[Q++]=b+R|0,r[Q++]=_+D|0,r[Q++]=E+j|0,r[Q++]=C+z|0}const N1e=C1e(x1e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),T1e=new Uint8Array(16),Z5=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(T1e.subarray(n))},R1e=new Uint8Array(32);function X5(t,e,n,r,s){const i=t(e,n,R1e),o=I1e.create(i);s&&Z5(o,s),Z5(o,r);const a=new Uint8Array(16),c=u1e(a);Y5(c,0,BigInt(s?s.length:0),!0),Y5(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return jp(i,a),l}const P1e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=K5(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=X5(t,e,n,a,r);return i.set(c,o),jp(c),i},decrypt(s,i){i=K5(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=X5(t,e,n,o,r);if(!p1e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),jp(c),i}}),nz=m1e({blockSize:64,nonceLength:12,tagLength:16},P1e(N1e));let rz=class extends qO{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,HO(e);const r=Up(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Lp(this),this.iHash.update(e),this}digestInto(e){Lp(this),A0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const QC=(t,e,n)=>new rz(t,e).update(n).digest();QC.create=(t,e)=>new rz(t,e);function O1e(t,e,n){return HO(t),n===void 0&&(n=new Uint8Array(t.outputLen)),QC(t,Up(n),Up(e))}const AA=new Uint8Array([0]),J5=new Uint8Array;function k1e(t,e,n,r=32){if(HO(t),Iw(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=J5);const i=new Uint8Array(s*t.outputLen),o=QC.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)AA[0]=l+1,a.update(l===0?J5:c).update(n).update(AA).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),AA.fill(0),i.slice(0,r)}const D1e=(t,e,n,r,s)=>k1e(t,O1e(t,e,n),r,s);function $1e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function M1e(t,e,n){return t&e^~t&n}function L1e(t,e,n){return t&e^t&n^e&n}let U1e=class extends qO{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=CA(this.buffer)}update(e){Lp(this);const{view:n,buffer:r,blockLen:s}=this;e=Up(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=CA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lp(this),HW(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;$1e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=CA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const j1e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ul=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dl=new Uint32Array(64);class B1e extends U1e{constructor(){super(64,32,8,!1),this.A=ul[0]|0,this.B=ul[1]|0,this.C=ul[2]|0,this.D=ul[3]|0,this.E=ul[4]|0,this.F=ul[5]|0,this.G=ul[6]|0,this.H=ul[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)dl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=dl[d-15],f=dl[d-2],p=ca(h,7)^ca(h,18)^h>>>3,m=ca(f,17)^ca(f,19)^f>>>10;dl[d]=m+dl[d-7]+p+dl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ca(a,6)^ca(a,11)^ca(a,25),f=u+h+M1e(a,c,l)+j1e[d]+dl[d]|0,p=(ca(r,2)^ca(r,13)^ca(r,22))+L1e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){dl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const I0=qW(()=>new B1e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ZC=BigInt(0),XC=BigInt(1),F1e=BigInt(2);function ah(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function x0(t){if(!ah(t))throw new Error("Uint8Array expected")}function Bp(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const W1e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fp(t){x0(t);let e="";for(let n=0;n<t.length;n++)e+=W1e[t[n]];return e}function Df(t){const e=t.toString(16);return e.length&1?"0"+e:e}function GO(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ZC:BigInt("0x"+t)}const cc={_0:48,_9:57,A:65,F:70,a:97,f:102};function eM(t){if(t>=cc._0&&t<=cc._9)return t-cc._0;if(t>=cc.A&&t<=cc.F)return t-(cc.A-10);if(t>=cc.a&&t<=cc.f)return t-(cc.a-10)}function Wp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=eM(t.charCodeAt(i)),a=eM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function $d(t){return GO(Fp(t))}function Nw(t){return x0(t),GO(Fp(Uint8Array.from(t).reverse()))}function zp(t,e){return Wp(t.toString(16).padStart(e*2,"0"))}function JC(t,e){return zp(t,e).reverse()}function z1e(t){return Wp(Df(t))}function yi(t,e,n){let r;if(typeof e=="string")try{r=Wp(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(ah(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Tw(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];x0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function H1e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function q1e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const IA=t=>typeof t=="bigint"&&ZC<=t;function e1(t,e,n){return IA(t)&&IA(e)&&IA(n)&&e<=t&&t<n}function Rc(t,e,n,r){if(!e1(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function sz(t){let e;for(e=0;t>ZC;t>>=XC,e+=1);return e}function V1e(t,e){return t>>BigInt(e)&XC}function G1e(t,e,n){return t|(n?XC:ZC)<<BigInt(e)}const KO=t=>(F1e<<BigInt(t-1))-XC,xA=t=>new Uint8Array(t),tM=t=>Uint8Array.from(t);function iz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=xA(t),s=xA(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=xA())=>{s=a(tM([0]),u),r=a(),u.length!==0&&(s=a(tM([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return Tw(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const K1e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ah(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function bm(t,e,n={}){const r=(s,i,o)=>{const a=K1e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const Y1e=()=>{throw new Error("not implemented")};function nT(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var Q1e=Object.freeze({__proto__:null,isBytes:ah,abytes:x0,abool:Bp,bytesToHex:Fp,numberToHexUnpadded:Df,hexToNumber:GO,hexToBytes:Wp,bytesToNumberBE:$d,bytesToNumberLE:Nw,numberToBytesBE:zp,numberToBytesLE:JC,numberToVarBytesBE:z1e,ensureBytes:yi,concatBytes:Tw,equalBytes:H1e,utf8ToBytes:q1e,inRange:e1,aInRange:Rc,bitLen:sz,bitGet:V1e,bitSet:G1e,bitMask:KO,createHmacDrbg:iz,validateObject:bm,notImplemented:Y1e,memoized:nT});const Nr=BigInt(0),Xn=BigInt(1),sd=BigInt(2),Z1e=BigInt(3),rT=BigInt(4),nM=BigInt(5),rM=BigInt(8);function Hs(t,e){const n=t%e;return n>=Nr?n:e+n}function oz(t,e,n){if(e<Nr)throw new Error("invalid exponent, negatives unsupported");if(n<=Nr)throw new Error("invalid modulus");if(n===Xn)return Nr;let r=Xn;for(;e>Nr;)e&Xn&&(r=r*t%n),t=t*t%n,e>>=Xn;return r}function Io(t,e,n){let r=t;for(;e-- >Nr;)r*=r,r%=n;return r}function sT(t,e){if(t===Nr)throw new Error("invert: expected non-zero number");if(e<=Nr)throw new Error("invert: expected positive modulus, got "+e);let n=Hs(t,e),r=e,s=Nr,i=Xn;for(;n!==Nr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Xn)throw new Error("invert: does not exist");return Hs(s,e)}function X1e(t){const e=(t-Xn)/sd;let n,r,s;for(n=t-Xn,r=0;n%sd===Nr;n/=sd,r++);for(s=sd;s<t&&oz(s,e,t)!==t-Xn;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Xn)/rT;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Xn)/sd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Xn<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function J1e(t){if(t%rT===Z1e){const e=(t+Xn)/rT;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%rM===nM){const e=(t-nM)/rM;return function(n,r){const s=n.mul(r,sd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,sd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return X1e(t)}const eSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tSe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=eSe.reduce((r,s)=>(r[s]="function",r),e);return bm(t,n)}function nSe(t,e,n){if(n<Nr)throw new Error("invalid exponent, negatives unsupported");if(n===Nr)return t.ONE;if(n===Xn)return e;let r=t.ONE,s=e;for(;n>Nr;)n&Xn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Xn;return r}function rSe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function az(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function cz(t,e,n=!1,r={}){if(t<=Nr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=az(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:KO(s),ZERO:Nr,ONE:Xn,create:c=>Hs(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Nr<=c&&c<t},is0:c=>c===Nr,isOdd:c=>(c&Xn)===Xn,neg:c=>Hs(-c,t),eql:(c,l)=>c===l,sqr:c=>Hs(c*c,t),add:(c,l)=>Hs(c+l,t),sub:(c,l)=>Hs(c-l,t),mul:(c,l)=>Hs(c*l,t),pow:(c,l)=>nSe(a,c,l),div:(c,l)=>Hs(c*sT(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>sT(c,t),sqrt:r.sqrt||(c=>(o||(o=J1e(t)),o(a,c))),invertBatch:c=>rSe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?JC(c,i):zp(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Nw(c):$d(c)}});return Object.freeze(a)}function lz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function uz(t){const e=lz(t);return e+Math.ceil(e/2)}function sSe(t,e,n=!1){const r=t.length,s=lz(e),i=uz(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Nw(t):$d(t),a=Hs(o,e-Xn)+Xn;return n?JC(a,s):zp(a,s)}const sM=BigInt(0),zb=BigInt(1);function NA(t,e){const n=e.negate();return t?n:e}function dz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function TA(t,e){dz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function iSe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function oSe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const RA=new WeakMap,hz=new WeakMap;function PA(t){return hz.get(t)||1}function aSe(t,e){return{constTimeNegate:NA,hasPrecomputes(n){return PA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>sM;)r&zb&&(s=s.add(i)),i=i.double(),r>>=zb;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=TA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=TA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=zb);const m=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(NA(y,r[m])):a=a.add(NA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=TA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===sM)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=zb),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=RA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&RA.set(r,s(i))),i},wNAFCached(n,r,s){const i=PA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=PA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){dz(r,e),hz.set(n,r),RA.delete(n)}}}function cSe(t,e,n,r){if(iSe(n,t),oSe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=sz(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],m=Number(p>>BigInt(d)&BigInt(a));c[m]=c[m].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function fz(t){return tSe(t.Fp),bm(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...az(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Qh=BigInt(0),OA=BigInt(1);function lSe(t){return bm(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function uSe(t){const e=lSe(t),{P:n}=e,r=b=>Hs(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>oz(b,n-BigInt(2),n));function l(b,_,E){const C=r(b*(_-E));return _=r(_-C),E=r(E+C),[_,E]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,_){Rc("u",b,Qh,n),Rc("scalar",_,Qh,n);const E=_,C=b;let I=OA,A=Qh,x=b,S=OA,k=Qh,P;for(let W=BigInt(s-1);W>=Qh;W--){const U=E>>W&OA;k^=U,P=l(k,I,x),I=P[0],x=P[1],P=l(k,A,S),A=P[0],S=P[1],k=U;const N=I+A,T=r(N*N),$=I-A,R=r($*$),D=T-R,j=x+S,z=x-S,Q=r(z*N),te=r(j*$),Z=Q+te,X=Q-te;x=r(Z*Z),S=r(C*r(X*X)),I=r(T*R),A=r(D*(T+r(u*D)))}P=l(k,I,x),I=P[0],x=P[1],P=l(k,A,S),A=P[0],S=P[1];const M=c(A);return r(I*M)}function h(b){return JC(r(b),i)}function f(b){const _=yi("u coordinate",b,i);return o===32&&(_[31]&=127),Nw(_)}function p(b){const _=yi("scalar",b),E=_.length;if(E!==i&&E!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+E)}return Nw(a(_))}function m(b,_){const E=f(_),C=p(b),I=d(E,C);if(I===Qh)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return m(b,w)}return{scalarMult:m,scalarMultBase:y,getSharedSecret:(b,_)=>m(b,_),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const iT=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const dSe=BigInt(1),iM=BigInt(2),hSe=BigInt(3),fSe=BigInt(5);BigInt(8);function pSe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=iT,o=t*t%i*t%i,a=Io(o,iM,i)*o%i,c=Io(a,dSe,i)*t%i,l=Io(c,fSe,i)*c%i,u=Io(l,e,i)*l%i,d=Io(u,n,i)*u%i,h=Io(d,r,i)*d%i,f=Io(h,s,i)*h%i,p=Io(f,s,i)*h%i,m=Io(p,e,i)*l%i;return{pow_p_5_8:Io(m,iM,i)*t%i,b2:o}}function mSe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const oT=uSe({P:iT,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=iT,{pow_p_5_8:n,b2:r}=pSe(t);return Hs(Io(n,hSe,e)*r,e)},adjustScalarBytes:mSe,randomBytes:wm});function oM(t){t.lowS!==void 0&&Bp("lowS",t.lowS),t.prehash!==void 0&&Bp("prehash",t.prehash)}function gSe(t){const e=fz(t);bm(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ySe,hexToBytes:wSe}=Q1e;class bSe extends Error{constructor(e=""){super(e)}}const gc={Err:bSe,_tlv:{encode:(t,e)=>{const{Err:n}=gc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Df(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Df(s.length/2|128):"";return Df(t)+i+s+e},decode(t,e){const{Err:n}=gc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=gc;if(t<vc)throw new e("integer: negative integers are not allowed");let n=Df(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=gc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ySe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=gc,s=typeof t=="string"?wSe(t):t;x0(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=gc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},vc=BigInt(0),br=BigInt(1);BigInt(2);const aM=BigInt(3);BigInt(4);function vSe(t){const e=gSe(t),{Fp:n}=e,r=cz(e.n,e.nBitLength),s=e.toBytes||((m,w,y)=>{const b=w.toAffine();return Tw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(m=>{const w=m.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(m){const{a:w,b:y}=e,b=n.sqr(m),_=n.mul(b,m);return n.add(n.add(_,n.mul(m,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(m){return e1(m,br,e.n)}function c(m){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:_}=e;if(w&&typeof m!="bigint"){if(ah(m)&&(m=Fp(m)),typeof m!="string"||!w.includes(m.length))throw new Error("invalid private key");m=m.padStart(y*2,"0")}let E;try{E=typeof m=="bigint"?m:$d(yi("private key",m,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof m)}return b&&(E=Hs(E,_)),Rc("private key",E,br,_),E}function l(m){if(!(m instanceof h))throw new Error("ProjectivePoint expected")}const u=nT((m,w)=>{const{px:y,py:b,pz:_}=m;if(n.eql(_,n.ONE))return{x:y,y:b};const E=m.is0();w==null&&(w=E?n.ONE:n.inv(_));const C=n.mul(y,w),I=n.mul(b,w),A=n.mul(_,w);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),d=nT(m=>{if(m.is0()){if(e.allowInfinityPoint&&!n.is0(m.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=m.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),_=o(w);if(!n.eql(b,_))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const _=E=>n.eql(E,n.ZERO);return _(y)&&_(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,_)=>b.toAffine(y[_])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(yi("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return cSe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:_}=this,{px:E,py:C,pz:I}=w,A=n.eql(n.mul(y,I),n.mul(E,_)),x=n.eql(n.mul(b,I),n.mul(C,_));return A&&x}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,aM),{px:_,py:E,pz:C}=this;let I=n.ZERO,A=n.ZERO,x=n.ZERO,S=n.mul(_,_),k=n.mul(E,E),P=n.mul(C,C),M=n.mul(_,E);return M=n.add(M,M),x=n.mul(_,C),x=n.add(x,x),I=n.mul(w,x),A=n.mul(b,P),A=n.add(I,A),I=n.sub(k,A),A=n.add(k,A),A=n.mul(I,A),I=n.mul(M,I),x=n.mul(b,x),P=n.mul(w,P),M=n.sub(S,P),M=n.mul(w,M),M=n.add(M,x),x=n.add(S,S),S=n.add(x,S),S=n.add(S,P),S=n.mul(S,M),A=n.add(A,S),P=n.mul(E,C),P=n.add(P,P),S=n.mul(P,M),I=n.sub(I,S),x=n.mul(P,k),x=n.add(x,x),x=n.add(x,x),new h(I,A,x)}add(w){l(w);const{px:y,py:b,pz:_}=this,{px:E,py:C,pz:I}=w;let A=n.ZERO,x=n.ZERO,S=n.ZERO;const k=e.a,P=n.mul(e.b,aM);let M=n.mul(y,E),W=n.mul(b,C),U=n.mul(_,I),N=n.add(y,b),T=n.add(E,C);N=n.mul(N,T),T=n.add(M,W),N=n.sub(N,T),T=n.add(y,_);let $=n.add(E,I);return T=n.mul(T,$),$=n.add(M,U),T=n.sub(T,$),$=n.add(b,_),A=n.add(C,I),$=n.mul($,A),A=n.add(W,U),$=n.sub($,A),S=n.mul(k,T),A=n.mul(P,U),S=n.add(A,S),A=n.sub(W,S),S=n.add(W,S),x=n.mul(A,S),W=n.add(M,M),W=n.add(W,M),U=n.mul(k,U),T=n.mul(P,T),W=n.add(W,U),U=n.sub(M,U),U=n.mul(k,U),T=n.add(T,U),M=n.mul(W,T),x=n.add(x,M),M=n.mul($,T),A=n.mul(N,A),A=n.sub(A,M),M=n.mul(N,W),S=n.mul($,S),S=n.add(S,M),new h(A,x,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;Rc("scalar",w,vc,b);const _=h.ZERO;if(w===vc)return _;if(this.is0()||w===br)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:E,k1:C,k2neg:I,k2:A}=y.splitScalar(w),x=_,S=_,k=this;for(;C>vc||A>vc;)C&br&&(x=x.add(k)),A&br&&(S=S.add(k)),k=k.double(),C>>=br,A>>=br;return E&&(x=x.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),x.add(S)}multiply(w){const{endo:y,n:b}=e;Rc("scalar",w,br,b);let _,E;if(y){const{k1neg:C,k1:I,k2neg:A,k2:x}=y.splitScalar(w);let{p:S,f:k}=this.wNAF(I),{p:P,f:M}=this.wNAF(x);S=p.constTimeNegate(C,S),P=p.constTimeNegate(A,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),_=S.add(P),E=k.add(M)}else{const{p:C,f:I}=this.wNAF(w);_=C,E=I}return h.normalizeZ([_,E])[0]}multiplyAndAddUnsafe(w,y,b){const _=h.BASE,E=(I,A)=>A===vc||A===br||!I.equals(_)?I.multiplyUnsafe(A):I.multiply(A),C=E(this,y).add(E(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===br)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===br?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Bp("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return Bp("isCompressed",w),Fp(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=aSe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function _Se(t){const e=fz(t);return bm(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ESe(t){const e=_Se(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(U){return Hs(U,r)}function a(U){return sT(U,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=vSe({...e,toBytes(U,N,T){const $=N.toAffine(),R=n.toBytes($.x),D=Tw;return Bp("isCompressed",T),T?D(Uint8Array.from([N.hasEvenY()?2:3]),R):D(Uint8Array.from([4]),R,n.toBytes($.y))},fromBytes(U){const N=U.length,T=U[0],$=U.subarray(1);if(N===s&&(T===2||T===3)){const R=$d($);if(!e1(R,br,n.ORDER))throw new Error("Point is not on curve");const D=u(R);let j;try{j=n.sqrt(D)}catch(Q){const te=Q instanceof Error?": "+Q.message:"";throw new Error("Point is not on curve"+te)}const z=(j&br)===br;return(T&1)===1!==z&&(j=n.neg(j)),{x:R,y:j}}else if(N===i&&T===4){const R=n.fromBytes($.subarray(0,n.BYTES)),D=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:R,y:D}}else{const R=s,D=i;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+D+", got "+N)}}}),h=U=>Fp(zp(U,e.nByteLength));function f(U){const N=r>>br;return U>N}function p(U){return f(U)?o(-U):U}const m=(U,N,T)=>$d(U.slice(N,T));class w{constructor(N,T,$){this.r=N,this.s=T,this.recovery=$,this.assertValidity()}static fromCompact(N){const T=e.nByteLength;return N=yi("compactSignature",N,T*2),new w(m(N,0,T),m(N,T,2*T))}static fromDER(N){const{r:T,s:$}=gc.toSig(yi("DER",N));return new w(T,$)}assertValidity(){Rc("r",this.r,br,r),Rc("s",this.s,br,r)}addRecoveryBit(N){return new w(this.r,this.s,N)}recoverPublicKey(N){const{r:T,s:$,recovery:R}=this,D=I(yi("msgHash",N));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const j=R===2||R===3?T+e.n:T;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=R&1?"03":"02",Q=c.fromHex(z+h(j)),te=a(j),Z=o(-D*te),X=o($*te),ie=c.BASE.multiplyAndAddUnsafe(Q,Z,X);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Wp(this.toDERHex())}toDERHex(){return gc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Wp(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(U){try{return l(U),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const U=uz(e.n);return sSe(e.randomBytes(U),e.n)},precompute(U=8,N=c.BASE){return N._setWindowSize(U),N.multiply(BigInt(3)),N}};function b(U,N=!0){return c.fromPrivateKey(U).toRawBytes(N)}function _(U){const N=ah(U),T=typeof U=="string",$=(N||T)&&U.length;return N?$===s||$===i:T?$===2*s||$===2*i:U instanceof c}function E(U,N,T=!0){if(_(U))throw new Error("first arg must be private key");if(!_(N))throw new Error("second arg must be public key");return c.fromHex(N).multiply(l(U)).toRawBytes(T)}const C=e.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");const N=$d(U),T=U.length*8-e.nBitLength;return T>0?N>>BigInt(T):N},I=e.bits2int_modN||function(U){return o(C(U))},A=KO(e.nBitLength);function x(U){return Rc("num < 2^"+e.nBitLength,U,vc,A),zp(U,e.nByteLength)}function S(U,N,T=k){if(["recovered","canonical"].some(it=>it in T))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:R}=e;let{lowS:D,prehash:j,extraEntropy:z}=T;D==null&&(D=!0),U=yi("msgHash",U),oM(T),j&&(U=yi("prehashed msgHash",$(U)));const Q=I(U),te=l(N),Z=[x(te),x(Q)];if(z!=null&&z!==!1){const it=z===!0?R(n.BYTES):z;Z.push(yi("extraEntropy",it))}const X=Tw(...Z),ie=Q;function Ke(it){const Be=C(it);if(!d(Be))return;const yt=a(Be),Ct=c.BASE.multiply(Be).toAffine(),Kn=o(Ct.x);if(Kn===vc)return;const G=o(yt*o(ie+Kn*te));if(G===vc)return;let J=(Ct.x===Kn?0:2)|Number(Ct.y&br),de=G;return D&&f(G)&&(de=p(G),J^=1),new w(Kn,de,J)}return{seed:X,k2sig:Ke}}const k={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function M(U,N,T=k){const{seed:$,k2sig:R}=S(U,N,T),D=e;return iz(D.hash.outputLen,D.nByteLength,D.hmac)($,R)}c.BASE._setWindowSize(8);function W(U,N,T,$=P){var G;const R=U;N=yi("msgHash",N),T=yi("publicKey",T);const{lowS:D,prehash:j,format:z}=$;if(oM($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const Q=typeof R=="string"||ah(R),te=!Q&&!z&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!Q&&!te)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Z,X;try{if(te&&(Z=new w(R.r,R.s)),Q){try{z!=="compact"&&(Z=w.fromDER(R))}catch(J){if(!(J instanceof gc.Err))throw J}!Z&&z!=="der"&&(Z=w.fromCompact(R))}X=c.fromHex(T)}catch{return!1}if(!Z||D&&Z.hasHighS())return!1;j&&(N=e.hash(N));const{r:ie,s:Ke}=Z,it=I(N),Be=a(Ke),yt=o(it*Be),Ct=o(ie*Be),Kn=(G=c.BASE.multiplyAndAddUnsafe(X,yt,Ct))==null?void 0:G.toAffine();return Kn?o(Kn.x)===ie:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:E,sign:M,verify:W,ProjectivePoint:c,Signature:w,utils:y}}function CSe(t){return{hash:t,hmac:(e,...n)=>QC(t,e,xCe(...n)),randomBytes:wm}}function SSe(t,e){const n=r=>ESe({...t,...CSe(r)});return{...n(e),create:n}}const pz=cz(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),ASe=pz.create(BigInt("-3")),ISe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),xSe=SSe({a:ASe,b:ISe,Fp:pz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},I0),mz="base10",_s="base16",Wo="base64pad",xl="base64url",N0="utf8",gz=0,Pc=1,T0=2,NSe=0,cM=1,sy=12,YO=32;function TSe(){const t=oT.utils.randomPrivateKey(),e=oT.getPublicKey(t);return{privateKey:ni(t,_s),publicKey:ni(e,_s)}}function aT(){const t=wm(YO);return ni(t,_s)}function RSe(t,e){const n=oT.getSharedSecret(to(t,_s),to(e,_s)),r=D1e(I0,n,void 0,void 0,YO);return ni(r,_s)}function Pv(t){const e=I0(to(t,_s));return ni(e,_s)}function Ca(t){const e=I0(to(t,N0));return ni(e,_s)}function yz(t){return to(`${t}`,mz)}function ch(t){return Number(ni(t,mz))}function wz(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function bz(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function PSe(t){const e=yz(typeof t.type<"u"?t.type:gz);if(ch(e)===Pc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?to(t.senderPublicKey,_s):void 0,r=typeof t.iv<"u"?to(t.iv,_s):wm(sy),s=to(t.symKey,_s),i=nz(s,r).encrypt(to(t.message,N0)),o=vz({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===xl?wz(o):o}function OSe(t){const e=to(t.symKey,_s),{sealed:n,iv:r}=Rw({encoded:t.encoded,encoding:t.encoding}),s=nz(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ni(s,N0)}function kSe(t,e){const n=yz(T0),r=wm(sy),s=to(t,N0),i=vz({type:n,sealed:s,iv:r});return e===xl?wz(i):i}function DSe(t,e){const{sealed:n}=Rw({encoded:t,encoding:e});return ni(n,N0)}function vz(t){if(ch(t.type)===T0)return ni(ty([t.type,t.sealed]),Wo);if(ch(t.type)===Pc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ni(ty([t.type,t.senderPublicKey,t.iv,t.sealed]),Wo)}return ni(ty([t.type,t.iv,t.sealed]),Wo)}function Rw(t){const e=(t.encoding||Wo)===xl?bz(t.encoded):t.encoded,n=to(e,Wo),r=n.slice(NSe,cM),s=cM;if(ch(r)===Pc){const c=s+YO,l=c+sy,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(ch(r)===T0){const c=n.slice(s),l=wm(sy);return{type:r,sealed:c,iv:l}}const i=s+sy,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function $Se(t,e){const n=Rw({encoded:t,encoding:e==null?void 0:e.encoding});return _z({type:ch(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ni(n.senderPublicKey,_s):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function _z(t){const e=(t==null?void 0:t.type)||gz;if(e===Pc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function lM(t){return t.type===Pc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function uM(t){return t.type===T0}function MSe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return ty([new Uint8Array([4]),e,n])}function LSe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(bz(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=I0(c),u=MSe(e);if(!xSe.verify(ty([o,a]),l,u))throw new Error("Invalid signature");return LN(t).payload}const USe="irn";function lE(t){return(t==null?void 0:t.relay)||{protocol:USe}}function Eg(t){const e=Hwe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function jSe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function dM(t){if(!t.includes("wc:")){const l=zW(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:BSe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:jSe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function BSe(t){return t.startsWith("//")?t.substring(2):t}function FSe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function hM(t){const e=new URLSearchParams,n=FSe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Hb(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var WSe=Object.defineProperty,zSe=Object.defineProperties,HSe=Object.getOwnPropertyDescriptors,fM=Object.getOwnPropertySymbols,qSe=Object.prototype.hasOwnProperty,VSe=Object.prototype.propertyIsEnumerable,pM=(t,e,n)=>e in t?WSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GSe=(t,e)=>{for(var n in e||(e={}))qSe.call(e,n)&&pM(t,n,e[n]);if(fM)for(var n of fM(e))VSe.call(e,n)&&pM(t,n,e[n]);return t},KSe=(t,e)=>zSe(t,HSe(e));function vm(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function YSe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...vm(n.accounts))}),e}function QSe(t,e){const n=[];return Object.values(t).forEach(r=>{vm(r.accounts).includes(e)&&n.push(...r.methods)}),n}function ZSe(t,e){const n=[];return Object.values(t).forEach(r=>{vm(r.accounts).includes(e)&&n.push(...r.events)}),n}function t1(t){return t.includes(":")}function $f(t){return t1(t)?t.split(":")[0]:t}function mM(t){var e,n,r;const s={};if(!hu(t))return s;for(const[i,o]of Object.entries(t)){const a=t1(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=$f(i);s[u]=KSe(GSe({},s[u]),{chains:La(a,(e=s[u])==null?void 0:e.chains),methods:La(c,(n=s[u])==null?void 0:n.methods),events:La(l,(r=s[u])==null?void 0:r.events)})}return s}function XSe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function gM(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=XSe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=La(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function JSe(t,e){var n,r,s,i,o,a;const c=mM(t),l=mM(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:La((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:La((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:La((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const eAe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},tAe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pe(t,e){const{message:n,code:r}=tAe[t];return{message:e?`${n} ${e}`:n,code:r}}function on(t,e){const{message:n,code:r}=eAe[t];return{message:e?`${n} ${e}`:n,code:r}}function du(t,e){return!!Array.isArray(t)}function hu(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function jr(t){return typeof t>"u"}function tr(t,e){return e&&jr(t)?!0:typeof t=="string"&&!!t.trim().length}function QO(t,e){return e&&jr(t)?!0:typeof t=="number"&&!isNaN(t)}function nAe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return bd(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=vm(a),d=n[o];(!bd(UW(o,d),u)||!bd(d.methods,c)||!bd(d.events,l))&&(i=!1)}),i):!1}function uE(t){return tr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function rAe(t){if(tr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&uE(n)}}return!1}function sAe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(tr(t,!1)){if(e(t))return!0;const n=zW(t);return e(n)}}catch{}return!1}function iAe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function oAe(t){return t==null?void 0:t.topic}function aAe(t,e){let n=null;return tr(t==null?void 0:t.publicKey,!1)||(n=pe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function yM(t){let e=!0;return du(t)?t.length&&(e=t.every(n=>tr(n,!1))):e=!1,e}function cAe(t,e,n){let r=null;return du(e)&&e.length?e.forEach(s=>{r||uE(s)||(r=on("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):uE(t)||(r=on("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function lAe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=cAe(s,UW(s,i),`${e} ${n}`);o&&(r=o)}),r}function uAe(t,e){let n=null;return du(t)?t.forEach(r=>{n||rAe(r)||(n=on("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=on("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function dAe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=uAe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function hAe(t,e){let n=null;return yM(t==null?void 0:t.methods)?yM(t==null?void 0:t.events)||(n=on("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=on("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function Ez(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=hAe(r,`${e}, namespace`);s&&(n=s)}),n}function fAe(t,e,n){let r=null;if(t&&hu(t)){const s=Ez(t,e);s&&(r=s);const i=lAe(t,e,n);i&&(r=i)}else r=pe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function kA(t,e){let n=null;if(t&&hu(t)){const r=Ez(t,e);r&&(n=r);const s=dAe(t,e);s&&(n=s)}else n=pe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function Cz(t){return tr(t.protocol,!0)}function pAe(t,e){let n=!1;return t?t&&du(t)&&t.length&&t.forEach(r=>{n=Cz(r)}):n=!0,n}function mAe(t){return typeof t=="number"}function Us(t){return typeof t<"u"&&typeof t!==null}function gAe(t){return!(!t||typeof t!="object"||!t.code||!QO(t.code,!1)||!t.message||!tr(t.message,!1))}function yAe(t){return!(jr(t)||!tr(t.method,!1))}function wAe(t){return!(jr(t)||jr(t.result)&&jr(t.error)||!QO(t.id,!1)||!tr(t.jsonrpc,!1))}function bAe(t){return!(jr(t)||!tr(t.name,!1))}function wM(t,e){return!(!uE(e)||!YSe(t).includes(e))}function vAe(t,e,n){return tr(n,!1)?QSe(t,e).includes(n):!1}function _Ae(t,e,n){return tr(n,!1)?ZSe(t,e).includes(n):!1}function bM(t,e,n){let r=null;const s=EAe(t),i=CAe(e),o=Object.keys(s),a=Object.keys(i),c=vM(Object.keys(t)),l=vM(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=pe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),bd(o,a)||(r=pe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=vm(e[d].accounts);h.includes(d)||(r=pe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(bd(s[d].methods,i[d].methods)?bd(s[d].events,i[d].events)||(r=pe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=pe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function EAe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function vM(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function CAe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=vm(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function SAe(t,e){return QO(t,!1)&&t<=e.max&&t>=e.min}function _M(){const t=S0();return new Promise(e=>{switch(t){case Ei.browser:e(AAe());break;case Ei.reactNative:e(IAe());break;case Ei.node:e(xAe());break;default:e(!0)}})}function AAe(){return ym()&&(navigator==null?void 0:navigator.onLine)}async function IAe(){if($u()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function xAe(){return!0}function NAe(t){switch(S0()){case Ei.browser:TAe(t);break;case Ei.reactNative:RAe(t);break}}function TAe(t){!$u()&&ym()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function RAe(t){$u()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function PAe(){var t;return ym()&&nh()?((t=nh())==null?void 0:t.visibilityState)==="visible":!0}const DA={};class ng{static get(e){return DA[e]}static set(e,n){DA[e]=n}static delete(e){delete DA[e]}}var OAe={};const Sz="wc",Az=2,cT="core",qa=`${Sz}@2:${cT}:`,kAe={logger:"error"},DAe={database:":memory:"},$Ae="crypto",EM="client_ed25519_seed",MAe=he.ONE_DAY,LAe="keychain",UAe="0.3",jAe="messages",BAe="0.3",CM=he.SIX_HOURS,FAe="publisher",Iz="irn",WAe="error",xz="wss://relay.walletconnect.org",zAe="relayer",Sr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},HAe="_subscription",Bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},qAe=.1,lT="2.21.0",Sn={link_mode:"link_mode",relay:"relay"},Ov={inbound:"inbound",outbound:"outbound"},VAe="0.3",GAe="WALLETCONNECT_CLIENT_ID",SM="WALLETCONNECT_LINK_MODE_APPS",pi={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},KAe="subscription",YAe="0.3",QAe="pairing",ZAe="0.3",rg={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},id={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},_o={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},XAe="history",JAe="0.3",eIe="expirer",qi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},tIe="0.3",nIe="verify-api",rIe="https://verify.walletconnect.com",Nz="https://verify.walletconnect.org",iy=Nz,sIe=`${iy}/v3`,iIe=[rIe,Nz],oIe="echo",aIe="https://echo.walletconnect.com",fa={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},dc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Eo={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Wu={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},zu={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},sg={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},cIe=.1,lIe="event-client",uIe=86400,dIe="https://pulse.walletconnect.org/batch";function hIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,m++;for(var _=(b-y)*u+1>>>0,E=new Uint8Array(_);y!==b;){for(var C=p[y],I=0,A=_-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*E[A]>>>0,E[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=_-w;x!==_&&E[x]===0;)x++;for(var S=c.repeat(m);x<_;++x)S+=t.charAt(E[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var w=0,y=0;p[m]===c;)w++,m++;for(var b=(p.length-m)*l+1>>>0,_=new Uint8Array(b);p[m];){var E=n[p.charCodeAt(m)];if(E===255)return;for(var C=0,I=b-1;(E!==0||C<y)&&I!==-1;I--,C++)E+=a*_[I]>>>0,_[I]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=C,m++}if(p[m]!==" "){for(var A=b-y;A!==b&&_[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=_[A++];return x}}}function f(p){var m=h(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var fIe=hIe,pIe=fIe;const Tz=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},mIe=t=>new TextEncoder().encode(t),gIe=t=>new TextDecoder().decode(t);class yIe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class wIe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rz(this,e)}}class bIe{constructor(e){this.decoders=e}or(e){return Rz(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Rz=(t,e)=>new bIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class vIe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new yIe(e,n,r),this.decoder=new wIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const n1=({name:t,prefix:e,encode:n,decode:r})=>new vIe(t,e,n,r),R0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=pIe(n,e);return n1({prefix:t,name:e,encode:r,decode:i=>Tz(s(i))})},_Ie=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},EIe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Kr=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>n1({prefix:e,name:t,encode(s){return EIe(s,r,n)},decode(s){return _Ie(s,r,n,t)}}),CIe=n1({prefix:"\0",name:"identity",encode:t=>gIe(t),decode:t=>mIe(t)});var SIe=Object.freeze({__proto__:null,identity:CIe});const AIe=Kr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var IIe=Object.freeze({__proto__:null,base2:AIe});const xIe=Kr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var NIe=Object.freeze({__proto__:null,base8:xIe});const TIe=R0({prefix:"9",name:"base10",alphabet:"0123456789"});var RIe=Object.freeze({__proto__:null,base10:TIe});const PIe=Kr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),OIe=Kr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var kIe=Object.freeze({__proto__:null,base16:PIe,base16upper:OIe});const DIe=Kr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$Ie=Kr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),MIe=Kr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),LIe=Kr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UIe=Kr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jIe=Kr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),BIe=Kr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),FIe=Kr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),WIe=Kr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var zIe=Object.freeze({__proto__:null,base32:DIe,base32upper:$Ie,base32pad:MIe,base32padupper:LIe,base32hex:UIe,base32hexupper:jIe,base32hexpad:BIe,base32hexpadupper:FIe,base32z:WIe});const HIe=R0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),qIe=R0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var VIe=Object.freeze({__proto__:null,base36:HIe,base36upper:qIe});const GIe=R0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),KIe=R0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var YIe=Object.freeze({__proto__:null,base58btc:GIe,base58flickr:KIe});const QIe=Kr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ZIe=Kr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),XIe=Kr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),JIe=Kr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var exe=Object.freeze({__proto__:null,base64:QIe,base64pad:ZIe,base64url:XIe,base64urlpad:JIe});const Pz=Array.from(""),txe=Pz.reduce((t,e,n)=>(t[n]=e,t),[]),nxe=Pz.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function rxe(t){return t.reduce((e,n)=>(e+=txe[n],e),"")}function sxe(t){const e=[];for(const n of t){const r=nxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const ixe=n1({prefix:"",name:"base256emoji",encode:rxe,decode:sxe});var oxe=Object.freeze({__proto__:null,base256emoji:ixe}),axe=Oz,AM=128,cxe=-128,lxe=Math.pow(2,31);function Oz(t,e,n){e=e||[],n=n||0;for(var r=n;t>=lxe;)e[n++]=t&255|AM,t/=128;for(;t&cxe;)e[n++]=t&255|AM,t>>>=7;return e[n]=t|0,Oz.bytes=n-r+1,e}var uxe=uT,dxe=128,IM=127;function uT(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw uT.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&IM)<<s:(o&IM)*Math.pow(2,s),s+=7}while(o>=dxe);return uT.bytes=i-r,n}var hxe=Math.pow(2,7),fxe=Math.pow(2,14),pxe=Math.pow(2,21),mxe=Math.pow(2,28),gxe=Math.pow(2,35),yxe=Math.pow(2,42),wxe=Math.pow(2,49),bxe=Math.pow(2,56),vxe=Math.pow(2,63),_xe=function(t){return t<hxe?1:t<fxe?2:t<pxe?3:t<mxe?4:t<gxe?5:t<yxe?6:t<wxe?7:t<bxe?8:t<vxe?9:10},Exe={encode:axe,decode:uxe,encodingLength:_xe},kz=Exe;const xM=(t,e,n=0)=>(kz.encode(t,e,n),e),NM=t=>kz.encodingLength(t),dT=(t,e)=>{const n=e.byteLength,r=NM(t),s=r+NM(n),i=new Uint8Array(s+n);return xM(t,i,0),xM(n,i,r),i.set(e,s),new Cxe(t,n,e,i)};class Cxe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const Dz=({name:t,code:e,encode:n})=>new Sxe(t,e,n);class Sxe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?dT(this.code,n):n.then(r=>dT(this.code,r))}else throw Error("Unknown type, must be binary type")}}const $z=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Axe=Dz({name:"sha2-256",code:18,encode:$z("SHA-256")}),Ixe=Dz({name:"sha2-512",code:19,encode:$z("SHA-512")});var xxe=Object.freeze({__proto__:null,sha256:Axe,sha512:Ixe});const Mz=0,Nxe="identity",Lz=Tz,Txe=t=>dT(Mz,Lz(t)),Rxe={code:Mz,name:Nxe,encode:Lz,digest:Txe};var Pxe=Object.freeze({__proto__:null,identity:Rxe});new TextEncoder,new TextDecoder;const TM={...SIe,...IIe,...NIe,...RIe,...kIe,...zIe,...VIe,...YIe,...exe,...oxe};({...xxe,...Pxe});function Oxe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Uz(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const RM=Uz("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$A=Uz("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Oxe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),kxe={utf8:RM,"utf-8":RM,hex:TM.base16,latin1:$A,ascii:$A,binary:$A,...TM};function Dxe(t,e="utf8"){const n=kxe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var $xe=Object.defineProperty,Mxe=(t,e,n)=>e in t?$xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,la=(t,e,n)=>Mxe(t,typeof e!="symbol"?e+"":e,n);class Lxe{constructor(e,n){this.core=e,this.logger=n,la(this,"keychain",new Map),la(this,"name",LAe),la(this,"version",UAe),la(this,"initialized",!1),la(this,"storagePrefix",qa),la(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),la(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),la(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),la(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=pe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),la(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=qr(n,this.name)}get context(){return oi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,QN(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZN(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Uxe=Object.defineProperty,jxe=(t,e,n)=>e in t?Uxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kr=(t,e,n)=>jxe(t,typeof e!="symbol"?e+"":e,n);class Bxe{constructor(e,n,r){this.core=e,this.logger=n,kr(this,"name",$Ae),kr(this,"keychain"),kr(this,"randomSessionIdentifier",aT()),kr(this,"initialized",!1),kr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),kr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),kr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=z$(s);return nW(i.publicKey)}),kr(this,"generateKeyPair",()=>{this.isInitialized();const s=TSe();return this.setPrivateKey(s.publicKey,s.privateKey)}),kr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=z$(i),a=this.randomSessionIdentifier;return await vye(a,s,MAe,o)}),kr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=RSe(a,i);return this.setSymKey(c,o)}),kr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Pv(s);return await this.keychain.set(o,s),o}),kr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),kr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),kr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=_z(o),c=Wc(i);if(uM(a))return kSe(c,o==null?void 0:o.encoding);if(lM(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return PSe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),kr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=$Se(i,o);if(uM(a)){const c=DSe(i,o==null?void 0:o.encoding);return th(c)}if(lM(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=OSe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return th(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),kr(this,"getPayloadType",(s,i=Wo)=>{const o=Rw({encoded:s,encoding:i});return ch(o.type)}),kr(this,"getPayloadSenderPublicKey",(s,i=Wo)=>{const o=Rw({encoded:s,encoding:i});return o.senderPublicKey?ni(o.senderPublicKey,_s):void 0}),this.core=e,this.logger=qr(n,this.name),this.keychain=r||new Lxe(this.core,this.logger)}get context(){return oi(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(EM)}catch{e=aT(),await this.keychain.set(EM,e)}return Dxe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Fxe=Object.defineProperty,Wxe=Object.defineProperties,zxe=Object.getOwnPropertyDescriptors,PM=Object.getOwnPropertySymbols,Hxe=Object.prototype.hasOwnProperty,qxe=Object.prototype.propertyIsEnumerable,hT=(t,e,n)=>e in t?Fxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vxe=(t,e)=>{for(var n in e||(e={}))Hxe.call(e,n)&&hT(t,n,e[n]);if(PM)for(var n of PM(e))qxe.call(e,n)&&hT(t,n,e[n]);return t},Gxe=(t,e)=>Wxe(t,zxe(e)),ci=(t,e,n)=>hT(t,typeof e!="symbol"?e+"":e,n);class Kxe extends H_e{constructor(e,n){super(e,n),this.logger=e,this.core=n,ci(this,"messages",new Map),ci(this,"messagesWithoutClientAck",new Map),ci(this,"name",jAe),ci(this,"version",BAe),ci(this,"initialized",!1),ci(this,"storagePrefix",qa),ci(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ci(this,"set",async(r,s,i)=>{this.isInitialized();const o=Ca(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Ov.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Gxe(Vxe({},c),{[o]:s}))}return await this.persist(),o}),ci(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),ci(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ci(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Ca(s);return typeof i[o]<"u"}),ci(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Ca(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),ci(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=qr(e,this.name),this.core=n}get context(){return oi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,QN(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,QN(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZN(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?ZN(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Yxe=Object.defineProperty,Qxe=Object.defineProperties,Zxe=Object.getOwnPropertyDescriptors,OM=Object.getOwnPropertySymbols,Xxe=Object.prototype.hasOwnProperty,Jxe=Object.prototype.propertyIsEnumerable,fT=(t,e,n)=>e in t?Yxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qb=(t,e)=>{for(var n in e||(e={}))Xxe.call(e,n)&&fT(t,n,e[n]);if(OM)for(var n of OM(e))Jxe.call(e,n)&&fT(t,n,e[n]);return t},MA=(t,e)=>Qxe(t,Zxe(e)),Co=(t,e,n)=>fT(t,typeof e!="symbol"?e+"":e,n);class eNe extends q_e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Co(this,"events",new fo.EventEmitter),Co(this,"name",FAe),Co(this,"queue",new Map),Co(this,"publishTimeout",he.toMiliseconds(he.ONE_MINUTE)),Co(this,"initialPublishTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Co(this,"needsTransportRestart",!1),Co(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||CM,c=lE(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||wd().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async m=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Sr.publish,w),m(h))};this.relayer.events.on(Sr.publish,w);const y=zl(new Promise((b,_)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),_(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Sr.publish,w)}catch(b){this.queue.set(d,MA(qb({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await zl(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Co(this,"on",(r,s)=>{this.events.on(r,s)}),Co(this,"once",(r,s)=>{this.events.once(r,s)}),Co(this,"off",(r,s)=>{this.events.off(r,s)}),Co(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=qr(n,this.name),this.registerEventListeners()}get context(){return oi(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=CM,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Eg(lE().protocol).publish,params:qb({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};jr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),jr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const m=await this.relayer.request(p);return this.relayer.events.emit(Sr.publish,e),this.logger.debug("Successfully Published Payload"),m}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,MA(qb({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(MA(qb({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ih.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Sr.connection_stalled);return}this.checkQueue()}),this.relayer.on(Sr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var tNe=Object.defineProperty,nNe=(t,e,n)=>e in t?tNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zh=(t,e,n)=>nNe(t,typeof e!="symbol"?e+"":e,n);class rNe{constructor(){Zh(this,"map",new Map),Zh(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Zh(this,"get",e=>this.map.get(e)||[]),Zh(this,"exists",(e,n)=>this.get(e).includes(n)),Zh(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Zh(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var sNe=Object.defineProperty,iNe=Object.defineProperties,oNe=Object.getOwnPropertyDescriptors,kM=Object.getOwnPropertySymbols,aNe=Object.prototype.hasOwnProperty,cNe=Object.prototype.propertyIsEnumerable,pT=(t,e,n)=>e in t?sNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ig=(t,e)=>{for(var n in e||(e={}))aNe.call(e,n)&&pT(t,n,e[n]);if(kM)for(var n of kM(e))cNe.call(e,n)&&pT(t,n,e[n]);return t},LA=(t,e)=>iNe(t,oNe(e)),un=(t,e,n)=>pT(t,typeof e!="symbol"?e+"":e,n);class lNe extends K_e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,un(this,"subscriptions",new Map),un(this,"topicMap",new rNe),un(this,"events",new fo.EventEmitter),un(this,"name",KAe),un(this,"version",YAe),un(this,"pending",new Map),un(this,"cached",[]),un(this,"initialized",!1),un(this,"storagePrefix",qa),un(this,"subscribeTimeout",he.toMiliseconds(he.ONE_MINUTE)),un(this,"initialSubscribeTimeout",he.toMiliseconds(he.ONE_SECOND*15)),un(this,"clientId"),un(this,"batchSubscribeTopicsLimit",500),un(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),un(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=lE(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),un(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),un(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),un(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),un(this,"on",(r,s)=>{this.events.on(r,s)}),un(this,"once",(r,s)=>{this.events.once(r,s)}),un(this,"off",(r,s)=>{this.events.off(r,s)}),un(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),un(this,"start",async()=>{await this.onConnect()}),un(this,"stop",async()=>{await this.onDisconnect()}),un(this,"restart",async()=>{await this.restore(),await this.onRestart()}),un(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),un(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ih.pulse,async()=>{await this.checkPending()}),this.events.on(pi.created,async r=>{const s=pi.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(pi.deleted,async r=>{const s=pi.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=qr(n,this.name),this.clientId=""}get context(){return oi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=lE(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=on("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Sn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Eg(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Sn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},he.toMiliseconds(he.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(pi.created,d),u(h.id))};this.events.on(pi.created,d);try{const h=await zl(new Promise((f,p)=>{this.relayer.request(i).catch(m=>{this.logger.warn(m,m==null?void 0:m.message),p(m)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(pi.created,d),u(h)}catch{}}),l=await zl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Sr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Eg(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await zl(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Sr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Eg(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await zl(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Sr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Eg(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,LA(ig({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,ig({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,ig({},n)),this.topicMap.set(n.topic,e),this.events.emit(pi.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(pi.deleted,LA(ig({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(pi.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(pi.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>LA(ig({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await gCe(he.toMiliseconds(he.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Ca(e+await this.getClientId())}}var uNe=Object.defineProperty,DM=Object.getOwnPropertySymbols,dNe=Object.prototype.hasOwnProperty,hNe=Object.prototype.propertyIsEnumerable,mT=(t,e,n)=>e in t?uNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$M=(t,e)=>{for(var n in e||(e={}))dNe.call(e,n)&&mT(t,n,e[n]);if(DM)for(var n of DM(e))hNe.call(e,n)&&mT(t,n,e[n]);return t},Ut=(t,e,n)=>mT(t,typeof e!="symbol"?e+"":e,n);class fNe extends V_e{constructor(e){super(e),Ut(this,"protocol","wc"),Ut(this,"version",2),Ut(this,"core"),Ut(this,"logger"),Ut(this,"events",new fo.EventEmitter),Ut(this,"provider"),Ut(this,"messages"),Ut(this,"subscriber"),Ut(this,"publisher"),Ut(this,"name",zAe),Ut(this,"transportExplicitlyClosed",!1),Ut(this,"initialized",!1),Ut(this,"connectionAttemptInProgress",!1),Ut(this,"relayUrl"),Ut(this,"projectId"),Ut(this,"packageName"),Ut(this,"bundleId"),Ut(this,"hasExperiencedNetworkDisruption",!1),Ut(this,"pingTimeout"),Ut(this,"heartBeatTimeout",he.toMiliseconds(he.THIRTY_SECONDS+he.FIVE_SECONDS)),Ut(this,"reconnectTimeout"),Ut(this,"connectPromise"),Ut(this,"reconnectInProgress",!1),Ut(this,"requestsInFlight",[]),Ut(this,"connectTimeout",he.toMiliseconds(he.ONE_SECOND*15)),Ut(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||wd().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ut(this,"resetPingTimeout",()=>{aE()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ut(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ut(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Sr.connect)}),Ut(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ut(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Sr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ut(this,"registerProviderListeners",()=>{this.provider.on(Bi.payload,this.onPayloadHandler),this.provider.on(Bi.connect,this.onConnectHandler),this.provider.on(Bi.disconnect,this.onDisconnectHandler),this.provider.on(Bi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?qr(e.logger,this.name):b0(Nh({level:e.logger||WAe})),this.messages=new Kxe(this.logger,e.core),this.subscriber=new lNe(this,this.logger),this.publisher=new eNe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||xz,this.projectId=e.projectId,eCe()?this.packageName=k5():tCe()&&(this.bundleId=k5()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return oi(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Sn.relay},Ov.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(pi.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(pi.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,$M({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await zl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await _M())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=ir(he.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Sr.message,e),await this.recordMessageEvent(e,Ov.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Bi.disconnect,i),await zl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Bi.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Bi.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Bi.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,he.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(aE())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new po(new O0e(oCe({sdkVersion:lT,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),FO(e)){if(!e.method.endsWith(HAe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Sn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($M({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else qC(e)&&this.events.emit(Sr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Ov.inbound),this.events.emit(Sr.message,e))}async acknowledgePayload(e){const n=zC(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Bi.payload,this.onPayloadHandler),this.provider.off(Bi.connect,this.onConnectHandler),this.provider.off(Bi.disconnect,this.onDisconnectHandler),this.provider.off(Bi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await _M();NAe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ih.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&PAe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Sr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},he.toMiliseconds(qAe)))))}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function pNe(){}function MM(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function LM(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function UM(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const mNe="[object RegExp]",gNe="[object String]",yNe="[object Number]",wNe="[object Boolean]",jM="[object Arguments]",bNe="[object Symbol]",vNe="[object Date]",_Ne="[object Map]",ENe="[object Set]",CNe="[object Array]",SNe="[object Function]",ANe="[object ArrayBuffer]",UA="[object Object]",INe="[object Error]",xNe="[object DataView]",NNe="[object Uint8Array]",TNe="[object Uint8ClampedArray]",RNe="[object Uint16Array]",PNe="[object Uint32Array]",ONe="[object BigUint64Array]",kNe="[object Int8Array]",DNe="[object Int16Array]",$Ne="[object Int32Array]",MNe="[object BigInt64Array]",LNe="[object Float32Array]",UNe="[object Float64Array]";function jNe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function BNe(t,e,n){return Cg(t,e,void 0,void 0,void 0,void 0,n)}function Cg(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return oy(t,e,i,o)}return oy(t,e,i,o)}function oy(t,e,n,r){if(Object.is(t,e))return!0;let s=UM(t),i=UM(e);if(s===jM&&(s=UA),i===jM&&(i=UA),s!==i)return!1;switch(s){case gNe:return t.toString()===e.toString();case yNe:{const c=t.valueOf(),l=e.valueOf();return jNe(c,l)}case wNe:case vNe:case bNe:return Object.is(t.valueOf(),e.valueOf());case mNe:return t.source===e.source&&t.flags===e.flags;case SNe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case _Ne:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Cg(l,e.get(c),c,t,e,n,r))return!1;return!0}case ENe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Cg(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case CNe:case NNe:case TNe:case RNe:case PNe:case ONe:case kNe:case DNe:case $Ne:case MNe:case LNe:case UNe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Cg(t[c],e[c],c,t,e,n,r))return!1;return!0}case ANe:return t.byteLength!==e.byteLength?!1:oy(new Uint8Array(t),new Uint8Array(e),n,r);case xNe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:oy(new Uint8Array(t),new Uint8Array(e),n,r);case INe:return t.name===e.name&&t.message===e.message;case UA:{if(!(oy(t.constructor,e.constructor,n,r)||MM(t)&&MM(e)))return!1;const c=[...Object.keys(t),...LM(t)],l=[...Object.keys(e),...LM(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Cg(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function FNe(t,e){return BNe(t,e,pNe)}var WNe=Object.defineProperty,BM=Object.getOwnPropertySymbols,zNe=Object.prototype.hasOwnProperty,HNe=Object.prototype.propertyIsEnumerable,gT=(t,e,n)=>e in t?WNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FM=(t,e)=>{for(var n in e||(e={}))zNe.call(e,n)&&gT(t,n,e[n]);if(BM)for(var n of BM(e))HNe.call(e,n)&&gT(t,n,e[n]);return t},ks=(t,e,n)=>gT(t,typeof e!="symbol"?e+"":e,n);class Rh extends G_e{constructor(e,n,r,s=qa,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,ks(this,"map",new Map),ks(this,"version",VAe),ks(this,"cached",[]),ks(this,"initialized",!1),ks(this,"getKey"),ks(this,"storagePrefix",qa),ks(this,"recentlyDeleted",[]),ks(this,"recentlyDeletedLimit",200),ks(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!jr(o)?this.map.set(this.getKey(o),o):iAe(o)?this.map.set(o.id,o):oAe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),ks(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),ks(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),ks(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>FNe(a[c],o[c]))):this.values)),ks(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=FM(FM({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),ks(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=qr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return oi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=pe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qNe=Object.defineProperty,VNe=(t,e,n)=>e in t?qNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nt=(t,e,n)=>VNe(t,typeof e!="symbol"?e+"":e,n);class GNe{constructor(e,n){this.core=e,this.logger=n,Nt(this,"name",QAe),Nt(this,"version",ZAe),Nt(this,"events",new TO),Nt(this,"pairings"),Nt(this,"initialized",!1),Nt(this,"storagePrefix",qa),Nt(this,"ignoredPayloadTypes",[Pc]),Nt(this,"registeredMethods",[]),Nt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Nt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Nt(this,"create",async r=>{this.isInitialized();const s=aT(),i=await this.core.crypto.setSymKey(s),o=ir(he.FIVE_MINUTES),a={protocol:Iz},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=hM({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(id.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Nt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[fa.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=dM(r.uri);s.props.properties.topic=i,s.addTrace(fa.pairing_uri_validation_success),s.addTrace(fa.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(fa.existing_pairing),u.active)throw s.setError(dc.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(fa.pairing_not_expired)}const d=c||ir(he.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(fa.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(id.create,h),s.addTrace(fa.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(fa.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(dc.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(dc.subscribe_pairing_topic_failure),f}return s.addTrace(fa.subscribe_pairing_topic_success),h}),Nt(this,"activate",async({topic:r})=>{this.isInitialized();const s=ir(he.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Nt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Xu();this.events.once(Gt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Nt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Nt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Nt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Nt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",on("USER_DISCONNECTED")),await this.deletePairing(s))}),Nt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return hM({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Nt(this,"sendRequest",async(r,s,i)=>{const o=Wl(s,i),a=await this.core.crypto.encode(r,o),c=rg[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Nt(this,"sendResult",async(r,s,i)=>{const o=zC(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=rg[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Nt(this,"sendError",async(r,s,i)=>{const o=HC(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=rg[c]?rg[c].res:rg.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Nt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,on("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Nt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>_l(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Nt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Nt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Nt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(id.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Nt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{ga(s)?this.events.emit(Gt("pairing_ping",i),{}):Ki(s)&&this.events.emit(Gt("pairing_ping",i),{error:s.error})},500)}),Nt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(id.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Nt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=on("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Nt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(on("WC_METHOD_UNSUPPORTED",r))}),Nt(this,"isValidPair",(r,s)=>{var i;if(!Us(r)){const{message:a}=pe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(dc.malformed_pairing_uri),new Error(a)}if(!sAe(r.uri)){const{message:a}=pe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(dc.malformed_pairing_uri),new Error(a)}const o=dM(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=pe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(dc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=pe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(dc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&he.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(dc.pairing_expired);const{message:a}=pe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Nt(this,"isValidPing",async r=>{if(!Us(r)){const{message:i}=pe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Nt(this,"isValidDisconnect",async r=>{if(!Us(r)){const{message:i}=pe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Nt(this,"isValidPairingTopic",async r=>{if(!tr(r,!1)){const{message:s}=pe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(_l(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=pe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=qr(n,this.name),this.pairings=new Rh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return oi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Sr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Sn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);FO(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):qC(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(qi.expired,async e=>{const{topic:n}=WW(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(id.expire,{topic:n}))})}}var KNe=Object.defineProperty,YNe=(t,e,n)=>e in t?KNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dr=(t,e,n)=>YNe(t,typeof e!="symbol"?e+"":e,n);class QNe extends z_e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Dr(this,"records",new Map),Dr(this,"events",new fo.EventEmitter),Dr(this,"name",XAe),Dr(this,"version",JAe),Dr(this,"cached",[]),Dr(this,"initialized",!1),Dr(this,"storagePrefix",qa),Dr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Dr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:ir(he.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(_o.created,o)}),Dr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ki(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(_o.updated,s))}),Dr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Dr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(_o.deleted,i)}}),this.persist()}),Dr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Dr(this,"on",(r,s)=>{this.events.on(r,s)}),Dr(this,"once",(r,s)=>{this.events.once(r,s)}),Dr(this,"off",(r,s)=>{this.events.off(r,s)}),Dr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=qr(n,this.name)}get context(){return oi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Wl(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(_o.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(_o.created,e=>{const n=_o.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(_o.updated,e=>{const n=_o.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(_o.deleted,e=>{const n=_o.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Ih.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{he.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(_o.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ZNe=Object.defineProperty,XNe=(t,e,n)=>e in t?ZNe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jr=(t,e,n)=>XNe(t,typeof e!="symbol"?e+"":e,n);class JNe extends Y_e{constructor(e,n){super(e,n),this.core=e,this.logger=n,Jr(this,"expirations",new Map),Jr(this,"events",new fo.EventEmitter),Jr(this,"name",eIe),Jr(this,"version",tIe),Jr(this,"cached",[]),Jr(this,"initialized",!1),Jr(this,"storagePrefix",qa),Jr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Jr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Jr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(qi.created,{target:i,expiration:o})}),Jr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Jr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(qi.deleted,{target:s,expiration:i})}}),Jr(this,"on",(r,s)=>{this.events.on(r,s)}),Jr(this,"once",(r,s)=>{this.events.once(r,s)}),Jr(this,"off",(r,s)=>{this.events.off(r,s)}),Jr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=qr(n,this.name)}get context(){return oi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return aCe(e);if(typeof e=="number")return cCe(e);const{message:n}=pe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(qi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;he.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(qi.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Ih.pulse,()=>this.checkExpirations()),this.events.on(qi.created,e=>{const n=qi.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(qi.expired,e=>{const n=qi.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(qi.deleted,e=>{const n=qi.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var eTe=Object.defineProperty,tTe=(t,e,n)=>e in t?eTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,er=(t,e,n)=>tTe(t,typeof e!="symbol"?e+"":e,n);class nTe extends Q_e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,er(this,"name",nIe),er(this,"abortController"),er(this,"isDevEnv"),er(this,"verifyUrlV3",sIe),er(this,"storagePrefix",qa),er(this,"version",Az),er(this,"publicKey"),er(this,"fetchPromise"),er(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&he.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),er(this,"register",async s=>{if(!ym()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=nh(),u=this.startAbortTimer(he.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(m),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const m=l.createElement("iframe");m.src=c,m.style.display="none",m.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(LN(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(m),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(m),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),er(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(LN(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),er(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(he.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),er(this,"getVerifyUrl",s=>{let i=s||iy;return iIe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${iy}`),i=iy),i}),er(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(he.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),er(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),er(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),er(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),er(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),er(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),er(this,"validateAttestation",(s,i)=>{const o=LSe(s,i.publicKey),a={hasExpired:he.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=qr(n,this.name),this.abortController=new AbortController,this.isDevEnv=zO(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return oi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}}var rTe=Object.defineProperty,sTe=(t,e,n)=>e in t?rTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WM=(t,e,n)=>sTe(t,typeof e!="symbol"?e+"":e,n);class iTe extends Z_e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,WM(this,"context",oIe),WM(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${aIe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=qr(n,this.context)}}var oTe=Object.defineProperty,zM=Object.getOwnPropertySymbols,aTe=Object.prototype.hasOwnProperty,cTe=Object.prototype.propertyIsEnumerable,yT=(t,e,n)=>e in t?oTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,og=(t,e)=>{for(var n in e||(e={}))aTe.call(e,n)&&yT(t,n,e[n]);if(zM)for(var n of zM(e))cTe.call(e,n)&&yT(t,n,e[n]);return t},gr=(t,e,n)=>yT(t,typeof e!="symbol"?e+"":e,n);class lTe extends X_e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,gr(this,"context",lIe),gr(this,"storagePrefix",qa),gr(this,"storageVersion",cIe),gr(this,"events",new Map),gr(this,"shouldPersist",!1),gr(this,"init",async()=>{if(!zO())try{const s={eventId:$5(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:BW(this.core.relayer.protocol,this.core.relayer.version,lT)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),gr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=$5(),u=this.core.projectId||"",d=Date.now(),h=og({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),gr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return og(og({},a),this.setMethods(a.eventId))}),gr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),gr(this,"setEventListeners",()=>{this.core.heartbeat.on(Ih.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{he.fromMiliseconds(Date.now())-he.fromMiliseconds(s.timestamp)>uIe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),gr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),gr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),gr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),gr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),gr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,og(og({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),gr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),gr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${dIe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${lT}${i}`,{method:"POST",body:JSON.stringify(s)})}),gr(this,"getAppDomain",()=>jW().url),this.logger=qr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var uTe=Object.defineProperty,HM=Object.getOwnPropertySymbols,dTe=Object.prototype.hasOwnProperty,hTe=Object.prototype.propertyIsEnumerable,wT=(t,e,n)=>e in t?uTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qM=(t,e)=>{for(var n in e||(e={}))dTe.call(e,n)&&wT(t,n,e[n]);if(HM)for(var n of HM(e))hTe.call(e,n)&&wT(t,n,e[n]);return t},mn=(t,e,n)=>wT(t,typeof e!="symbol"?e+"":e,n);let fTe=class jz extends j_e{constructor(e){var n;super(e),mn(this,"protocol",Sz),mn(this,"version",Az),mn(this,"name",cT),mn(this,"relayUrl"),mn(this,"projectId"),mn(this,"customStoragePrefix"),mn(this,"events",new fo.EventEmitter),mn(this,"logger"),mn(this,"heartbeat"),mn(this,"relayer"),mn(this,"crypto"),mn(this,"storage"),mn(this,"history"),mn(this,"expirer"),mn(this,"pairing"),mn(this,"verify"),mn(this,"echoClient"),mn(this,"linkModeSupportedApps"),mn(this,"eventClient"),mn(this,"initialized",!1),mn(this,"logChunkController"),mn(this,"on",(a,c)=>this.events.on(a,c)),mn(this,"once",(a,c)=>this.events.once(a,c)),mn(this,"off",(a,c)=>this.events.off(a,c)),mn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),mn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Sn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||xz,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Nh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:kAe.logger,name:cT}),{logger:i,chunkLoggerController:o}=UC({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=qr(i,this.name),this.heartbeat=new qfe,this.crypto=new Bxe(this,this.logger,e==null?void 0:e.keychain),this.history=new QNe(this,this.logger),this.expirer=new JNe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new M_e(qM(qM({},DAe),e==null?void 0:e.storageOptions)),this.relayer=new fNe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new GNe(this,this.logger),this.verify=new nTe(this,this.logger,this.storage),this.echoClient=new iTe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new lTe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new jz(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(GAe,r),n}get context(){return oi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(SM,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(SM)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&OAe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const pTe=fTe,Bz="wc",Fz=2,Wz="client",ZO=`${Bz}@${Fz}:${Wz}:`,jA={name:Wz,logger:"error"},VM="WALLETCONNECT_DEEPLINK_CHOICE",mTe="proposal",GM="Proposal expired",gTe="session",Xh=he.SEVEN_DAYS,yTe="engine",yr={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1114},res:{ttl:he.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:he.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:he.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1119}}},BA={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},ua={idle:"IDLE",active:"ACTIVE"},KM={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},wTe="request",bTe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],vTe="wc",_Te="auth",ETe="authKeys",CTe="pairingTopics",STe="requests",r1=`${vTe}@${1.5}:${_Te}:`,kv=`${r1}:PUB_KEY`;var ATe=Object.defineProperty,ITe=Object.defineProperties,xTe=Object.getOwnPropertyDescriptors,YM=Object.getOwnPropertySymbols,NTe=Object.prototype.hasOwnProperty,TTe=Object.prototype.propertyIsEnumerable,bT=(t,e,n)=>e in t?ATe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dn=(t,e)=>{for(var n in e||(e={}))NTe.call(e,n)&&bT(t,n,e[n]);if(YM)for(var n of YM(e))TTe.call(e,n)&&bT(t,n,e[n]);return t},ls=(t,e)=>ITe(t,xTe(e)),se=(t,e,n)=>bT(t,typeof e!="symbol"?e+"":e,n);class RTe extends nEe{constructor(e){super(e),se(this,"name",yTe),se(this,"events",new TO),se(this,"initialized",!1),se(this,"requestQueue",{state:ua.idle,queue:[]}),se(this,"sessionRequestQueue",{state:ua.idle,queue:[]}),se(this,"requestQueueDelay",he.ONE_SECOND),se(this,"expectedPairingMethodMap",new Map),se(this,"recentlyDeletedMap",new Map),se(this,"recentlyDeletedLimit",200),se(this,"relayMessageCache",[]),se(this,"pendingSessions",new Map),se(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(yr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))}),se(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ls(dn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=JSe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:A}=await this.client.core.pairing.create();u=I,d=A}if(!u){const{message:I}=pe("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=yr.wc_sessionPropose.req.ttl||he.FIVE_MINUTES,m=ir(p),w=ls(dn(dn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:Iz}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:m,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ma()}),y=Gt("session_connect",w.id),{reject:b,resolve:_,done:E}=Xu(p,GM),C=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:GM,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:I,session:A})=>{this.client.events.off("proposal_expire",C),I?b(I):A&&_(A)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:E}}),se(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),se(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Eo.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Wu.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Wu.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Wu.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:m,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Eo.session_approve_started,properties:{topic:p,trace:[Eo.session_approve_started,Eo.session_namespaces_validation_success]}}));const _=await this.client.core.crypto.generateKeyPair(),E=m.publicKey,C=await this.client.core.crypto.generateSharedKey(_,E),I=dn(dn(dn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:_,metadata:this.client.metadata},expiry:ir(Xh)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),A=Sn.relay;b.addTrace(Eo.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:A})}catch(S){throw b.setError(Wu.subscribe_session_topic_failure),S}b.addTrace(Eo.subscribe_session_topic_success);const x=ls(dn({},I),{topic:C,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:m.publicKey,metadata:m.metadata},controller:_,transportType:Sn.relay});await this.client.session.set(C,x),b.addTrace(Eo.store_session);try{b.addTrace(Eo.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Wu.session_settle_publish_failure),S}),b.addTrace(Eo.session_settle_publish_success),b.addTrace(Eo.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:_},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Wu.session_approve_publish_failure),S}),b.addTrace(Eo.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,on("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:m.metadata}),await this.client.proposal.delete(a,on("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,ir(Xh)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),se(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:yr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,on("USER_DISCONNECTED")))}),se(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Xu(),c=ma(),l=wd().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Gt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),se(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=ma(),{done:i,resolve:o,reject:a}=Xu();return this.events.once(Gt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,ir(Xh)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),se(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=yr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Sn.relay&&await this.confirmOnlineStateOrThrow();const c=ma(),l=wd().toString(),{done:u,resolve:d,reject:h}=Xu(o,"Request expired. Please try again.");this.events.once(Gt("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ls(dn({},s),{expiryTimestamp:ir(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const m={request:ls(dn({},s),{expiryTimestamp:ir(o)}),chainId:r},w=this.shouldSetTVF(f,m);return await Promise.all([new Promise(async y=>{await this.sendRequest(dn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:m,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,m)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const _=await hCe(this.client.core.storage,VM);await lCe({id:c,topic:i,wcDeepLink:_})}y()}),u()]).then(y=>y[2])}),se(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Sn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);ga(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ki(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),se(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ma(),i=wd().toString(),{done:o,resolve:a,reject:c}=Xu();this.events.once(Gt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),se(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=wd().toString(),a=ma();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),se(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:on("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=pe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),se(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>nAe(r,n)))),se(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),se(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Sn.link_mode:Sn.relay;o===Sn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:m=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:_}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:_}});const E=await this.client.core.crypto.generateKeyPair(),C=Pv(E);if(await Promise.all([this.client.auth.authKeys.set(kv,{responseTopic:C,publicKey:E}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),m.length>0){const{namespace:D}=Yf(a[0]);let j=s1e(D,"request",m);Rv(y)&&(j=o1e(j,y.pop())),y.push(j)}const I=w&&w>yr.wc_sessionAuthenticate.req.ttl?w:yr.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:ir(I)},x={eip155:{chains:a,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:x,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:ir(yr.wc_sessionPropose.req.ttl),id:ma()},{done:k,resolve:P,reject:M}=Xu(I,"Request expired"),W=ma(),U=Gt("session_connect",S.id),N=Gt("session_request",W),T=async({error:D,session:j})=>{this.events.off(N,$),D?M(D):j&&P({session:j})},$=async D=>{var j,z,Q;if(await this.deletePendingAuthRequest(W,{message:"fulfilled",code:0}),D.error){const Be=on("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return D.error.code===Be.code?void 0:(this.events.off(U,T),M(D.error.message))}await this.deleteProposal(S.id),this.events.off(U,T);const{cacaos:te,responder:Z}=D.result,X=[],ie=[];for(const Be of te){await z5({cacao:Be,projectId:this.client.core.projectId})||(this.client.logger.error(Be,"Signature verification failed"),M(on("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:yt}=Be,Ct=Rv(yt.resources),Kn=[XN(yt.iss)],G=cE(yt.iss);if(Ct){const J=H5(Ct),de=q5(Ct);X.push(...J),Kn.push(...de)}for(const J of Kn)ie.push(`${J}:${G}`)}const Ke=await this.client.core.crypto.generateSharedKey(E,Z.publicKey);let it;X.length>0&&(it={topic:Ke,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:Z,controller:Z.publicKey,expiry:ir(Xh),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:gM([...new Set(X)],[...new Set(ie)]),transportType:o},await this.client.core.relayer.subscribe(Ke,{transportType:o}),await this.client.session.set(Ke,it),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Z.metadata}),it=this.client.session.get(Ke)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(z=Z.metadata.redirect)!=null&&z.linkMode&&(Q=Z.metadata.redirect)!=null&&Q.universal&&r&&(this.client.core.addLinkModeSupportedApp(Z.metadata.redirect.universal),this.client.session.update(Ke,{transportType:Sn.link_mode})),P({auths:te,session:it})};this.events.once(U,T),this.events.once(N,$);let R;try{if(i){const D=Wl("wc_sessionAuthenticate",A,W);this.client.core.history.set(b,D);const j=await this.client.core.crypto.encode("",D,{type:T0,encoding:xl});R=Hb(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:A,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:W}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:yr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(D){throw this.events.off(U,T),this.events.off(N,$),D}return await this.setProposal(S.id,S),await this.setAuthRequest(W,{request:ls(dn({},A),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:R??_,response:k}}),se(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[zu.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(sg.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(sg.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Sn.relay;a===Sn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Pv(c),d={type:Pc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await z5({cacao:w,projectId:this.client.core.projectId})){i.setError(sg.invalid_cacao);const C=on("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(zu.cacaos_verified);const{p:y}=w,b=Rv(y.resources),_=[XN(y.iss)],E=cE(y.iss);if(b){const C=H5(b),I=q5(b);h.push(...C),_.push(...I)}for(const C of _)f.push(`${C}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(zu.create_authenticated_session_topic);let m;if((h==null?void 0:h.length)>0){m={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:ir(Xh),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:gM([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(zu.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(sg.subscribe_authenticated_session_topic_failure),w}i.addTrace(zu.subscribe_authenticated_session_topic_success),await this.client.session.set(p,m),i.addTrace(zu.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(zu.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(sg.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:m}}),se(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Sn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Pv(o),l={type:Pc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:yr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,on("USER_DISCONNECTED"))}),se(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return ZW(r,s)}),se(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),se(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),se(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,on("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(VM).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,on("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ua.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),se(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Wu.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,on("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),se(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ua.idle,this.client.events.emit("session_request_expire",{id:n}))}),se(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),se(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),se(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,ir(yr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),se(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Sn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),se(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||ir(yr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),se(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Wl(s,i,c);let f;const p=!!u;try{const y=p?xl:Wo;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let m;if(bTe.includes(s)){const y=Ca(JSON.stringify(h)),b=Ca(f);m=await this.client.core.verify.register({id:b,decryptedId:y})}const w=yr[s].req;if(w.attestation=m,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=Hb(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=yr[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=ls(dn({},d),{correlationId:h.id}),l?(y.internal=ls(dn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),se(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=zC(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?xl:Wo;u=await this.client.core.crypto.encode(s,l,ls(dn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(m){this.client.logger.warn("sendResult() -> getTVFParams() failed",m)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Hb(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,m=yr[p].res;m.tvf=ls(dn({},f),{correlationId:r}),o?(m.internal=ls(dn({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,m)):this.client.core.relayer.publish(s,u,m).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),se(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=HC(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?xl:Wo;u=await this.client.core.crypto.encode(s,l,ls(dn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Hb(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||yr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),se(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;_l(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{_l(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),se(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),se(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),se(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ua.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ua.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ua.idle}),se(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),se(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),se(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=pe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),se(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),se(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(dc.proposal_listener_not_found)),this.isValidConnect(dn({},s.params));const u=a.expiryTimestamp||ir(yr.wc_sessionPropose.req.ttl),d=dn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Ca(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(fa.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:yr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),se(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(ga(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ki(r)){await this.client.proposal.delete(i,on("USER_DISCONNECTED"));const o=Gt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),se(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),m=ls(dn(dn(dn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Sn.relay});await this.client.session.set(m.topic,m),await this.setExpiry(m.topic,m.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:m.peer.metadata}),this.client.events.emit("session_connect",{session:m}),this.events.emit(Gt("session_connect",f.proposalId),{session:m}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(m),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),se(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;ga(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Gt("session_approve",s),{})):Ki(r)&&(await this.client.session.delete(n,on("USER_DISCONNECTED")),this.events.emit(Gt("session_approve",s),{error:r.error}))}),se(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=ng.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:on("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(dn({topic:n},s));try{ng.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw ng.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),se(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),se(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Gt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ga(r)?this.events.emit(Gt("session_update",s),{}):Ki(r)&&this.events.emit(Gt("session_update",s),{error:r.error})}),se(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,ir(Xh)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),se(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Gt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ga(r)?this.events.emit(Gt("session_extend",s),{}):Ki(r)&&this.events.emit(Gt("session_extend",s),{error:r.error})}),se(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),se(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Gt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);ga(r)?this.events.emit(Gt("session_ping",s),{}):Ki(r)&&this.events.emit(Gt("session_ping",s),{error:r.error})},500)}),se(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Sr.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:on("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),se(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(dn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Ca(JSON.stringify(Wl("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),m={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(m),u===Sn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(m):(this.addSessionRequestToSessionRequestQueue(m),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),se(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Gt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);ga(r)?this.events.emit(Gt("session_request",s),{result:r.result}):Ki(r)&&this.events.emit(Gt("session_request",s),{error:r.error})}),se(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=ng.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(dn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),ng.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),se(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),ga(r)?this.events.emit(Gt("session_request",s),{result:r.result}):Ki(r)&&this.events.emit(Gt("session_request",s),{error:r.error})}),se(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Ca(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Sn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Pc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:yr.wc_sessionAuthenticate.autoReject,appLink:h})}}),se(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),se(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ua.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))}),se(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Gt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Gt("session_request",i.request.id),{error:r})})}),se(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ua.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ua.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),se(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),se(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Wl("wc_sessionPropose",ls(dn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),se(this,"isValidConnect",async n=>{if(!Us(n)){const{message:l}=pe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(jr(r)||await this.isValidPairingTopic(r),!pAe(c)){const{message:l}=pe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!jr(s)&&hu(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!jr(i)&&hu(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),jr(o)||this.validateSessionProps(o,"sessionProperties"),!jr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),se(this,"validateNamespaces",(n,r)=>{const s=fAe(n,"connect()",r);if(s)throw new Error(s.message)}),se(this,"isValidApprove",async n=>{if(!Us(n))throw new Error(pe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=kA(s,"approve()");if(l)throw new Error(l.message);const u=bM(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!tr(i,!0)){const{message:d}=pe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(jr(o)||this.validateSessionProps(o,"sessionProperties"),!jr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),se(this,"isValidReject",async n=>{if(!Us(n)){const{message:i}=pe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!gAe(s)){const{message:i}=pe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),se(this,"isValidSessionSettleRequest",n=>{if(!Us(n)){const{message:l}=pe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!Cz(r)){const{message:l}=pe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=aAe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=kA(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(_l(o)){const{message:l}=pe("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),se(this,"isValidUpdate",async n=>{if(!Us(n)){const{message:c}=pe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=kA(s,"update()");if(o)throw new Error(o.message);const a=bM(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),se(this,"isValidExtend",async n=>{if(!Us(n)){const{message:s}=pe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),se(this,"isValidRequest",async n=>{if(!Us(n)){const{message:c}=pe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!wM(a,i)){const{message:c}=pe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!yAe(s)){const{message:c}=pe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!vAe(a,i,s.method)){const{message:c}=pe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!SAe(o,BA)){const{message:c}=pe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${BA.min} and ${BA.max}`);throw new Error(c)}}),se(this,"isValidRespond",async n=>{var r;if(!Us(n)){const{message:o}=pe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!wAe(i)){const{message:o}=pe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),se(this,"isValidPing",async n=>{if(!Us(n)){const{message:s}=pe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),se(this,"isValidEmit",async n=>{if(!Us(n)){const{message:a}=pe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!wM(o,i)){const{message:a}=pe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!bAe(s)){const{message:a}=pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!_Ae(o,i,s.name)){const{message:a}=pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),se(this,"isValidDisconnect",async n=>{if(!Us(n)){const{message:s}=pe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),se(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!tr(s,!1))throw new Error("uri is required parameter");if(!tr(i,!1))throw new Error("domain is required parameter");if(!tr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Yf(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Yf(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),se(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||iy,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Sn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),se(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=pe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),se(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),se(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),se(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=pe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),se(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Sn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),se(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),se(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=D5(n,"topic")||"",s=decodeURIComponent(D5(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Sn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),se(this,"registerLinkModeListeners",async()=>{var n;if(zO()||$u()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),se(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(KM).includes(s.method)}),se(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ls(dn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),se(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),se(this,"extractTxHashesFromResult",(n,r)=>{try{const s=KM[n];if(typeof r=="string")return[r];const i=r[s.key];if(du(i))return n==="solana_signAllTransactions"?i.map(o=>HCe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Sr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(kv)?this.client.auth.authKeys.get(kv):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Sn.link_mode?xl:Wo});FO(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Ca(r)})):qC(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(qi.expired,async e=>{const{topic:n,id:r}=WW(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,pe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,pe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(id.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(id.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!tr(e,!1)){const{message:n}=pe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(_l(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=pe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!tr(e,!1)){const{message:n}=pe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=pe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(_l(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=pe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=pe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(tr(e,!1)){const{message:n}=pe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=pe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!mAe(e)){const{message:n}=pe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=pe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(_l(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=pe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class PTe extends Rh{constructor(e,n){super(e,n,mTe,ZO),this.core=e,this.logger=n}}let OTe=class extends Rh{constructor(e,n){super(e,n,gTe,ZO),this.core=e,this.logger=n}};class kTe extends Rh{constructor(e,n){super(e,n,wTe,ZO,r=>r.id),this.core=e,this.logger=n}}class DTe extends Rh{constructor(e,n){super(e,n,ETe,r1,()=>kv),this.core=e,this.logger=n}}class $Te extends Rh{constructor(e,n){super(e,n,CTe,r1),this.core=e,this.logger=n}}class MTe extends Rh{constructor(e,n){super(e,n,STe,r1,r=>r.id),this.core=e,this.logger=n}}var LTe=Object.defineProperty,UTe=(t,e,n)=>e in t?LTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FA=(t,e,n)=>UTe(t,typeof e!="symbol"?e+"":e,n);class jTe{constructor(e,n){this.core=e,this.logger=n,FA(this,"authKeys"),FA(this,"pairingTopics"),FA(this,"requests"),this.authKeys=new DTe(this.core,this.logger),this.pairingTopics=new $Te(this.core,this.logger),this.requests=new MTe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var BTe=Object.defineProperty,FTe=(t,e,n)=>e in t?BTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tt=(t,e,n)=>FTe(t,typeof e!="symbol"?e+"":e,n);let WTe=class zz extends tEe{constructor(e){super(e),Tt(this,"protocol",Bz),Tt(this,"version",Fz),Tt(this,"name",jA.name),Tt(this,"metadata"),Tt(this,"core"),Tt(this,"logger"),Tt(this,"events",new fo.EventEmitter),Tt(this,"engine"),Tt(this,"session"),Tt(this,"proposal"),Tt(this,"pendingRequest"),Tt(this,"auth"),Tt(this,"signConfig"),Tt(this,"on",(r,s)=>this.events.on(r,s)),Tt(this,"once",(r,s)=>this.events.once(r,s)),Tt(this,"off",(r,s)=>this.events.off(r,s)),Tt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Tt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Tt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Tt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Tt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Tt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||jA.name,this.metadata=rCe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:b0(Nh({level:(e==null?void 0:e.logger)||jA.logger}));this.core=(e==null?void 0:e.core)||new pTe(e),this.logger=qr(n,this.name),this.session=new OTe(this.core,this.logger),this.proposal=new PTe(this.core,this.logger),this.pendingRequest=new kTe(this.core,this.logger),this.engine=new RTe(this),this.auth=new jTe(this.core,this.logger)}static async init(e){const n=new zz(e);return await n.initialize(),n}get context(){return oi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},he.toMiliseconds(he.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const QM="error",zTe="wss://relay.walletconnect.org",HTe="wc",qTe="universal_provider",Vb=`${HTe}@2:${qTe}:`,Hz="https://rpc.walletconnect.org/v1/",yf="generic",VTe=`${Hz}bundler`,mo={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function GTe(){}function XO(t){return t==null||typeof t!="object"&&typeof t!="function"}function JO(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function KTe(t){if(XO(t))return t;if(Array.isArray(t)||JO(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function ZM(t){return typeof t=="object"&&t!==null}function qz(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Vz(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const YTe="[object RegExp]",Gz="[object String]",Kz="[object Number]",Yz="[object Boolean]",Qz="[object Arguments]",QTe="[object Symbol]",ZTe="[object Date]",XTe="[object Map]",JTe="[object Set]",eRe="[object Array]",tRe="[object ArrayBuffer]",nRe="[object Object]",rRe="[object DataView]",sRe="[object Uint8Array]",iRe="[object Uint8ClampedArray]",oRe="[object Uint16Array]",aRe="[object Uint32Array]",cRe="[object Int8Array]",lRe="[object Int16Array]",uRe="[object Int32Array]",dRe="[object Float32Array]",hRe="[object Float64Array]";function fRe(t,e){return Mf(t,void 0,t,new Map,e)}function Mf(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(XO(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Mf(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Mf(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Mf(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(JO(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Mf(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),od(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),od(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),od(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,od(o,t,n,r,s),o}if(typeof t=="object"&&pRe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),od(o,t,n,r,s),o}return t}function od(t,e,n=t,r,s){const i=[...Object.keys(e),...qz(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Mf(e[a],a,n,r,s))}}function pRe(t){switch(Vz(t)){case Qz:case eRe:case tRe:case rRe:case Yz:case ZTe:case dRe:case hRe:case cRe:case lRe:case uRe:case XTe:case Kz:case nRe:case YTe:case JTe:case Gz:case QTe:case sRe:case iRe:case oRe:case aRe:return!0;default:return!1}}function mRe(t,e){return fRe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case Kz:case Gz:case Yz:{const o=new t.constructor(t==null?void 0:t.valueOf());return od(o,t),o}case Qz:{const o={};return od(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function XM(t){return mRe(t)}function JM(t){return t!==null&&typeof t=="object"&&Vz(t)==="[object Arguments]"}function gRe(t){return JO(t)}function yRe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function wRe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=vT(s,o,r,new Map)}return s}function vT(t,e,n,r){if(XO(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return KTe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...qz(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(JM(a)&&(a={...a}),JM(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=XM(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||ZM(c)&&ZM(a)?t[o]=vT(c,a,n,r):c==null&&yRe(a)?t[o]=vT({},a,n,r):c==null&&gRe(a)?t[o]=XM(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function bRe(t,...e){return wRe(t,...e,GTe)}var vRe=Object.defineProperty,_Re=Object.defineProperties,ERe=Object.getOwnPropertyDescriptors,eL=Object.getOwnPropertySymbols,CRe=Object.prototype.hasOwnProperty,SRe=Object.prototype.propertyIsEnumerable,tL=(t,e,n)=>e in t?vRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gb=(t,e)=>{for(var n in e||(e={}))CRe.call(e,n)&&tL(t,n,e[n]);if(eL)for(var n of eL(e))SRe.call(e,n)&&tL(t,n,e[n]);return t},ARe=(t,e)=>_Re(t,ERe(e));function Ti(t,e,n){var r;const s=Yf(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${Hz}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Ph(t){return t.includes(":")?t.split(":")[1]:t}function Zz(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function IRe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Kb(t={},e={}){const n=nL(t),r=nL(e);return bRe(n,r)}function nL(t){var e,n,r,s,i;const o={};if(!hu(t))return o;for(const[a,c]of Object.entries(t)){const l=t1(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=$f(a);o[f]=ARe(Gb(Gb({},o[f]),c),{chains:La(l,(e=o[f])==null?void 0:e.chains),methods:La(u,(n=o[f])==null?void 0:n.methods),events:La(d,(r=o[f])==null?void 0:r.events)}),(hu(h)||hu(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Gb(Gb({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function rL(t){return t.includes(":")?t.split(":")[2]:t}function sL(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=t1(n)?[n]:r.chains?r.chains:Zz(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function WA(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const Xz={},Wt=t=>Xz[t],zA=(t,e)=>{Xz[t]=e};var xRe=Object.defineProperty,NRe=(t,e,n)=>e in t?xRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jh=(t,e,n)=>NRe(t,typeof e!="symbol"?e+"":e,n);class TRe{constructor(e){Jh(this,"name","polkadot"),Jh(this,"client"),Jh(this,"httpProviders"),Jh(this,"events"),Jh(this,"namespace"),Jh(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}}var RRe=Object.defineProperty,PRe=Object.defineProperties,ORe=Object.getOwnPropertyDescriptors,iL=Object.getOwnPropertySymbols,kRe=Object.prototype.hasOwnProperty,DRe=Object.prototype.propertyIsEnumerable,_T=(t,e,n)=>e in t?RRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oL=(t,e)=>{for(var n in e||(e={}))kRe.call(e,n)&&_T(t,n,e[n]);if(iL)for(var n of iL(e))DRe.call(e,n)&&_T(t,n,e[n]);return t},aL=(t,e)=>PRe(t,ORe(e)),ef=(t,e,n)=>_T(t,typeof e!="symbol"?e+"":e,n);class $Re{constructor(e){ef(this,"name","eip155"),ef(this,"client"),ef(this,"chainId"),ef(this,"namespace"),ef(this,"httpProviders"),ef(this,"events"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Ti(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Ph(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:aL(oL({},u.sessionProperties||{}),{capabilities:aL(oL({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Wl("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${VTe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var MRe=Object.defineProperty,LRe=(t,e,n)=>e in t?MRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tf=(t,e,n)=>LRe(t,typeof e!="symbol"?e+"":e,n);class URe{constructor(e){tf(this,"name","solana"),tf(this,"client"),tf(this,"httpProviders"),tf(this,"events"),tf(this,"namespace"),tf(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}}var jRe=Object.defineProperty,BRe=(t,e,n)=>e in t?jRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nf=(t,e,n)=>BRe(t,typeof e!="symbol"?e+"":e,n);class FRe{constructor(e){nf(this,"name","cosmos"),nf(this,"client"),nf(this,"httpProviders"),nf(this,"events"),nf(this,"namespace"),nf(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}}var WRe=Object.defineProperty,zRe=(t,e,n)=>e in t?WRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rf=(t,e,n)=>zRe(t,typeof e!="symbol"?e+"":e,n);class HRe{constructor(e){rf(this,"name","algorand"),rf(this,"client"),rf(this,"httpProviders"),rf(this,"events"),rf(this,"namespace"),rf(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Ti(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new po(new ea(r,Wt("disableProviderPing")))}}var qRe=Object.defineProperty,VRe=(t,e,n)=>e in t?qRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sf=(t,e,n)=>VRe(t,typeof e!="symbol"?e+"":e,n);class GRe{constructor(e){sf(this,"name","cip34"),sf(this,"client"),sf(this,"httpProviders"),sf(this,"events"),sf(this,"namespace"),sf(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Ph(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}}var KRe=Object.defineProperty,YRe=(t,e,n)=>e in t?KRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,of=(t,e,n)=>YRe(t,typeof e!="symbol"?e+"":e,n);class QRe{constructor(e){of(this,"name","elrond"),of(this,"client"),of(this,"httpProviders"),of(this,"events"),of(this,"namespace"),of(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}}var ZRe=Object.defineProperty,XRe=(t,e,n)=>e in t?ZRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,af=(t,e,n)=>XRe(t,typeof e!="symbol"?e+"":e,n);class JRe{constructor(e){af(this,"name","multiversx"),af(this,"client"),af(this,"httpProviders"),af(this,"events"),af(this,"namespace"),af(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ph(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}}var ePe=Object.defineProperty,tPe=(t,e,n)=>e in t?ePe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cf=(t,e,n)=>tPe(t,typeof e!="symbol"?e+"":e,n);class nPe{constructor(e){cf(this,"name","near"),cf(this,"client"),cf(this,"httpProviders"),cf(this,"events"),cf(this,"namespace"),cf(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ti(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace);return typeof r>"u"?void 0:new po(new ea(r,Wt("disableProviderPing")))}}var rPe=Object.defineProperty,sPe=(t,e,n)=>e in t?rPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lf=(t,e,n)=>sPe(t,typeof e!="symbol"?e+"":e,n);class iPe{constructor(e){lf(this,"name","tezos"),lf(this,"client"),lf(this,"httpProviders"),lf(this,"events"),lf(this,"namespace"),lf(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Ti(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace);return typeof r>"u"?void 0:new po(new ea(r))}}var oPe=Object.defineProperty,aPe=(t,e,n)=>e in t?oPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uf=(t,e,n)=>aPe(t,typeof e!="symbol"?e+"":e,n);class cPe{constructor(e){uf(this,"name",yf),uf(this,"client"),uf(this,"httpProviders"),uf(this,"events"),uf(this,"namespace"),uf(this,"chainId"),this.namespace=e.namespace,this.events=Wt("events"),this.client=Wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mo.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Yf(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Ti(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new po(new ea(r,Wt("disableProviderPing")))}}var lPe=Object.defineProperty,uPe=Object.defineProperties,dPe=Object.getOwnPropertyDescriptors,cL=Object.getOwnPropertySymbols,hPe=Object.prototype.hasOwnProperty,fPe=Object.prototype.propertyIsEnumerable,ET=(t,e,n)=>e in t?lPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yb=(t,e)=>{for(var n in e||(e={}))hPe.call(e,n)&&ET(t,n,e[n]);if(cL)for(var n of cL(e))fPe.call(e,n)&&ET(t,n,e[n]);return t},HA=(t,e)=>uPe(t,dPe(e)),Fi=(t,e,n)=>ET(t,typeof e!="symbol"?e+"":e,n);let pPe=class Jz{constructor(e){Fi(this,"client"),Fi(this,"namespaces"),Fi(this,"optionalNamespaces"),Fi(this,"sessionProperties"),Fi(this,"scopedProperties"),Fi(this,"events",new TO),Fi(this,"rpcProviders",{}),Fi(this,"session"),Fi(this,"providerOpts"),Fi(this,"logger"),Fi(this,"uri"),Fi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:b0(Nh({level:(e==null?void 0:e.logger)||QM})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new Jz(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Yb({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,zC(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:on("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=sL(this.session.namespaces);this.namespaces=Kb(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=sL(s.namespaces);return this.namespaces=Kb(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===yf?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(du(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await WTe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||QM,relayUrl:this.providerOpts.relayUrl||zTe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>$f(n)))];zA("client",this.client),zA("events",this.events),zA("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=IRe(n,this.session),s=Zz(r),i=Kb(this.namespaces,this.optionalNamespaces),o=HA(Yb({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new $Re({namespace:o});break;case"algorand":this.rpcProviders[n]=new HRe({namespace:o});break;case"solana":this.rpcProviders[n]=new URe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new FRe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new TRe({namespace:o});break;case"cip34":this.rpcProviders[n]=new GRe({namespace:o});break;case"elrond":this.rpcProviders[n]=new QRe({namespace:o});break;case"multiversx":this.rpcProviders[n]=new JRe({namespace:o});break;case"near":this.rpcProviders[n]=new nPe({namespace:o});break;case"tezos":this.rpcProviders[n]=new iPe({namespace:o});break;default:this.rpcProviders[yf]?this.rpcProviders[yf].updateNamespace(o):this.rpcProviders[yf]=new cPe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&du(o)&&this.events.emit("accountsChanged",o.map(rL))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=$f(o),l=WA(o)!==WA(a)?`${c}:${WA(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=HA(Yb({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",HA(Yb({},on("USER_DISCONNECTED")),{data:e.topic})))}),this.on(mo.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[yf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Kb(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>$f(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=$f(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(rL);if(!du(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Vb}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Vb}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Vb}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Vb)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var lL={};const mPe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof lL<"u"?lL.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},CT={filterOutDuplicatesByRDNS(t){const e=ae.state.enableEIP6963?Ce.state.connectors:[],n=Pe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&je.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Ce.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Pe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ce.state,{featuredWalletIds:n}=ae.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ae.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ce.state.connectors;if(n)return n;const{injected:s,announced:i}=Dv.getConnectorsByType(r,Fe.state.recommended,Fe.state.featured),o=s.filter(Dv.showConnector),a=i.filter(Dv.showConnector);return o.length||a.length?["wallet","email","social"]:mPe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Fe.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Fe.state.excludedWallets.some(r=>VC.isLowerCaseMatch(r.name,t.name));return e||n}},Dv={getConnectorsByType(t,e,n){const{customWallets:r}=ae.state,s=Pe.getRecentWallets(),i=CT.filterOutDuplicateWallets(e),o=CT.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Fe.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Fe.state.excludedWallets.some(i=>VC.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!je.isMobile()||je.isMobile()&&!e&&!Ze.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(L.state.chains.values()).some(n=>Ce.getConnectorId(n.namespace)===Se.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ae.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Dv.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ae.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),m=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!m.some(({type:_})=>_===y));return Array.from(new Set([...m,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const $v=globalThis,ek=$v.ShadowRoot&&($v.ShadyCSS===void 0||$v.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tk=Symbol(),uL=new WeakMap;let eH=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==tk)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(ek&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=uL.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&uL.set(n,e))}return e}toString(){return this.cssText}};const zi=t=>new eH(typeof t=="string"?t:t+"",void 0,tk),Oc=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new eH(n,t,tk)},gPe=(t,e)=>{if(ek)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=$v.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},dL=ek?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return zi(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:yPe,defineProperty:wPe,getOwnPropertyDescriptor:bPe,getOwnPropertyNames:vPe,getOwnPropertySymbols:_Pe,getPrototypeOf:EPe}=Object,fu=globalThis,hL=fu.trustedTypes,CPe=hL?hL.emptyScript:"",qA=fu.reactiveElementPolyfillSupport,ay=(t,e)=>t,ST={toAttribute(t,e){switch(e){case Boolean:t=t?CPe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},tH=(t,e)=>!yPe(t,e),fL={attribute:!0,type:String,converter:ST,reflect:!1,useDefault:!1,hasChanged:tH};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),fu.litPropertyMetadata??(fu.litPropertyMetadata=new WeakMap);let wf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=fL){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&wPe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=bPe(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??fL}static _$Ei(){if(this.hasOwnProperty(ay("elementProperties")))return;const e=EPe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ay("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ay("properties"))){const n=this.properties,r=[...vPe(n),..._Pe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(dL(s))}else e!==void 0&&n.push(dL(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return gPe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:ST).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:ST;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??tH)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};wf.elementStyles=[],wf.shadowRootOptions={mode:"open"},wf[ay("elementProperties")]=new Map,wf[ay("finalized")]=new Map,qA==null||qA({ReactiveElement:wf}),(fu.reactiveElementVersions??(fu.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const cy=globalThis,dE=cy.trustedTypes,pL=dE?dE.createPolicy("lit-html",{createHTML:t=>t}):void 0,nH="$lit$",Nl=`lit$${Math.random().toFixed(9).slice(2)}$`,rH="?"+Nl,SPe=`<${rH}>`,lh=document,Pw=()=>lh.createComment(""),Ow=t=>t===null||typeof t!="object"&&typeof t!="function",nk=Array.isArray,APe=t=>nk(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",VA=`[ 	
\f\r]`,ag=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,mL=/-->/g,gL=/>/g,Hu=RegExp(`>|${VA}(?:([^\\s"'>=/]+)(${VA}*=${VA}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),yL=/'/g,wL=/"/g,sH=/^(?:script|style|textarea|title)$/i,iH=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),DMe=iH(1),$Me=iH(2),Hp=Symbol.for("lit-noChange"),Ar=Symbol.for("lit-nothing"),bL=new WeakMap,vd=lh.createTreeWalker(lh,129);function oH(t,e){if(!nk(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return pL!==void 0?pL.createHTML(e):e}const IPe=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=ag;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===ag?u[1]==="!--"?o=mL:u[1]!==void 0?o=gL:u[2]!==void 0?(sH.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Hu):u[3]!==void 0&&(o=Hu):o===Hu?u[0]===">"?(o=s??ag,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Hu:u[3]==='"'?wL:yL):o===wL||o===yL?o=Hu:o===mL||o===gL?o=ag:(o=Hu,s=void 0);const f=o===Hu&&t[a+1].startsWith("/>")?" ":"";i+=o===ag?c+SPe:d>=0?(r.push(l),c.slice(0,d)+nH+c.slice(d)+Nl+f):c+Nl+(d===-2?a:f)}return[oH(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class kw{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=IPe(e,n);if(this.el=kw.createElement(l,r),vd.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=vd.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(nH)){const h=u[o++],f=s.getAttribute(d).split(Nl),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?NPe:p[1]==="?"?TPe:p[1]==="@"?RPe:s1}),s.removeAttribute(d)}else d.startsWith(Nl)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(sH.test(s.tagName)){const d=s.textContent.split(Nl),h=d.length-1;if(h>0){s.textContent=dE?dE.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Pw()),vd.nextNode(),c.push({type:2,index:++i});s.append(d[h],Pw())}}}else if(s.nodeType===8)if(s.data===rH)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Nl,d+1))!==-1;)c.push({type:7,index:i}),d+=Nl.length-1}i++}}static createElement(e,n){const r=lh.createElement("template");return r.innerHTML=e,r}}function qp(t,e,n=t,r){var o,a;if(e===Hp)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Ow(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=qp(t,s._$AS(t,e.values),s,r)),e}class xPe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??lh).importNode(n,!0);vd.currentNode=s;let i=vd.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new P0(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new PPe(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=vd.nextNode(),o++)}return vd.currentNode=lh,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class P0{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Ar,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=qp(this,e,n),Ow(e)?e===Ar||e==null||e===""?(this._$AH!==Ar&&this._$AR(),this._$AH=Ar):e!==this._$AH&&e!==Hp&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):APe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ar&&Ow(this._$AH)?this._$AA.nextSibling.data=e:this.T(lh.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=kw.createElement(oH(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new xPe(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=bL.get(e.strings);return n===void 0&&bL.set(e.strings,n=new kw(e)),n}k(e){nk(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new P0(this.O(Pw()),this.O(Pw()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class s1{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Ar,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ar}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=qp(this,e,n,0),o=!Ow(e)||e!==this._$AH&&e!==Hp,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=qp(this,a[r+c],n,c),l===Hp&&(l=this._$AH[c]),o||(o=!Ow(l)||l!==this._$AH[c]),l===Ar?e=Ar:e!==Ar&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Ar?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class NPe extends s1{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ar?void 0:e}}class TPe extends s1{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ar)}}class RPe extends s1{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=qp(this,e,n,0)??Ar)===Hp)return;const r=this._$AH,s=e===Ar&&r!==Ar||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Ar&&(r===Ar||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class PPe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){qp(this,e)}}const GA=cy.litHtmlPolyfillSupport;GA==null||GA(kw,P0),(cy.litHtmlVersions??(cy.litHtmlVersions=[])).push("3.3.1");const OPe=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new P0(e.insertBefore(Pw(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Md=globalThis;let Mv=class extends wf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=OPe(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Hp}};var g6;Mv._$litElement$=!0,Mv.finalized=!0,(g6=Md.litElementHydrateSupport)==null||g6.call(Md,{LitElement:Mv});const KA=Md.litElementPolyfillSupport;KA==null||KA({LitElement:Mv});(Md.litElementVersions??(Md.litElementVersions=[])).push("4.2.1");let ly,pu,mu;function LMe(t,e){ly=document.createElement("style"),pu=document.createElement("style"),mu=document.createElement("style"),ly.textContent=Qf(t).core.cssText,pu.textContent=Qf(t).dark.cssText,mu.textContent=Qf(t).light.cssText,document.head.appendChild(ly),document.head.appendChild(pu),document.head.appendChild(mu),aH(e)}function aH(t){pu&&mu&&(t==="light"?(pu.removeAttribute("media"),mu.media="enabled"):(mu.removeAttribute("media"),pu.media="enabled"))}function kPe(t){ly&&pu&&mu&&(ly.textContent=Qf(t).core.cssText,pu.textContent=Qf(t).dark.cssText,mu.textContent=Qf(t).light.cssText)}function Qf(t){return{core:Oc`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${zi(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${zi((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${zi((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${zi((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${zi((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Oc`
      :root {
        --w3m-color-mix: ${zi((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${zi(Sc(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${zi(Sc(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Oc`
      :root {
        --w3m-color-mix: ${zi((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${zi(Sc(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${zi(Sc(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const UMe=Oc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,jMe=Oc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,BMe=Oc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Sg={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},hE=N9({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),fE=N9({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function O0(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const pE=O0({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),mE=O0({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),cH=O0({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});O0({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});O0({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const DPe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Lv={getMethodsByChainNamespace(t){return DPe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case pE.caipNetworkId:u.chains.push(pE.deprecatedCaipNetworkId);break;case mE.caipNetworkId:u.chains.push(mE.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ey.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let lH=class{constructor({provider:e,namespace:n}){this.id=Se.CONNECTOR_ID.WALLET_CONNECT,this.name=Y_.ConnectorNamesMap[Se.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Y_.ConnectorImageIds[Se.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=L.getCaipNetworks.bind(L),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ae.state.universalProviderConfigOverride,s=Lv.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return ry.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:$Pe})}};const $Pe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let MPe=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>L.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Se.CONNECTOR_ID.AUTH,type:"AUTH",name:Se.CONNECTOR_NAMES.AUTH,provider:e,imageId:Y_.ConnectorImageIds[Se.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Re.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Re.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof lH);if(!e)throw new Error("WalletConnectConnector not found");return e}};class LPe extends MPe{setUniversalProvider(e){this.addConnector(new lH({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>je.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&an.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Re.state.balanceLoading&&e.chainId===((c=L.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Re.state.balance||"0.00",symbol:Re.state.balanceSymbol||""};const s=(await Re.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Se.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:iW.encode(new TextEncoder().encode(r)),pubkey:s}},(a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=L.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Se.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:io(n.id)}]}))}catch(u){if(u.code===Sg.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Sg.ERROR_INVALID_CHAIN_ID||u.code===Sg.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Sg.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:io(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const UPe=["email","socials","swaps","onramp","activity","reownBranding"],Qb={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?an.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?an.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?an.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?an.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?an.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?an.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?an.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?an.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?an.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},jPe={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Qb[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Qb[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Qb[t].processApi(e)},processFallbackFeature(t,e){return Qb[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Fe.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?an.DEFAULT_REMOTE_FEATURES:an.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of UPe){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),an.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ta.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class BPe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=L.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=L.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=L.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return L.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>L.getCaipNetworks(n),this.getActiveChainNamespace=()=>L.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{L.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>L.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>L.state.activeChain===n||!n?L.state.activeCaipAddress:L.getAccountProp("caipAddress",n),this.setClientId=n=>{Qe.setClientId(n)},this.getProvider=n=>sn.getProvider(n),this.getProviderType=n=>sn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Re.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Re.setCaipAddress(n,r),n&&ae.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Re.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Re.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Re.setProfileImage(n,r)},this.setUser=(n,r)=>{Re.setUser(n,r)},this.resetAccount=n=>{Re.resetAccount(n)},this.setCaipNetwork=n=>{L.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{L.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Re.setAllAccounts(n,r),ae.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Re.setStatus(n,r),Ce.isConnected()?Pe.setConnectionStatus("connected"):Pe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>L.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Ce.state.allConnectors,...n];Ce.setConnectors(r)},this.setConnections=(n,r)=>{Ze.setConnections(n,r)},this.fetchIdentity=n=>Qe.fetchIdentity(n),this.getReownName=n=>ey.getNamesForAddress(n),this.getConnectors=()=>Ce.getConnectors(),this.getConnectorImage=n=>DB.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=sn.getProviderId(r),i=n?{...n,type:s}:void 0;Re.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!L.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Re.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Re.removeAddressLabel(n,r)},this.getAddress=n=>L.state.activeChain===n||!n?Re.state.address:L.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>L.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{L.resetNetwork(n)},this.addConnector=n=>{Ce.addConnector(n)},this.resetWcConnection=()=>{Ze.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Re.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Re.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{L.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Re.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ae.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await jPe.fetchRemoteFeatures(e),ae.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&xN.setOnrampProviders(this.remoteFeatures.onramp),((n=ae.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ae.state.remoteFeatures)==null?void 0:r.socials)&&((s=ae.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await Fe.fetchAllowedOrigins();if(e&&je.isClient()){const n=window.location.origin;Lv.isOriginAllowed(n,e,Sg.DEFAULT_ALLOWED_ANCESTORS)||Ta.open(Ea.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Ta.open(Ea.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,Pn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ws.setThemeMode(e.themeMode),e.themeVariables&&Ws.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");L.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&L.setActiveCaipNetwork(n)}initializeConnectionController(e){Ze.setWcBasic(e.basic??!1)}initializeConnectorController(){Ce.initialize(this.chainNamespaces)}initializeProjectSettings(e){ae.setProjectId(e.projectId),ae.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ae.setDebug(e.debug!==!1),ae.setEnableWalletConnect(e.enableWalletConnect!==!1),ae.setEnableWalletGuide(e.enableWalletGuide!==!1),ae.setEnableWallets(e.enableWallets!==!1),ae.setEIP6963Enabled(e.enableEIP6963!==!1),ae.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ae.setEnableAuthLogger(e.enableAuthLogger!==!1),ae.setCustomRpcUrls(e.customRpcUrls),ae.setEnableEmbedded(e.enableEmbedded),ae.setAllWallets(e.allWallets),ae.setIncludeWalletIds(e.includeWalletIds),ae.setExcludeWalletIds(e.excludeWalletIds),ae.setFeaturedWalletIds(e.featuredWalletIds),ae.setTokens(e.tokens),ae.setTermsConditionsUrl(e.termsConditionsUrl),ae.setPrivacyPolicyUrl(e.privacyPolicyUrl),ae.setCustomWallets(e.customWallets),ae.setFeatures(e.features),ae.setAllowUnsupportedChain(e.allowUnsupportedChain),ae.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ae.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ae.setDefaultAccountTypes(e.defaultAccountTypes);const n=Pe.getPreferredAccountTypes()||{},r={...ae.state.defaultAccountTypes,...n};Re.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ae.setMetadata(e.metadata),ae.setDisableAppend(e.disableAppend),ae.setEnableEmbedded(e.enableEmbedded),ae.setSIWX(e.siwx),!e.projectId){Ta.open(Ea.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Se.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ae.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return je.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=mf.getUnsupportedNetwork(`${n}:${e}`);L.setActiveCaipNetwork(r)}}getDefaultNetwork(){return mf.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return mf.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return mf.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?mf.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=sn.getProvider(e),s=sn.getProviderId(e),{caipAddress:i}=L.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Pe.removeConnectedNamespace(e),sn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Ce.removeConnectorId(e),L.resetAccount(e),L.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=L.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Pe.setConnectedNamespaces([...L.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Ce.setConnectorId(zs.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var m,w,y,b,_,E;const c=L.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(I=>I.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(m=o==null?void 0:o.rpcUrls)==null?void 0:m.default)==null?void 0:w.http)==null?void 0:y[0])||((E=(_=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:_.http)==null?void 0:E[0])});if(!h)return;Pe.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Re.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=L.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Pe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=F0e(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Ht.resetSend(),Ze.resetWcConnection(),await ry.clearSessions(),Ce.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Pe.deleteConnectedSocialProvider(),Pn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(L.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Re.state.address,provider:sn.getProvider(L.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(an.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(L.state.activeChain),s=sn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Se.CHAIN.EVM){const n=this.getAdapter(L.state.activeChain),r=sn.getProvider(L.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Re.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:L.state.activeChain}),Re.state.profileImage||!1},getEnsAddress:async e=>await Lv.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(L.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=sn.getProvider(L.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Re.state.address||this.updateNativeBalance(Re.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Ze.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(sn.getProviderId(L.state.activeChain)===zs.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=sn.getProvider(n),i=sn.getProviderId(n);if(e.chainNamespace===L.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===zs.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=rl.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new LPe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Pe.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Pe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=L.state.activeChain===e,c=L.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Re.state.address,i=L.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=L.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=L.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=L.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Se.CHAIN.EVM&&je.isSafeApp()&&Ce.setConnectorId(Se.CONNECTOR_ID.SAFE,e);const n=Ce.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Se.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Se.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Ce.getConnectorId(e),s=this.getCaipNetwork(e),o=Ce.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([je.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=L.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=rl.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=rl.validateCaipAddress(o),{chainId:f,address:p}=rl.parseCaipAddress(h);if(sn.setProviderId(n,zs.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&L.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Se.CHAIN.EVM){const m=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:L.state.activeCaipNetwork});sn.setProvider(n,m)}else sn.setProvider(n,this.universalProvider);Ce.setConnectorId(Se.CONNECTOR_ID.WALLET_CONNECT,n),Pe.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await L.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=rl.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>je.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){sn.setProviderId(s,e),sn.setProvider(s,n),Ce.setConnectorId(r,s)}async syncAllAccounts(e){const n=Ce.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===L.state.activeChain,r=L.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Pe.getActiveNetworkProps(),c=i||a,l=((d=L.state.activeCaipNetwork)==null?void 0:d.name)===Se.UNSUPPORTED_NETWORK_NAME,u=L.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(_=>{var E;return((E=rl.parseCaipNetworkId(_))==null?void 0:E.chainId)===c.toString()}),b=w.find(_=>{var E;return((E=rl.parseCaipNetworkId(_))==null?void 0:E.chainNamespace)===o});f=this.getCaipNetworks().find(_=>_.caipNetworkId===y),p=this.getCaipNetworks().find(_=>_.caipNetworkId===b||"deprecatedCaipNetworkId"in _&&_.deprecatedCaipNetworkId===b)}const m=f||p;(m==null?void 0:m.chainNamespace)===L.state.activeChain?ae.state.enableNetworkSwitch&&!ae.state.allowUnsupportedChain&&((h=L.state.activeCaipNetwork)==null?void 0:h.name)===Se.UNSUPPORTED_NETWORK_NAME?L.showUnsupportedChainUI():this.setCaipNetwork(m):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),VC.isLowerCaseMatch(s,Re.state.address)||this.syncAccountInfo(s,m==null?void 0:m.id,o),n?await this.syncBalance({address:s,chainId:m==null?void 0:m.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Ce.getConnectorId(e),r=sn.getProviderId(e);if(r===zs.CONNECTOR_TYPE_ANNOUNCED||r===zs.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===zs.CONNECTOR_TYPE_WALLET_CONNECT){const i=sn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Se.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===Se.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!RB.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=L.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=H0e.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ae.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await pPe.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Ze.setUri(e)}),this.universalProvider.on("connect",Ze.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Ze.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(Lv.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&je.isCaipAddress(r[0])&&this.syncAccount(rl.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&je.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Pn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Ea.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Ea.ALERT_ERRORS[o];a&&(Ta.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&Ze.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Ir.open({...e,data:{swap:e.arguments}})}return Ir.open(e)}async close(){await this.injectModalUi(),Ir.close()}setLoading(e,n){Ir.setLoading(e,n)}async disconnect(e){await Ze.disconnect(e)}getSIWX(){return ae.state.siwx}getError(){return""}getChainId(){var e;return(e=L.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ta.open(Ea.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await L.switchActiveNetwork(n)}getWalletProvider(){return L.state.activeChain?sn.state.providers[L.state.activeChain]:null}getWalletProviderType(){return sn.getProviderId(L.state.activeChain)}subscribeProviders(e){return sn.subscribeProviders(e)}getThemeMode(){return Ws.state.themeMode}getThemeVariables(){return Ws.state.themeVariables}setThemeMode(e){Ws.setThemeMode(e),aH(Ws.state.themeMode)}setTermsConditionsUrl(e){ae.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ae.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ws.setThemeVariables(e),kPe(Ws.state.themeVariables)}subscribeTheme(e){return Ws.subscribe(e)}getWalletInfo(){return Re.state.connectedWalletInfo}getAccount(e){var o;const n=Ce.getAuthConnector(e),r=L.getAccountData(e),s=L.state.activeChain,i=Pe.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:je.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Se.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Pe.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?L.subscribeChainProp("accountState",r,n):L.subscribe(r),Ce.subscribe(r)}subscribeNetwork(e){return L.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Re.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Re.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){L.subscribeKey("activeCaipNetwork",e)}getState(){return Da.state}subscribeState(e){return Da.subscribe(e)}showErrorMessage(e){Lo.showError(e)}showSuccessMessage(e){Lo.showSuccess(e)}getEvent(){return{...Pn.state}}subscribeEvents(e){return Pn.subscribe(e)}replace(e){_t.replace(e)}redirect(e){_t.push(e)}popTransactionStack(e){_t.popTransactionStack(e)}isOpen(){return Ir.state.open}isTransactionStackEmpty(){return _t.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ae.setFeatures(e)}updateRemoteFeatures(e){ae.setRemoteFeatures(e)}updateOptions(e){const r={...ae.state||{},...e};ae.setOptions(r)}setConnectMethodsOrder(e){ae.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ae.setWalletFeaturesOrder(e)}setCollapseWallets(e){ae.setCollapseWallets(e)}setSocialsOrder(e){ae.setSocialsOrder(e)}getConnectMethodsOrder(){return CT.getConnectOrderMethod(ae.state.features,Ce.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||L.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&L.removeNetwork(e,n)}}let vL=!1;class FPe extends BPe{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{vi.checkIfRequestExists(n)?vi.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Wr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Wr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=vi.checkIfRequestIsSafe(r),i=Re.state.address,o=L.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=L.state.activeChain;Ce.getConnectorId(n)===Se.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=L.state.activeChain,s=r===Se.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ae.state.defaultAccountTypes[r],o=(l=Re.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;VC.isLowerCaseMatch(n.address,Re.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Re.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>je.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[je.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Re.state.user||{},username:n},L.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,L.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,L.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=Se.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Re.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Ws.getSnapshot(),l=ae.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Sc(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Se.CONNECTOR_ID.AUTH,info:{name:Se.CONNECTOR_ID.AUTH},type:zs.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=L.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Ce.getConnectorId(n)===Se.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Pe.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!je.isTelegram())return;const r=Pe.getTelegramSocialProvider();if(!r||!je.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Re.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Ce.getAuthConnector();r&&o&&(this.setLoading(!0,e),await Ze.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Pe.setConnectedSocialProvider(r),Pe.removeTelegramSocialProvider(),Pn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!Se.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=h_e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Ea.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ta.open(Ea.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ta.open(Ea.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ta.open(Ea.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Da.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Fe.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=L.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=sn.getProvider(r),u=sn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=sn.getProviderId(n)===zs.CONNECTOR_TYPE_AUTH,u=sn.getProviderId(r),d=u===zs.CONNECTOR_TYPE_AUTH,h=Se.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(L.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:Se.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:zs.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===zs.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Da.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==Se.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=sn.getProviderId(e);if(n===zs.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Pe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(je.isClient()&&!vL)try{const e={...an.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),je.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ae.state.disableAppend&&!ae.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}vL=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!je.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(ts(()=>import("./embedded-wallet-DyPH1kx_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(ts(()=>import("./email-CIBJ7BTN.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(ts(()=>import("./socials-nh0N4bX2.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(ts(()=>import("./swaps-B45oZT5C.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(ts(()=>import("./send-DR5r27tx.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(ts(()=>import("./receive-Ca5XtzY6.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(ts(()=>import("./onramp-BHXbsMcD.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(ts(()=>import("./transactions-CuOxufzx.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(ts(()=>import("./index-BGwxjGso.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,ts(()=>import("./index-C9wYo0Md.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),ts(()=>import("./w3m-modal-DIOP8Xa-.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let gl;function WPe(t){t&&(gl=t)}function k0(){if(!gl)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(gl==null?void 0:gl.open(n))}async function e(){await(gl==null?void 0:gl.close())}return{open:t,close:e}}const zPe="1.7.8";let Zb;function HPe(t){return Zb||(Zb=new FPe({...t,sdkVersion:je.generateSdkVersion(t.adapters??[],"react",zPe)}),WPe(Zb)),Zb}const qPe=Jo({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),_L=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],VPe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=qPe({isOpen:t}),{open:i}=k0(),o=O.useRef(null),[a,c]=O.useState([]),[l,u]=O.useState(!0),[d,h]=O.useState(null),[f,p]=O.useState("all"),[m,w]=O.useState(1),[y,b]=O.useState(1),[_,E]=O.useState(0),[C,I]=O.useState(null),[A,x]=O.useState(_L[0]),[S,k]=O.useState(!1),[P,M]=O.useState(null),W=O.useCallback(async()=>{var D,j;try{if((D=window.solana)!=null&&D.isPhantom){const z=await window.solana.connect();M(z.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const z=await window.solflare.connect();M(z.publicKey.toString());return}i()}catch(z){console.error("Failed to connect Solana wallet:",z),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);O.useEffect(()=>{var D,j;(D=window.solana)!=null&&D.publicKey?M(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&M(window.solflare.publicKey.toString())},[]),O.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let z,Q=f==="owned"&&r||void 0;if(A.api==="opensea-solana"){if(f==="owned"&&!P){k(!0),u(!1);return}Q=P||void 0,z=await xB(A.slug,50),console.log("Fetched Solana NFTs from collection:",z.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(j=z.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",z.data.map(Z=>({name:Z.name,owners:Z.owners,owner_of:Z.owner_of}))),z.data.some(Z=>Z.owners&&Z.owners.length>0)?(z.data=z.data.filter(Z=>{const X=Z.owners.some(ie=>ie.owner_of&&ie.owner_of.toLowerCase()===P.toLowerCase());return X&&console.log("Found owned NFT:",Z.name),X}),console.log("NFTs after filtering:",z.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else A.api==="opensea"?z=await zP(A.slug,50,Q):z=await WP(A.slug,m,50,Q);c(z.data),b(z.totalPages),E(z.totalCount)}catch(z){z instanceof Error?h(z.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,m,f,r,A,P]),O.useEffect(()=>{S&&W()},[S,W]);const U=D=>new Date(D).toLocaleDateString(),N=D=>A.api==="opensea-solana"?D.owner_of&&D.owner_of.length>0?`${D.owner_of.substring(0,6)}...${D.owner_of.substring(-4)}`:D.owners&&D.owners.length>0?`${D.owners[0].owner_of.substring(0,6)}...${D.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":D.owner_of&&D.owner_of.length>0?`${D.owner_of.substring(0,6)}...${D.owner_of.substring(-4)}`:D.owners&&D.owners.length>0?`${D.owners[0].owner_of.substring(0,6)}...${D.owners[0].owner_of.substring(-4)}`:"N/A",T=()=>{n&&n()},$=async D=>{if(A.api==="opensea"&&A.chain)try{const j=await IB(A.chain,D.address,D.token_id.toString()),z={...D,attributes:JSON.stringify(j.traits||[])};I(z)}catch(j){console.error("Failed to fetch full NFT details",j),I(D)}else I(D)},R=D=>{x(D),w(1)};return t?g.jsxs(g.Fragment,{children:[g.jsx(r0,{nodeRef:o,handle:`.${s.header}`,children:g.jsxs("div",{ref:o,className:s.popup,children:[g.jsxs("div",{className:s.header,children:[g.jsx("span",{children:"LAWB NFT GALLERY"}),g.jsxs("div",{className:s.titleBarButtons,children:[g.jsx("button",{className:s.titleBarButton,onClick:T,title:"Minimize",children:"_"}),g.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),g.jsx("div",{className:s.collectionSelector,children:_L.map(D=>g.jsx("button",{className:`${s.collectionButton} ${A.slug===D.slug?"active":""}`,onClick:()=>R(D),children:D.name},D.slug))}),g.jsxs("div",{className:s.content,children:[g.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[g.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),g.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),g.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),A.api==="opensea-solana"&&g.jsx("button",{onClick:()=>{W()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),A.api==="opensea-solana"&&!P&&g.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&g.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?g.jsx("div",{children:"Loading NFTs..."}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${_} total)`,f==="recent"&&`Recently minted NFTs by ${A.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${A.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?g.jsx("div",{children:"No NFTs found."}):g.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(D=>g.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(D)},children:[g.jsx(TB,{src:NB(D),alt:`NFT #${D.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),g.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:g.jsxs("strong",{children:["#",D.token_id]})}),g.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",N(D)]}),g.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",U(D.created_at)]})]},D.id))}),f!=="recent"&&y>1&&g.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[g.jsx("button",{onClick:()=>w(D=>Math.max(1,D-1)),disabled:m===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:m===1?"not-allowed":"pointer"},children:"Previous"}),g.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",m," of ",y]}),g.jsx("button",{onClick:()=>w(D=>Math.min(y,D+1)),disabled:m===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:m===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&g.jsx(pie,{nft:C,onClose:()=>I(null)})]}):null};var Xb,GPe=new Uint8Array(16);function KPe(){if(!Xb&&(Xb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Xb))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xb(GPe)}const YPe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function QPe(t){return typeof t=="string"&&YPe.test(t)}var $r=[];for(var YA=0;YA<256;++YA)$r.push((YA+256).toString(16).substr(1));function ZPe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=($r[t[e+0]]+$r[t[e+1]]+$r[t[e+2]]+$r[t[e+3]]+"-"+$r[t[e+4]]+$r[t[e+5]]+"-"+$r[t[e+6]]+$r[t[e+7]]+"-"+$r[t[e+8]]+$r[t[e+9]]+"-"+$r[t[e+10]]+$r[t[e+11]]+$r[t[e+12]]+$r[t[e+13]]+$r[t[e+14]]+$r[t[e+15]]).toLowerCase();if(!QPe(n))throw TypeError("Stringified UUID is invalid");return n}function XPe(t,e,n){t=t||{};var r=t.random||(t.rng||KPe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ZPe(r)}const JPe=Jo({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),eOe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],tOe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],li=500;function uH(){const t=JPe(),e=O.useRef(null),[n,r]=O.useState(null),[s,i]=O.useState(""),[o,a]=O.useState(""),[c,l]=O.useState(50),[u,d]=O.useState(50),[h,f]=O.useState(!1),[p,m]=O.useState(!1),[w,y]=O.useState(!1),[b,_]=O.useState(!1),[E,C]=O.useState(!1),[I,A]=O.useState([]),[x,S]=O.useState(null),k=O.useRef(null),[P,M]=O.useState(null),W=async G=>{const J=G.getContext("2d");if(!J)return;J.clearRect(0,0,G.width,G.height),n?await new Promise(oe=>{const le=new window.Image;le.crossOrigin="anonymous",le.onload=()=>{const Ye=Math.min(G.width/le.width,G.height/le.height),$e=(G.width-le.width*Ye)/2,Xe=(G.height-le.height*Ye)/2;J.drawImage(le,$e,Xe,le.width*Ye,le.height*Ye),oe()},le.onerror=()=>oe(),le.src=n}):(J.fillStyle="#333",J.fillRect(0,0,G.width,G.height)),(oe=>{oe.textAlign="center",oe.strokeStyle="black",oe.lineWidth=3,oe.fillStyle="white";const le=(Ye,$e)=>{const Xe=Ye.toUpperCase().split(" "),rt=[];let fn=Xe[0];for(let Un=1;Un<Xe.length;Un++){const Tn=Xe[Un];oe.measureText(fn+" "+Tn).width<$e?fn+=" "+Tn:(rt.push(fn),fn=Tn)}return rt.push(fn),rt};if(s&&(oe.font=`${c}px Impact`,le(s,li-20).forEach(($e,Xe)=>{const rt=c+Xe*c*1.2;oe.strokeText($e,li/2,rt),oe.fillText($e,li/2,rt)})),o){oe.font=`${u}px Impact`;const Ye=le(o,li-20);Ye.forEach(($e,Xe)=>{const rt=li-(Ye.length-Xe)*u*1.2+u;oe.strokeText($e,li/2,rt),oe.fillText($e,li/2,rt)})}})(J),await Promise.all(I.map(oe=>new Promise(le=>{const Ye=new window.Image;Ye.src=oe.src,Ye.onload=()=>{J.save(),J.translate(oe.x,oe.y),J.rotate(oe.rotation*Math.PI/180),J.scale(oe.scale,oe.scale),J.drawImage(Ye,-40,-40,80,80),J.restore(),le()},Ye.onerror=()=>le()})));try{h&&U(G),p&&N(G),w&&T(G)}catch(oe){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",oe),f(!1),m(!1),y(!1)}},U=G=>{const J=G.getContext("2d");if(!J)return;const de=J.getImageData(0,0,G.width,G.height),oe=de.data;for(let le=0;le<oe.length;le+=4){const Ye=oe[le],$e=oe[le+1],Xe=oe[le+2],rt=(Ye+$e+Xe)/3,fn=1.8;oe[le]=Math.min(255,rt+(Ye-rt)*fn),oe[le+1]=Math.min(255,rt+($e-rt)*fn*.7),oe[le+2]=Math.min(255,rt+(Xe-rt)*fn*.4);const Un=1.3;oe[le]=Math.min(255,Math.max(0,oe[le]*Un)),oe[le+1]=Math.min(255,Math.max(0,oe[le+1]*Un)),oe[le+2]=Math.min(255,Math.max(0,oe[le+2]*Un))}J.putImageData(de,0,0)},N=G=>{const J=G.getContext("2d");if(!J)return;const de=4,le=J.getImageData(0,0,G.width,G.height).data,Ye=new Uint8ClampedArray(le);for(let $e=0;$e<G.height;$e+=de)for(let Xe=0;Xe<G.width;Xe+=de){const rt=($e*G.width+Xe)*4,fn=le[rt],Un=le[rt+1],Tn=le[rt+2],$t=le[rt+3];for(let Yn=0;Yn<de&&$e+Yn<G.height;Yn++)for(let Yr=0;Yr<de&&Xe+Yr<G.width;Yr++){const xs=(($e+Yn)*G.width+(Xe+Yr))*4;Ye[xs]=fn,Ye[xs+1]=Un,Ye[xs+2]=Tn,Ye[xs+3]=$t}}J.putImageData(new ImageData(Ye,G.width,G.height),0,0)},T=G=>{const J=G.getContext("2d");if(!J)return;const de=J.getImageData(0,0,G.width,G.height),oe=de.data;for(let le=0;le<oe.length;le+=4){const Ye=(Math.random()-.5)*50;oe[le]=Math.max(0,Math.min(255,oe[le]+Ye)),oe[le+1]=Math.max(0,Math.min(255,oe[le+1]+Ye)),oe[le+2]=Math.max(0,Math.min(255,oe[le+2]+Ye))}J.putImageData(de,0,0)};O.useEffect(()=>{e.current&&W(e.current)},[W]);const $=O.useRef(null),R=500,D=G=>{G.preventDefault(),$.current=setTimeout(()=>{const J=e.current;J&&(navigator.share?J.toBlob(de=>{if(de){const oe=new File([de],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[oe]}).catch(()=>{X()})}}):X())},R)},j=()=>{$.current&&(clearTimeout($.current),$.current=null)},z=()=>{$.current&&(clearTimeout($.current),$.current=null)},Q=G=>{G.preventDefault()},te=G=>{var de;const J=(de=G.target.files)==null?void 0:de[0];J&&r(URL.createObjectURL(J))},Z=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),m(!1),y(!1)},X=async()=>{const G=e.current;if(!G)return;await W(G);const J=document.createElement("a");J.download="meme.png",J.href=G.toDataURL("image/png"),document.body.appendChild(J),J.click(),document.body.removeChild(J)},ie=async G=>{C(!0),_(!1);try{console.log("Fetching NFTs for collection:",G);let J;if(G.api==="opensea"){console.log("Using OpenSea API for:",G.slug);const de=await zP(G.slug,50);J=de.data,console.log("OpenSea response:",de)}else if(G.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",G.slug);const de=await xB(G.slug,50);if(J=de.data,console.log("Helius Solana response:",de),!J||J.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",G.slug);const de=await WP(G.slug,1,50);J=de.data,console.log("Scatter response:",de)}if(J&&J.length>0){const de=J[Math.floor(Math.random()*J.length)],oe=de.image||de.image_url||de.image_url_shrunk;console.log("Selected NFT:",de),console.log("Image URL:",oe),r(oe)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(J){console.error("Error fetching NFTs:",J),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},Ke=G=>{const J={id:XPe(),src:G,x:80,y:80,scale:1,rotation:0};A(de=>de.length>=2||de.some(oe=>oe.src===G&&!oe.id.startsWith("upload-"))?de:[...de,J]),M(J.id)},it=G=>{var de;const J=(de=G.target.files)==null?void 0:de[0];if(J){const oe=URL.createObjectURL(J);Ke(oe)}},Be=(G,J,de)=>{A(oe=>oe.map(le=>{if(le.id!==G)return le;let Ye=le.x+J/1.2,$e=le.y+de/1.2;const Xe=40*le.scale,rt=40*le.scale;return Ye=Math.max(Xe,Math.min(li-Xe,Ye)),$e=Math.max(rt,Math.min(li-rt,$e)),{...le,x:Ye,y:$e}}))},yt=(G,J,de,oe,le)=>{A(Ye=>Ye.map($e=>{if($e.id!==G)return $e;const Xe=$e.x,rt=$e.y,fn=Math.atan2(le-rt,oe-Xe)*180/Math.PI;return{...$e,rotation:de+(fn-J)*.5}}))},Ct=G=>{A(J=>J.filter(de=>de.id!==G))},Kn=(G,J)=>{A(de=>de.map(oe=>oe.id===G?{...oe,scale:Math.max(.2,oe.scale*(1+(J-1)*.2))}:oe))};return g.jsxs("div",{className:t.container,children:[g.jsxs("div",{className:t.header,children:[g.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),g.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",g.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),g.jsxs("div",{className:t.content,children:[g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Collections"}),g.jsxs("div",{className:t.row,children:[g.jsxs("div",{className:t.dropdown,children:[g.jsx("button",{className:t.button,onClick:()=>_(G=>!G),children:"Collections"}),b&&g.jsx("div",{className:t.dropdownContent,children:eOe.map(G=>g.jsx("div",{className:t.dropdownItem,onClick:()=>{ie(G)},children:G.name},G.id))})]}),g.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",g.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:te})]}),E&&g.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Text"}),g.jsxs("div",{className:t.row,children:[g.jsx("span",{className:t.label,children:"Top Text:"}),g.jsx("input",{className:t.input,type:"text",value:s,onChange:G=>i(G.target.value),placeholder:"Enter top text..."}),g.jsx("span",{className:t.label,children:"Size:"}),g.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:G=>l(Number(G.target.value)),style:{width:60,textAlign:"center"}})]}),g.jsxs("div",{className:t.row,children:[g.jsx("span",{className:t.label,children:"Bottom Text:"}),g.jsx("input",{className:t.input,type:"text",value:o,onChange:G=>a(G.target.value),placeholder:"Enter bottom text..."}),g.jsx("span",{className:t.label,children:"Size:"}),g.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:G=>d(Number(G.target.value)),style:{width:60,textAlign:"center"}})]})]}),g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Effects"}),g.jsxs("div",{className:t.row,children:[g.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(G=>!G),children:"Deep Fry"}),g.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>m(G=>!G),children:"Pixelate"}),g.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(G=>!G),children:"Grain"})]})]}),g.jsxs("div",{className:t.section,children:[g.jsx("div",{className:t.sectionTitle,children:"Stickers"}),g.jsxs("div",{className:t.row,children:[tOe.map((G,J)=>g.jsx("img",{src:G,alt:`sticker${J+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Ke(G)},G)),g.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",g.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:it})]})]})]}),g.jsxs("div",{className:t.actions,children:[g.jsx("button",{className:t.button,onClick:X,children:"Save Image"}),g.jsx("button",{className:t.button,onClick:Z,children:"Restart"})]})]}),g.jsx("div",{className:t.memeArea,children:g.jsx("canvas",{ref:e,width:li,height:li,className:t.canvas,onTouchStart:D,onTouchEnd:j,onTouchMove:z,onContextMenu:Q,style:{touchAction:"none"}})}),g.jsx("div",{style:{position:"absolute",left:0,top:0,width:li,height:li,pointerEvents:"none"},children:I.map(G=>P===G.id?g.jsxs("div",{style:{position:"absolute",left:G.x,top:G.y,width:80*G.scale,height:80*G.scale,transform:`rotate(${G.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:J=>{S(G.id),J.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:J=>{x===G.id&&J.buttons===1&&Be(G.id,J.movementX,J.movementY)},children:[g.jsx("img",{src:G.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),g.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:J=>{var fn;J.stopPropagation();const de=(fn=J.currentTarget.parentElement)==null?void 0:fn.getBoundingClientRect(),oe=de?de.left+de.width/2:0,le=de?de.top+de.height/2:0,Ye=Math.atan2(J.clientY-le,J.clientX-oe)*180/Math.PI,$e=G.rotation,Xe=Un=>{yt(G.id,Ye,$e,Un.clientX,Un.clientY)},rt=()=>{window.removeEventListener("mousemove",Xe),window.removeEventListener("mouseup",rt)};window.addEventListener("mousemove",Xe),window.addEventListener("mouseup",rt)}}),g.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:J=>{J.stopPropagation();const de=J.clientX,oe=Ye=>{const $e=(Ye.clientX-de)/80;Kn(G.id,1+$e)},le=()=>{window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",le)};window.addEventListener("mousemove",oe),window.addEventListener("mouseup",le)}}),g.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Ct(G.id),children:""}),g.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>M(null),children:"Place"})]},G.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dw.apply(this,arguments)}var Hl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Hl||(Hl={}));const EL="popstate";function nOe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return AT("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:hH(s)}return sOe(e,n,null,t)}function pr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dH(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rOe(){return Math.random().toString(36).substr(2,8)}function CL(t,e){return{usr:t.state,key:t.key,idx:e}}function AT(t,e,n,r){return n===void 0&&(n=null),Dw({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_m(e):e,{state:n,key:e&&e.key||r||rOe()})}function hH(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _m(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sOe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Hl.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Dw({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Hl.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:m.location,delta:y})}function h(w,y){a=Hl.Push;let b=AT(m.location,w,y);l=u()+1;let _=CL(b,l),E=m.createHref(b);try{o.pushState(_,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(E)}i&&c&&c({action:a,location:m.location,delta:1})}function f(w,y){a=Hl.Replace;let b=AT(m.location,w,y);l=u();let _=CL(b,l),E=m.createHref(b);o.replaceState(_,"",E),i&&c&&c({action:a,location:m.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:hH(w);return b=b.replace(/ $/,"%20"),pr(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(EL,d),c=w,()=>{s.removeEventListener(EL,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return m}var SL;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(SL||(SL={}));function iOe(t,e,n){return n===void 0&&(n="/"),oOe(t,e,n)}function oOe(t,e,n,r){let s=typeof e=="string"?_m(e):e,i=mH(s.pathname||"/",n);if(i==null)return null;let o=fH(t);aOe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=bOe(i);a=gOe(o[c],l)}return a}function fH(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(pr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Ld([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(pr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),fH(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:pOe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of pH(i.path))s(i,o,c)}),e}function pH(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=pH(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function aOe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mOe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cOe=/^:[\w-]+$/,lOe=3,uOe=2,dOe=1,hOe=10,fOe=-2,AL=t=>t==="*";function pOe(t,e){let n=t.split("/"),r=n.length;return n.some(AL)&&(r+=fOe),e&&(r+=uOe),n.filter(s=>!AL(s)).reduce((s,i)=>s+(cOe.test(i)?lOe:i===""?dOe:hOe),r)}function mOe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function gOe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=yOe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Ld([i,d.pathname]),pathnameBase:AOe(Ld([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Ld([i,d.pathnameBase]))}return o}function yOe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wOe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=a[d]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function wOe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dH(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bOe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dH(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mH(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function vOe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_m(t):t;return{pathname:n?n.startsWith("/")?n:_Oe(n,e):e,search:IOe(r),hash:xOe(s)}}function _Oe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function QA(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EOe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function COe(t,e){let n=EOe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SOe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=_m(t):(s=Dw({},t),pr(!s.pathname||!s.pathname.includes("?"),QA("?","pathname","search",s)),pr(!s.pathname||!s.pathname.includes("#"),QA("#","pathname","hash",s)),pr(!s.search||!s.search.includes("#"),QA("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=vOe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Ld=t=>t.join("/").replace(/\/\/+/g,"/"),AOe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IOe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xOe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NOe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gH=["post","put","patch","delete"];new Set(gH);const TOe=["get",...gH];new Set(TOe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $w(){return $w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$w.apply(this,arguments)}const rk=O.createContext(null),ROe=O.createContext(null),i1=O.createContext(null),o1=O.createContext(null),Em=O.createContext({outlet:null,matches:[],isDataRoute:!1}),yH=O.createContext(null);function a1(){return O.useContext(o1)!=null}function wH(){return a1()||pr(!1),O.useContext(o1).location}function bH(t){O.useContext(i1).static||O.useLayoutEffect(t)}function POe(){let{isDataRoute:t}=O.useContext(Em);return t?HOe():OOe()}function OOe(){a1()||pr(!1);let t=O.useContext(rk),{basename:e,future:n,navigator:r}=O.useContext(i1),{matches:s}=O.useContext(Em),{pathname:i}=wH(),o=JSON.stringify(COe(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return bH(()=>{a.current=!0}),O.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=SOe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ld([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function kOe(t,e){return DOe(t,e)}function DOe(t,e,n,r){a1()||pr(!1);let{navigator:s}=O.useContext(i1),{matches:i}=O.useContext(Em),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=wH(),u;if(e){var d;let w=typeof e=="string"?_m(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||pr(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=iOe(t,{pathname:f}),m=jOe(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ld([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ld([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&m?O.createElement(o1.Provider,{value:{location:$w({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Hl.Pop}},m):m}function $Oe(){let t=zOe(),e=NOe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const MOe=O.createElement($Oe,null);class LOe extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Em.Provider,{value:this.props.routeContext},O.createElement(yH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UOe(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(rk);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Em.Provider,{value:e},r)}function jOe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||pr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,m=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||MOe,c&&(l<0&&h===0?(qOe("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let _;return f?_=m:p?_=w:d.route.Component?_=O.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=u,O.createElement(UOe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?O.createElement(LOe,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var vH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vH||{}),_H=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_H||{});function BOe(t){let e=O.useContext(rk);return e||pr(!1),e}function FOe(t){let e=O.useContext(ROe);return e||pr(!1),e}function WOe(t){let e=O.useContext(Em);return e||pr(!1),e}function EH(t){let e=WOe(),n=e.matches[e.matches.length-1];return n.route.id||pr(!1),n.route.id}function zOe(){var t;let e=O.useContext(yH),n=FOe(),r=EH();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function HOe(){let{router:t}=BOe(vH.UseNavigateStable),e=EH(_H.UseNavigateStable),n=O.useRef(!1);return bH(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,$w({fromRouteId:e},i)))},[t,e])}const IL={};function qOe(t,e,n){IL[t]||(IL[t]=!0)}function VOe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Uv(t){pr(!1)}function GOe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Hl.Pop,navigator:i,static:o=!1,future:a}=t;a1()&&pr(!1);let c=e.replace(/^\/*/,"/"),l=O.useMemo(()=>({basename:c,navigator:i,static:o,future:$w({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=_m(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=O.useMemo(()=>{let w=mH(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return m==null?null:O.createElement(i1.Provider,{value:l},O.createElement(o1.Provider,{children:n,value:m}))}function KOe(t){let{children:e,location:n}=t;return kOe(IT(e),n)}new Promise(()=>{});function IT(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,IT(r.props.children,i));return}r.type!==Uv&&pr(!1),!r.props.index||!r.props.children||pr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=IT(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const YOe="6";try{window.__reactRouterVersion=YOe}catch{}const QOe="startTransition",xL=Rq[QOe];function ZOe(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=nOe({window:s,v5Compat:!0}));let o=i.current,[a,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=O.useCallback(d=>{l&&xL?xL(()=>c(d)):c(d)},[c,l]);return O.useLayoutEffect(()=>o.listen(u),[o,u]),O.useEffect(()=>VOe(r),[r]),O.createElement(GOe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var NL;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(NL||(NL={}));var TL;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(TL||(TL={}));const XOe=Jo({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function JOe(){const t=XOe(),{open:e}=k0(),[n,r]=O.useState(),[s,i]=O.useState(!1),[o,a]=O.useState("pixelawbs-popup"),[c,l]=O.useState(new Set),[u,d]=O.useState(!1),[h,f]=O.useState(!1),[p,m]=O.useState(!1),[w,y]=O.useState(!1),b=POe(),_=O.useRef(null);O.useEffect(()=>{if(o==="halloween-popup"&&_.current){const N=_.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const T=document.createElement("script");T.src="https://www.tiktok.com/embed.js",T.async=!0,T.setAttribute("data-tiktok-embed","true"),_.current.appendChild(T)}},[o]);const E=(N,T,$)=>{if(N==="url"&&$)window.open($,"_blank");else if(N==="popup"&&T)a(T),l(R=>{const D=new Set(R);return D.delete(T),D}),document.body.offsetWidth;else if(N==="wallet")s?(i(!1),r(void 0)):e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}d(!0)}else N==="nft-gallery"?f(!0):N==="meme-generator"?m(!0):N==="chess"&&(s?y(!0):e().then(()=>{const R=()=>{window.ethereum&&window.ethereum.selectedAddress?y(!0):setTimeout(R,200)};R()}))},C=()=>a(null),I=N=>{l(T=>new Set(T).add(N)),a(null)},A=N=>{N==="mint-popup"?d(!0):N==="nft-gallery-popup"?f(!0):N==="meme-generator-popup"?m(!0):a(N),l(T=>{const $=new Set(T);return $.delete(N),$})},x=()=>d(!1),S=()=>f(!1),k=()=>m(!1),P=()=>{d(!1),l(N=>new Set(N).add("mint-popup"))},M=()=>{f(!1),l(N=>new Set(N).add("nft-gallery-popup"))},W=()=>{m(!1),l(N=>new Set(N).add("meme-generator-popup"))},U=g.jsxs("div",{onClick:()=>{s?(i(!1),r(void 0)):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:s?"limegreen":"red",fontWeight:"bold"},children:[g.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:s?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return g.jsxs("div",{className:t.body,children:[w&&g.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[g.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{y(!1),b("/chess")}}),g.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),g.jsx(oie,{onIconClick:E}),g.jsx(cie,{minimizedWindows:Array.from(c),onRestoreWindow:A,walletButton:U,connectionStatus:{connected:s,address:n,ens:void 0}}),g.jsxs(Hi,{id:"chat-popup",isOpen:o==="chat-popup",onClose:C,onMinimize:I,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",g.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),g.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(Hi,{id:"purity-popup",isOpen:o==="purity-popup",onClose:C,onMinimize:I,children:[g.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),g.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),g.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),g.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(Hi,{id:"lawbstarz-popup",isOpen:o==="lawbstarz-popup",onClose:C,onMinimize:I,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",g.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",g.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",g.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[g.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",g.jsx("br",{}),g.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",g.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",g.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),g.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),g.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(Hi,{id:"lawbstation-popup",isOpen:o==="lawbstation-popup",onClose:C,onMinimize:I,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",g.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),g.jsx("p",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),g.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),g.jsxs(Hi,{id:"nexus-popup",isOpen:o==="nexus-popup",onClose:C,onMinimize:I,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",g.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),g.jsxs(Hi,{id:"lawbsters-popup",isOpen:o==="lawbsters-popup",onClose:C,onMinimize:I,children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),g.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:g.jsx(Tte,{id:"1620879129850834944"})}),g.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),g.jsx(Hi,{id:"pixelawbs-popup",isOpen:o==="pixelawbs-popup",onClose:C,onMinimize:I,children:(()=>{const N=T=>{T.preventDefault(),a(null),d(!0)};return g.jsxs(g.Fragment,{children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",g.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",g.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),g.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",g.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),g.jsxs(Hi,{id:"halloween-popup",isOpen:o==="halloween-popup",onClose:C,onMinimize:I,children:[g.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),g.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),g.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:g.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:g.jsxs("section",{children:[g.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",g.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),g.jsxs(Hi,{id:"lawb-popup",isOpen:o==="lawb-popup",onClose:C,onMinimize:I,children:[g.jsx("h1",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),g.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",g.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),g.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",g.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),g.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",g.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),g.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),g.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:g.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),g.jsx(die,{isOpen:u,onClose:x,onMinimize:P,walletAddress:n||""}),g.jsx(VPe,{isOpen:h,onClose:S,onMinimize:M,walletAddress:n}),g.jsx(Hi,{id:"meme-generator-popup",isOpen:p,onClose:k,onMinimize:W,children:g.jsx(uH,{})})]})}function Ii(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const jv="2.17.3",eke=()=>`@wagmi/core@${jv}`;var CH=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},gE,SH;let Kc=class xT extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return eke()}constructor(e,n={}){var i;super(),gE.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof xT?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof xT&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return CH(this,gE,"m",SH).call(this,this,e)}};gE=new WeakSet,SH=function t(e,n){return n!=null&&n(e)?e:e.cause?CH(this,gE,"m",t).call(this,e.cause,n):e};class Mw extends Kc{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class tke extends Kc{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class nke extends Kc{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class rke extends Kc{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class ske extends Kc{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class ike extends Kc{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Bv(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new tke;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function D0(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new ike({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new nke;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new ske({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Vn(e.account??n.accounts[0]);if(o&&(o.address=Ac(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new rke({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return w9({account:o,chain:a,name:"Connector Client",transport:l=>_ue(c)({...l,retryCount:0})})}async function NT(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function oke(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await D0(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Ii(o,SC,"estimateGas")({...s,account:i})}function AH(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(Ace[t])}function Zf(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function ake(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Ii(o,L9,"multicall")({allowFailure:n,contracts:s,...i})}function IH(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Ii(s,Wa,"readContract")(r)}async function cke(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>ake(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof PF)throw c;const l=()=>o.map(u=>IH(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function xH(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await RL(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await RL(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=iF($a(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Ii(c,cO,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:_h(u,AH(a)),symbol:d.nativeCurrency.symbol,value:u}}async function RL(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await cke(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=_h(c??"0",AH(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function PL(t){return t.state.chainId}function Nu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Nu(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Nu(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let ZA=[];function OL(t){const e=t.chains;return Nu(ZA,e)?ZA:(ZA=e,e)}function lke(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let Jb=[];function To(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Nu(Jb,e)?Jb:(Jb=e,e)}let XA=[];function kL(t){const e=t.connectors;return Nu(XA,e)?XA:(XA=e,e)}function uke(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Ii(s,S9,"getEnsName")(r)}function TT(t,e={}){const n=lke(t,e);return n==null?void 0:n.extend(jhe)}async function dke(t,e={}){return(await D0(t,e)).extend(Jhe)}async function hke(t,e){const{account:n,chainId:r,...s}=e,i=n??Zf(t).address,o=t.getClient({chainId:r});return Ii(o,p0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let JA=!1;async function RT(t,e={}){var l,u;if(JA)return[];JA=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(m=>m===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(m=>{const w=new Map(o?m.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...m,current:o?m.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),JA=!1,a}async function fke(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await D0(t,{account:n??void 0,chainId:r,connector:s}),await Ii(o,y0,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function pke(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await D0(t,{account:n,connector:r}),Ii(i,d7,"signMessage")({...s,...n?{account:n}:{}})}class El extends Kc{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class mke extends Kc{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function PT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new mke({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Mw;return t.setState(a=>({...a,chainId:r})),i}function NH(t,e){const{onChange:n}=e;return t.subscribe(()=>Zf(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Nu(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function gke(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function TH(t,e){const{onChange:n}=e;return t.subscribe(()=>To(t),n,{equalityFn:Nu})}function RH(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function yke(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Ii(l,l7,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function wke(t,e){const{onChange:n}=e;return t.subscribe(()=>TT(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function PH(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Ii(i,c7,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Ii(i,OC,"getTransaction")({hash:a.transactionHash}),d=await Ii(i,m0,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?iF(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function OH(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await D0(t,{account:n??void 0,chainId:r,connector:s}),await Ii(o,h9,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function zMe(t){return t}c1.type="injected";function c1(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...bke[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:c1.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,m,w,y,b;const d=await this.getProvider();if(!d)throw new El;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(m=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:m.value)==null?void 0:w.map(E=>Ac(E)),h.length>0&&(h=await this.getAccounts())}catch(_){const E=_;if(E.code===or.code)throw new or(E);if(E.code===lu.code)throw E}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Ac(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let _=await this.getChainId();if(l&&_!==l){const E=await this.switchChain({chainId:l}).catch(C=>{if(C.code===or.code)throw C;return{id:_}});_=(E==null?void 0:E.id)??_}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:_}}catch(_){const E=_;throw E.code===or.code?new or(E):E.code===lu.code?new lu(E):E}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new El;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await b9(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new El;return(await l.request({method:"eth_accounts"})).map(d=>Ac(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new El;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Fv(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),m=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),m))]))return!0}throw new El}return!!(await W_(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,m,w,y;const d=await this.getProvider();if(!d)throw new El;const h=c.chains.find(b=>b.id===u);if(!h)throw new Ba(new Mw);const f=new Promise(b=>{const _=E=>{"chainId"in E&&E.chainId===u&&(c.emitter.off("change",_),b())};c.emitter.on("change",_)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:De(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const _=b;if(_.code===4902||((m=(p=_==null?void 0:_.data)==null?void 0:p.originalError)==null?void 0:m.code)===4902)try{const{default:E,...C}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:E&&(I=[E.url,...Object.values(C).map(S=>S.url)]);let A;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?A=l.rpcUrls:A=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const x={blockExplorerUrls:I,chainId:De(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[x]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new or(new Error("User rejected switch after adding network."))}),f]),h}catch(E){throw new or(E)}throw _.code===or.code?new or(_):new Ba(_)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Ac(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const bke={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Fv(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Fv(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Fv(t,"isPhantom")}}};function Fv(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function vke(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function _ke(){const t=new Set;let e=[];const n=()=>vke(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Eke=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Cke=Eke;function Ske(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const OT=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return OT(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return OT(r)(n)}}}},Ake=(t,e)=>(n,r,s)=>{let i={storage:Ske(()=>localStorage),partialize:m=>m,version:0,merge:(m,w)=>({...w,...m}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...m)},r,s);const u=()=>{const m=i.partialize({...r()});return l.setItem(i.name,{state:m,version:i.version})},d=s.setState;s.setState=(m,w)=>{d(m,w),u()};const h=t((...m)=>{n(...m),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var m,w;if(!l)return;o=!1,a.forEach(b=>{var _;return b((_=r())!=null?_:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(m=r())!=null?m:h))||void 0;return OT(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var _;const[E,C]=b;if(f=i.merge(C,(_=r())!=null?_:h),n(f,!0),E)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:m=>{i={...i,...m},m.storage&&(l=m.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},i.skipHydration||p(),f||h},Ike=Ake,DL=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},eI=t=>t?DL(t):DL;var kH={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var m=n?n+l:l;if(!this._events[m])return!1;var w=this._events[m],y=arguments.length,b,_;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];w.fn.apply(w.context,b)}else{var E=w.length,C;for(_=0;_<E;_++)switch(w[_].once&&this.removeListener(l,w[_].fn,void 0,!0),y){case 1:w[_].fn.call(w[_].context);break;case 2:w[_].fn.call(w[_].context,u);break;case 3:w[_].fn.call(w[_].context,u,d);break;case 4:w[_].fn.call(w[_].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];w[_].fn.apply(w[_].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,w=[],y=p.length;m<y;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&w.push(p[m]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(kH);var xke=kH.exports;const Nke=hh(xke);class Tke{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Nke})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Rke(t){return new Tke(t)}function Pke(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function $L(t,e){return t.slice(0,e).join(".")||"."}function ML(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Oke(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=ML(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=ML(s,c);if(u!==0)return r?e.call(this,a,c,$L(i,u)):`[ref=${$L(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function kke(t,e,n,r){return JSON.stringify(t,Oke((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Dke(t){const{deserialize:e=Pke,key:n="wagmi",serialize:r=kke,storage:s=DH}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const DH={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function $ke(){const t=typeof window<"u"&&window.localStorage?window.localStorage:DH;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const kT=256;let ev=kT,tv;function Mke(t=11){if(!tv||ev+t>kT*2){tv="",ev=0;for(let e=0;e<kT;e++)tv+=(256+Math.random()*256|0).toString(16).substring(1)}return tv.substring(ev,ev+++t)}function $H(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Dke({storage:$ke()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?_ke():void 0,a=eI(()=>i.chains),c=eI(()=>{const C=[],I=new Set;for(const A of i.connectors??[]){const x=l(A);if(C.push(x),!s&&x.rdns){const S=typeof x.rdns=="string"?[x.rdns]:x.rdns;for(const k of S)I.add(k)}}if(!s&&o){const A=o.getProviders();for(const x of A)I.has(x.info.rdns)||C.push(l(u(x)))}return C});function l(C){var x;const I=Rke(Mke()),A={...C({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",_),(x=A.setup)==null||x.call(A),A}function u(C){const{info:I}=C,A=C.provider;return c1({target:{...I,id:I.rdns,provider:A}})}const d=new Map;function h(C={}){const I=C.chainId??w.getState().chainId,A=a.getState().find(S=>S.id===I);if(C.chainId&&!A)throw new Mw;{const S=d.get(w.getState().chainId);if(S&&!A)return S;if(!A)throw new Mw}{const S=d.get(I);if(S)return S}let x;if(i.client)x=i.client({chain:A});else{const S=A.id,k=a.getState().map(W=>W.id),P={},M=Object.entries(i);for(const[W,U]of M)if(!(W==="chains"||W==="client"||W==="connectors"||W==="transports"))if(typeof U=="object")if(S in U)P[W]=U[S];else{if(k.some(T=>T in U))continue;P[W]=U}else P[W]=U;x=w9({...P,chain:A,batch:P.batch??{multicall:!0},transport:W=>i.transports[S]({...W,connectors:c})})}return d.set(I,x),x}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const m="0.0.0-canary-";jv.startsWith(m)?p=Number.parseInt(jv.replace(m,"")):p=Number.parseInt(jv.split(".")[0]??"0");const w=eI(Cke(n?Ike(f,{migrate(C,I){if(I===p)return C;const A=f(),x=y(C,A.chainId);return{...A,chainId:x}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([I,A])=>{const{id:x,name:S,type:k,uid:P}=A.connector;return[I,{...A,connector:{id:x,name:S,type:k,uid:P}}]})},chainId:C.chainId,current:C.current}},merge(C,I){typeof C=="object"&&C&&"status"in C&&delete C.status;const A=y(C,I.chainId);return{...I,...C,chainId:A}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(C,I){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(A=>A.id===C.chainId)?C.chainId:I}r&&w.subscribe(({connections:C,current:I})=>{var A;return I?(A=C.get(I))==null?void 0:A.chainId:void 0},C=>{if(a.getState().some(A=>A.id===C))return w.setState(A=>({...A,chainId:C??A.chainId}))}),o==null||o.subscribe(C=>{const I=new Set,A=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const k=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of k)A.add(P)}const x=[];for(const S of C){if(A.has(S.info.rdns))continue;const k=l(u(S));I.has(k.id)||x.push(k)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...x],!0)});function b(C){w.setState(I=>{const A=I.connections.get(C.uid);return A?{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts??A.accounts,chainId:C.chainId??A.chainId,connector:A.connector})}:I})}function _(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const A=c.getState().find(x=>x.uid===C.uid);return A?(A.emitter.listenerCount("connect")&&A.emitter.off("connect",b),A.emitter.listenerCount("change")||A.emitter.on("change",b),A.emitter.listenerCount("disconnect")||A.emitter.on("disconnect",E),{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:A}),current:C.uid,status:"connected"}):I})}function E(C){w.setState(I=>{const A=I.connections.get(C.uid);if(A){const S=A.connector;S.emitter.listenerCount("change")&&A.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&A.connector.emitter.off("disconnect",E),S.emitter.listenerCount("connect")||A.connector.emitter.on("connect",_)}if(I.connections.delete(C.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const x=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:x.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let I;typeof C=="function"?I=C(w.getState()):I=C;const A=f();typeof I!="object"&&(I=A),Object.keys(A).some(S=>!(S in I))&&(I=A),w.setState(I,!0)},subscribe(C,I,A){return w.subscribe(C,I,A?{...A,fireImmediately:A.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const I=typeof C=="function"?C(a.getState()):C;if(I.length!==0)return a.setState(I,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:_,disconnect:E}}}}function Lke(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?RT(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Uke(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Lke(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=O.useRef(!0);return O.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const MH=O.createContext(void 0);function jke(t){const{children:e,config:n}=t,r={value:n};return O.createElement(Uke,t,O.createElement(MH.Provider,r,e))}const Bke="2.15.6",Fke=()=>`wagmi@${Bke}`;class Wke extends Kc{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Fke()}}class zke extends Wke{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function As(t={}){const e=t.config??O.useContext(MH);if(!e)throw new zke;return e}function Hke(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var LH={exports:{}},UH={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1=O,qke=Tj;function Vke(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gke=typeof Object.is=="function"?Object.is:Vke,Kke=qke.useSyncExternalStore,Yke=l1.useRef,Qke=l1.useEffect,Zke=l1.useMemo,Xke=l1.useDebugValue;UH.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Yke(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Zke(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Gke(u,f))return p;var m=r(f);return s!==void 0&&s(p,m)?(u=f,p):(u=f,d=m)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Kke(t,i[0],i[1]);return Qke(function(){o.hasValue=!0,o.value=a},[a]),Xke(a),a};LH.exports=UH;var jH=LH.exports;const tI=t=>typeof t=="object"&&!Array.isArray(t);function Jke(t,e,n=e,r=Nu){const s=O.useRef([]),i=jH.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(tI(o)&&tI(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return O.useMemo(()=>{if(tI(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function $0(t={}){const e=As(t);return Jke(n=>NH(e,{onChange:n}),()=>Zf(e))}var Cm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uh=typeof window>"u"||"Deno"in globalThis;function ps(){}function e2e(t,e){return typeof t=="function"?t(e):t}function DT(t){return typeof t=="number"&&t>=0&&t!==1/0}function BH(t,e){return Math.max(t+(e||0)-Date.now(),0)}function gu(t,e){return typeof t=="function"?t(e):t}function Qi(t,e){return typeof t=="function"?t(e):t}function LL(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==sk(o,e.options))return!1}else if(!Lw(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function UL(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(dh(e.options.mutationKey)!==dh(i))return!1}else if(!Lw(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function sk(t,e){return((e==null?void 0:e.queryKeyHashFn)||dh)(t)}function dh(t){return JSON.stringify(t,(e,n)=>$T(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Lw(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Lw(t[n],e[n])):!1}function ik(t,e){if(t===e)return t;const n=jL(t)&&jL(e);if(n||$T(t)&&$T(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=ik(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function yE(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function jL(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $T(t){if(!BL(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!BL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function BL(t){return Object.prototype.toString.call(t)==="[object Object]"}function t2e(t){return new Promise(e=>{setTimeout(e,t)})}function MT(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ik(t,e):e}function n2e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function r2e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ok=Symbol();function FH(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ok?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function WH(t,e){return typeof t=="function"?t(...e):!!t}var _d,Tl,ep,y6,s2e=(y6=class extends Cm{constructor(){super();We(this,_d);We(this,Tl);We(this,ep);be(this,ep,e=>{if(!uh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){F(this,Tl)||this.setEventListener(F(this,ep))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Tl))==null||e.call(this),be(this,Tl,void 0))}setEventListener(e){var n;be(this,ep,e),(n=F(this,Tl))==null||n.call(this),be(this,Tl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){F(this,_d)!==e&&(be(this,_d,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof F(this,_d)=="boolean"?F(this,_d):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},_d=new WeakMap,Tl=new WeakMap,ep=new WeakMap,y6),ak=new s2e,tp,Rl,np,w6,i2e=(w6=class extends Cm{constructor(){super();We(this,tp,!0);We(this,Rl);We(this,np);be(this,np,e=>{if(!uh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){F(this,Rl)||this.setEventListener(F(this,np))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Rl))==null||e.call(this),be(this,Rl,void 0))}setEventListener(e){var n;be(this,np,e),(n=F(this,Rl))==null||n.call(this),be(this,Rl,e(this.setOnline.bind(this)))}setOnline(e){F(this,tp)!==e&&(be(this,tp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return F(this,tp)}},tp=new WeakMap,Rl=new WeakMap,np=new WeakMap,w6),wE=new i2e;function LT(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function o2e(t){return Math.min(1e3*2**t,3e4)}function zH(t){return(t??"online")==="online"?wE.isOnline():!0}var HH=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function nI(t){return t instanceof HH}function qH(t){let e=!1,n=0,r=!1,s;const i=LT(),o=m=>{var w;r||(h(new HH(m)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>ak.isFocused()&&(t.networkMode==="always"||wE.isOnline())&&t.canRun(),u=()=>zH(t.networkMode)&&t.canRun(),d=m=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,m),s==null||s(),i.resolve(m))},h=m=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,m),s==null||s(),i.reject(m))},f=()=>new Promise(m=>{var w;s=y=>{(r||l())&&m(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var m;s=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const w=n===0?t.initialPromise:void 0;try{m=w??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(uh?0:3),_=t.retryDelay??o2e,E=typeof _=="function"?_(n,y):_,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!C){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),t2e(E).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var a2e=t=>setTimeout(t,0);function c2e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a2e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var lr=c2e(),Ed,b6,VH=(b6=class{constructor(){We(this,Ed)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),DT(this.gcTime)&&be(this,Ed,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(uh?1/0:5*60*1e3))}clearGcTimeout(){F(this,Ed)&&(clearTimeout(F(this,Ed)),be(this,Ed,void 0))}},Ed=new WeakMap,b6),rp,Cd,Gi,Sd,es,Bw,Ad,Ro,hc,v6,l2e=(v6=class extends VH{constructor(e){super();We(this,Ro);We(this,rp);We(this,Cd);We(this,Gi);We(this,Sd);We(this,es);We(this,Bw);We(this,Ad);be(this,Ad,!1),be(this,Bw,e.defaultOptions),this.setOptions(e.options),this.observers=[],be(this,Sd,e.client),be(this,Gi,F(this,Sd).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,be(this,rp,u2e(this.options)),this.state=e.state??F(this,rp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=F(this,es))==null?void 0:e.promise}setOptions(e){this.options={...F(this,Bw),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,Gi).remove(this)}setData(e,n){const r=MT(this.state.data,e,this.options);return bt(this,Ro,hc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){bt(this,Ro,hc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=F(this,es))==null?void 0:r.promise;return(s=F(this,es))==null||s.cancel(e),n?n.then(ps).catch(ps):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,rp))}isActive(){return this.observers.some(e=>Qi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ok||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>gu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!BH(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,es))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=F(this,es))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),F(this,Gi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(F(this,es)&&(F(this,Ad)?F(this,es).cancel({revert:!0}):F(this,es).cancelRetry()),this.scheduleGc()),F(this,Gi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||bt(this,Ro,hc).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(F(this,es))return F(this,es).continueRetry(),F(this,es).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(be(this,Ad,!0),r.signal)})},i=()=>{const h=FH(this.options,n),p=(()=>{const m={client:F(this,Sd),queryKey:this.queryKey,meta:this.meta};return s(m),m})();return be(this,Ad,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:F(this,Sd),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),be(this,Cd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&bt(this,Ro,hc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,m,w;nI(h)&&h.silent||bt(this,Ro,hc).call(this,{type:"error",error:h}),nI(h)||((p=(f=F(this,Gi).config).onError)==null||p.call(f,h,this),(w=(m=F(this,Gi).config).onSettled)==null||w.call(m,this.state.data,h,this)),this.scheduleGc()};return be(this,es,qH({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,m,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=F(this,Gi).config).onSuccess)==null||p.call(f,h,this),(w=(m=F(this,Gi).config).onSettled)==null||w.call(m,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{bt(this,Ro,hc).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{bt(this,Ro,hc).call(this,{type:"pause"})},onContinue:()=>{bt(this,Ro,hc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),F(this,es).start()}},rp=new WeakMap,Cd=new WeakMap,Gi=new WeakMap,Sd=new WeakMap,es=new WeakMap,Bw=new WeakMap,Ad=new WeakMap,Ro=new WeakSet,hc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...GH(r.data,this.options),fetchMeta:e.meta??null};case"success":return be(this,Cd,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return nI(s)&&s.revert&&F(this,Cd)?{...F(this,Cd),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),lr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),F(this,Gi).notify({query:this,type:"updated",action:e})})},v6);function GH(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:zH(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function u2e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ya,_6,d2e=(_6=class extends Cm{constructor(e={}){super();We(this,ya);this.config=e,be(this,ya,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??sk(s,n);let o=this.get(i);return o||(o=new l2e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){F(this,ya).has(e.queryHash)||(F(this,ya).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=F(this,ya).get(e.queryHash);n&&(e.destroy(),n===e&&F(this,ya).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){lr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return F(this,ya).get(e)}getAll(){return[...F(this,ya).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>LL(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>LL(e,r)):n}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){lr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){lr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ya=new WeakMap,_6),wa,ds,Id,ba,yl,E6,h2e=(E6=class extends VH{constructor(e){super();We(this,ba);We(this,wa);We(this,ds);We(this,Id);this.mutationId=e.mutationId,be(this,ds,e.mutationCache),be(this,wa,[]),this.state=e.state||KH(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){F(this,wa).includes(e)||(F(this,wa).push(e),this.clearGcTimeout(),F(this,ds).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){be(this,wa,F(this,wa).filter(n=>n!==e)),this.scheduleGc(),F(this,ds).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){F(this,wa).length||(this.state.status==="pending"?this.scheduleGc():F(this,ds).remove(this))}continue(){var e;return((e=F(this,Id))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,m,w,y,b,_,E,C,I,A,x;const n=()=>{bt(this,ba,yl).call(this,{type:"continue"})};be(this,Id,qH({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,k)=>{bt(this,ba,yl).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{bt(this,ba,yl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,ds).canRun(this)}));const r=this.state.status==="pending",s=!F(this,Id).canStart();try{if(r)n();else{bt(this,ba,yl).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=F(this,ds).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&bt(this,ba,yl).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const S=await F(this,Id).start();return await((u=(l=F(this,ds).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=F(this,ds).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(m=this.options).onSettled)==null?void 0:w.call(m,S,null,e,this.state.context)),bt(this,ba,yl).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=F(this,ds).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((E=(_=this.options).onError)==null?void 0:E.call(_,S,e,this.state.context)),await((I=(C=F(this,ds).config).onSettled)==null?void 0:I.call(C,void 0,S,this.state.variables,this.state.context,this)),await((x=(A=this.options).onSettled)==null?void 0:x.call(A,void 0,S,e,this.state.context)),S}finally{bt(this,ba,yl).call(this,{type:"error",error:S})}}finally{F(this,ds).runNext(this)}}},wa=new WeakMap,ds=new WeakMap,Id=new WeakMap,ba=new WeakSet,yl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),lr.batch(()=>{F(this,wa).forEach(r=>{r.onMutationUpdate(e)}),F(this,ds).notify({mutation:this,type:"updated",action:e})})},E6);function KH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yc,Po,Fw,C6,f2e=(C6=class extends Cm{constructor(e={}){super();We(this,yc);We(this,Po);We(this,Fw);this.config=e,be(this,yc,new Set),be(this,Po,new Map),be(this,Fw,0)}build(e,n,r){const s=new h2e({mutationCache:this,mutationId:++X0(this,Fw)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){F(this,yc).add(e);const n=nv(e);if(typeof n=="string"){const r=F(this,Po).get(n);r?r.push(e):F(this,Po).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(F(this,yc).delete(e)){const n=nv(e);if(typeof n=="string"){const r=F(this,Po).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&F(this,Po).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=nv(e);if(typeof n=="string"){const r=F(this,Po).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=nv(e);if(typeof n=="string"){const s=(r=F(this,Po).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){lr.batch(()=>{F(this,yc).forEach(e=>{this.notify({type:"removed",mutation:e})}),F(this,yc).clear(),F(this,Po).clear()})}getAll(){return Array.from(F(this,yc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>UL(n,r))}findAll(e={}){return this.getAll().filter(n=>UL(e,n))}notify(e){lr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return lr.batch(()=>Promise.all(e.map(n=>n.continue().catch(ps))))}},yc=new WeakMap,Po=new WeakMap,Fw=new WeakMap,C6);function nv(t){var e;return(e=t.options.scope)==null?void 0:e.id}function FL(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let m=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},y=FH(e.options,e.fetchOptions),b=async(_,E,C)=>{if(m)return Promise.reject();if(E==null&&_.pages.length)return Promise.resolve(_);const A=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:E,direction:C?"backward":"forward",meta:e.options.meta};return w(P),P})(),x=await y(A),{maxPages:S}=e.options,k=C?r2e:n2e;return{pages:k(_.pages,x,S),pageParams:k(_.pageParams,E,S)}};if(s&&i.length){const _=s==="backward",E=_?p2e:WL,C={pages:i,pageParams:o},I=E(r,C);a=await b(C,I,_)}else{const _=t??i.length;do{const E=c===0?o[0]??r.initialPageParam:WL(r,a);if(c>0&&E==null)break;a=await b(a,E),c++}while(c<_)}return a};e.options.persister?e.fetchFn=()=>{var m,w;return(w=(m=e.options).persister)==null?void 0:w.call(m,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function WL(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function p2e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Wn,Pl,Ol,sp,ip,kl,op,ap,S6,m2e=(S6=class{constructor(t={}){We(this,Wn);We(this,Pl);We(this,Ol);We(this,sp);We(this,ip);We(this,kl);We(this,op);We(this,ap);be(this,Wn,t.queryCache||new d2e),be(this,Pl,t.mutationCache||new f2e),be(this,Ol,t.defaultOptions||{}),be(this,sp,new Map),be(this,ip,new Map),be(this,kl,0)}mount(){X0(this,kl)._++,F(this,kl)===1&&(be(this,op,ak.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Wn).onFocus())})),be(this,ap,wE.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Wn).onOnline())})))}unmount(){var t,e;X0(this,kl)._--,F(this,kl)===0&&((t=F(this,op))==null||t.call(this),be(this,op,void 0),(e=F(this,ap))==null||e.call(this),be(this,ap,void 0))}isFetching(t){return F(this,Wn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return F(this,Pl).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Wn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=F(this,Wn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(gu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return F(this,Wn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=F(this,Wn).get(r.queryHash),i=s==null?void 0:s.state.data,o=e2e(e,i);if(o!==void 0)return F(this,Wn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return lr.batch(()=>F(this,Wn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=F(this,Wn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=F(this,Wn);lr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=F(this,Wn);return lr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=lr.batch(()=>F(this,Wn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(ps).catch(ps)}invalidateQueries(t,e={}){return lr.batch(()=>(F(this,Wn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=lr.batch(()=>F(this,Wn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(ps)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ps)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=F(this,Wn).build(this,e);return n.isStaleByTime(gu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ps).catch(ps)}fetchInfiniteQuery(t){return t.behavior=FL(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ps).catch(ps)}ensureInfiniteQueryData(t){return t.behavior=FL(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return wE.isOnline()?F(this,Pl).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,Wn)}getMutationCache(){return F(this,Pl)}getDefaultOptions(){return F(this,Ol)}setDefaultOptions(t){be(this,Ol,t)}setQueryDefaults(t,e){F(this,sp).set(dh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...F(this,sp).values()],n={};return e.forEach(r=>{Lw(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){F(this,ip).set(dh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...F(this,ip).values()],n={};return e.forEach(r=>{Lw(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...F(this,Ol).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=sk(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ok&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...F(this,Ol).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){F(this,Wn).clear(),F(this,Pl).clear()}},Wn=new WeakMap,Pl=new WeakMap,Ol=new WeakMap,sp=new WeakMap,ip=new WeakMap,kl=new WeakMap,op=new WeakMap,ap=new WeakMap,S6),js,Rt,Ww,hs,xd,cp,Dl,$l,zw,lp,up,Nd,Td,Ml,dp,Kt,Ag,UT,jT,BT,FT,WT,zT,HT,YH,A6,g2e=(A6=class extends Cm{constructor(e,n){super();We(this,Kt);We(this,js);We(this,Rt);We(this,Ww);We(this,hs);We(this,xd);We(this,cp);We(this,Dl);We(this,$l);We(this,zw);We(this,lp);We(this,up);We(this,Nd);We(this,Td);We(this,Ml);We(this,dp,new Set);this.options=n,be(this,js,e),be(this,$l,null),be(this,Dl,LT()),this.options.experimental_prefetchInRender||F(this,Dl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(F(this,Rt).addObserver(this),zL(F(this,Rt),this.options)?bt(this,Kt,Ag).call(this):this.updateResult(),bt(this,Kt,FT).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return qT(F(this,Rt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return qT(F(this,Rt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,bt(this,Kt,WT).call(this),bt(this,Kt,zT).call(this),F(this,Rt).removeObserver(this)}setOptions(e){const n=this.options,r=F(this,Rt);if(this.options=F(this,js).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Qi(this.options.enabled,F(this,Rt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");bt(this,Kt,HT).call(this),F(this,Rt).setOptions(this.options),n._defaulted&&!yE(this.options,n)&&F(this,js).getQueryCache().notify({type:"observerOptionsUpdated",query:F(this,Rt),observer:this});const s=this.hasListeners();s&&HL(F(this,Rt),r,this.options,n)&&bt(this,Kt,Ag).call(this),this.updateResult(),s&&(F(this,Rt)!==r||Qi(this.options.enabled,F(this,Rt))!==Qi(n.enabled,F(this,Rt))||gu(this.options.staleTime,F(this,Rt))!==gu(n.staleTime,F(this,Rt)))&&bt(this,Kt,UT).call(this);const i=bt(this,Kt,jT).call(this);s&&(F(this,Rt)!==r||Qi(this.options.enabled,F(this,Rt))!==Qi(n.enabled,F(this,Rt))||i!==F(this,Ml))&&bt(this,Kt,BT).call(this,i)}getOptimisticResult(e){const n=F(this,js).getQueryCache().build(F(this,js),e),r=this.createResult(n,e);return w2e(this,r)&&(be(this,hs,r),be(this,cp,this.options),be(this,xd,F(this,Rt).state)),r}getCurrentResult(){return F(this,hs)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){F(this,dp).add(e)}getCurrentQuery(){return F(this,Rt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=F(this,js).defaultQueryOptions(e),r=F(this,js).getQueryCache().build(F(this,js),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return bt(this,Kt,Ag).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),F(this,hs)))}createResult(e,n){var S;const r=F(this,Rt),s=this.options,i=F(this,hs),o=F(this,xd),a=F(this,cp),l=e!==r?e.state:F(this,Ww),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),P=!k&&zL(e,n),M=k&&HL(e,r,n,s);(P||M)&&(d={...d,...GH(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,y=!0):k=typeof n.placeholderData=="function"?n.placeholderData((S=F(this,up))==null?void 0:S.state.data,F(this,up)):n.placeholderData,k!==void 0&&(w="success",f=MT(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===F(this,zw))f=F(this,lp);else try{be(this,zw,n.select),f=n.select(f),f=MT(i==null?void 0:i.data,f,n),be(this,lp,f),be(this,$l,null)}catch(k){be(this,$l,k)}F(this,$l)&&(p=F(this,$l),f=F(this,lp),m=Date.now(),w="error");const b=d.fetchStatus==="fetching",_=w==="pending",E=w==="error",C=_&&b,I=f!==void 0,x={status:w,fetchStatus:d.fetchStatus,isPending:_,isSuccess:w==="success",isError:E,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!_,isLoadingError:E&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&I,isStale:ck(e,n),refetch:this.refetch,promise:F(this,Dl),isEnabled:Qi(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=W=>{x.status==="error"?W.reject(x.error):x.data!==void 0&&W.resolve(x.data)},P=()=>{const W=be(this,Dl,x.promise=LT());k(W)},M=F(this,Dl);switch(M.status){case"pending":e.queryHash===r.queryHash&&k(M);break;case"fulfilled":(x.status==="error"||x.data!==M.value)&&P();break;case"rejected":(x.status!=="error"||x.error!==M.reason)&&P();break}}return x}updateResult(){const e=F(this,hs),n=this.createResult(F(this,Rt),this.options);if(be(this,xd,F(this,Rt).state),be(this,cp,this.options),F(this,xd).data!==void 0&&be(this,up,F(this,Rt)),yE(n,e))return;be(this,hs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!F(this,dp).size)return!0;const o=new Set(i??F(this,dp));return this.options.throwOnError&&o.add("error"),Object.keys(F(this,hs)).some(a=>{const c=a;return F(this,hs)[c]!==e[c]&&o.has(c)})};bt(this,Kt,YH).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&bt(this,Kt,FT).call(this)}},js=new WeakMap,Rt=new WeakMap,Ww=new WeakMap,hs=new WeakMap,xd=new WeakMap,cp=new WeakMap,Dl=new WeakMap,$l=new WeakMap,zw=new WeakMap,lp=new WeakMap,up=new WeakMap,Nd=new WeakMap,Td=new WeakMap,Ml=new WeakMap,dp=new WeakMap,Kt=new WeakSet,Ag=function(e){bt(this,Kt,HT).call(this);let n=F(this,Rt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(ps)),n},UT=function(){bt(this,Kt,WT).call(this);const e=gu(this.options.staleTime,F(this,Rt));if(uh||F(this,hs).isStale||!DT(e))return;const r=BH(F(this,hs).dataUpdatedAt,e)+1;be(this,Nd,setTimeout(()=>{F(this,hs).isStale||this.updateResult()},r))},jT=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(F(this,Rt)):this.options.refetchInterval)??!1},BT=function(e){bt(this,Kt,zT).call(this),be(this,Ml,e),!(uh||Qi(this.options.enabled,F(this,Rt))===!1||!DT(F(this,Ml))||F(this,Ml)===0)&&be(this,Td,setInterval(()=>{(this.options.refetchIntervalInBackground||ak.isFocused())&&bt(this,Kt,Ag).call(this)},F(this,Ml)))},FT=function(){bt(this,Kt,UT).call(this),bt(this,Kt,BT).call(this,bt(this,Kt,jT).call(this))},WT=function(){F(this,Nd)&&(clearTimeout(F(this,Nd)),be(this,Nd,void 0))},zT=function(){F(this,Td)&&(clearInterval(F(this,Td)),be(this,Td,void 0))},HT=function(){const e=F(this,js).getQueryCache().build(F(this,js),this.options);if(e===F(this,Rt))return;const n=F(this,Rt);be(this,Rt,e),be(this,Ww,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},YH=function(e){lr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(F(this,hs))}),F(this,js).getQueryCache().notify({query:F(this,Rt),type:"observerResultsUpdated"})})},A6);function y2e(t,e){return Qi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function zL(t,e){return y2e(t,e)||t.state.data!==void 0&&qT(t,e,e.refetchOnMount)}function qT(t,e,n){if(Qi(e.enabled,t)!==!1&&gu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&ck(t,e)}return!1}function HL(t,e,n,r){return(t!==e||Qi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&ck(t,n)}function ck(t,e){return Qi(e.enabled,t)!==!1&&t.isStaleByTime(gu(e.staleTime,t))}function w2e(t,e){return!yE(t.getCurrentResult(),e)}var Ll,Ul,Bs,wc,kc,Wv,VT,I6,b2e=(I6=class extends Cm{constructor(n,r){super();We(this,kc);We(this,Ll);We(this,Ul);We(this,Bs);We(this,wc);be(this,Ll,n),this.setOptions(r),this.bindMethods(),bt(this,kc,Wv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=F(this,Ll).defaultMutationOptions(n),yE(this.options,r)||F(this,Ll).getMutationCache().notify({type:"observerOptionsUpdated",mutation:F(this,Bs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&dh(r.mutationKey)!==dh(this.options.mutationKey)?this.reset():((s=F(this,Bs))==null?void 0:s.state.status)==="pending"&&F(this,Bs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=F(this,Bs))==null||n.removeObserver(this)}onMutationUpdate(n){bt(this,kc,Wv).call(this),bt(this,kc,VT).call(this,n)}getCurrentResult(){return F(this,Ul)}reset(){var n;(n=F(this,Bs))==null||n.removeObserver(this),be(this,Bs,void 0),bt(this,kc,Wv).call(this),bt(this,kc,VT).call(this)}mutate(n,r){var s;return be(this,wc,r),(s=F(this,Bs))==null||s.removeObserver(this),be(this,Bs,F(this,Ll).getMutationCache().build(F(this,Ll),this.options)),F(this,Bs).addObserver(this),F(this,Bs).execute(n)}},Ll=new WeakMap,Ul=new WeakMap,Bs=new WeakMap,wc=new WeakMap,kc=new WeakSet,Wv=function(){var r;const n=((r=F(this,Bs))==null?void 0:r.state)??KH();be(this,Ul,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},VT=function(n){lr.batch(()=>{var r,s,i,o,a,c,l,u;if(F(this,wc)&&this.hasListeners()){const d=F(this,Ul).variables,h=F(this,Ul).context;(n==null?void 0:n.type)==="success"?((s=(r=F(this,wc)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=F(this,wc)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=F(this,wc)).onError)==null||c.call(a,n.error,d,h),(u=(l=F(this,wc)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(F(this,Ul))})})},I6);function v2e(t,e){return ik(t,e)}function _2e(t){return JSON.stringify(t,(e,n)=>E2e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function E2e(t){if(!qL(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!qL(n)||!n.hasOwnProperty("isPrototypeOf"))}function qL(t){return Object.prototype.toString.call(t)==="[object Object]"}function M0(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:m,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:_,enabled:E,notifyOnChangeProps:C,placeholderData:I,refetchInterval:A,refetchIntervalInBackground:x,refetchOnMount:S,refetchOnReconnect:k,refetchOnWindowFocus:P,retryOnMount:M,select:W,staleTime:U,suspense:N,throwOnError:T,config:$,connector:R,query:D,...j}=t;return j}function C2e(t){return{mutationFn(e){return Bv(t,e)},mutationKey:["connect"]}}function S2e(t){return{mutationFn(e){return NT(t,e)},mutationKey:["disconnect"]}}function A2e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await xH(t,{...i,address:r})??null},queryKey:I2e(e)}}function I2e(t={}){return["balance",M0(t)]}function x2e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return uke(t,{...i,address:r})},queryKey:N2e(e)}}function N2e(t={}){return["ensName",M0(t)]}function T2e(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return dke(t,{...o,connector:r})},queryKey:R2e(e)}}function R2e(t={}){const{connector:e,...n}=t;return["walletClient",{...M0(n),connectorUid:e==null?void 0:e.uid}]}function P2e(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return IH(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:O2e(e)}}function O2e(t={}){const{abi:e,...n}=t;return["readContract",M0(n)]}function k2e(t){return{mutationFn(e){return PT(t,e)},mutationKey:["switchChain"]}}function D2e(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return PH(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:$2e(e)}}function $2e(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",M0(n)]}function M2e(t){return{mutationFn(e){return OH(t,e)},mutationKey:["writeContract"]}}var QH=O.createContext(void 0),lk=t=>{const e=O.useContext(QH);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},L2e=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),g.jsx(QH.Provider,{value:t,children:e})),ZH=O.createContext(!1),U2e=()=>O.useContext(ZH);ZH.Provider;function j2e(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var B2e=O.createContext(j2e()),F2e=()=>O.useContext(B2e),W2e=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},z2e=t=>{O.useEffect(()=>{t.clearReset()},[t])},H2e=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||WH(n,[t.error,r])),q2e=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},V2e=(t,e)=>t.isLoading&&t.isFetching&&!e,G2e=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,VL=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function K2e(t,e,n){var d,h,f,p,m;const r=U2e(),s=F2e(),i=lk(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",q2e(o),W2e(o,s),z2e(s);const a=!i.getQueryCache().get(o.queryHash),[c]=O.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(w=>{const y=u?c.subscribe(lr.batchCalls(w)):ps;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),O.useEffect(()=>{c.setOptions(o)},[o,c]),G2e(o,l))throw VL(o,c,s);if(H2e({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!uh&&V2e(l,r)){const w=a?VL(o,c,s):(m=i.getQueryCache().get(o.queryHash))==null?void 0:m.promise;w==null||w.catch(ps).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function Y2e(t,e){return K2e(t,g2e)}function u1(t,e){const n=lk(),[r]=O.useState(()=>new b2e(n,t));O.useEffect(()=>{r.setOptions(t)},[r,t]);const s=O.useSyncExternalStore(O.useCallback(o=>r.subscribe(lr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=O.useCallback((o,a)=>{r.mutate(o,a).catch(ps)},[r]);if(s.error&&WH(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function L0(t){const e=Y2e({...t,queryKeyHashFn:_2e});return e.queryKey=t.queryKey,e}function Yc(t={}){const e=As(t);return O.useSyncExternalStore(n=>gke(e,{onChange:n}),()=>PL(e),()=>PL(e))}function Q2e(t={}){const{address:e,query:n={}}=t,r=As(t),s=Yc({config:r}),i=A2e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return L0({...n,...i,enabled:o})}function Z2e(t={}){const e=As(t);return O.useSyncExternalStore(n=>Hke(e,{onChange:n}),()=>OL(e),()=>OL(e))}function X2e(t={}){const e=As(t);return O.useSyncExternalStore(n=>RH(e,{onChange:n}),()=>kL(e),()=>kL(e))}function J2e(t={}){const{mutation:e}=t,n=As(t),r=C2e(n),{mutate:s,mutateAsync:i,...o}=u1({...e,...r});return O.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:X2e({config:n})}}function eDe(t={}){const e=As(t);return O.useSyncExternalStore(n=>TH(e,{onChange:n}),()=>To(e),()=>To(e))}function tDe(t={}){const{mutation:e}=t,n=As(t),r=S2e(n),{mutate:s,mutateAsync:i,...o}=u1({...e,...r});return{...o,connectors:eDe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function nDe(t={}){const{address:e,query:n={}}=t,r=As(t),s=Yc({config:r}),i=x2e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return L0({...n,...i,enabled:o})}function rDe(t={}){const e=As(t);return jH.useSyncExternalStoreWithSelector(n=>wke(e,{onChange:n}),()=>TT(e,t),()=>TT(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function bE(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=As(t),a=Yc({config:o}),c=P2e(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return L0({...s,...c,enabled:l,structuralSharing:s.structuralSharing??v2e})}function sDe(t={}){const{mutation:e}=t,n=As(t),r=k2e(n),{mutate:s,mutateAsync:i,...o}=u1({...e,...r});return{...o,chains:Z2e({config:n}),switchChain:s,switchChainAsync:i}}function iDe(t={}){const{query:e={},...n}=t,r=As(n),s=lk(),{address:i,connector:o,status:a}=$0({config:r}),c=Yc({config:r}),l=t.connector??o,{queryKey:u,...d}=T2e(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=O.useRef(i);return O.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),L0({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function Ig(t={}){const{hash:e,query:n={}}=t,r=As(t),s=Yc({config:r}),i=D2e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return L0({...n,...i,enabled:o})}function xg(t={}){const{mutation:e}=t,n=As(t),r=M2e(n),{mutate:s,mutateAsync:i,...o}=u1({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const oDe=Jo({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),GL=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],aDe=({onBack:t,walletAddress:e})=>{const n=oDe(),{open:r}=k0(),[s,i]=O.useState([]),[o,a]=O.useState(!0),[c,l]=O.useState(null),[u,d]=O.useState(GL[0]),[h,f]=O.useState(!1),[p,m]=O.useState(null),[w,y]=O.useState("all"),[b,_]=O.useState(null),E=O.useCallback(async()=>{var x,S;try{if((x=window.solana)!=null&&x.isPhantom){const k=await window.solana.connect();m(k.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const k=await window.solflare.connect();m(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);O.useEffect(()=>{var x,S;(x=window.solana)!=null&&x.publicKey?m(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&m(window.solflare.publicKey.toString())},[]),O.useEffect(()=>{(async()=>{a(!0);try{let S,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,S=await lie(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await zP(u.slug,100,k):S=await WP(u.slug,1,100,k);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(M=>M.owners&&M.owners.length>0)?S.data=S.data.filter(M=>M.owners.some(U=>U.owner_of&&U.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),_("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),O.useEffect(()=>{h&&E()},[h,E]);const C=async x=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await IB(u.chain,x.address,x.token_id.toString()),k={...x,attributes:JSON.stringify(S.traits||[])};l(k)}catch(S){console.error("Failed to fetch full NFT details",S),l(x)}else l(x);a(!1)},I=()=>{if(!c)return null;let x=[];try{x=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return g.jsxs("div",{className:n.detailView,children:[g.jsx("img",{src:c.image,alt:c.name}),g.jsx("h2",{children:c.name}),g.jsx("h4",{children:"Traits:"}),g.jsx("ul",{children:x.map((S,k)=>g.jsxs("li",{children:[g.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},k))})]})},A=()=>g.jsxs(g.Fragment,{children:[g.jsx("div",{className:n.collectionSelector,children:GL.map(x=>g.jsx("button",{className:`${n.collectionButton} ${u.slug===x.slug?"active":""}`,onClick:()=>d(x),children:x.name},x.slug))}),g.jsxs("div",{className:n.content,children:[g.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[g.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),g.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&g.jsx("button",{onClick:()=>{E()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&g.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&g.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?g.jsx("div",{className:n.loading,children:"Loading NFTs..."}):g.jsx("div",{className:n.grid,children:s.map(x=>{let S=x.image||x.image_url||x.image_url_shrunk||"/assets/pixelawb.png";return g.jsxs("div",{className:n.gridItem,onClick:()=>void C(x),children:[g.jsx("img",{src:S,alt:x.name,onError:k=>{k.currentTarget.src!==x.image_url&&x.image_url?k.currentTarget.src=x.image_url:k.currentTarget.src!==x.image_url_shrunk&&x.image_url_shrunk?k.currentTarget.src=x.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),g.jsx("span",{children:x.name})]},x.id)})})]})]});return g.jsxs("div",{className:n.galleryContainer,children:[g.jsxs("header",{className:n.header,children:[g.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),g.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),g.jsx("div",{className:n.content,children:o?g.jsx("p",{className:n.loading,children:"Loading..."}):c?I():A()})]})},cDe=Jo({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),xo=({isOpen:t,onClose:e,title:n,children:r})=>{const s=cDe();return t?g.jsx("div",{className:s.overlay,children:g.jsxs("div",{className:s.popup,children:[g.jsxs("div",{className:s.titleBar,children:[g.jsx("span",{children:n}),g.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),g.jsx("div",{className:s.content,children:r})]})}):null},lDe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=O.useState([]),[i,o]=O.useState(!1),[a,c]=O.useState(!1),[l,u]=O.useState({}),[d,h]=O.useState(null),{data:f}=iDe();O.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const E=await SB(n);s(E);const C={};E.forEach(I=>{C[I.id]=0}),u(C)}catch(E){h(E.message)}finally{o(!1)}},m=(E,C)=>{u(I=>({...I,[E]:Math.max(0,C)}))},w=async()=>{const E=Object.entries(l).filter(([,C])=>C>0).map(([C,I])=>({id:C,quantity:I}));if(E.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await AB(n,E);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const I=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${I}`),e()}catch(I){h("Transaction failed: "+I.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},y=(E,C)=>`${parseFloat(E)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},_={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return g.jsxs(xo,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&g.jsx("div",{style:_,children:d}),i?g.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?g.jsx("div",{children:"No eligible invite lists found for your wallet."}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(E=>g.jsxs("div",{style:b,children:[g.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:E.name}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(E.token_price,E.currency_symbol)]}),g.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",E.wallet_limit===4294967295?"Unlimited":E.wallet_limit," per wallet"]}),g.jsx("input",{type:"number",min:0,max:E.wallet_limit===4294967295?void 0:E.wallet_limit,value:l[E.id]||"",onChange:C=>m(E.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),g.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},E.id))]}),g.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},uDe=Jo({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),dDe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],hDe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],fDe=()=>{const t=uDe(),{open:e}=k0(),{address:n,isConnected:r}=$0(),{isPending:s}=J2e(),{disconnect:i}=tDe(),{data:o}=nDe({address:n}),[a,c]=O.useState("main"),[l,u]=O.useState(!1),[d,h]=O.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=O.useState(!1),[m,w]=O.useState(!1),[y,b]=O.useState(!1),[_,E]=O.useState(!1),[C,I]=O.useState(!1),[A,x]=O.useState(!1),[S,k]=O.useState(!1),[P,M]=O.useState(!1),[W,U]=O.useState(!1),[N,T]=O.useState(!1),[$,R]=O.useState(!1),[D,j]=O.useState(!1),z=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>E(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],Q=X=>{X.disabled||X.action()};if(O.useEffect(()=>{const X=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(X)},[]),O.useEffect(()=>{u(!0)},[]),a==="gallery")return g.jsx(aDe,{onBack:()=>c("main"),walletAddress:n||void 0});function te({open:X,onClose:ie,title:Ke,nfts:it}){const Be=yt=>{switch(yt){case"lawbsters":x(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":M(!0);break;case"halloween":U(!0);break;case"lawbstation":T(!0);break;case"nexus":R(!0);break}};return g.jsx(xo,{isOpen:X,onClose:ie,title:Ke,children:g.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:it.map(yt=>g.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>Be(yt.id),children:[g.jsx("img",{src:yt.image,alt:yt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),g.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:yt.name}),g.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:yt.description})]},yt.id))})})}function Z({open:X,onClose:ie}){return X?g.jsxs(xo,{isOpen:X,onClose:ie,title:"$LAWB",children:[g.jsx("h1",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),g.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",g.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),g.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),g.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",g.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),g.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",g.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),g.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),g.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),g.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:g.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return g.jsxs("div",{className:t.mobileContainer,children:[g.jsx("header",{className:t.header,children:g.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),g.jsx("div",{className:t.iconGrid,children:z.map(X=>g.jsxs("div",{className:t.icon,onClick:()=>Q(X),children:[g.jsx("img",{src:X.icon,alt:X.label}),g.jsx("span",{children:X.label})]},X.label))}),l&&g.jsxs(xo,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",g.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",g.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),g.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",g.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),g.jsx("p",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&g.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:g.jsxs("div",{className:t.menuModal,onClick:X=>X.stopPropagation(),children:[g.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),g.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),g.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),g.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),g.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),g.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),g.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),g.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),g.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),g.jsx(lDe,{isOpen:m,onClose:()=>w(!1),walletAddress:n||""}),g.jsx(te,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:dDe}),g.jsx(te,{open:_,onClose:()=>E(!1),title:"SOL NFTS FOLDER",nfts:hDe}),g.jsx(Z,{open:C,onClose:()=>I(!1)}),g.jsxs(xo,{isOpen:A,onClose:()=>x(!1),title:"Lawbsters",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",g.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),g.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),g.jsxs(xo,{isOpen:S,onClose:()=>k(!1),title:"Lawbstarz",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",g.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",g.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",g.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",g.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),g.jsx("p",{children:"Chain: Ethereum"}),g.jsxs("p",{children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),g.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),g.jsxs(xo,{isOpen:P,onClose:()=>M(!1),title:"Pixelawbs",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",g.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{M(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",g.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),g.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",g.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),g.jsxs(xo,{isOpen:W,onClose:()=>U(!1),title:"A Lawbster Halloween",children:[g.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),g.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),g.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",g.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),g.jsxs(xo,{isOpen:N,onClose:()=>T(!1),title:"Lawbstation",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",g.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),g.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),g.jsx("p",{style:{marginBottom:"10px"},children:g.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),g.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),g.jsxs(xo,{isOpen:$,onClose:()=>R(!1),title:"Nexus",children:[g.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",g.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),g.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),g.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),g.jsx(xo,{isOpen:D,onClose:()=>j(!1),title:"Meme Generator",children:g.jsx(uH,{})}),g.jsxs("div",{className:t.taskbar,children:[g.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),g.jsxs("div",{className:t.walletStatus,children:[g.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),g.jsx("span",{className:t.clock,children:d})]})]})};function pDe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=O.useState(e(t));function s(){r(e(t))}return O.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const vE={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},_E={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz"]},public:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},mDe=$H({chains:[fE,hE,vE,_E],transports:{[fE.id]:eo(),[hE.id]:eo(),[vE.id]:eo("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[_E.id]:eo("https://mainnet.sanko.xyz")}}),uk=()=>{if(!c_)throw new Error("[FIREBASE] Database not initialized");return c_},GT=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,gDe=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=uk(),s=mi(r,`leaderboard/${t}`),i=await td(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Lg(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",GT(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},yDe=async(t=20)=>{try{const e=uk(),n=mi(e,"leaderboard"),r=await td(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},wDe=async()=>{try{const t=uk(),e=mi(t,"leaderboard/0x0000000000000000000000000000000000000000");return await b8(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},da=()=>{if(!c_)throw new Error("[FIREBASE] Database not initialized");return c_},bDe={async getGame(t){try{const e=da(),n=mi(e,`chess_games/${t}`),r=await td(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=da(),r=mi(n,`chess_games/${t}`);await Lg(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=da(),r=mi(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=g2(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=da(),r=mi(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await Lg(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await td(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=da(),e=mi(t,"chess_games"),n=await td(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=da(),e=mi(t,"chess_games"),n=await td(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=da(),n=mi(e,`chess_games/${t}`);await b8(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=da(),n=mi(e,`leaderboard/${t.username}`);await Lg(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=da(),e=mi(t,"leaderboard"),n=await td(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=da(),n=mi(e,"leaderboard");return g2(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Vs={DMT:{symbol:"DMT",name:"DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1}},KL={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},ql={testnet:{chainId:1992},mainnet:{chainId:1996}},dk=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],cg=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function XH(t,e){return Vs[t].address}function JH(t,e){const n=Yc(),r=Vs[t],s=r.isNative||!1,i=n===ql.mainnet.chainId,o=n===ql.testnet.chainId;console.log(`[CHAIN DEBUG] useTokenBalance for ${t}:`,{chainId:n,expectedMainnet:ql.mainnet.chainId,expectedTestnet:ql.testnet.chainId,isOnSankoMainnet:i,isOnSankoTestnet:o,address:!!e});const a=!!e&&i,{data:c,isLoading:l,error:u}=Q2e({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=bE({address:r.address,abi:dk,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,m=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:m,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:m,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}function YL(t,e,n){const r=Yc(),s=XH(t),i=r===ql.mainnet.chainId,o=r===ql.testnet.chainId,{data:a,isLoading:c,error:l}=bE({address:s,abi:dk,functionName:"allowance",args:n&&e?[n,e]:void 0,query:{enabled:!!n&&!!e&&i}});return{allowance:a||BigInt(0),allowanceFormatted:a?Number(a)/Math.pow(10,Vs[t].decimals):0,isLoading:c,error:l,isOnSankoMainnet:i,isOnSankoTestnet:o}}function vDe(){const{writeContract:t,data:e,isPending:n,error:r}=xg(),{isLoading:s}=Ig({hash:e});return Yc(),{approve:(o,a,c)=>{const l=XH(o);t({address:l,abi:dk,functionName:"approve",args:[a,c]})},isPending:n||s,error:r,hash:e}}const _De=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=$0(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=JH(t,i),[l,u]=O.useState(!1),d=h=>{e(h),u(!1)};return g.jsxs("div",{style:{marginBottom:"10px"},children:[g.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[g.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),g.jsxs("div",{style:{position:"relative"},children:[g.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"100px",textAlign:"left"},children:[Vs[t].symbol,g.jsx("span",{style:{float:"right"},children:""})]}),l&&!s&&g.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"100px"},children:Object.entries(Vs).map(([h,f])=>g.jsx("div",{onClick:()=>d(h),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:p=>p.currentTarget.style.background="#f0f0f0",onMouseLeave:p=>p.currentTarget.style.background="#fff",children:f.symbol},h))})]})]}),g.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[g.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),g.jsx("input",{type:"number",value:n,onChange:h=>r(Number(h.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),g.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${Vs[t].symbol}`:"Connect to Sanko Mainnet"]})]}),c&&g.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&g.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet to see token balances"}),n>o&&a&&g.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",Vs[t].symbol]}),o===0&&a&&g.jsxs("div",{style:{color:"#ffa500",fontSize:"12px",marginTop:"5px"},children:[" You have 0 ",Vs[t].symbol,". Get tokens from ",g.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffa500"},children:"Sanko Bridge"})]})]})},EDe=t=>t===ql.testnet.chainId?KL.testnet.chess:KL.mainnet.chess,So={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},QL=36e5,ZL=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]];function CDe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}const eq=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=$0(),o=EDe(i||ql.mainnet.chainId),[a,c]=O.useState("DMT"),[l,u]=O.useState(.1),[d,h]=O.useState(!1),[f,p]=O.useState("");JH(a,r);const{allowance:m}=YL(a,o,r),{approve:w,isPending:y}=vDe(),[b,_]=O.useState(null),[E,C]=O.useState(0),[I,A]=O.useState(Date.now()),[x,S]=O.useState(""),[k,P]=O.useState(""),[M,W]=O.useState(!1),[U,N]=O.useState(!1),[T,$]=O.useState(!1),[R,D]=O.useState(!1),{writeContract:j,data:z}=xg(),{writeContract:Q,isPending:te,data:Z}=xg(),{writeContract:X,data:ie}=xg(),{data:Ke}=xg();rDe();const{isLoading:it}=Ig({hash:z}),{isLoading:Be,data:yt}=Ig({hash:Z}),{isLoading:Ct}=Ig({hash:ie}),{isLoading:Kn}=Ig({hash:Ke}),[G,J]=O.useState(ZL),[de,oe]=O.useState("blue"),[le,Ye]=O.useState(null),[$e,Xe]=O.useState([]),[rt,fn]=O.useState([]),[Un,Tn]=O.useState("Waiting for opponent..."),[$t,Yn]=O.useState(So.LOBBY),[Yr,xs]=O.useState(null),[ta,Oh]=O.useState(null),[kh,mk]=O.useState(0),[h1,F0]=O.useState([]),[Sm,Am]=O.useState(!1),[Mu,En]=O.useState(null),[f1,W0]=O.useState(null),[Ya,gk]=O.useState(""),[yk,wk]=O.useState(0),[p1]=O.useState(!0);O.useEffect(()=>(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"),()=>{document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")}),[]);const{data:Dh}=bE({address:o,abi:cg,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Qa}=bE({address:o,abi:cg,functionName:"games",args:Dh?[Dh]:void 0,query:{enabled:!!Dh&&Dh!=="0x000000000000"}}),[Qc,z0]=O.useState(""),H0=(ot,wt)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${ot}" from ${wt}`),Qc&&!ot&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${Qc}" to "${ot}" from ${wt}`),z0(ot)},yo=(ot,wt)=>{console.log(`[WAGER_DEBUG] Setting wager to ${ot} ${a} from ${wt}`),kh!==ot&&console.log(`[WAGER_DEBUG] Wager changed from ${kh} to ${ot} ${a}`),mk(ot)},[Zc,q0]=O.useState("moves"),$h=O.useCallback(()=>{b&&clearTimeout(b);const ot=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),na()},QL);_(ot),A(Date.now())},[b]),Im=O.useCallback(()=>{b&&(clearTimeout(b),_(null))},[b]),na=async()=>{if(!Qc||!Yr)return;console.log("[TIMEOUT] Handling timeout for game:",Qc);const ot=de==="blue"?"red":"blue",wt=ot==="blue"?Qa==null?void 0:Qa[0]:Qa==null?void 0:Qa[1];wt&&(console.log("[TIMEOUT] Ending game with winner:",wt),X({address:o,abi:cg,functionName:"endGame",args:[Qc,wt]}),Tn(`Game ended due to timeout. ${ot==="red"?"Red":"Blue"} wins!`),Yn(So.FINISHED))};O.useEffect(()=>{if($t===So.ACTIVE&&b){const ot=setInterval(()=>{const wt=Date.now()-I,wo=Math.max(0,QL-wt);C(Math.ceil(wo/1e3))},1e3);return()=>clearInterval(ot)}},[$t,b,I]);const V0=async()=>{if(!r||!o)return!1;const ot=BigInt(Math.floor(l*Math.pow(10,Vs[a].decimals)));if(m<ot){console.log("[APPROVAL] Token allowance insufficient, requesting approval"),h(!0),p("");try{return w(a,o,ot),!1}catch(wt){return console.error("[APPROVAL] Error approving token:",wt),p("Failed to approve token. Please try again."),h(!1),!1}}return!0};O.useEffect(()=>{!y&&d&&(h(!1),p(""))},[y,d]);const G0=async()=>{if(!r||l<=0)return;if(console.log("[CREATE] Starting game creation - address:",r,"wager:",l,"token:",a),!await V0()){Tn("Please approve token spending first");return}Am(!0);try{const wt=CDe();console.log("[CREATE] Generated invite code:",wt);const wo=Vs[a].address,Mi=BigInt(Math.floor(l*Math.pow(10,Vs[a].decimals))),Za={invite_code:wt,game_title:`Chess Game ${wt.slice(-6)}`,bet_amount:Mi.toString(),bet_token:a,blue_player:r,game_state:"waiting",board:{positions:m1(ZL),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",Za),console.log("[CREATE] Calling contract with args:",[wt,wo,Mi]),j({address:o,abi:cg,functionName:"createGame",args:[wt,wo,Mi]}),console.log("[CREATE] Contract call initiated, setting pending data"),En(Za),Tn("Creating game... Please confirm transaction in your wallet.")}catch(wt){console.error("[CREATE] Error creating game:",wt),Tn("Failed to create game. Please try again.")}finally{Am(!1)}},Lu=async ot=>{if(r)try{const wt=await bDe.getGame(ot);if(!wt||wt.game_state!=="waiting"){Tn("Game not found or already full");return}const wo=BigInt(wt.bet_amount),Mi=wt.bet_token||"DMT",Za=Number(wo)/Math.pow(10,Vs[Mi].decimals);if(z0(ot),xs("red"),yo(Za,"joinGame"),Oh(wt.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:ot,playerColor:"red",wagerAmountFormatted:Za,gameToken:Mi,opponent:wt.blue_player,address:r}),r===wt.blue_player){console.error("[JOIN] Player cannot join their own game"),Tn("You cannot join your own game");return}const xm=Vs[Mi].address,{allowance:ra}=YL(Mi,o,r);if(ra<wo){console.log("[JOIN] Token allowance insufficient for joining"),Tn("Please approve token spending first");return}Tn("Joining game... Please confirm transaction in your wallet."),Q({address:o,abi:cg,functionName:"joinGame",args:[ot]}),W0({inviteCode:ot,gameData:wt,address:r})}catch(wt){console.error("[JOIN] Error joining game:",wt),Tn("Failed to join game. Please try again."),H0("","join game error"),xs(null),yo(0,"join game error"),Oh(null)}};O.useEffect(()=>{$t===So.ACTIVE&&Yr?(console.log("[TIMEOUT] Starting timeout timer for active game"),$h()):Im()},[$t,Yr,$h,Im]),O.useEffect(()=>{$t===So.ACTIVE&&rt.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),$h())},[rt,$t,$h]);const m1=ot=>{const wt={};return ot.forEach((wo,Mi)=>{wo.forEach((Za,xm)=>{wt[`${Mi}_${xm}`]=Za})}),wt},K0=ot=>`${ot.slice(0,6)}...${ot.slice(-4)}`,Y0=()=>{if($t!==So.ACTIVE||E<=0)return null;const ot=Math.floor(E/60),wt=E%60;return g.jsxs("div",{style:{color:E<300?"#ff0000":"#00ff00",fontWeight:"bold",textShadow:"0 0 6px currentColor"},children:["Timeout: ",ot,":",wt.toString().padStart(2,"0")]})},g1=()=>$t!==So.LOBBY?null:g.jsxs("div",{style:{marginBottom:"20px"},children:[g.jsx(_De,{selectedToken:a,onTokenSelect:c,wagerAmount:l,onWagerChange:u,disabled:Sm||d}),f&&g.jsx("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:f}),d&&g.jsx("div",{style:{color:"#00ff00",fontSize:"12px",marginTop:"5px"},children:"Approving token..."})]}),y1=()=>g.jsxs("div",{className:"chess-multiplayer-lobby",children:[g.jsx("h2",{children:"Chess Multiplayer"}),s?g.jsxs("div",{className:"lobby-content",children:[g1(),g.jsxs("div",{className:"actions",children:[g.jsx("button",{className:"create-btn",onClick:G0,disabled:Sm||d||l<=0,children:Sm?"Creating...":"Create Game"}),g.jsx("button",{className:"resume-btn",onClick:()=>{},children:"Resume Game"})]}),g.jsxs("div",{className:"open-games",children:[g.jsx("h3",{children:"Open Games"}),g.jsx("div",{className:"games-list",children:h1.length>0?h1.map(ot=>g.jsxs("div",{className:"game-item",children:[g.jsxs("div",{className:"game-info",children:[g.jsx("div",{className:"game-id",children:ot.game_title}),g.jsxs("div",{className:"wager",children:[Number(ot.bet_amount)/Math.pow(10,Vs[ot.bet_token||"DMT"].decimals)," ",ot.bet_token||"DMT"]}),g.jsxs("div",{className:"title",children:["by ",K0(ot.blue_player)]})]}),g.jsx("button",{className:"join-btn",onClick:()=>Lu(ot.invite_code),disabled:te,children:te?"Joining...":"Join"})]},ot.invite_code)):g.jsx("div",{className:"no-games",children:"No open games available"})})]})]}):g.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play"})]}),Q0=()=>g.jsxs("div",{className:"chess-multiplayer-waiting",children:[g.jsx("h2",{children:"Waiting for Opponent"}),g.jsxs("div",{className:"game-code",children:["Game Code: ",g.jsx("strong",{children:Qc})]}),g.jsxs("div",{className:"game-info",children:[g.jsxs("p",{children:["Wager: ",kh," ",a]}),g.jsx("p",{children:"Share this code with your opponent"})]}),Y0()]}),w1=()=>g.jsxs("div",{className:"game-stable-layout",children:[g.jsxs("div",{className:"chess-header",children:[g.jsx("h2",{children:"Chess Multiplayer"}),g.jsxs("div",{className:"chess-controls",children:[g.jsx("button",{className:"minimize-btn",onClick:e,children:"_"}),g.jsx("button",{className:"close-btn",onClick:t,children:""})]})]}),g.jsxs("div",{className:"game-content",children:[g.jsxs("div",{className:"left-sidebar",children:[g.jsxs("div",{className:"game-info",children:[g.jsxs("div",{className:"game-status-section",children:[g.jsx("div",{className:"status",children:Un}),g.jsxs("div",{className:`current-player ${de==="red"?"red-turn":"blue-turn"}`,children:[de==="red"?"Red":"Blue","'s turn"]})]}),g.jsxs("div",{className:"game-details-section",children:[g.jsxs("div",{className:"wager-display",children:["Wager: ",kh," ",a]}),g.jsxs("div",{className:"opponent-info",children:["Opponent: ",ta?K0(ta):"None"]}),Y0()]})]}),g.jsxs("div",{className:"tab-buttons",children:[g.jsx("button",{className:Zc==="moves"?"active":"",onClick:()=>q0("moves"),children:"Moves"}),g.jsx("button",{className:Zc==="leaderboard"?"active":"",onClick:()=>q0("leaderboard"),children:"Leaderboard"})]}),Zc==="moves"?g.jsxs("div",{className:"move-history",children:[g.jsx("h4",{children:"Move History"}),g.jsx("div",{className:"moves",children:rt.map((ot,wt)=>g.jsx("div",{className:"move",children:ot},wt))})]}):g.jsx("div",{className:"leaderboard",children:g.jsx("h3",{children:"Leaderboard"})})]}),g.jsx("div",{className:"center-area",children:g.jsx("div",{className:"chessboard-container",children:g.jsx("div",{className:"chessboard"})})}),g.jsx("div",{className:"right-sidebar"})]})]});return g.jsxs("div",{className:"chess-game",children:[$t===So.LOBBY&&y1(),$t===So.WAITING&&Q0(),$t===So.ACTIVE&&w1(),$t===So.FINISHED&&g.jsxs("div",{className:"chess-multiplayer-waiting",children:[g.jsx("h2",{children:"Game Finished"}),g.jsxs("div",{className:"game-info",children:[g.jsx("p",{children:Un}),U&&g.jsx("button",{className:"claim-winnings-btn",onClick:()=>{},disabled:T,children:T?"Claiming...":"Claim Winnings"})]})]})]})},rI={AI:"ai"},SDe=1996,rv={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},XL=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],ADe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],IDe=()=>{const[t,e]=O.useState(!1),n=O.useRef(null),r=O.useRef(!1);O.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=O.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(m){console.warn("[DEBUG] Error removing message listener:",m)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=O.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},xDe=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!1),s=O.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=O.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},NDe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=$0(),i=Yc();sDe();const{open:o}=k0(),[a,c]=O.useState(rI.AI),[l,u]=O.useState(()=>JSON.parse(JSON.stringify(XL))),[d,h]=O.useState("blue"),[f,p]=O.useState(null),[m,w]=O.useState("active"),[y,b]=O.useState("hard"),[_,E]=O.useState("Connect wallet to play"),[C,I]=O.useState([]),[A,x]=O.useState([]),[S,k]=O.useState([]),[P,M]=O.useState(null),[W,U]=O.useState(!1),[N,T]=O.useState(!1),[$,R]=O.useState(null),[D,j]=O.useState(null),[z]=O.useState(""),[Q]=O.useState(.1),[te,Z]=O.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),X=O.useRef(null),ie=O.useRef(!1),Ke=O.useRef(l),it=O.useRef(null),Be=O.useRef(null),yt=O.useRef(!1),Ct=O.useRef(!1),[Kn,G]=O.useState(!1),[J,de]=O.useState(!1),[oe,le]=O.useState(!1),[Ye]=O.useState(!0);O.useEffect(()=>(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"),()=>{document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")}),[]);const{stockfishReady:$e}=IDe(),{getOpeningData:Xe}=xDe(),[rt,fn]=O.useState("loading"),[Un,Tn]=O.useState(!1),[$t,Yn]=O.useState([]),[Yr,xs]=O.useState(!1),[ta,Oh]=O.useState(()=>{const B=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],H=Math.floor(Math.random()*B.length),Y=B[H];return console.log("[DEBUG] Initial random chessboard selected:",Y,"(index:",H,")"),Y}),[kh,mk]=O.useState(!0),[h1,F0]=O.useState(!1);O.useEffect(()=>{!s||!r?(E("Connect wallet to play"),U(!1),G(!1),o()):i!==SDe?(E("Switch to Sanko Mainnet to play"),U(!1),G(!1),o()):E("Select game mode")},[s,r,i,o]);const Sm=()=>{const B=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],H=Math.floor(Math.random()*B.length),Y=B[H];return console.log("[DEBUG] Random chessboard selected:",Y,"(index:",H,")"),Y};O.useEffect(()=>{if($e)fn("ready");else{const B=window.setTimeout(()=>{$e||(fn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(B)}},[$e]),O.useEffect(()=>{Ke.current=l},[l]),O.useEffect(()=>(!X.current&&typeof Worker<"u"&&(X.current=new Worker("/aiWorker.js"),X.current.onmessage=B=>{console.log("[DEBUG] AI worker response received:",B.data);const{move:H,nodes:Y}=B.data;H&&ie.current&&m==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",H),console.log("[DEBUG] AI searched",Y,"nodes"),ie.current=!1,Be.current&&(window.clearTimeout(Be.current),Be.current=null),it.current&&it.current(H.from,H.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},X.current.onerror=B=>{console.error("[DEBUG] AI worker error:",B),E("AI worker error - using fallback mode"),ie.current=!1}),()=>{X.current&&(X.current.terminate(),X.current=null),Be.current&&(window.clearTimeout(Be.current),Be.current=null)}),[]),O.useEffect(()=>{Am()},[]);const Am=async()=>{try{await wDe();const B=await yDe(20);x(B),console.log("Leaderboard data loaded:",B)}catch(B){E("Failed to load leaderboard"),console.error("Leaderboard error:",B)}},Mu=async B=>{if(console.log("[DEBUG] updateScore called with:",B),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",GT(r)),await gDe(r,B)?(console.log("[DEBUG] Successfully updated score for:",GT(r)),await Am()):console.error("[DEBUG] Failed to update score")}catch(H){console.error("[DEBUG] Error in updateScore:",H)}},En=B=>B&&B===B.toUpperCase()?"red":"blue",f1=(B,H)=>B>=0&&B<8&&H>=0&&H<8,W0=(B,H)=>`${String.fromCharCode(97+H)}${8-B}`,Ya=(B,H)=>{const Y=H==="blue"?"k":"K";let K=null;for(let ge=0;ge<8;ge++){for(let Me=0;Me<8;Me++)if(B[ge][Me]===Y){K={row:ge,col:Me};break}if(K)break}if(!K)return console.log(`King not found for ${H}`),!1;const V=H==="blue"?"red":"blue",me=gk(K.row,K.col,V,B);return console.log(`${H} king at ${K.row},${K.col} under attack: ${me}`),me},gk=(B,H,Y,K)=>{for(let V=0;V<8;V++)for(let me=0;me<8;me++){const ge=K[V][me];if(ge&&En(ge)===Y&&yo(ge,V,me,B,H,!1,Y,K,!0))return!0}return!1},yk=(B,H,Y,K,V,me=l)=>{const ge=me.map(zt=>[...zt]),Me=ge[B][H];return ge[Y][K]=Me,ge[B][H]=null,Ya(ge,V)},wk=(B,H,Y,K,V,me)=>{const ge=B==="blue"?-1:1,Me=B==="blue"?6:1;if(!f1(K,V)||B==="blue"&&K>=H||B==="red"&&K<=H)return!1;const zt=Math.abs(K-H),tn=Math.abs(V-Y);if((zt===1&&tn===0||zt===2&&tn===0&&H===Me||zt===1&&tn===1)&&zt<=2&&tn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:B,from:`${H},${Y}`,to:`${K},${V}`}),Y===V&&K===H+ge)return me[K][V]===null;if(Y===V&&H===Me&&K===H+2*ge)return me[H+ge][Y]===null&&me[K][V]===null;if(Math.abs(Y-V)===1&&K===H+ge){const Yt=me[K][V];return Yt!==null&&En(Yt)!==B}if(Math.abs(Y-V)===1&&K===H+ge){const Yt=me[H][V];if(Yt&&En(Yt)!==B&&Yt.toLowerCase()==="p"&&te.lastPawnDoubleMove&&te.lastPawnDoubleMove.row===H&&te.lastPawnDoubleMove.col===V)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},p1=(B,H,Y,K,V)=>B!==Y&&H!==K?!1:H0(B,H,Y,K,V),Dh=(B,H,Y,K)=>{const V=Math.abs(B-Y),me=Math.abs(H-K);return V===2&&me===1||V===1&&me===2},Qa=(B,H,Y,K,V)=>Math.abs(B-Y)!==Math.abs(H-K)?!1:H0(B,H,Y,K,V),Qc=(B,H,Y,K,V)=>p1(B,H,Y,K,V)||Qa(B,H,Y,K,V),z0=(B,H,Y,K,V)=>{const me=Math.abs(H-K),ge=Math.abs(Y-V);if(me<=1&&ge<=1)return!0;if(me===0&&ge===2){if(B==="blue"&&!te.blueKingMoved){if(V===6&&!te.blueRooksMove.right||V===2&&!te.blueRooksMove.left)return!0}else if(B==="red"&&!te.redKingMoved&&(V===6&&!te.redRooksMove.right||V===2&&!te.redRooksMove.left))return!0}return!1},H0=(B,H,Y,K,V)=>{const me=B===Y?0:(Y-B)/Math.abs(Y-B),ge=H===K?0:(K-H)/Math.abs(K-H);let Me=B+me,zt=H+ge;for(;Me!==Y||zt!==K;){if(V[Me][zt]!==null)return!1;Me+=me,zt+=ge}return!0},yo=(B,H,Y,K,V,me=!0,ge=En(B),Me=l,zt=!1)=>{if(!f1(K,V))return zt||console.log("[ILLEGAL MOVE] Out of board:",{piece:B,startRow:H,startCol:Y,endRow:K,endCol:V}),!1;const tn=Me[K][V];if(tn&&En(tn)===ge)return zt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:B,startRow:H,startCol:Y,endRow:K,endCol:V}),!1;const jn=B.toLowerCase();let Yt=!1;switch(jn){case"p":Yt=wk(ge,H,Y,K,V,Me);break;case"r":Yt=p1(H,Y,K,V,Me);break;case"n":Yt=Dh(H,Y,K,V);break;case"b":Yt=Qa(H,Y,K,V,Me);break;case"q":Yt=Qc(H,Y,K,V,Me);break;case"k":Yt=z0(ge,H,Y,K,V);break}return Yt?Yt&&me&&yk(H,Y,K,V,ge,Me)?(zt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:B,startRow:H,startCol:Y,endRow:K,endCol:V}),!1):Yt:(zt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:B,startRow:H,startCol:Y,endRow:K,endCol:V,playerColor:ge,pieceType:jn,targetPiece:Me[K][V],targetPieceColor:Me[K][V]?En(Me[K][V]):null}),!1)},Zc=(B,H=l,Y=d)=>{const K=[],V=H[B.row][B.col];if(!V||En(V)!==Y)return K;const me=V.toLowerCase();if(me==="p"){const ge=Y==="blue"?-1:1,Me=Y==="blue"?6:1,zt=B.row+ge;if(zt>=0&&zt<8&&yo(V,B.row,B.col,zt,B.col,!0,Y,H,!0)&&K.push({row:zt,col:B.col}),B.row===Me){const tn=B.row+2*ge;tn>=0&&tn<8&&yo(V,B.row,B.col,tn,B.col,!0,Y,H,!0)&&K.push({row:tn,col:B.col})}for(const tn of[-1,1]){const jn=B.col+tn,Yt=B.row+ge;jn>=0&&jn<8&&Yt>=0&&Yt<8&&yo(V,B.row,B.col,Yt,jn,!0,Y,H,!0)&&K.push({row:Yt,col:jn})}}else if(me==="n"){const ge=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Me,zt]of ge){const tn=B.row+Me,jn=B.col+zt;tn>=0&&tn<8&&jn>=0&&jn<8&&yo(V,B.row,B.col,tn,jn,!0,Y,H,!0)&&K.push({row:tn,col:jn})}}else for(let ge=0;ge<8;ge++)for(let Me=0;Me<8;Me++)yo(V,B.row,B.col,ge,Me,!0,Y,H,!0)&&K.push({row:ge,col:Me});return K},q0=(B,H=l)=>{if(!Ya(H,B))return!1;for(let Y=0;Y<8;Y++)for(let K=0;K<8;K++){const V=H[Y][K];if(V&&En(V)===B&&Zc({row:Y,col:K},H,B).length>0)return!1}return!0},$h=(B,H=l)=>{if(Ya(H,B))return!1;for(let Y=0;Y<8;Y++)for(let K=0;K<8;K++){const V=H[Y][K];if(V&&En(V)===B&&Zc({row:Y,col:K},H,B).length>0)return!1}return!0},Im=(B,H)=>{if(m!=="active"||ie.current)return;const Y=l[B][H],K=Y?En(Y):null;if(f&&S.some(V=>V.row===B&&V.col===H)){na(f,{row:B,col:H});return}if(Y&&K===d){const V=Zc({row:B,col:H});p({row:B,col:H}),k(V);return}p(null),k([])},na=(B,H,Y=!1)=>{const K=l[B.row][B.col];if(console.log("[MOVE ATTEMPT]",{from:B,to:H,piece:K,isAIMove:Y,board:JSON.parse(JSON.stringify(l)),moveHistory:C}),!!K){if(K.toLowerCase()==="p"&&(En(K)==="blue"&&H.row===0||En(K)==="red"&&H.row===7)){R({from:B,to:H}),T(!0);return}xm(B,H,"q",Y)}};it.current=na;const V0=O.useCallback((B,H,Y=!1)=>{xs(!0);const K=l.map(ge=>[...ge]),V=K[B.row][B.col];if(!V)return;K[H.row][H.col]=V,K[B.row][B.col]=null,wo(K,B,H,V);const me=Mi(B,H);if(I(ge=>{const Me=[...ge,me];return console.log("[MOVE HISTORY UPDATED]",Me),Me}),M({from:B,to:H}),p(null),k([]),C.length<10&&!Y){const ge=JL(K,d==="blue"?"red":"blue");Xe(ge).then(Me=>{Me&&Me.moves&&Me.moves.length>0&&(Yn(Me.moves.slice(0,3)),Tn(!0),setTimeout(()=>Tn(!1),5e3))})}Za(B,H,V),h(ge=>{const Me=ge==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Me),G0(K,Me),Me}),G0(K,d==="blue"?"red":"blue"),u(K),ie.current=!1,yt.current=!1,Ct.current=!1,xs(!1)},[l,d,C,Xe]);O.useEffect(()=>{if(!ie.current&&a==="ai"&&d==="red"&&!yt.current&&!Yr)if(ie.current=!0,y==="easy")setTimeout(()=>{const B=Lu(l);B?na(B.from,B.to,!0):ie.current=!1},600);else{E("AI is calculating...");const B=JL(l,d);if(Ct.current)return;Ct.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:B,difficulty:y,movetime:3e3})}).then(Y=>{if(Y.ok)return Y.json();throw new Error("API call failed")}).then(Y=>{console.log("[DEBUG] Stockfish API response:",Y);const K=Y.bestmove||Y.move;if(K&&K!=="(none)"&&K.length===4){const V=K.charCodeAt(0)-97,me=parseInt(K[1]),ge=K.charCodeAt(2)-97,Me=parseInt(K[3]),zt=8-me,tn=8-Me;if(console.log("[DEBUG] Parsed move:",{fromCol:V,fromRowStockfish:me,toCol:ge,toRowStockfish:Me,fromRow:zt,toRow:tn}),V>=0&&V<8&&zt>=0&&zt<8&&ge>=0&&ge<8&&tn>=0&&tn<8){const jn={from:{row:zt,col:V},to:{row:tn,col:ge}},Yt=l[zt][V];if(console.log("[DEBUG] Move validation:",{piece:Yt,moveObj:jn,isValid:Yt&&En(Yt)==="red"&&yo(Yt,zt,V,tn,ge,!0,"red",l)}),Yt&&En(Yt)==="red"&&yo(Yt,zt,V,tn,ge,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",jn),na(jn.from,jn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const E1=Lu(l);E1&&na(E1.from,E1.to,!0),ie.current=!1,Ct.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const jn=Lu(l);jn&&na(jn.from,jn.to,!0),ie.current=!1,Ct.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const V=Lu(l);V&&na(V.from,V.to,!0),ie.current=!1,Ct.current=!1}}).catch(Y=>{console.error("[DEBUG] Stockfish API error:",Y),E("AI error. Falling back to random moves.");const K=Lu(l);K&&na(K.from,K.to,!0),ie.current=!1,Ct.current=!1})}},[d,a,y,l,te,$e]);const G0=(B,H)=>{console.log("Checking game end for player:",H);const Y=B.some(V=>V.some(me=>me==="k")),K=B.some(V=>V.some(me=>me==="K"));if(!Y)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),E("King captured! Red wins!"),Mu("loss"),le(!0),setTimeout(()=>le(!1),3e3),"checkmate";if(!K)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),E("King captured! You win!"),Mu("win"),le(!0),setTimeout(()=>le(!1),3e3),"checkmate";if(console.log("Is king in check:",Ya(B,H)),q0(H,B)){console.log("[GAME END] CHECKMATE",{winner:H==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(B)),moveHistory:C}),w("checkmate");const V=H==="blue"?"red":"blue";return V==="blue"?(E("Checkmate! You win!"),ra("victory"),b1(!0),F0(!0),bk(),Mu("win"),le(!0),setTimeout(()=>le(!1),3e3)):(E(`Checkmate! ${V==="red"?"AI":"Opponent"} wins!`),ra("loser"),v1(!0),Mu("loss"),le(!0),setTimeout(()=>le(!1),3e3)),"checkmate"}if($h(H,B)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(B)),moveHistory:C}),w("stalemate");const V=H==="blue"?"red":"blue";return V==="blue"?(E("Stalemate! You win!"),ra("victory"),b1(!0),F0(!0),bk(),Mu("win"),le(!0),setTimeout(()=>le(!1),3e3)):(E(`Stalemate! ${V==="red"?"AI":"Opponent"} wins!`),ra("loser"),v1(!0),Mu("loss"),le(!0),setTimeout(()=>le(!1),3e3)),"stalemate"}return Ya(B,H)?(console.log("CHECK detected!"),ra("check"),E(`${H==="blue"?"Blue":"Red"} is in check!`)):E("Your turn"),null},Lu=B=>{const H=[];for(let V=0;V<8;V++)for(let me=0;me<8;me++){const ge=B[V][me];ge&&En(ge)==="red"&&H.push({row:V,col:me})}for(let V=H.length-1;V>0;V--){const me=Math.floor(Math.random()*(V+1));[H[V],H[me]]=[H[me],H[V]]}const Y=[],K=[];for(const V of H){const me=Zc(V,B,"red");for(const ge of me){const Me=B[ge.row][ge.col];if(Me&&En(Me)==="blue"){const tn={p:100,n:320,b:330,r:500,q:900,k:2e4}[Me.toLowerCase()]||0;Y.push({from:V,to:ge,value:tn})}else K.push({from:V,to:ge})}}if(Y.length>0&&Math.random()<.3){Y.sort((V,me)=>V.value-me.value);for(const V of Y){const me=B.map(Me=>[...Me]),ge=me[V.from.row][V.from.col];if(me[V.to.row][V.to.col]=ge,me[V.from.row][V.from.col]=null,!Ya(me,"red"))return{from:V.from,to:V.to}}}for(const V of K){const me=B.map(Me=>[...Me]),ge=me[V.from.row][V.from.col];if(me[V.to.row][V.to.col]=ge,me[V.from.row][V.from.col]=null,!Ya(me,"red"))return V}Y.sort((V,me)=>V.value-me.value);for(const V of Y){const me=B.map(Me=>[...Me]),ge=me[V.from.row][V.from.col];if(me[V.to.row][V.to.col]=ge,me[V.from.row][V.from.col]=null,!Ya(me,"red"))return{from:V.from,to:V.to}}return null},m1=()=>{u(JSON.parse(JSON.stringify(XL))),h("blue"),p(null),w("active"),I([]),k([]),M(null),U(!1),E("Select game mode"),Z({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ie.current&&(ie.current=!1)},K0=()=>{if(dq(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){U(!1),G(!1);return}U(!0),G(!1),E("Game started! Your turn");const B=Sm();Oh(B),console.log("[DEBUG] Game started with chessboard:",B)},Y0=B=>`${B.slice(0,6)}...${B.slice(-4)}`,g1=(B,H)=>{const Y=l[B][H],K=(f==null?void 0:f.row)===B&&(f==null?void 0:f.col)===H,V=S.some(ge=>ge.row===B&&ge.col===H),me=P&&(P.from.row===B&&P.from.col===H||P.to.row===B&&P.to.col===H);return g.jsxs("div",{className:`square ${K?"selected":""} ${V?"legal-move":""} ${me?"last-move":""}`,onClick:()=>Im(B,H),onTouchStart:ge=>hq(B,H,ge),onTouchMove:fq,children:[Y&&g.jsx("div",{className:"piece",style:{backgroundImage:rv[Y]?`url(${rv[Y]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),V&&g.jsx("div",{className:"legal-move-indicator"})]},`${B}-${H}`)},y1=()=>{if(!N||!$)return null;const B=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return g.jsx("div",{className:"promotion-dialog",children:g.jsxs("div",{className:"promotion-content",children:[g.jsx("h3",{children:"Choose promotion piece:"}),g.jsx("div",{className:"promotion-pieces",children:B.map(H=>g.jsx("div",{className:"promotion-piece",onClick:()=>{xm($.from,$.to,H),T(!1),R(null)},style:{backgroundImage:rv[H]?`url(${rv[H]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},H))})]})})},[Q0,w1]=O.useState(null),ot=(B=!1,H="Click a piece to learn more about it.")=>g.jsxs("div",{className:`piece-gallery${B?" piece-gallery-sm":""}`,children:[g.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),g.jsx("div",{className:"piece-gallery-grid",children:ADe.map(Y=>g.jsxs("div",{className:"piece-gallery-item",onClick:()=>{w1(Q0===Y.key?null:Y.key)},children:[g.jsx("img",{src:Y.img,alt:Y.name,className:"piece-gallery-img"}),g.jsx("div",{className:"piece-gallery-name",children:Y.name}),Q0===Y.key&&g.jsx("div",{className:"piece-gallery-desc",children:Y.desc})]},Y.key))}),g.jsx("div",{className:"piece-gallery-tip",children:H})]}),wt=()=>g.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:g.jsx("div",{className:"difficulty-controls-col",children:g.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[g.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),g.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),g.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[g.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),g.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),g.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{K0()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[g.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),wo=(B,H,Y,K)=>{if(K.toLowerCase()==="p"&&(En(K)==="blue"&&Y.row===0||En(K)==="red"&&Y.row===7)){const V=En(K)==="blue"?"q":"Q";B[Y.row][Y.col]=V}if(K.toLowerCase()==="k"&&Math.abs(H.col-Y.col)===2){if(Y.col===6)B[H.row][7]=null,B[H.row][5]=En(K)==="blue"?"r":"R";else if(Y.col===2){const V=B[H.row][3];B[H.row][0]=null,B[H.row][3]=En(K)==="blue"?"r":"R",V&&V.toLowerCase()==="q"&&(B[H.row][4]=V)}}},Mi=(B,H,Y,K)=>{const V=W0(B.row,B.col),me=W0(H.row,H.col);return`${V}-${me}`},Za=(B,H,Y)=>{const K={...te};Y.toLowerCase()==="k"?En(Y)==="blue"?K.blueKingMoved=!0:K.redKingMoved=!0:Y.toLowerCase()==="r"&&(En(Y)==="blue"?(B.col===0&&(K.blueRooksMove.left=!0),B.col===7&&(K.blueRooksMove.right=!0)):(B.col===0&&(K.redRooksMove.left=!0),B.col===7&&(K.redRooksMove.right=!0))),Y.toLowerCase()==="p"&&Math.abs(B.row-H.row)===2?K.lastPawnDoubleMove={row:H.row,col:H.col}:K.lastPawnDoubleMove=null,Z(K)},xm=(B,H,Y="q",K=!1)=>{l[B.row][B.col];const me=l[H.row][H.col]!==null;if(ra(me?"capture":"move"),me){j({row:H.row,col:H.col,show:!0}),setTimeout(()=>{V0(B,H,K),j(null)},500);return}V0(B,H,K)},ra=B=>{if(!kh)return;let H="";switch(B){case"move":H="/images/move.mp3";break;case"capture":H="/images/capture.mp3";break;case"check":H="/images/play.mp3";break;case"checkmate":H="/images/victory.mp3";break;case"victory":H="/images/victory.mp3";break;case"loser":H="/images/loser.mp3";break;case"upgrade":H="/images/upgrade.mp3";break;default:H="/images/move.mp3"}new Audio(H).play().catch(()=>{})},bk=()=>{ra("victory");for(let B=0;B<50;B++)setTimeout(()=>{const H=document.createElement("div");H.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(H),setTimeout(()=>H.remove(),3e3)},B*100);for(let B=0;B<15;B++)setTimeout(()=>{const H=document.createElement("div"),Y=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],K=Y[Math.floor(Math.random()*Y.length)];H.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${K};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(H),setTimeout(()=>H.remove(),6e3)},B*200);setTimeout(()=>F0(!1),5e3)},[cq,b1]=O.useState(!1),[lq,v1]=O.useState(!1),vk=()=>{b1(!1),v1(!1)},_1=()=>{vk(),m1()},uq=()=>{vk(),U(!1)},dq=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Z0=a==="online",[Xc,Nm]=O.useState("leaderboard"),hq=(B,H,Y)=>{Y.preventDefault(),Im(B,H)},fq=B=>{B.preventDefault()};return g.jsxs("div",{className:`chess-game${n?" fullscreen":""}${Ye?" chess-dark-mode":""}${W?" game-active":""}`,children:[g.jsxs("div",{className:"chess-header",children:[g.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),g.jsxs("div",{className:"chess-controls",children:[e&&g.jsx("button",{onClick:e,children:"_"}),g.jsx("button",{onClick:t,children:""})]})]}),g.jsx("div",{className:"game-stable-layout",children:g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"left-sidebar",children:[Xc==="leaderboard"&&g.jsxs("div",{className:"leaderboard-compact",children:[g.jsx("h3",{children:"Leaderboard"}),g.jsx("div",{className:"leaderboard-table-compact",children:g.jsxs("table",{children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Rank"}),g.jsx("th",{children:"Player"}),g.jsx("th",{children:"Pts"})]})}),g.jsx("tbody",{children:Array.isArray(A)&&A.slice(0,8).map((B,H)=>{if(typeof B=="object"&&B!==null&&"username"in B&&"wins"in B&&"losses"in B&&"draws"in B&&"points"in B){const Y=B;return g.jsxs("tr",{children:[g.jsx("td",{children:H+1}),g.jsx("td",{children:Y0(Y.username)}),g.jsx("td",{children:Y.points})]},Y.username)}return null})})]})})]}),Xc==="moves"&&W&&g.jsxs("div",{className:"move-history-compact",children:[g.jsx("div",{className:"move-history-title",children:"Moves"}),g.jsx("ul",{className:"move-history-list-compact",children:C.slice().reverse().map((B,H)=>g.jsx("li",{children:B},C.length-1-H))})]}),Xc==="gallery"&&g.jsx("div",{className:"piece-gallery-compact",children:ot(!0,"Click pieces to learn more")})]}),g.jsxs("div",{className:"center-area",children:[W&&g.jsxs("div",{className:"game-info-compact",children:[g.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===rI.AI&&g.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),Z0&&g.jsxs("span",{className:"wager-display",children:["Wager: ",Q," tDMT"]})]}),W?g.jsxs("div",{className:"chess-main-area",children:[g.jsx("div",{className:"chessboard-container",children:g.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${ta})`},children:[Array.from({length:8},(B,H)=>g.jsx("div",{className:"board-row",children:Array.from({length:8},(Y,K)=>g1(H,K))},H)),D&&D.show&&g.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${D.row*12.5}%`,left:`${D.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:g.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),g.jsxs("div",{className:"game-controls-compact",children:[g.jsxs("div",{className:"sidebar-toggle-group",children:[g.jsx("button",{className:Xc==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("leaderboard"),children:"Leaderboard"}),g.jsx("button",{className:Xc==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("moves"),children:"Moves"}),g.jsx("button",{className:Xc==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("gallery"),children:"Gallery"})]}),g.jsx("button",{onClick:_1,children:"New Game"}),g.jsx("button",{onClick:uq,children:"Menu"})]})]}):Kn?wt():Z0?g.jsx(eq,{onClose:t,onMinimize:e,fullscreen:n}):g.jsxs("div",{className:"game-mode-panel-streamlined",children:[g.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:g.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),g.jsxs("div",{className:"mode-selection-compact",children:[g.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),g.jsx("button",{className:`mode-btn-compact ${Z0?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===rI.AI&&g.jsx("button",{className:"start-btn-compact",onClick:()=>G(!0),children:"Start Game"}),Z0&&g.jsxs("div",{className:"pvp-info",children:[g.jsx("p",{children:"Challenge other players with tDMT wagers"}),g.jsx("p",{children:"Create or join games instantly"})]}),g.jsxs("div",{className:"help-section-compact",children:[g.jsx("h4",{children:"How to Play"}),g.jsxs("div",{className:"help-content",children:[g.jsxs("p",{children:[g.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),g.jsx("p",{children:g.jsx("strong",{children:"Piece Movements:"})}),g.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),g.jsx("p",{children:g.jsx("strong",{children:"Special Rules:"})}),g.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),g.jsx("p",{children:g.jsx("strong",{children:"Game Modes:"})}),g.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),g.jsx("p",{children:g.jsx("strong",{children:"Multiplayer Flow:"})}),g.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[g.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),g.jsx("li",{children:"Create a game and set your wager amount in DMT"}),g.jsx("li",{children:"Share your invite code with an opponent"}),g.jsx("li",{children:"Opponent joins and matches your wager"}),g.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),g.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",g.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),g.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[g.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[g.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),g.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[g.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),g.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[g.jsx("strong",{children:"Chain ID:"})," 1996"]}),g.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[g.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),g.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:g.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),g.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[g.jsx("button",{className:Xc==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("leaderboard"),children:"Leaderboard"}),g.jsx("button",{className:Xc==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Nm("gallery"),children:"Gallery"})]})]})]})]})}),J&&ot(!0),N&&y1(),oe&&g.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),cq&&g.jsxs("div",{className:"victory-overlay",children:[g.jsx("div",{className:"balloons-container"}),g.jsx("div",{className:"victory-modal",children:g.jsxs("div",{className:"victory-content",children:[g.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),g.jsx("div",{children:"Victory!"}),g.jsx("button",{onClick:_1,children:"New Game"})]})})]}),lq&&g.jsxs("div",{className:"defeat-overlay",children:[g.jsx("div",{className:"blood-overlay"}),g.jsx("div",{className:"victory-modal",children:g.jsxs("div",{className:"victory-content",children:[g.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),g.jsx("div",{children:"Defeat!"}),g.jsx("button",{onClick:_1,children:"Try Again"})]})})]})]})};function JL(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const e6=()=>{const[t,e]=O.useState("singleplayer"),n=()=>{window.location.href="/"};return g.jsx("div",{className:"chess-page",children:g.jsx("div",{className:"chess-content",children:t==="singleplayer"?g.jsx(NDe,{onClose:n}):g.jsx(eq,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},TDe=Symbol(),t6=Object.getPrototypeOf,KT=new WeakMap,RDe=t=>t&&(KT.has(t)?KT.get(t):t6(t)===Object.prototype||t6(t)===Array.prototype),PDe=t=>RDe(t)&&t[TDe]||null,n6=(t,e=!0)=>{KT.set(t,e)},EE={},hk=t=>typeof t=="object"&&t!==null,ODe=t=>hk(t)&&!U0.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),tq=(t,e)=>{const n=YT.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return n6(r,!0),YT.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(U0.has(i))n6(i,!1);else if(Tu.has(i)){const[c,l]=Tu.get(i);a.value=tq(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},kDe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(r6(l,o)||Uw.has(o)&&r6(l,Uw.get(o))))return!0;n(i),hk(o)&&(o=PDe(o)||o);const u=!Tu.has(o)&&$De(o)?Nn(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Tu=new WeakMap,U0=new WeakSet,YT=new WeakMap,Ng=[1,1],Uw=new WeakMap;let r6=Object.is,DDe=(t,e)=>new Proxy(t,e),$De=ODe,MDe=tq,LDe=kDe;function Nn(t={}){if(!hk(t))throw new Error("object required");const e=Uw.get(t);if(e)return e;let n=Ng[0];const r=new Set,s=(w,y=++Ng[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=Ng[1];const o=(w=++Ng[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const _=[...y];_[1]=[w,..._[1]],s(_,b)},c=new Map,l=(w,y)=>{const b=!U0.has(y)&&Tu.get(y);if(b){if((EE?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const _=b[2](a(w));c.set(w,[b,_])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,_],E)=>{if((EE?"production":void 0)!=="production"&&_)throw new Error("remove already exists");const C=b[2](a(E));c.set(E,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,_],E)=>{_&&(_(),c.set(E,[b]))})});let h=!0;const f=LDe(()=>h,l,u,s),p=DDe(t,f);Uw.set(t,p);const m=[t,o,d];return Tu.set(p,m),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function si(t,e,n){const r=Tu.get(t);(EE?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function jw(t){const e=Tu.get(t);(EE?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return MDe(n,r())}function Vp(t){return U0.add(t),t}function UDe(){return{proxyStateMap:Tu,refSet:U0,snapCache:YT,versionHolder:Ng,proxyCache:Uw}}function Is(t,e,n,r){let s=t[e];return si(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:jDe,snapCache:BDe}=UDe(),sv=t=>jDe.has(t);function FDe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=BDe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return sv(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!sv(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!sv(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!sv(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Nn(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var s6={};const ne={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof s6<"u"?s6.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},CE={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ne.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},WDe={bigNumber(t){return t?new Na(t):new Na(0)},multiply(t,e){if(t===void 0||e===void 0)return new Na(0);const n=new Na(t),r=new Na(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},zDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],HDe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],qDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],VDe={getERC20Abi:t=>ne.USDT_CONTRACT_ADDRESSES.includes(t)?qDe:zDe,getSwapAbi:()=>HDe},Vl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},at={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function sI(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Je={setItem(t,e){Tg()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Tg())return localStorage.getItem(t)||void 0},removeItem(t){Tg()&&localStorage.removeItem(t)},clear(){Tg()&&localStorage.clear()}};function Tg(){return typeof window<"u"&&typeof localStorage<"u"}function SE(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const ws={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[ne.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},ke={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ke.getActiveNamespace(),e=ke.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Je.setItem(at.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Je.getItem(at.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Je.removeItem(at.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Je.setItem(at.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Je.setItem(at.ACTIVE_CAIP_NETWORK_ID,t),ke.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Je.getItem(at.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Je.removeItem(at.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=sI(t);Je.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ke.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Je.setItem(at.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Je.getItem(at.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=sI(t);Je.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Je.getItem(at.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=sI(t);return Je.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Je.setItem(at.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Je.getItem(at.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Je.removeItem(at.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Je.getItem(at.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Je.getItem(at.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Je.setItem(at.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Je.getItem(at.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Je.getItem(at.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Je.setItem(at.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ke.getConnectedNamespaces();e.includes(t)||(e.push(t),ke.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ke.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),ke.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Je.getItem(at.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Je.setItem(at.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Je.removeItem(at.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Je.getItem(at.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ke.getBalanceCache();Je.setItem(at.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=ke.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;ke.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ke.getBalanceCache();e[t.caipAddress]=t,Je.setItem(at.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Je.getItem(at.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ke.getBalanceCache();Je.setItem(at.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=ke.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),ke.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ke.getNativeBalanceCache();e[t.caipAddress]=t,Je.setItem(at.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Je.getItem(at.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=ke.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;ke.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ke.getEnsCache();e[t.address]=t,Je.setItem(at.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ke.getEnsCache();Je.setItem(at.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Je.getItem(at.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=ke.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;ke.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ke.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Je.setItem(at.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ke.getIdentityCache();Je.setItem(at.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Je.removeItem(at.PORTFOLIO_CACHE),Je.removeItem(at.NATIVE_BALANCE_CACHE),Je.removeItem(at.ENS_CACHE),Je.removeItem(at.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Je.setItem(at.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Je.getItem(at.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=ke.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ne.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Je.setItem(at.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Je.getItem(at.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=ke.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Je.setItem(at.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Je.getItem(at.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=ke.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Je.setItem(at.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=ke.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Je.setItem(at.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(ke.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},qe={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return qe.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ws.TEN_SEC_MS:!0},isAllowedRetry(t,e=ws.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(qe.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ws.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(qe.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!qe.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ke.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,qe.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ne.W3M_API_URL},getBlockchainApiUrl(){return ne.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ne.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ws.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ne.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function lg(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class j0{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await lg(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await lg(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lg(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lg(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lg(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const GDe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ws.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(qe.isTelegram()){if(qe.isIos())return t.filter(e=>e!=="google");if(qe.isMac())return t.filter(e=>e!=="x");if(qe.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Ge=Nn({features:ws.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ws.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ut={state:Ge,subscribeKey(t,e){return Is(Ge,t,e)},setOptions(t){Object.assign(Ge,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...Ge.remoteFeatures,...t};Ge.remoteFeatures=e,(n=Ge.remoteFeatures)!=null&&n.socials&&(Ge.remoteFeatures.socials=GDe.filterSocialsByPlatform(Ge.remoteFeatures.socials))},setFeatures(t){if(!t)return;Ge.features||(Ge.features=ws.DEFAULT_FEATURES);const e={...Ge.features,...t};Ge.features=e},setProjectId(t){Ge.projectId=t},setCustomRpcUrls(t){Ge.customRpcUrls=t},setAllWallets(t){Ge.allWallets=t},setIncludeWalletIds(t){Ge.includeWalletIds=t},setExcludeWalletIds(t){Ge.excludeWalletIds=t},setFeaturedWalletIds(t){Ge.featuredWalletIds=t},setTokens(t){Ge.tokens=t},setTermsConditionsUrl(t){Ge.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Ge.privacyPolicyUrl=t},setCustomWallets(t){Ge.customWallets=t},setIsSiweEnabled(t){Ge.isSiweEnabled=t},setIsUniversalProvider(t){Ge.isUniversalProvider=t},setSdkVersion(t){Ge.sdkVersion=t},setMetadata(t){Ge.metadata=t},setDisableAppend(t){Ge.disableAppend=t},setEIP6963Enabled(t){Ge.enableEIP6963=t},setDebug(t){Ge.debug=t},setEnableWalletConnect(t){Ge.enableWalletConnect=t},setEnableWalletGuide(t){Ge.enableWalletGuide=t},setEnableAuthLogger(t){Ge.enableAuthLogger=t},setEnableWallets(t){Ge.enableWallets=t},setPreferUniversalLinks(t){Ge.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ws.SIWX_DEFAULTS))t[e]??(t[e]=n);Ge.siwx=t},setConnectMethodsOrder(t){Ge.features={...Ge.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Ge.features={...Ge.features,walletFeaturesOrder:t}},setSocialsOrder(t){Ge.remoteFeatures={...Ge.remoteFeatures,socials:t}},setCollapseWallets(t){Ge.features={...Ge.features,collapseWallets:t}},setEnableEmbedded(t){Ge.enableEmbedded=t},setAllowUnsupportedChain(t){Ge.allowUnsupportedChain=t},setManualWCControl(t){Ge.manualWCControl=t},setEnableNetworkSwitch(t){Ge.enableNetworkSwitch=t},setEnableReconnect(t){Ge.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Ge.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Ge.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Ge.universalProviderConfigOverride},getSnapshot(){return jw(Ge)}},KDe=Object.freeze({enabled:!0,events:[]}),YDe=new j0({baseUrl:qe.getAnalyticsUrl(),clientId:null}),QDe=5,ZDe=60*1e3,hl=Nn({...KDe}),XDe={state:hl,subscribeKey(t,e){return Is(hl,t,e)},async sendError(t,e){if(!hl.enabled)return;const n=Date.now();if(hl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<ZDe}).length>=QDe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};hl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ut.state;await YDe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:qe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){hl.enabled=!0},disable(){hl.enabled=!1},clearEvents(){hl.events=[]}};class Gp extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Gp.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Gp):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function i6(t,e){const n=t instanceof Gp?t:new Gp(t instanceof Error?t.message:String(t),e,t);throw XDe.sendError(n,n.category),n}function go(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return i6(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return i6(a,e)}},n[r]=i}else n[r]=s}),n}var Kp={};const JDe="https://secure.walletconnect.org/sdk",e3e=(typeof process<"u"&&typeof Kp<"u"?Kp.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||JDe,t3e=(typeof process<"u"&&typeof Kp<"u"?Kp.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",n3e=(typeof process<"u"&&typeof Kp<"u"?Kp.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Oe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},zr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Sa={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},r3e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Sa.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Sa.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Sa.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Sa.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ne.CHAIN.SOLANA&&t===Sa.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Sa.COINBASE.url}/dapp?cb_url=${r}`)}},ui=Nn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),s3e={state:ui,subscribeNetworkImages(t){return si(ui.networkImages,()=>t(ui.networkImages))},subscribeKey(t,e){return Is(ui,t,e)},subscribe(t){return si(ui,()=>t(ui))},setWalletImage(t,e){ui.walletImages[t]=e},setNetworkImage(t,e){ui.networkImages[t]=e},setChainImage(t,e){ui.chainImages[t]=e},setConnectorImage(t,e){ui.connectorImages={...ui.connectorImages,[t]:e}},setTokenImage(t,e){ui.tokenImages[t]=e},setCurrencyImage(t,e){ui.currencyImages[t]=e}},$o=go(s3e),i3e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},iI=Nn({networkImagePromises:{}}),o3e={async fetchWalletImage(t){if(t)return await et._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(iI.networkImagePromises[t]||(iI.networkImagePromises[t]=et._fetchNetworkImage(t)),await iI.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return $o.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return $o.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return $o.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return $o.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return $o.state.connectorImages[t.imageId]},getChainImage(t){return $o.state.networkImages[i3e[t]]}},fl=Nn({message:"",variant:"info",open:!1}),a3e={state:fl,subscribeKey(t,e){return Is(fl,t,e)},open(t,e){const{debug:n}=ut.state,{shortMessage:r,longMessage:s}=t;n&&(fl.message=r,fl.variant=e,fl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){fl.open=!1,fl.message="",fl.variant="info"}},Ju=go(a3e),c3e=qe.getAnalyticsUrl(),l3e=new j0({baseUrl:c3e,clientId:null}),u3e=["MODAL_CREATED"],lc=Nn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Dn={state:lc,subscribe(t){return si(lc,()=>t(lc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ut.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=qt.state.address;if(u3e.includes(t.data.event)||typeof window>"u")return;await l3e.post({path:"/e",params:Dn.getSdkProperties(),body:{eventId:qe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),lc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ne.HTTP_STATUS_CODES.FORBIDDEN&&!lc.reportedErrors.FORBIDDEN&&(Ju.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Tg()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),lc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;lc.timestamp=Date.now(),lc.data=t,(e=ut.state.features)!=null&&e.analytics&&Dn._sendAnalyticsEvent(lc)}},d3e=qe.getApiUrl(),Ds=new j0({baseUrl:d3e,clientId:null}),h3e=40,o6=4,f3e=20,pt=Nn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),et={state:pt,subscribeKey(t,e){return Is(pt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ut.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ut.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ds.baseUrl}/getWalletImage/${t}`,n=await Ds.getBlob({path:e,params:et._getSdkProperties()});$o.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ds.baseUrl}/public/getAssetImage/${t}`,n=await Ds.getBlob({path:e,params:et._getSdkProperties()});$o.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ds.baseUrl}/public/getAssetImage/${t}`,n=await Ds.getBlob({path:e,params:et._getSdkProperties()});$o.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ds.baseUrl}/public/getCurrencyImage/${t}`,n=await Ds.getBlob({path:e,params:et._getSdkProperties()});$o.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ds.baseUrl}/public/getTokenImage/${t}`,n=await Ds.getBlob({path:e,params:et._getSdkProperties()});$o.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return qe.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Sa.COINBASE.id?!0:q.state.activeChain==="solana"&&(n.id===Sa.SOLFLARE.id||n.id===Sa.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ds.get({path:"/appkit/v1/config",params:et._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ds.get({path:"/projects/v1/origins",params:et._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ne.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ne.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=q.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!o3e.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>et._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ue.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>et._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>et._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>et._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];et._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Sa).map(o=>o.id));const r=await Ds.get({path:"/getWallets",params:{...et._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:et._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ut.state;if(t!=null&&t.length){const e={...et._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??o6,include:t},{data:n}=await et.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>et._fetchWalletImage(i))),pt.featured=r,pt.allFeatured=r}},async fetchRecommendedWallets(){try{pt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ut.state,r=[...e??[],...n??[]].filter(Boolean),s=q.getRequestedCaipNetworkIds().join(","),i={page:1,entries:o6,include:t,exclude:r,chains:s},{data:o,count:a}=await et.fetchWallets(i),c=ke.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>et._fetchWalletImage(d))),pt.recommended=o,pt.allRecommended=o,pt.count=a??0}catch{}finally{pt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ut.state,s=q.getRequestedCaipNetworkIds().join(","),i=[...pt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:h3e,include:e,exclude:i,chains:s},{data:a,count:c}=await et.fetchWallets(o),l=a.slice(0,f3e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>et._fetchWalletImage(u))),pt.wallets=qe.uniqueBy([...pt.wallets,...et._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),pt.count=c>pt.count?c:pt.count,pt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await et.fetchWallets(e);n&&n.forEach(r=>{pt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ut.state,s=q.getRequestedCaipNetworkIds().join(",");pt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await et.fetchWallets(i);Dn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>et._fetchWalletImage(c)),qe.wait(300)]),pt.search=et._filterOutExtensions(o)},initPromise(t,e){const n=pt.promises[t];return n||(pt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&et.initPromise("connectorImages",et.fetchConnectorImages),e&&et.initPromise("featuredWallets",et.fetchFeaturedWallets),n&&et.initPromise("recommendedWallets",et.fetchRecommendedWallets),r&&et.initPromise("networkImages",et.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ut.state.features)!=null&&t.analytics&&et.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ds.get({path:"/getAnalyticsConfig",params:et._getSdkProperties()});ut.setFeatures({analytics:t})}catch{ut.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){pt.featured=pt.allFeatured,pt.recommended=pt.allRecommended;return}const e=q.getRequestedCaipNetworkIds().join(",");pt.featured=pt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),pt.recommended=pt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),pt.filteredWallets=pt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){pt.filteredWallets=[]},setFilterByNamespace(t){if(!t){pt.featured=pt.allFeatured,pt.recommended=pt.allRecommended;return}const e=q.getRequestedCaipNetworkIds().join(",");pt.featured=pt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),pt.recommended=pt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),pt.filteredWallets=pt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},rn=Nn({view:"Connect",history:["Connect"],transactionStack:[]}),p3e={state:rn,subscribeKey(t,e){return Is(rn,t,e)},pushTransactionStack(t){rn.transactionStack.push(t)},popTransactionStack(t){const e=rn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),lt.goBack();break;case"cancel":s==null||s(),lt.goBack();break}},push(t,e){t!==rn.view&&(rn.view=t,rn.history.push(t),rn.data=e)},reset(t,e){rn.view=t,rn.history=[t],rn.data=e},replace(t,e){rn.history.at(-1)===t||(rn.view=t,rn.history[rn.history.length-1]=t,rn.data=e)},goBack(){var r;const t=q.state.activeCaipAddress,e=lt.state.view==="ConnectingFarcaster",n=!t&&e;if(rn.history.length>1){rn.history.pop();const[s]=rn.history.slice(-1);s&&(t&&s==="Connect"?rn.view="Account":rn.view=s)}else bn.close();(r=rn.data)!=null&&r.wallet&&(rn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){qt.setFarcasterUrl(void 0,q.state.activeChain);const a=Ue.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=jw(ut.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(rn.history.length>1){rn.history=rn.history.slice(0,t+1);const[e]=rn.history.slice(-1);e&&(rn.view=e)}},goBackOrCloseModal(){lt.state.history.length>1?lt.goBack():bn.close()}},lt=go(p3e),uc=Nn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),QT={state:uc,subscribe(t){return si(uc,()=>t(uc))},setThemeMode(t){uc.themeMode=t;try{const e=Ue.getAuthConnector();if(e){const n=QT.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:SE(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){uc.themeVariables={...uc.themeVariables,...t};try{const e=Ue.getAuthConnector();if(e){const n=QT.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:SE(uc.themeVariables,uc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return jw(uc)}},iv=go(QT),nq={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},jt=Nn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...nq},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),m3e={state:jt,subscribe(t){return si(jt,()=>{t(jt)})},subscribeKey(t,e){return Is(jt,t,e)},initialize(t){t.forEach(e=>{const n=ke.getConnectedConnectorId(e);n&&Ue.setConnectorId(n,e)})},setActiveConnector(t){t&&(jt.activeConnector=Vp(t))},setConnectors(t){t.filter(s=>!jt.allConnectors.some(i=>i.id===s.id&&Ue.getConnectorName(i.name)===Ue.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&jt.allConnectors.push(Vp(s))});const n=Ue.getEnabledNamespaces(),r=Ue.getEnabledConnectors(n);jt.connectors=Ue.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(jt.filterByNamespaceMap).forEach(e=>{jt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{jt.filterByNamespaceMap[e]=!0}),Ue.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){jt.filterByNamespaceMap[t]=e,Ue.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ue.getEnabledNamespaces(),e=Ue.getEnabledConnectors(t),n=Ue.areAllNamespacesEnabled();jt.connectors=Ue.mergeMultiChainConnectors(e),n?et.clearFilterByNamespaces():et.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(jt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return jt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(jt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ue.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ne.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ue.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ne.CONNECTOR_ID.AUTH){const s=t,i=jw(ut.state),o=iv.getSnapshot().themeMode,a=iv.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:SE(a,o)}),Ue.setConnectors([t])}else Ue.setConnectors([t])},getAuthConnector(t){var r;const e=t||q.state.activeChain,n=jt.connectors.find(s=>s.id===ne.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return jt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return jt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return jt.allConnectors.filter(r=>r.chain===q.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=jw(ut.state),r=iv.getSnapshot().themeMode,s=iv.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:SE(s,r)})},getConnectorsByNamespace(t){const e=jt.allConnectors.filter(n=>n.chain===t);return Ue.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return q.checkIfSmartAccountEnabled()&&Va(t)===zr.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Ue.getConnector(t.id,t.rdns);r3e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,q.state.activeChain),e?lt.push("ConnectingExternal",{connector:e}):lt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ue.getConnectorsByNamespace(t):Ue.mergeMultiChainConnectors(jt.allConnectors)},setFilterByNamespace(t){jt.filterByNamespace=t,jt.connectors=Ue.getConnectors(t),et.setFilterByNamespace(t)},setConnectorId(t,e){t&&(jt.activeConnectorIds={...jt.activeConnectorIds,[e]:t},ke.setConnectedConnectorId(e,t))},removeConnectorId(t){jt.activeConnectorIds={...jt.activeConnectorIds,[t]:void 0},ke.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return jt.activeConnectorIds[t]},isConnected(t){return t?!!jt.activeConnectorIds[t]:Object.values(jt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){jt.activeConnectorIds={...nq}}},Ue=go(m3e),g3e=1e3,ug={checkNamespaceConnectorId(t,e){return Ue.getConnectorId(t)===e},isSocialProvider(t){return ws.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ue.setActiveConnector(e),s==null||s(qe.isMobile()&&t),r){const l=bn.subscribeKey("open",u=>{u||(lt.state.view!==r&&lt.replace(r),l(),a(new Error("Modal closed")))})}const c=q.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&bn.close(),c(),o(Vl.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=q.subscribeKey("activeCaipAddress",s=>{s&&(bn.close(),r(),e(Vl.parseCaipAddress(s)))});Le.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=qt.state.socialWindow,i=qt.state.socialProvider,o=!1,a=null;const c=q.subscribeKey("activeCaipAddress",l=>{l&&(e&&bn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ne.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const m=Ue.getAuthConnector();if(m&&!o){s&&(s.close(),qt.setSocialWindow(void 0,q.state.activeChain),s=qt.state.socialWindow),o=!0;const w=f.data.resultUri;i&&Dn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=q.state.activeCaipNetwork;if(await m.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){ke.setConnectedSocialProvider(i),await Le.connectExternal({id:m.id,type:m.type,socialUri:w},m.chain);const b=q.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Vl.parseCaipAddress(b)),Dn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Dn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Dn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(qt.setSocialProvider(t,q.state.activeChain),i=qt.state.socialProvider,Dn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=bn.subscribeKey("open",m=>{!m&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Ue.getAuthConnector();if(p&&!qt.state.farcasterUrl)try{const{url:m}=await p.provider.getFarcasterUri();qt.setFarcasterUrl(m,q.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Ue.getAuthConnector();a=qe.returnOpenHref(`${ne.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){qt.setSocialWindow(a,q.state.activeChain),s=qt.state.socialWindow,a.location.href=p;const m=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(m))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=bn.subscribeKey("open",c=>{c||(lt.state.view!==e&&lt.replace(e),a(),i(new Error("Modal closed")))})}const o=q.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&bn.close(),o(),s(Vl.parseCaipAddress(a)))})})},async updateEmail(){const t=ke.getConnectedConnectorId(q.state.activeChain),e=Ue.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ne.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return lt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(bn.close(),clearInterval(i),o(),r({email:a}))},g3e),o=bn.subscribeKey("open",a=>{a||(lt.state.view!=="Connect"&&lt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return q.checkIfSmartAccountEnabled()&&Va(t)===zr.ACCOUNT_TYPES.EOA}};function rq(){var r,s;const t=((r=q.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=q.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ws.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Va(t){var n;return(n=q.getAccountData(t))==null?void 0:n.preferredAccountType}const sq={getConnectionStatus(t,e){const n=Ue.state.activeConnectorIds[e],r=Le.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=ut.state.remoteFeatures)!=null&&a.multiWallet),n=Ue.state.activeConnectorIds[t],r=Le.getConnections(t),i=(Le.state.recentConnections.get(t)??[]).filter(c=>Ue.getConnectorById(c.connectorId)),o=sq.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},ed=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),sr=Nn({...ed}),y3e={state:sr,subscribeKey(t,e){return Is(sr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=qe.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){sr.message=ed.message,sr.variant=ed.variant,sr.svg=ed.svg,sr.open=ed.open,sr.autoClose=ed.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ed.autoClose}){sr.open?(sr.open=!1,setTimeout(()=>{sr.message=t,sr.variant=n,sr.svg=e,sr.open=!0,sr.autoClose=r},150)):(sr.message=t,sr.variant=n,sr.svg=e,sr.open=!0,sr.autoClose=r)}},Gl=y3e,gn=Nn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),w3e={state:gn,subscribe(t){return si(gn,()=>t(gn))},setLastNetworkInView(t){gn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");gn.loading=!0;try{const r=await st.fetchTransactions({account:t,cursor:gn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Rg.filterSpamTransactions(r.data),i=Rg.filterByConnectedChain(s),o=[...gn.transactions,...i];gn.loading=!1,e==="coinbase"?gn.coinbaseTransactions=Rg.groupTransactionsByYearAndMonth(gn.coinbaseTransactions,r.data):(gn.transactions=o,gn.transactionsByYear=Rg.groupTransactionsByYearAndMonth(gn.transactionsByYear,i)),gn.empty=o.length===0,gn.next=r.next?r.next:void 0}catch{const s=q.state.activeChain;Dn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ut.state.projectId,cursor:gn.next,isSmartAccount:Va(s)===zr.ACCOUNT_TYPES.SMART_ACCOUNT}}),Gl.showError("Failed to fetch transactions"),gn.loading=!1,gn.empty=!0,gn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){gn.next=void 0},resetTransactions(){gn.transactions=[],gn.transactionsByYear={},gn.lastNetworkInView=void 0,gn.loading=!1,gn.empty=!1,gn.next=void 0}},Rg=go(w3e,"API_ERROR"),Pt=Nn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let qu;const b3e={state:Pt,subscribe(t){return si(Pt,()=>t(Pt))},subscribeKey(t,e){return Is(Pt,t,e)},_getClient(){return Pt._client},setClient(t){Pt._client=Vp(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Le.syncStorageConnections(e)},syncStorageConnections(t){const e=ke.getConnections(),n=t??Array.from(q.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Pt.recentConnections);i.set(r,s),Pt.recentConnections=i}},getConnections(t){return t?Pt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Le.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(qe.isTelegram()||qe.isSafari()&&qe.isIos()){if(qu){await qu,qu=void 0;return}if(!qe.isPairingExpired(Pt==null?void 0:Pt.wcPairingExpiry)){const s=Pt.wcUri;Pt.wcUri=s;return}qu=(e=(t=Le._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Le.state.status="connecting",await qu,qu=void 0,Pt.wcPairingExpiry=void 0,Le.state.status="connected"}else await((r=(n=Le._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Le._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&q.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Le._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||q.state.activeChain;e&&Ue.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;bn.setLoading(!0,q.state.activeChain);const n=Ue.getAuthConnector();n&&(qt.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),ke.setPreferredAccountTypes(Object.entries(q.state.chains).reduce((s,[i,o])=>{const a=i,c=Va(a);return c!==void 0&&(s[a]=c),s},{})),await Le.reconnectExternal(n),bn.setLoading(!1,q.state.activeChain),Dn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Le._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Le._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Le._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Le._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Le._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Le._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Le._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Le._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Le._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Le._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Le._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Le._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Pt.wcUri=void 0,Pt.wcPairingExpiry=void 0,Pt.wcLinking=void 0,Pt.recentWallet=void 0,Pt.status="disconnected",Rg.resetTransactions(),ke.deleteWalletConnectDeepLink()},resetUri(){Pt.wcUri=void 0,Pt.wcPairingExpiry=void 0,qu=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Le.state;t&&ke.setWalletConnectDeepLink(t),e&&ke.setAppKitRecent(e),Dn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=lt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Pt.wcBasic=t},setUri(t){Pt.wcUri=t,Pt.wcPairingExpiry=qe.getPairingExpiry()},setWcLinking(t){Pt.wcLinking=t},setWcError(t){Pt.wcError=t,Pt.buffering=!1},setRecentWallet(t){Pt.recentWallet=t},setBuffering(t){Pt.buffering=t},setStatus(t){Pt.status=t},setIsSwitchingConnection(t){Pt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Le._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Gp("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Pt.connections);n.set(e,t),Pt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=qt.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&ug.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Le.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ue.getConnectorById(t.connectorId),s=t.connectorId===ne.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Le.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Le.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Ue.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ne.CONNECTOR_ID.AUTH,a=t.connectorId===ne.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&ug.isSocialProvider(i)){const{address:d}=await ug.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){bn.open({view:"ConnectingFarcaster"})},onConnect(){lt.replace("ProfileWallets")}});c=d}else{const{address:d}=await ug.connectEmail({closeModalOnConnect:r,onOpen(){bn.open({view:"EmailLogin"})},onConnect(){lt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await ug.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){bn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){lt.replace("ProfileWallets")}});c=d}else{const d=await Le.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Le.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=qt.getCaipAddress(n);if(o){const{address:c}=Vl.parseCaipAddress(o);i=c}const a=sq.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Le.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Le.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Le=go(b3e),df=Nn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Xf={state:df,subscribe(t){return si(df,()=>t(df))},subscribeOpen(t){return Is(df,"open",t)},set(t){Object.assign(df,{...df,...t})}},v3e={async getTokenList(){var r;const t=q.state.activeCaipNetwork,e=await st.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=q.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Le==null?void 0:Le.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await st.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await st.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Le.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await fk.getMyTokensWithBalance(t);return qt.setTokenBalance(e,q.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:rq(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Zt=Nn({tokenBalances:[],loading:!1}),_3e={state:Zt,subscribe(t){return si(Zt,()=>t(Zt))},subscribeKey(t,e){return Is(Zt,t,e)},setToken(t){t&&(Zt.token=Vp(t))},setTokenAmount(t){Zt.sendTokenAmount=t},setReceiverAddress(t){Zt.receiverAddress=t},setReceiverProfileImageUrl(t){Zt.receiverProfileImageUrl=t},setReceiverProfileName(t){Zt.receiverProfileName=t},setNetworkBalanceInUsd(t){Zt.networkBalanceInUSD=t},setLoading(t){Zt.loading=t},async sendToken(){var t;try{switch(Vt.setLoading(!0),(t=q.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Vt.sendEvmToken();return;case"solana":await Vt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Vt.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=q.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Va(t);if(!Vt.state.sendTokenAmount||!Vt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Vt.state.token)throw new Error("A token is required");(n=Vt.state.token)!=null&&n.address?(Dn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Vt.state.token.address,amount:Vt.state.sendTokenAmount,network:((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Vt.sendERC20Token({receiverAddress:Vt.state.receiverAddress,tokenAddress:Vt.state.token.address,sendTokenAmount:Vt.state.sendTokenAmount,decimals:Vt.state.token.quantity.decimals})):(Dn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Vt.state.token.symbol||"",amount:Vt.state.sendTokenAmount,network:((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Vt.sendNativeToken({receiverAddress:Vt.state.receiverAddress,sendTokenAmount:Vt.state.sendTokenAmount,decimals:Vt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Zt.loading=!0;const e=(i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=q.state.activeCaipAddress,s=r?qe.getPlainAddress(r):void 0;if(Zt.lastRetry&&!qe.isAllowedRetry(Zt.lastRetry,30*ws.ONE_SEC_MS))return Zt.loading=!1,[];try{if(s&&e&&n){const a=await fk.getMyTokensWithBalance();return Zt.tokenBalances=a,Zt.lastRetry=void 0,a}}catch(a){Zt.lastRetry=Date.now(),t==null||t(a),Gl.showError("Token Balance Unavailable")}finally{Zt.loading=!1}return[]},fetchNetworkBalance(){if(Zt.tokenBalances.length===0)return;const t=v3e.mapBalancesToSwapTokens(Zt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===rq());e&&(Zt.networkBalanceInUSD=e?WDe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;lt.pushTransactionStack({});const e=t.receiverAddress,n=qt.state.address,r=Le.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Le.sendTransaction({chainNamespace:ne.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Dn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Va("eip155")===zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Vt.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Le._getClient())==null||a.updateBalance("eip155"),Vt.resetSend()},async sendERC20Token(t){lt.pushTransactionStack({onSuccess(){lt.replace("Account")}});const e=Le.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(qt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=qe.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Le.writeContract({fromAddress:qt.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:VDe.getERC20Abi(n),chainNamespace:ne.CHAIN.EVM}),Vt.resetSend()}},async sendSolanaToken(){var t;if(!Vt.state.sendTokenAmount||!Vt.state.receiverAddress)throw new Error("An amount and receiver address are required");lt.pushTransactionStack({onSuccess(){lt.replace("Account")}}),await Le.sendTransaction({chainNamespace:"solana",to:Vt.state.receiverAddress,value:Vt.state.sendTokenAmount}),(t=Le._getClient())==null||t.updateBalance("solana"),Vt.resetSend()},resetSend(){Zt.token=void 0,Zt.sendTokenAmount=void 0,Zt.receiverAddress=void 0,Zt.receiverProfileImageUrl=void 0,Zt.receiverProfileName=void 0,Zt.loading=!1,Zt.tokenBalances=[]}},Vt=go(_3e),oI={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},ov={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ye=Nn({chains:FDe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),E3e={state:ye,subscribe(t){return si(ye,()=>{t(ye)})},subscribeKey(t,e){return Is(ye,t,e)},subscribeChainProp(t,e,n){let r;return si(ye.chains,()=>{var i;const s=n||ye.activeChain;if(s){const o=(i=ye.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=ke.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ut.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ye.noAdapters=!0),ye.noAdapters||(ye.activeChain=a==null?void 0:a.namespace,ye.activeCaipNetwork=i,q.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ye.activeChain&&Xf.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=ke.getPreferredAccountTypes()||{},f={...ut.state.defaultAccountTypes,...h};q.state.chains.set(u,{namespace:u,networkState:Nn({...ov,caipNetwork:d==null?void 0:d[0]}),accountState:Nn({...oI,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),q.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(ye.activeChain===t){const r=Array.from(ye.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&q.setActiveCaipNetwork(s)}}ye.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");ye.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ov,caipNetwork:r[0]},accountState:oI,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),q.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ye.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ye.chains.set(t.chainNamespace,{...e,caipNetworks:r}),q.setRequestedCaipNetworks(r,t.chainNamespace),Ue.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ye.chains.get(t);if(n){const o=((r=ye.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&q.setActiveCaipNetwork(n.caipNetworks[0]),ye.chains.set(t,{...n,caipNetworks:a}),q.setRequestedCaipNetworks(a||[],t),a.length===0&&Ue.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ye.chains.get(t);n&&(n.networkState={...n.networkState||ov,...e},ye.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ye.chains.get(t);if(r){const s={...r.accountState||oI,...e};ye.chains.set(t,{...r,accountState:s}),(ye.chains.size===1||ye.activeChain===t)&&(e.caipAddress&&(ye.activeCaipAddress=e.caipAddress),qt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ye.chains.get(t);if(n){const r={...n.networkState||ov,...e};ye.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){q.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;ye.activeChain=t;const e=t?ye.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ye.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ye.activeCaipNetwork=n,q.setChainNetworkData(t,{caipNetwork:n}),ke.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Xf.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ye.activeChain!==t.chainNamespace&&q.setIsSwitchingNamespace(!0);const e=ye.chains.get(t.chainNamespace);ye.activeChain=t.chainNamespace,ye.activeCaipNetwork=t,q.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ye.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ye.activeCaipAddress=void 0,q.setAccountProp("caipAddress",ye.activeCaipAddress,t.chainNamespace),e&&qt.replaceState(e.accountState),Vt.resetSend(),Xf.set({activeChain:ye.activeChain,selectedNetworkId:(i=ye.activeCaipNetwork)==null?void 0:i.caipNetworkId}),ke.setActiveCaipNetworkId(t.caipNetworkId),!q.checkIfSupportedNetwork(t.chainNamespace)&&ut.state.enableNetworkSwitch&&!ut.state.allowUnsupportedChain&&!Le.state.wcBasic&&q.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ye.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==q.state.activeChain,n=(s=q.getNetworkData(t))==null?void 0:s.caipNetwork,r=q.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await q.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=q.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=q.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=ye.activeCaipNetwork)==null?void 0:a.id)})),s=q.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&bn.close()}catch{lt.goBack()}Dn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ye.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=ye.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ye.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ye.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ye.activeChain;if(e&&(n=e),!n)return;const r=(s=ye.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ye.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ye.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return qe.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=q.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){q.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=q.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ue.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ye.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=q.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=ye.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:ye.activeCaipNetwork},getActiveCaipAddress(){return ye.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ye.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=q.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());q.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ye.activeCaipNetwork,r=q.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ye.activeChain)return!0;const e=q.getRequestedCaipNetworks(ye.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){q.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=CE.caipNetworkIdToNumber((r=ye.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ye.activeChain;if(!e||!t)return!1;const n=q.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){bn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ye.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ws.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){q.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=q.getAccountProp("preferredAccountType",e);ye.activeCaipAddress=void 0,q.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Ue.removeConnectorId(e)},setIsSwitchingNamespace(t){ye.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ye.chains.forEach(s=>{ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ye.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=q.state.chains.get(t))==null?void 0:e.accountState:qt.state},getNetworkData(t){var n;const e=t||ye.activeChain;if(e)return(n=q.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=q.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ue.state.filterByNamespace;return(t?[ye.chains.get(t)]:Array.from(ye.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?q.getRequestedCaipNetworks(t):q.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){ye.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return ye.lastConnectedSIWECaipNetwork}},q=go(E3e),C3e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},iq=qe.getBlockchainApiUrl(),$s=Nn({clientId:null,api:new j0({baseUrl:iq,clientId:null}),supportedChains:{http:[],ws:[]}}),st={state:$s,async get(t){const{st:e,sv:n}=st.getSdkProperties(),r=ut.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return $s.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ut.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{$s.supportedChains.http.length||await st.getSupportedNetworks()}catch{return!1}return $s.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await st.get({path:"v1/supported-chains"});return $s.supportedChains=t,t}catch{return $s.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await st.isNetworkSupported(e))return{avatar:"",name:""};const r=ke.getIdentityFromCacheForAddress(t);if(r)return r;const s=await st.get({path:`/v1/identity/${t}`,params:{sender:q.state.activeCaipAddress?qe.getPlainAddress(q.state.activeCaipAddress):void 0}});return ke.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await st.isNetworkSupported((a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?st.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await st.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?st.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await st.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await st.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?$s.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ut.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await st.isNetworkSupported((r=q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?st.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=st.getSdkProperties();if(!await st.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return st.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await st.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return $s.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ws.CONVERT_SLIPPAGE_TOLERANCE},projectId:ut.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=st.getSdkProperties();if(!await st.isNetworkSupported((o=q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return st.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=st.getSdkProperties();if(!await st.isNetworkSupported((l=q.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Gl.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ke.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await st.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return ke.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await st.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await st.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/profile/reverse/${t}`,params:{sender:qt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await st.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await st.isNetworkSupported((i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?$s.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await st.isNetworkSupported((a=q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await $s.api.post({path:"/v1/generators/onrampurl",params:{projectId:ut.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await st.isNetworkSupported((e=q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await st.get({path:"/v1/onramp/options"})}catch{return C3e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await st.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await $s.api.post({path:"/v1/onramp/quote",params:{projectId:ut.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await st.isNetworkSupported((n=q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?st.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await st.isNetworkSupported((s=q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?$s.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ut.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){$s.clientId=t,$s.api=new j0({baseUrl:iq,clientId:t})}},aI={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return _h(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},fk={async getMyTokensWithBalance(t){const e=qt.state.address,n=q.state.activeCaipNetwork,r=Ue.getConnectorId("eip155")===ne.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=ke.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===ne.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await st.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=aI.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Le.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Le.walletGetAssets({account:t,chainFilter:[s]});if(!aI.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>aI.createBalance(l,e.caipNetworkId));return ke.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},ha=Nn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),S3e={state:ha,replaceState(t){t&&Object.assign(ha,Vp(t))},subscribe(t){return q.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return q.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){q.setAccountProp("status",t,e)},getCaipAddress(t){return q.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?qe.getPlainAddress(t):void 0;e===q.state.activeChain&&(q.state.activeCaipAddress=t),q.setAccountProp("caipAddress",t,e),q.setAccountProp("address",n,e)},setBalance(t,e,n){q.setAccountProp("balance",t,n),q.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){q.setAccountProp("profileName",t,e)},setProfileImage(t,e){q.setAccountProp("profileImage",t,e)},setUser(t,e){q.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){q.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){q.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){q.setAccountProp("currentTab",t,q.state.activeChain)},setTokenBalance(t,e){t&&q.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){q.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=q.getAccountProp("addressLabels",n)||new Map;r.set(t,e),q.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=q.getAccountProp("addressLabels",e)||new Map;n.delete(t),q.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){q.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){q.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&q.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){q.setAccountProp("socialWindow",t?Vp(t):void 0,e)},setFarcasterUrl(t,e){q.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ha.balanceLoading=!0;const e=(i=q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=q.state.activeCaipAddress,s=r?qe.getPlainAddress(r):void 0;if(ha.lastRetry&&!qe.isAllowedRetry(ha.lastRetry,30*ws.ONE_SEC_MS))return ha.balanceLoading=!1,[];try{if(s&&e&&n){const a=await fk.getMyTokensWithBalance();return qt.setTokenBalance(a,n),ha.lastRetry=void 0,ha.balanceLoading=!1,a}}catch(a){ha.lastRetry=Date.now(),t==null||t(a),Gl.showError("Token Balance Unavailable")}finally{ha.balanceLoading=!1}return[]},resetAccount(t){q.resetAccount(t)}},qt=go(S3e),A3e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=q.state.activeCaipNetwork,r=lt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=qt.getCaipAddress(q.state.activeChain),o=t.chainNamespace!==q.state.activeChain,a=qt.getCaipAddress(t.chainNamespace),l=Ue.getConnectorId(q.state.activeChain)===ne.CONNECTOR_ID.AUTH,u=ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?lt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?lt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):lt.push("SwitchNetwork",{...r,network:t})}},Ms=Nn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),I3e={state:Ms,subscribe(t){return si(Ms,()=>t(Ms))},subscribeKey(t,e){return Is(Ms,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=q.state.activeChain,r=e&&e!==n,s=(i=q.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Le.state.wcBasic?et.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await et.prefetch(),Ue.setFilterByNamespace(t==null?void 0:t.namespace),bn.setLoading(!0,e),e&&r){const a=((o=q.getNetworkData(e))==null?void 0:o.caipNetwork)||q.getRequestedCaipNetworks(e)[0];a&&A3e.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=q.state.noAdapters;ut.state.manualWCControl||a&&!s?qe.isMobile()?lt.reset("AllWallets"):lt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?lt.reset(t.view,t.data):s?lt.reset("Account"):lt.reset("Connect")}Ms.open=!0,Xf.set({open:!0}),Dn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=ut.state.enableEmbedded,e=!!q.state.activeCaipAddress;Ms.open&&Dn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ms.open=!1,lt.reset("Connect"),bn.clearLoading(),t?e?lt.replace("Account"):lt.push("Connect"):Xf.set({open:!1}),Le.resetUri()},setLoading(t,e){e&&Ms.loadingNamespaceMap.set(e,t),Ms.loading=t,Xf.set({loading:t})},clearLoading(){Ms.loadingNamespaceMap.clear(),Ms.loading=!1},shake(){Ms.shake||(Ms.shake=!0,setTimeout(()=>{Ms.shake=!1},500))}},bn=go(I3e),a6=2147483648,x3e={convertEVMChainIdToCoinType(t){if(t>=a6)throw new Error("Invalid chainId");return(a6|t)>>>0}},Wi=Nn({suggestions:[],loading:!1}),N3e={state:Wi,subscribe(t){return si(Wi,()=>t(Wi))},subscribeKey(t,e){return Is(Wi,t,e)},async resolveName(t){var e,n;try{return await st.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await st.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Wi.loading=!0,Wi.suggestions=[];const e=await st.getEnsNameSuggestions(t);return Wi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Wi.suggestions}catch(e){const n=zv.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Wi.loading=!1}},async getNamesForAddress(t){try{if(!q.state.activeCaipNetwork)return[];const n=ke.getEnsFromCacheForAddress(t);if(n)return n;const r=await st.reverseLookupEnsName({address:t});return ke.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=zv.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=q.state.activeCaipNetwork,n=qt.state.address,r=Ue.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Wi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});lt.pushTransactionStack({onCancel(){lt.replace("RegisterAccountName")}});const i=await Le.signMessage(s);Wi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=x3e.convertEVMChainIdToCoinType(Number(o));await st.registerEnsName({coinType:a,address:n,signature:i,message:s}),qt.setProfileName(t,e.chainNamespace),lt.replace("RegisterAccountNameSuccess")}catch(s){const i=zv.parseEnsApiError(s,`Error registering name ${t}`);throw lt.replace("RegisterAccountName"),new Error(i)}finally{Wi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},zv=go(N3e);let Vu=null;const Cl={getSIWX(){return ut.state.siwx},async initializeIfEnabled(){var i;const t=ut.state.siwx,e=q.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(q.checkIfSupportedNetwork(n))try{if(Vu&&await Vu,(await t.getSessions(`${n}:${r}`,s)).length)return;await bn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Dn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Le._getClient())==null?void 0:i.disconnect().catch(console.error)),lt.reset("Connect"),Gl.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ut.state.siwx,e=qe.getPlainAddress(q.getActiveCaipAddress()),n=q.getActiveCaipNetwork(),r=Le._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ue.getConnectorId(n.chainNamespace)===ne.CONNECTOR_ID.AUTH&&lt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),q.setLastConnectedSIWECaipNetwork(n),bn.close(),Dn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!bn.state.open||lt.state.view==="ApproveTransaction")&&await bn.open({view:"SIWXSignMessage"}),Gl.showError("Error signing message"),Dn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=q.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,qe.getPlainAddress(q.getActiveCaipAddress())||""));s&&s.length>0?await q.switchActiveNetwork(r):await Le.disconnect()}else await Le.disconnect()}else bn.close();bn.close(),Dn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=q.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,qe.getPlainAddress(q.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=ut.state.siwx,e=qe.getPlainAddress(q.getActiveCaipAddress()),n=q.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=lt.state.view==="ApproveTransaction",r=lt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Cl.getSIWX();if(!i||!s.includes(ne.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=q.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Cl.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Vu)return Vu;const r=Cl.getSIWX();return r?(Vu=r.addSession({data:t,message:e,signature:n}).finally(()=>{Vu=null}),Vu):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Cl.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=q.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Gl.showLoading("Authenticating...",{autoClose:!1}),qt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Dn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Cl.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Dn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Cl.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Gl.hide()}}return!0},getSIWXEventProperties(){var e;const t=q.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Va(t)===zr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},fi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ne.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},wi={ConnectorExplorerIds:{[ne.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ne.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ne.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ne.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ne.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[fi.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[fi.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[fi.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[fi.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[fi.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[fi.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[fi.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[fi.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[fi.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[fi.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[fi.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ne.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ne.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ne.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ne.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ne.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ne.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ne.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ne.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ne.CONNECTOR_ID.COINBASE]:"Coinbase",[ne.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ne.CONNECTOR_ID.LEDGER]:"Ledger",[ne.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ne.CONNECTOR_ID.INJECTED]:"INJECTED",[ne.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ne.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ne.CONNECTOR_ID.AUTH]:"AUTH",[fi.CONNECTOR_TYPE_AUTH]:"AUTH"}},Gs={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${fi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=q.state.activeChain;return ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ue.getConnectorId(e)===ne.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},T3e=new AbortController,pl={EmbeddedWalletAbortController:T3e,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},R3e="rpc.walletconnect.org";function c6(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const cI=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Pg={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===R3e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ne.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ne.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return cI.includes(e)?c6(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,m,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((m=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:m[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:wi.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Pg.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(eo(a.url,a.config))}),cI.includes(t.caipNetworkId)&&r.push(eo(c6(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(eo(a))}),z_(r)},extendWagmiTransports(t,e,n){if(cI.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return z_([n,eo(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ne.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=ke.getActiveCaipNetworkId(),n=q.getAllRequestedCaipNetworks(),r=Array.from(((c=q.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},l6={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Lr={set(t,e){Aa.isClient&&localStorage.setItem(`${Oe.STORAGE_KEY}${t}`,e)},get(t){return Aa.isClient?localStorage.getItem(`${Oe.STORAGE_KEY}${t}`):null},delete(t,e){Aa.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Oe.STORAGE_KEY}${t}`))}},av=30*1e3,Aa={checkIfAllowedToTriggerEmail(){const t=Lr.get(Oe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<av){const n=Math.ceil((av-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Lr.get(Oe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<av)return Math.ceil((av-e)/1e3)}return 0},checkIfRequestExists(t){return zr.NOT_SAFE_RPC_METHODS.includes(t.method)||zr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(l6.transactionHash))||(t==null?void 0:t.match(l6.signedMessage)))?Oe.RPC_RESPONSE_TYPE_TX:Oe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return zr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Fn=v.object({message:v.string()});function _e(t){return v.literal(Oe[t])}const d1=v.object({serializedMessage:v.string().optional(),accountAddress:v.string(),chainId:v.string(),notBefore:v.string().optional(),domain:v.string(),uri:v.string(),version:v.string(),nonce:v.string(),statement:v.string().optional(),resources:v.array(v.string()).optional(),requestId:v.string().optional(),issuedAt:v.string().optional(),expirationTime:v.string().optional()});v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const P3e=v.object({chainId:v.string().or(v.number()),rpcUrl:v.optional(v.string())}),O3e=v.object({email:v.string().email()}),k3e=v.object({otp:v.string()}),D3e=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number())),siwxMessage:v.optional(d1),rpcUrl:v.optional(v.string())}),$3e=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string()),siwxMessage:v.optional(d1),rpcUrl:v.optional(v.string())}),M3e=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),L3e=v.object({email:v.string().email()}),U3e=v.object({otp:v.string()}),j3e=v.object({otp:v.string()}),B3e=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),F3e=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),W3e=v.object({type:v.string()}),z3e=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),H3e=v.object({url:v.string()}),q3e=v.object({userName:v.string()}),V3e=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([zr.ACCOUNT_TYPES.EOA,zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(d1)}),G3e=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),K3e=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([zr.ACCOUNT_TYPES.EOA,zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(d1)}),Y3e=v.object({uri:v.string()}),Q3e=v.object({isConnected:v.boolean()}),Z3e=v.object({chainId:v.string().or(v.number())}),X3e=v.object({chainId:v.string().or(v.number())}),J3e=v.object({newEmail:v.string().email()}),e$e=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const t$e=v.object({version:v.string().optional()}),n$e=v.object({type:v.string(),address:v.string()}),r$e=v.any(),s$e=v.object({method:v.literal("eth_accounts")}),i$e=v.object({method:v.literal("eth_blockNumber")}),o$e=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),a$e=v.object({method:v.literal("eth_chainId")}),c$e=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),l$e=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),u$e=v.object({method:v.literal("eth_gasPrice")}),d$e=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),h$e=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),f$e=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),p$e=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),m$e=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),g$e=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),y$e=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),w$e=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),b$e=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),v$e=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),_$e=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),E$e=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),C$e=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),S$e=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),A$e=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),I$e=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),x$e=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),N$e=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),T$e=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),R$e=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),P$e=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),O$e=v.object({method:v.literal("eth_newBlockFilter")}),k$e=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),D$e=v.object({method:v.literal("eth_newPendingTransactionFilter")}),$$e=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),M$e=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),L$e=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),u6=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),U$e=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),j$e=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),B$e=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),F$e=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),W$e=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),z$e=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),H$e=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),q$e=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),V$e=v.object({method:v.literal("wallet_getCapabilities"),params:v.array(v.string().or(v.number()).optional()).optional()}),G$e=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),K$e=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),Y$e=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),d6=v.object({token:v.string()}),Ee=v.object({id:v.string().optional()}),dg={appEvent:Ee.extend({type:_e("APP_SWITCH_NETWORK"),payload:P3e}).or(Ee.extend({type:_e("APP_CONNECT_EMAIL"),payload:O3e})).or(Ee.extend({type:_e("APP_CONNECT_DEVICE")})).or(Ee.extend({type:_e("APP_CONNECT_OTP"),payload:k3e})).or(Ee.extend({type:_e("APP_CONNECT_SOCIAL"),payload:D3e})).or(Ee.extend({type:_e("APP_GET_FARCASTER_URI")})).or(Ee.extend({type:_e("APP_CONNECT_FARCASTER")})).or(Ee.extend({type:_e("APP_GET_USER"),payload:v.optional($3e)})).or(Ee.extend({type:_e("APP_GET_SOCIAL_REDIRECT_URI"),payload:M3e})).or(Ee.extend({type:_e("APP_SIGN_OUT")})).or(Ee.extend({type:_e("APP_IS_CONNECTED"),payload:v.optional(d6)})).or(Ee.extend({type:_e("APP_GET_CHAIN_ID")})).or(Ee.extend({type:_e("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ee.extend({type:_e("APP_INIT_SMART_ACCOUNT")})).or(Ee.extend({type:_e("APP_SET_PREFERRED_ACCOUNT"),payload:W3e})).or(Ee.extend({type:_e("APP_RPC_REQUEST"),payload:u6.or(Y$e).or(s$e).or(i$e).or(o$e).or(a$e).or(c$e).or(l$e).or(u$e).or(d$e).or(h$e).or(f$e).or(p$e).or(m$e).or(g$e).or(y$e).or(w$e).or(b$e).or(v$e).or(_$e).or(E$e).or(C$e).or(S$e).or(A$e).or(I$e).or(x$e).or(N$e).or(T$e).or(R$e).or(P$e).or(O$e).or(k$e).or(D$e).or($$e).or(M$e).or(L$e).or(u6).or(U$e).or(j$e).or(B$e).or(F$e).or(W$e).or(z$e).or(q$e).or(H$e).or(V$e).or(G$e).or(K$e).and(v.object({chainId:v.string().or(v.number()).optional(),chainNamespace:v.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:v.string().optional()}))})).or(Ee.extend({type:_e("APP_UPDATE_EMAIL"),payload:L3e})).or(Ee.extend({type:_e("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:U3e})).or(Ee.extend({type:_e("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:j3e})).or(Ee.extend({type:_e("APP_SYNC_THEME"),payload:B3e})).or(Ee.extend({type:_e("APP_SYNC_DAPP_DATA"),payload:F3e})).or(Ee.extend({type:_e("APP_RELOAD")})).or(Ee.extend({type:_e("APP_RPC_ABORT")})),frameEvent:Ee.extend({type:_e("FRAME_SWITCH_NETWORK_ERROR"),payload:Fn}).or(Ee.extend({type:_e("FRAME_SWITCH_NETWORK_SUCCESS"),payload:X3e})).or(Ee.extend({type:_e("FRAME_CONNECT_EMAIL_SUCCESS"),payload:z3e})).or(Ee.extend({type:_e("FRAME_CONNECT_EMAIL_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:H3e})).or(Ee.extend({type:_e("FRAME_GET_FARCASTER_URI_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:q3e})).or(Ee.extend({type:_e("FRAME_CONNECT_FARCASTER_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_CONNECT_OTP_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_CONNECT_OTP_SUCCESS")})).or(Ee.extend({type:_e("FRAME_CONNECT_DEVICE_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ee.extend({type:_e("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:V3e})).or(Ee.extend({type:_e("FRAME_CONNECT_SOCIAL_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_GET_USER_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_GET_USER_SUCCESS"),payload:K3e})).or(Ee.extend({type:_e("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Y3e})).or(Ee.extend({type:_e("FRAME_SIGN_OUT_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_SIGN_OUT_SUCCESS")})).or(Ee.extend({type:_e("FRAME_IS_CONNECTED_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_IS_CONNECTED_SUCCESS"),payload:Q3e})).or(Ee.extend({type:_e("FRAME_GET_CHAIN_ID_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Z3e})).or(Ee.extend({type:_e("FRAME_RPC_REQUEST_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_RPC_REQUEST_SUCCESS"),payload:r$e})).or(Ee.extend({type:_e("FRAME_SESSION_UPDATE"),payload:d6})).or(Ee.extend({type:_e("FRAME_UPDATE_EMAIL_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_UPDATE_EMAIL_SUCCESS"),payload:G3e})).or(Ee.extend({type:_e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ee.extend({type:_e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:J3e})).or(Ee.extend({type:_e("FRAME_SYNC_THEME_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_SYNC_THEME_SUCCESS")})).or(Ee.extend({type:_e("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ee.extend({type:_e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:e$e})).or(Ee.extend({type:_e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:n$e})).or(Ee.extend({type:_e("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_READY"),payload:t$e})).or(Ee.extend({type:_e("FRAME_RELOAD_ERROR"),payload:Fn})).or(Ee.extend({type:_e("FRAME_RELOAD_SUCCESS")}))};function lI(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function Q$e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=ne.BLOCKCHAIN_API_RPC_URL}){const i=new URL(e3e);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class Z$e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ne.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!lI(Oe.FRAME_EVENT_KEY,u))return;const d=dg.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Aa.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Aa.isClient&&window.addEventListener("message",({data:a})=>{if(!lI(Oe.FRAME_EVENT_KEY,a))return;const c=dg.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Aa.isClient&&window.addEventListener("message",({data:a})=>{if(!lI(Oe.APP_EVENT_KEY,a))return;const c=dg.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Aa.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");dg.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Aa.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");dg.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Aa.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Q$e({projectId:e,chainId:r,version:n3e,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class X$e{constructor(e){var i;const n=Nh({level:t3e}),{logger:r,chunkLoggerController:s}=UC({opts:n});this.logger=qr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class J$e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new X$e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new Z$e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Oe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Lr.get(Oe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Lr.get(Oe.EMAIL)}getUsername(){return Lr.get(Oe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Oe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Aa.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Oe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Oe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Oe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Oe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Oe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Oe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Oe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Oe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Oe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Oe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Oe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Oe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Oe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Oe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Oe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Oe.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Oe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Oe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Oe.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Oe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(zr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Oe.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Oe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Oe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Oe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Oe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Oe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Oe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Oe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:zr.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{zr.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Oe.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Oe.APP_SYNC_DAPP_DATA,Oe.APP_SYNC_THEME,Oe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Oe.APP_CONNECT_EMAIL,Oe.APP_CONNECT_DEVICE,Oe.APP_CONNECT_OTP,Oe.APP_CONNECT_SOCIAL,Oe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,m;const u=Math.random().toString(36).substring(7);(m=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||m.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,_,E;w.id===u&&((_=y==null?void 0:(b=y.logger).info)==null||_.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((E=w.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Lr.set(Oe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Lr.set(Oe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Lr.set(Oe.EMAIL,e),Lr.set(Oe.EMAIL_LOGIN_USED_KEY,"true"),Lr.delete(Oe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Lr.delete(Oe.EMAIL_LOGIN_USED_KEY),Lr.delete(Oe.EMAIL),Lr.delete(Oe.LAST_USED_CHAIN_KEY),Lr.delete(Oe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Lr.set(Oe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Lr.get(Oe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Lr.set(Oe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Vl.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Jf{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Jf.instance||(Jf.instance=new J$e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Jf.instance}}const e5e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},h6={filterOutDuplicatesByRDNS(t){const e=ut.state.enableEIP6963?Ue.state.connectors:[],n=ke.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&qe.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Ue.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=ke.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ue.state,{featuredWalletIds:n}=ut.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ut.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ue.state.connectors;if(n)return n;const{injected:s,announced:i}=Hv.getConnectorsByType(r,et.state.recommended,et.state.featured),o=s.filter(Hv.showConnector),a=i.filter(Hv.showConnector);return o.length||a.length?["wallet","email","social"]:e5e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&et.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&et.state.excludedWallets.some(r=>Gs.isLowerCaseMatch(r.name,t.name));return e||n}},Hv={getConnectorsByType(t,e,n){const{customWallets:r}=ut.state,s=ke.getRecentWallets(),i=h6.filterOutDuplicateWallets(e),o=h6.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&et.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&et.state.excludedWallets.some(i=>Gs.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!qe.isMobile()||qe.isMobile()&&!e&&!Le.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(q.state.chains.values()).some(n=>Ue.getConnectorId(n.namespace)===ne.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ut.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:ut.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),m=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...m].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!qe.isMobile())return{accounts:[],chainId:void 0};if(t.id===ne.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Oc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Oc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Oc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const qv={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([qv.getAddresses(t),qv.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:qv.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[wi.NetworkImageIds[e.id]]}]})}},hf={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function B0(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const f6=B0({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),p6=B0({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});B0({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});B0({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});B0({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const t5e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ud={getMethodsByChainNamespace(t){return t5e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case f6.caipNetworkId:u.chains.push(f6.deprecatedCaipNetworkId);break;case p6.caipNetworkId:u.chains.push(p6.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await zv.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Ud.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Ud.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>qe.isCaipAddress(d)).map(d=>Vl.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Vl.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class n5e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ne.CHAIN.EVM:await this.syncEVMConnections(e);break;case ne.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ne.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ne.CONNECTOR_ID.WALLET_CONNECT){const c=Ud.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await Hv.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==ne.CONNECTOR_ID.AUTH&&a.id!==ne.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ne.CONNECTOR_ID.WALLET_CONNECT){const c=Ud.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,m,w,y;if(a.id===ne.CONNECTOR_ID.WALLET_CONNECT){const b=Ud.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(_=>({address:_.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>qe.createAccount(ne.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:ne.CHAIN.BITCOIN,publicKey:((h=u[hf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[hf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[hf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:ne.CHAIN.BITCOIN,publicKey:((m=u[hf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.publicKey)??"",path:((w=u[hf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[hf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Gs.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Gs.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Gs.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Gs.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Gs.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class oq{constructor({provider:e,namespace:n}){this.id=ne.CONNECTOR_ID.WALLET_CONNECT,this.name=wi.ConnectorNamesMap[ne.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=wi.ConnectorImageIds[ne.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=q.getCaipNetworks.bind(q),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ut.state.universalProviderConfigOverride,s=Ud.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Cl.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:r5e})}}const r5e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],s5e=[ne.CONNECTOR_ID.AUTH,ne.CONNECTOR_ID.WALLET_CONNECT];class i5e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>q.getCaipNetworks(n),this.getConnectorId=n=>Ue.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new n5e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:ne.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ne.CONNECTOR_ID.AUTH,type:"AUTH",name:ne.CONNECTOR_NAMES.AUTH,provider:e,imageId:wi.ConnectorImageIds[ne.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Gs.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){qt.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Va(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof oq);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=qe.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=qe.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=qe.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Gs.isLowerCaseMatch(this.getConnectorId(ne.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=qe.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Gs.isLowerCaseMatch(this.getConnectorId(ne.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?qv.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Gs.isLowerCaseMatch(this.getConnectorId(ne.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(s5e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function o5e(t){let e=[],n,r;function s(a){return CE.parseEvmChainId(a)||1}function i(){var a;return n||(n=Jf.getInstance({projectId:t.options.projectId,chainId:(a=q.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Ju.open(pl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Ju.open(pl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Ju.open(pl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:pl.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>q.getActiveCaipNetwork(c)})),n}async function o(a={}){var m;const c=i();let l=a.chainId;if(a.isReconnecting){const w=CE.parseEvmChainId(c.getLastUsedChainId()||""),y=(m=t.chains)==null?void 0:m[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=Va("eip155"),{address:d,chainId:h,accounts:f}=await Cl.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:ne.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ne.CONNECTOR_ID.AUTH,name:ne.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ne.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Jf.getInstance({projectId:t.options.projectId,chainId:(c=q.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:pl.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Ju.open(pl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Ju.open(pl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Ju.open(pl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>q.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=q.state.activeChain===ne.CHAIN.EVM;if(ne.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ue.getConnectorId(h)===ne.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Ba(new Error("chain not found on connector."));const d=await this.getProvider(),h=Va("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Ba(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Ac)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}pk.type="walletConnect";function pk(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:pk.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const m=q.getCaipNetworks(),w=await this.getProvider();if(!w)throw new El;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=ut.state.universalProviderConfigOverride;if(!w.session||y){const S=Ud.createNamespaces(m,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(m.map(k=>Number(k.id)))}const _=await this.getAccounts(),E=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=C==null?void 0:C.some(S=>Number(S.split(":")[1])===E);let A=1;I?A=E:C!=null&&C[0]&&(A=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const x=b==null?void 0:b.defaultChain;return w.setDefaultChain(x??`eip155:${A}`),{accounts:_,chainId:A}}catch(m){throw/(user rejected|connection request reset)/i.test(m==null?void 0:m.message)?new or(m):m}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[ne.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(_=>_.split(":")[2]))??[],p=new Set;return f.filter(_=>{const E=_==null?void 0:_.toLowerCase();return p.has(E)?!1:(p.add(E),!0)})},async getProvider({chainId:d}={}){var p,m;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=ke.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=ke.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(_=>_.id===w);b&&b.chainNamespace===ne.CHAIN.EVM&&await((m=this.switchChain)==null?void 0:m.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var m,w,y,b;const d=(m=e.getCaipNetwork(ne.CHAIN.EVM))==null?void 0:m.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[ne.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=q.getCaipNetworks().find(_=>_.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var m,w,y,b;const f=await this.getProvider();if(!f)throw new El;const p=q.getCaipNetworks().find(_=>_.id===h);if(!p)throw new Ba(new Mw);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:De(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const _=await this.getRequestedChainsIds();return this.setRequestedChainsIds([..._,h]),{...p,id:p.id}}catch(_){const E=_;if(/(?:user rejected)/iu.test(E.message))throw new or(E);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(m=p.blockExplorers)!=null&&m.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],A={blockExplorerUrls:C,chainId:De(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[A]});const x=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...x,h]),{...p,id:p.id}}catch(C){throw new or(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Ac(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(q.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,m;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(m=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ne.CHAIN.EVM])==null?void 0:m.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const hg=Nn({pendingTransactions:0}),m6={state:hg,subscribeKey(t,e){return Is(hg,t,e)},increase(t){hg[t]+=1},decrease(t){hg[t]-=1},reset(t){hg[t]=0}};function a5e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function c5e(t){if(qe.isSafeApp()){const{safe:e}=await ts(async()=>{const{safe:n}=await import("./index-OroDK4QQ.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function l5e(t){try{const{coinbaseWallet:e}=await ts(async()=>{const{coinbaseWallet:n}=await import("./index-OroDK4QQ.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const u5e={enable:!1,pollingInterval:3e4};class d5e extends i5e{constructor(e){const n=Pg.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ne.CHAIN.EVM,this.adapterType=ne.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...u5e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ne.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>qe.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Zf(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>qe.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Zf(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ne.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Pg.getCaipNetworkId(s);i?n[s.id]=Pg.extendWagmiTransports(s,e.projectId,i):n[s.id]=Pg.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=$H({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=yke(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),m6.increase("pendingTransactions")}});const e=m6.subscribeKey("pendingTransactions",n=>{var r;n>=ne.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){NH(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),TH(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===ne.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:ke.getConnectedSocialProvider(),username:ke.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await l5e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await c5e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(pk(e,n)),e.enableEIP6963!==!1&&r.push(c1({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(o5e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:wi.ConnectorNamesMap[r.id]??r.name,imageId:wi.ConnectorImageIds[r.id],type:wi.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===ne.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await pke(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Zf(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await hke(this.wagmiConfig,s);const i=await fke(this.wagmiConfig,s);return await PH(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(CE.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await OH(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await oke(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return yde(e.value,e.decimals)}formatUnits(e){return _h(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===ne.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===ne.CONNECTOR_ID.AUTH||e.id===ne.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:wi.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:wi.ConnectorNamesMap[e.id]??e.name,imageId:wi.ConnectorImageIds[e.id],type:wi.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ne.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){RH(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=To(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(qe.isSafeApp()&&n===ne.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Bv(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Bv(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await PT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,m,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===ne.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((m=this.wagmiConfig.storage)==null?void 0:m.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,_)=>Gs.isLowerCaseMatch(b,r)?-1:Gs.isLowerCaseMatch(_,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await Bv(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await RT(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=ke.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await xH(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});ke.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=To(this.wagmiConfig).find(i=>Gs.isLowerCaseMatch(i.connector.id,e.id));return await NT(this.wagmiConfig,{connector:n}),ut.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=To(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await NT(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await PT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=To(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=a5e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=To(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=To(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=To(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:ne.CONNECTOR_ID.AUTH,type:"AUTH",name:ne.CONNECTOR_NAMES.AUTH,provider:e,imageId:wi.ConnectorImageIds[ne.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=To(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(q.state.activeChain==="eip155")return;RT(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new oq({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const aq="7c65f27254d6ddd24cf7eedf2685c4fb",h5e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},f5e=new d5e({projectId:aq,networks:[fE,hE,pE,cH,mE,vE,_E],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}});HPe({projectId:aq,metadata:h5e,adapters:[f5e],networks:[fE,hE,pE,cH,mE,vE,_E],features:{analytics:!0}});const p5e=new m2e,m5e=typeof window<"u"&&window.location.hostname.startsWith("chess."),g5e=()=>pDe("(max-width: 768px)")?g.jsx(fDe,{}):g.jsx(JOe,{});TI.createRoot(document.getElementById("root")).render(g.jsx(Ci.StrictMode,{children:g.jsx(jke,{config:mDe,children:g.jsx(L2e,{client:p5e,children:g.jsx(ZOe,{children:g.jsx(KOe,{children:m5e?g.jsx(Uv,{path:"/*",element:g.jsx(e6,{})}):g.jsxs(g.Fragment,{children:[g.jsx(Uv,{path:"/",element:g.jsx(g5e,{})}),g.jsx(Uv,{path:"/chess",element:g.jsx(e6,{})})]})})})})})}));export{LMe as $,Re as A,Qe as B,Ce as C,Fe as D,ey as E,xN as F,_g as G,Do as H,kie as I,sn as J,BMe as K,CT as L,Ir as M,Tie as N,ae as O,rl as P,Dv as Q,_t as R,Lo as S,Ws as T,sfe as U,ry as V,Wr as W,$Me as X,Ar as Y,hh as Z,va as _,Mv as a,tH as a0,ST as a1,Hp as a2,ts as a3,zMe as a4,Ac as a5,Ba as a6,Mw as a7,De as a8,or as a9,x6 as aA,N5e as aB,Vy as aC,ule as aD,Nke as aE,fo as aF,ho as aG,$9 as aH,ode as aI,El as aa,b9 as ab,c1 as ac,re as ad,tO as ae,fr as af,Ece as ag,AC as ah,EO as ai,Tue as aj,m0 as ak,co as al,Du as am,Yg as an,ja as ao,xEe as ap,SMe as aq,C5 as ar,kW as as,yEe as at,NEe as au,AMe as av,CMe as aw,YC as ax,xMe as ay,IMe as az,an as b,Se as c,je as d,L as e,Pn as f,Sc as g,jMe as h,Oc as i,vi as j,Ze as k,zs as l,d_e as m,Ta as n,mPe as o,Pe as p,Ea as q,UMe as r,Ht as s,DB as t,xn as u,o$ as v,ki as w,DMe as x,as as y,is as z};
